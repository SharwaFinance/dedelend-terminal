{"version":3,"sources":["img sync /^/icon/-.*/.svg$","img/icon-edit.svg","views/gmx-test/img/ddl/ic_eth_40.svg","views/gmx-test/img/ddl sync /^/ic_.*_40/.svg$","views/options/img/ddl/ic_eth_40.svg","img/icon-wallet.svg","img/icon-link.svg","views/gmx-test/img/DROP_DOWN.svg","views/gmx-test/img/ddl/icon_dollar.svg","views/gmx-test/img/ddl/icon_dollar_active.svg","views/gmx-test/img/ddl/icon_market.svg","views/gmx-test/img/ddl/icon_market_active.svg","views/gmx-test/img/ddl/icon_trigger.svg","views/gmx-test/img/ddl/icon_trigger_active.svg","views/gmx-test/img/ddl/icon_withdraw.svg","views/gmx-test/img/ddl/icon_withdraw_active.svg","views/gmx-test/img/ddl/long.svg","views/gmx-test/img/ddl/long_active.svg","views/gmx-test/img/ddl/short.svg","views/gmx-test/img/ddl/short_active.svg","views/gmx-test/img/gmx-logo-with-name.svg","views/gmx-test/img/position-share-bg.png","views/gmx-test/img/swap.svg","img/icon-settings.svg","img/icon-BTC.svg","img/icon-ETH.svg","img/icon-btn-up.svg","img/icon-call-active.svg","img/icon-call.svg","img/icon-down-small.svg","img/icon-market.svg","img/icon-put-active.svg","img/icon-put.svg","img/icon-usdc.svg","views/gmx-test/img/ddl/ic_btc_40.svg","views/gmx-test/img/ddl/ic_dai_40.svg","views/gmx-test/img/ddl/ic_frax_40.svg","views/gmx-test/img/ddl/ic_link_40.svg","views/gmx-test/img/ddl/ic_uni_40.svg","views/gmx-test/img/ddl/ic_usdc_40.svg","views/gmx-test/img/ddl/ic_usdt_40.svg","views/gmx-test/img/ddl/ic_weth_40.svg","views/gmx-test/img/ic_arbitrum_24.svg","views/gmx-test/img/ic_avalanche_24.svg","views/gmx-test/img/ic_avax_24.svg","views/gmx-test/img/ic_btc.b_24.svg","views/gmx-test/img/ic_btc_24.svg","views/gmx-test/img/ic_busd_24.svg","views/gmx-test/img/ic_dai_24.svg","views/gmx-test/img/ic_eth_24.svg","views/gmx-test/img/ic_frax_24.svg","views/gmx-test/img/ic_glp_24.svg","views/gmx-test/img/ic_gmx_24.svg","views/gmx-test/img/ic_link_24.svg","views/gmx-test/img/ic_mim_24.svg","views/gmx-test/img/ic_settings_24.svg","views/gmx-test/img/ic_tether_24.svg","views/gmx-test/img/ic_uni_24.svg","views/gmx-test/img/ic_usdc.e_24.svg","views/gmx-test/img/ic_usdc_24.svg","views/gmx-test/img/ic_usdt_24.svg","views/gmx-test/img/ic_wallet_24.svg","views/gmx-test/img/ic_wavax_24.svg","views/gmx-test/img/ic_weth_24.svg","img/icon-GMX.svg","img/icon-GNS.svg","img/icon-Hegic_sm.svg","img/icon-Lyra_sm.svg","img/icon-down-small-white.svg","views/options/img/ddl/ic_btc_40.svg","views/options/img/ddl/ic_dai_40.svg","views/options/img/ddl/ic_frax_40.svg","views/options/img/ddl/ic_link_40.svg","views/options/img/ddl/ic_uni_40.svg","views/options/img/ddl/ic_usdc_40.svg","views/options/img/ddl/ic_usdt_40.svg","views/options/img/ddl/ic_weth_40.svg","views/options/img/ddl sync /^/ic_.*_40/.svg$","views/gmx-test/img sync /^/.*$","views/gmx-test/img/Anyswap.png","views/gmx-test/img/Anyswap.svg","views/gmx-test/img/Artwork.svg","views/gmx-test/img/Artwork_gmx.svg","views/gmx-test/img/Banxa.png","views/gmx-test/img/Hop.png","views/gmx-test/img/Hop.svg","views/gmx-test/img/Hop_dark.png","views/gmx-test/img/Hop_dark.svg","views/gmx-test/img/Synapse.png","views/gmx-test/img/Synapse.svg","views/gmx-test/img/binance.png","views/gmx-test/img/bscscan.png","views/gmx-test/img/btn_big_arbitrum.png","views/gmx-test/img/btn_big_avalanche.png","views/gmx-test/img/btn_big_bsc.png","views/gmx-test/img/btn_big_purchasegmx.png","views/gmx-test/img/btn_big_purchasegmx.svg","views/gmx-test/img/buy_gmx.svg","views/gmx-test/img/buy_gmx_bond.svg","views/gmx-test/img/buy_transfer_eth.svg","views/gmx-test/img/coinbaseWallet.png","views/gmx-test/img/coingecko.png","views/gmx-test/img/cross.svg","views/gmx-test/img/ddl/chevron-down.svg","views/gmx-test/img/ddl/chevron-down_sm.svg","views/gmx-test/img/ddl/ic_btc_40.png","views/gmx-test/img/ddl/ic_dai_40.png","views/gmx-test/img/ddl/ic_eth_40.png","views/gmx-test/img/ddl/ic_frax_40.png","views/gmx-test/img/ddl/ic_link_40.png","views/gmx-test/img/ddl/ic_uni_40.png","views/gmx-test/img/ddl/ic_usdc_40.png","views/gmx-test/img/ddl/ic_usdt_40.png","views/gmx-test/img/ddl/ic_weth_40.png","views/gmx-test/img/ddl/icon_arrow.svg","views/gmx-test/img/ddl/icon_check.svg","views/gmx-test/img/ddl/icon_close.svg","views/gmx-test/img/ddl/icon_close_sm.svg","views/gmx-test/img/ddl/icon_close_toast.svg","views/gmx-test/img/ddl/lock.svg","views/gmx-test/img/flag_en.svg","views/gmx-test/img/flag_es.svg","views/gmx-test/img/flag_fr.svg","views/gmx-test/img/flag_ja.svg","views/gmx-test/img/flag_ko.svg","views/gmx-test/img/flag_ru.svg","views/gmx-test/img/flag_zh.svg","views/gmx-test/img/glp_icon.svg","views/gmx-test/img/gmx-logo-final-white-small.png","views/gmx-test/img/gmx-logo-final-white.png","views/gmx-test/img/gmx-logo-final.png","views/gmx-test/img/gmx-logo-glow.png","views/gmx-test/img/gmx_logo.svg","views/gmx-test/img/graphite-01.png","views/gmx-test/img/ic-communityproject.svg","views/gmx-test/img/ic_arbitrum_16.svg","views/gmx-test/img/ic_arbitrum_96.svg","views/gmx-test/img/ic_arbitrum_hover_16.svg","views/gmx-test/img/ic_arrowleft16.svg","views/gmx-test/img/ic_arrowright16.svg","views/gmx-test/img/ic_avalanche_16.svg","views/gmx-test/img/ic_avalanche_96.svg","views/gmx-test/img/ic_avax_30.svg","views/gmx-test/img/ic_avax_40.svg","views/gmx-test/img/ic_banxa.svg","views/gmx-test/img/ic_binance_logo.svg","views/gmx-test/img/ic_bsc.svg","views/gmx-test/img/ic_bsc_96.svg","views/gmx-test/img/ic_btc.b_40.svg","views/gmx-test/img/ic_btc_40.svg","views/gmx-test/img/ic_buy_glp.svg","views/gmx-test/img/ic_cash.png","views/gmx-test/img/ic_cash.svg","views/gmx-test/img/ic_checked.svg","views/gmx-test/img/ic_coingecko_16.svg","views/gmx-test/img/ic_coingecko_hover_16.svg","views/gmx-test/img/ic_convert_down.svg","views/gmx-test/img/ic_copy_16.svg","views/gmx-test/img/ic_cost.svg","views/gmx-test/img/ic_dai_40.svg","views/gmx-test/img/ic_discord.svg","views/gmx-test/img/ic_eth_40.svg","views/gmx-test/img/ic_frax_40.svg","views/gmx-test/img/ic_github.svg","views/gmx-test/img/ic_glp_40.svg","views/gmx-test/img/ic_glp_custom.svg","views/gmx-test/img/ic_gmx.svg","views/gmx-test/img/ic_gmx_30.svg","views/gmx-test/img/ic_gmx_40.svg","views/gmx-test/img/ic_gmx_64.svg","views/gmx-test/img/ic_gmx_arbitrum.svg","views/gmx-test/img/ic_gmx_avax.svg","views/gmx-test/img/ic_gmx_big.svg","views/gmx-test/img/ic_gmx_custom.svg","views/gmx-test/img/ic_gmx_footer.svg","views/gmx-test/img/ic_hop.svg","views/gmx-test/img/ic_info.svg","views/gmx-test/img/ic_language24.svg","views/gmx-test/img/ic_link_40.svg","views/gmx-test/img/ic_liquidity.svg","views/gmx-test/img/ic_medium.svg","views/gmx-test/img/ic_menu_dots.svg","views/gmx-test/img/ic_metamask_16.svg","views/gmx-test/img/ic_metamask_hover_16.svg","views/gmx-test/img/ic_mim_40.svg","views/gmx-test/img/ic_multiswap.svg","views/gmx-test/img/ic_new_link_16.svg","views/gmx-test/img/ic_olympus.svg","views/gmx-test/img/ic_olympus_arbitrum.svg","views/gmx-test/img/ic_selector_dropdowns.svg","views/gmx-test/img/ic_settings_16.svg","views/gmx-test/img/ic_sign in_16.svg","views/gmx-test/img/ic_sign_out_16.svg","views/gmx-test/img/ic_simpleswaps.svg","views/gmx-test/img/ic_stats.svg","views/gmx-test/img/ic_stats_big.svg","views/gmx-test/img/ic_synapse.svg","views/gmx-test/img/ic_telegram.svg","views/gmx-test/img/ic_tokens.svg","views/gmx-test/img/ic_totaluser.svg","views/gmx-test/img/ic_trading.svg","views/gmx-test/img/ic_transfer_avax.svg","views/gmx-test/img/ic_twitter.svg","views/gmx-test/img/ic_uni_40.svg","views/gmx-test/img/ic_usdc.e_40.svg","views/gmx-test/img/ic_usdc_40.svg","views/gmx-test/img/ic_usdt_40.svg","views/gmx-test/img/ic_wavax_40.svg","views/gmx-test/img/ic_weth_40.svg","views/gmx-test/img/lg_arbitrum.svg","views/gmx-test/img/logo_GMX.svg","views/gmx-test/img/logo_GMX_small.svg","views/gmx-test/img/long.svg","views/gmx-test/img/metamask-text.svg","views/gmx-test/img/metamask.png","views/gmx-test/img/page-not-found.svg","views/gmx-test/img/short.svg","views/gmx-test/img/trading.jpg","views/gmx-test/img/wallet-connect-text.svg","views/gmx-test/img/walletconnect-circle-blue.svg","views/gmx-test/img/wave-01.png","views/gmx-test/img/wave-02.png","views/gmx-test/img sync /^/ic_.*_24/.svg$","img/icon-GNS_v2.svg","img/icon-Hegic.svg","img/icon-Lyra.svg","img/icon-Premia.svg","img/icon-WBTC.svg","img/icon-dollar.svg","img/icon-down.svg","img/icon-hint.svg","img/icon-repay.svg","img/icon-sort.svg","img/icon-user.svg","views/options/img sync /^/.*$","views/options/img/Anyswap.png","views/options/img/Anyswap.svg","views/options/img/Artwork.svg","views/options/img/Artwork_gmx.svg","views/options/img/Banxa.png","views/options/img/DROP_DOWN.svg","views/options/img/Hop.png","views/options/img/Hop.svg","views/options/img/Hop_dark.png","views/options/img/Hop_dark.svg","views/options/img/Synapse.png","views/options/img/Synapse.svg","views/options/img/binance.png","views/options/img/bscscan.png","views/options/img/btn_big_arbitrum.png","views/options/img/btn_big_avalanche.png","views/options/img/btn_big_bsc.png","views/options/img/btn_big_purchasegmx.png","views/options/img/btn_big_purchasegmx.svg","views/options/img/buy_gmx.svg","views/options/img/buy_gmx_bond.svg","views/options/img/buy_transfer_eth.svg","views/options/img/coinbaseWallet.png","views/options/img/coingecko.png","views/options/img/cross.svg","views/options/img/ddl/chevron-down.svg","views/options/img/ddl/chevron-down_sm.svg","views/options/img/ddl/ic_btc_40.png","views/options/img/ddl/ic_dai_40.png","views/options/img/ddl/ic_eth_40.png","views/options/img/ddl/ic_frax_40.png","views/options/img/ddl/ic_link_40.png","views/options/img/ddl/ic_uni_40.png","views/options/img/ddl/ic_usdc_40.png","views/options/img/ddl/ic_usdt_40.png","views/options/img/ddl/ic_weth_40.png","views/options/img/ddl/icon_arrow.svg","views/options/img/ddl/icon_check.svg","views/options/img/ddl/icon_close.svg","views/options/img/ddl/icon_close_sm.svg","views/options/img/ddl/icon_close_toast.svg","views/options/img/ddl/icon_dollar.svg","views/options/img/ddl/icon_dollar_active.svg","views/options/img/ddl/icon_market.svg","views/options/img/ddl/icon_market_active.svg","views/options/img/ddl/icon_trigger.svg","views/options/img/ddl/icon_trigger_active.svg","views/options/img/ddl/icon_withdraw.svg","views/options/img/ddl/icon_withdraw_active.svg","views/options/img/ddl/lock.svg","views/options/img/ddl/long.svg","views/options/img/ddl/long_active.svg","views/options/img/ddl/short.svg","views/options/img/ddl/short_active.svg","views/options/img/flag_en.svg","views/options/img/flag_es.svg","views/options/img/flag_fr.svg","views/options/img/flag_ja.svg","views/options/img/flag_ko.svg","views/options/img/flag_ru.svg","views/options/img/flag_zh.svg","views/options/img/glp_icon.svg","views/options/img/gmx-logo-final-white-small.png","views/options/img/gmx-logo-final-white.png","views/options/img/gmx-logo-final.png","views/options/img/gmx-logo-glow.png","views/options/img/gmx-logo-with-name.svg","views/options/img/gmx_logo.svg","views/options/img/graphite-01.png","views/options/img/ic-communityproject.svg","views/options/img/ic_arbitrum_16.svg","views/options/img/ic_arbitrum_24.svg","views/options/img/ic_arbitrum_96.svg","views/options/img/ic_arbitrum_hover_16.svg","views/options/img/ic_arrowleft16.svg","views/options/img/ic_arrowright16.svg","views/options/img/ic_avalanche_16.svg","views/options/img/ic_avalanche_24.svg","views/options/img/ic_avalanche_96.svg","views/options/img/ic_avax_24.svg","views/options/img/ic_avax_30.svg","views/options/img/ic_avax_40.svg","views/options/img/ic_banxa.svg","views/options/img/ic_binance_logo.svg","views/options/img/ic_bsc.svg","views/options/img/ic_bsc_96.svg","views/options/img/ic_btc.b_24.svg","views/options/img/ic_btc.b_40.svg","views/options/img/ic_btc_24.svg","views/options/img/ic_btc_40.svg","views/options/img/ic_busd_24.svg","views/options/img/ic_buy_glp.svg","views/options/img/ic_cash.png","views/options/img/ic_cash.svg","views/options/img/ic_checked.svg","views/options/img/ic_coingecko_16.svg","views/options/img/ic_coingecko_hover_16.svg","views/options/img/ic_convert_down.svg","views/options/img/ic_copy_16.svg","views/options/img/ic_cost.svg","views/options/img/ic_dai_24.svg","views/options/img/ic_dai_40.svg","views/options/img/ic_discord.svg","views/options/img/ic_eth_24.svg","views/options/img/ic_eth_40.svg","views/options/img/ic_frax_24.svg","views/options/img/ic_frax_40.svg","views/options/img/ic_github.svg","views/options/img/ic_glp_24.svg","views/options/img/ic_glp_40.svg","views/options/img/ic_glp_custom.svg","views/options/img/ic_gmx.svg","views/options/img/ic_gmx_24.svg","views/options/img/ic_gmx_30.svg","views/options/img/ic_gmx_40.svg","views/options/img/ic_gmx_64.svg","views/options/img/ic_gmx_arbitrum.svg","views/options/img/ic_gmx_avax.svg","views/options/img/ic_gmx_big.svg","views/options/img/ic_gmx_custom.svg","views/options/img/ic_gmx_footer.svg","views/options/img/ic_hop.svg","views/options/img/ic_info.svg","views/options/img/ic_language24.svg","views/options/img/ic_link_24.svg","views/options/img/ic_link_40.svg","views/options/img/ic_liquidity.svg","views/options/img/ic_medium.svg","views/options/img/ic_menu_dots.svg","views/options/img/ic_metamask_16.svg","views/options/img/ic_metamask_hover_16.svg","views/options/img/ic_mim_24.svg","views/options/img/ic_mim_40.svg","views/options/img/ic_multiswap.svg","views/options/img/ic_new_link_16.svg","views/options/img/ic_olympus.svg","views/options/img/ic_olympus_arbitrum.svg","views/options/img/ic_selector_dropdowns.svg","views/options/img/ic_settings_16.svg","views/options/img/ic_settings_24.svg","views/options/img/ic_sign in_16.svg","views/options/img/ic_sign_out_16.svg","views/options/img/ic_simpleswaps.svg","views/options/img/ic_stats.svg","views/options/img/ic_stats_big.svg","views/options/img/ic_synapse.svg","views/options/img/ic_telegram.svg","views/options/img/ic_tether_24.svg","views/options/img/ic_tokens.svg","views/options/img/ic_totaluser.svg","views/options/img/ic_trading.svg","views/options/img/ic_transfer_avax.svg","views/options/img/ic_twitter.svg","views/options/img/ic_uni_24.svg","views/options/img/ic_uni_40.svg","views/options/img/ic_usdc.e_24.svg","views/options/img/ic_usdc.e_40.svg","views/options/img/ic_usdc_24.svg","views/options/img/ic_usdc_40.svg","views/options/img/ic_usdt_24.svg","views/options/img/ic_usdt_40.svg","views/options/img/ic_wallet_24.svg","views/options/img/ic_wavax_24.svg","views/options/img/ic_wavax_40.svg","views/options/img/ic_weth_24.svg","views/options/img/ic_weth_40.svg","views/options/img/lg_arbitrum.svg","views/options/img/logo_GMX.svg","views/options/img/logo_GMX_small.svg","views/options/img/long.svg","views/options/img/metamask-text.svg","views/options/img/metamask.png","views/options/img/page-not-found.svg","views/options/img/position-share-bg.png","views/options/img/short.svg","views/options/img/swap.svg","views/options/img/trading.jpg","views/options/img/wallet-connect-text.svg","views/options/img/walletconnect-circle-blue.svg","views/options/img/wave-01.png","views/options/img/wave-02.png","img sync /^/icon/-.*_sm/.svg$","components/UI/logo/Logo.jsx","components/UI/button/Button.jsx","hooks/useTogglePopup.js","components/Wallet.jsx","context/context.js","components/utils/wallet.js","components/utils/providers.js","views/gmx-test/config/Addresses.js","views/gmx-test/config/Tokens.js","views/gmx-test/lib/legacy.js","components/utils/notifications.js","components/utils/utils.js","components/utils/contracts.js","components/utils/sepThousands.js","components/utils/math.js","components/utils/stats.js","components/Tabs.jsx","Header.jsx","Footer.jsx","views/gmx-test/config/chains.js","views/gmx-test/domain/common.js","views/gmx-test/lib/contracts/fetcher.ts","views/gmx-test/lib/helperToast.ts","views/gmx-test/components/ToastifyDebug/ToastifyDebug.tsx","views/gmx-test/lib/contracts/transactionErrors.ts","views/gmx-test/lib/contracts/constants.js","views/gmx-test/lib/contracts/utils.ts","views/gmx-test/lib/contracts/callContract.tsx","views/gmx-test/domain/prices.js","views/gmx-test/domain/legacy.js","views/gmx-test/config/ui.js","views/gmx-test/components/Tooltip/Tooltip.js","views/gmx-test/components/Tab/Tab.js","views/gmx-test/lib/useLockBodyScroll.ts","views/gmx-test/components/Modal/Modal.js","views/gmx-test/components/Common/Portal.js","views/gmx-test/components/Tooltip/TooltipWithPortal.js","views/gmx-test/components/Exchange/TokenSelector.js","views/gmx-test/components/Exchange/ExchangeInfoRow.js","views/gmx-test/components/Checkbox/Checkbox.js","views/gmx-test/components/StatsTooltip/StatsTooltipRow.tsx","views/gmx-test/components/SlippageInput/SlippageInput.jsx","components/UI/input/NumberInput_v3.jsx","views/gmx-test/components/Exchange/ConfirmationBox.js","views/gmx-test/components/Referrals/referralsHelper.js","views/gmx-test/domain/referrals.js","views/gmx-test/components/Exchange/NoLiquidityErrorModal.tsx","components/UI/modal/Modal.jsx","components/utils/constants.js","components/UI/modal/ChooseMarketModal.jsx","views/gmx-test/lib/GNS_legacy.js","components/UI/modal/SLTPModal.jsx","components/UI/Selector/Selector.jsx","views/gmx-test/components/Exchange/SwapBox.js","views/gmx-test/components/Exchange/ChartTokenSelector.js","views/gmx-test/components/Exchange/ExchangeTVChart.js","views/gmx-test/components/Exchange/PositionSeller.js","views/gmx-test/components/Exchange/PositionEditor.js","views/gmx-test/components/Exchange/OrdersToa.js","views/gmx-test/components/Common/SpinningLoader.js","views/gmx-test/components/Exchange/PositionShare.js","views/gmx-test/lib/useLoadImage.js","views/gmx-test/components/Exchange/PositionsItem.jsx","views/gmx-test/components/Exchange/PositionsList.js","views/gmx-test/components/Exchange/OrderEditor.js","views/gmx-test/components/Exchange/OrderEditorGNS.jsx","views/gmx-test/components/Exchange/OrdersList.js","views/gmx-test/components/Exchange/TradeHistory.js","views/gmx-test/components/Exchange/ExchangeBanner.js","views/gmx-test/pages/Exchange/Exchange.js","views/gmx-test/config/events.js","views/gmx-test/components/EventToast/AnnouncementIcon.js","views/gmx-test/components/EventToast/EventToast.js","views/gmx-test/components/EventToast/useEventToast.js","views/gmx-test/components/EventToast/EventToastContainer.js","views/gmx-test/components/Common/SEO.js","views/gmx-test/components/ModalViews/RedirectModal.js","views/gmx-test/lib/i18n.js","views/gmx-test/App/App.js","views/gmx-test/lib/useRouteQuery.js","views/options/config/Addresses.js","views/options/config/Tokens.js","views/options/lib/legacyOptions.js","views/options/components/Tab/TabOptions.js","views/options/components/Exchange/SwapBoxOptions.js","views/options/components/Exchange/ChartTokenSelectorOptions.js","views/options/config/ui.js","views/options/components/Tooltip/Tooltip.js","views/options/components/Exchange/ExchangeTVChartOptions.js","views/options/components/Exchange/PositionsItemOptions.jsx","views/options/components/Exchange/ClosePositionModal.jsx","views/options/components/Exchange/PositionsListOptions.js","views/options/lib/contracts/fetcher.ts","components/UI/loader/Loader.jsx","views/options/components/Exchange/OptionsItem.jsx","components/UI/Filter/Filter.jsx","components/Currency.jsx","views/options/components/Exchange/BuyPositionModal.jsx","hooks/useDebounce.js","views/options/components/Exchange/OptionsList.jsx","views/options/pages/Exchange/ExchangeOptions.js","views/options/config/events.js","views/options/components/EventToast/AnnouncementIcon.js","views/options/components/EventToast/EventToast.js","views/options/components/EventToast/useEventToast.js","views/options/components/EventToast/EventToastContainer.js","views/options/lib/i18n.js","views/options/App/App.js","components/AppRouter.jsx","components/UI/warning/Warning.jsx","App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Logo","className","href","Button","children","disabled","clickHandler","isMain","props","classes","cx","btnActive","childProps","toString","useTogglePopup","_useState","useState","_useState2","_slicedToArray","isOpen","setIsOpen","closePopup","document","removeEventListener","openPopup","stopPropagation","addEventListener","Wallet","_ref","addr","address","setAddress","_useTogglePopup","openWallet","closeWallet","_jsxs","_jsx","onClick","src","icon_wallet","alt","slice","xmlns","width","height","viewBox","fill","clipPath","d","concat","rel","target","icon_link","GlobalStatsContext","createContext","UserStatsContext","ARBITRUM","requestAccount","setWalletAddress","window","ethereum","networkVersion","Number","alert","request","method","params","chainId","ethers","utils","hexlify","location","reload","console","log","chainName","nativeCurrency","symbol","decimals","rpcUrls","blockExplorerUrls","accounts","on","connectWallet","mmProvider","getDefaultProvider","providers","Web3Provider","undefined","signer","getSigner","CONTRACTS","Treasury","BUSD","GMT","Vault","Router","Reader","AmmFactory","AmmFactoryV2","OrderBook","OrderBookReader","GmxMigrator","USDG","NATIVE_TOKEN","XGMT","GMT_USDG_PAIR","XGMT_USDG_PAIR","GMT_USDG_FARM","XGMT_USDG_FARM","USDG_YIELD_TRACKER","XGMT_YIELD_TRACKER","GMT_USDG_FARM_TRACKER_XGMT","GMT_USDG_FARM_TRACKER_NATIVE","XGMT_USDG_FARM_TRACKER_XGMT","XGMT_USDG_FARM_TRACKER_NATIVE","AUTO","AUTO_USDG_PAIR","AUTO_USDG_FARM","AUTO_USDG_FARM_TRACKER_XGMT","AUTO_USDG_FARM_TRACKER_NATIVE","GMT_GMX_IOU","XGMT_GMX_IOU","GMT_USDG_GMX_IOU","XGMT_USDG_GMX_IOU","VaultReader","GlpManager","RewardRouter","RewardReader","GLP","GMX","ES_GMX","BN_GMX","ES_GMX_IOU","StakedGmxTracker","BonusGmxTracker","FeeGmxTracker","StakedGlpTracker","FeeGlpTracker","StakedGmxDistributor","StakedGlpDistributor","GmxVester","GlpVester","PositionRouter","PositionManager","ReferralStorage","ReferralReader","GlpRewardRouter","OrderExecutor","UniswapGmxEthPool","Multicall","TraderJoeGmxAvaxPool","getContract","name","market","TOKENS","coingeckoUrl","imageUrl","constants","AddressZero","isNative","isWrapped","baseSymbol","isUsdg","isStable","isShortable","isTempHidden","ADDITIONAL_TOKENS","CHAIN_IDS","TOKENS_MAP","TOKENS_BY_SYMBOL_MAP","j","length","tokens","i","token","WRAPPED_TOKENS_MAP","NATIVE_TOKENS_MAP","getWrappedToken","getNativeToken","getTokens","isValidToken","getToken","getTokenBySymbol","getWhitelistedTokens","filter","UI_VERSION","MAINNET","createRandom","AVALANCHE","TESTNET","ARBITRUM_TESTNET","DEFAULT_CHAIN_ID","CHAIN_ID","MIN_PROFIT_TIME","SELECTED_NETWORK_LOCAL_STORAGE_KEY","IS_NETWORK_DISABLED","CHAIN_NAMES_MAP","alchemyWhitelistedDomains","ARBITRUM_RPC_PROVIDERS","AVALANCHE_RPC_PROVIDERS","WALLET_CONNECT_LOCALSTORAGE_KEY","WALLET_LINK_LOCALSTORAGE_PREFIX","SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY","CURRENT_PROVIDER_LOCALSTORAGE_KEY","LANGUAGE_LOCALSTORAGE_KEY","getChainName","USDG_ADDRESS","BASIS_POINTS_DIVISOR","MAX_LEVERAGE","MAX_ALLOWED_LEVERAGE","MAX_PRICE_DEVIATION_BASIS_POINTS","USDG_DECIMALS","USD_DECIMALS","DEPOSIT_FEE","DUST_BNB","DUST_USD","expandDecimals","PRECISION","DEFAULT_MAX_USDG_AMOUNT","TAX_BASIS_POINTS","STABLE_TAX_BASIS_POINTS","SWAP_FEE_BASIS_POINTS","STABLE_SWAP_FEE_BASIS_POINTS","MARGIN_FEE_BASIS_POINTS","LIQUIDATION_FEE","THRESHOLD_REDEMPTION_VALUE","FUNDING_RATE_PRECISION","SWAP","INCREASE","DECREASE","LONG","SHORT","MARKET","LIMIT","STOP","LEVERAGE_ORDER_OPTIONS","SWAP_ORDER_OPTIONS","SWAP_OPTIONS","DEFAULT_SLIPPAGE_AMOUNT","SLIPPAGE_BPS_KEY","CLOSE_POSITION_RECEIVE_TOKEN_KEY","IS_PNL_IN_LEVERAGE_KEY","SHOW_PNL_AFTER_FEES_KEY","DISABLE_ORDER_VALIDATION_KEY","SHOULD_SHOW_POSITION_LINES_KEY","REFERRAL_CODE_KEY","REFERRAL_CODE_QUERY_PARAM","MAX_REFERRAL_CODE_LENGTH","TRIGGER_PREFIX_ABOVE","TRIGGER_PREFIX_BELOW","MIN_PROFIT_BIPS","HIGH_EXECUTION_FEES_MAP","coingecko","arbitrum","ETH","BTC","LINK","UNI","USDC","USDT","DAI","MIM","FRAX","avalanche","AVAX","supportedChainIds","isDevelopment","push","injectedConnector","InjectedConnector","getWalletConnectConnector","localStorage","getItem","WalletConnectConnector","rpc","qrcode","deserialize","data","entries","key","value","_type","bigNumberify","isHomeSite","process","REACT_APP_IS_HOME_SITE","helperToast","success","content","opts","toast","dismiss","error","useLocalStorageByChainId","defaultValue","useLocalStorage","internalValue","setInternalValue","setValue","useCallback","useLocalStorageSerializeKey","JSON","stringify","getLiquidationPriceFromDelta","liquidationAmount","size","collateral","averagePrice","isLong","eq","gt","priceDelta","sub","mul","div","add","replaceNativeTokenAddress","path","nativeTokenAddress","updatedPath","getMarginFee","sizeDelta","afterFeeUsd","getServerBaseUrl","hostname","includes","fromLocalStorage","getServerUrl","isTriggerRatioInverted","fromTokenInfo","toTokenInfo","maxPrice","lt","getExchangeRate","tokenAInfo","tokenBInfo","inverted","minPrice","getMostAbundantStableToken","infoTokens","availableAmount","whitelistedTokens","stableToken","find","t","info","getTokenInfo","adjustedAvailableAmount","adjustForDecimals","getExchangeRateDisplay","rate","tokenA","tokenB","shouldInvertTriggerRatio","rateValue","formatAmount","omitSymbols","adjustForDecimalsFactory","n","number","amount","divDecimals","mulDecimals","getFeeBasisPoints","usdgDelta","feeBasisPoints","taxBasisPoints","increment","usdgSupply","totalTokenWeights","usdgAmount","initialAmount","nextAmount","targetAmount","weight","getTargetUsdgAmount","toNumber","initialDiff","nextDiff","rebateBps","averageDiff","taxBps","getNextFromAmount","toAmount","fromTokenAddress","toTokenAddress","toTokenPriceUsd","ratio","forSwap","fromTokenMinPrice","toTokenMaxPrice","fromToken","toToken","contractMinPrice","contractMaxPrice","fromAmountBasedOnRatio","adjustDecimals","isZero","fromAmount","swapFeeBasisPoints","feeBasisPoints0","feeBasisPoints1","getNextToAmount","toAmountBasedOnRatio","getSwapFeeBasisPoints","redemptionAmount","expectedAmount","getProfitPrice","closePrice","position","profitPrice","calculatePositionDelta","price","lastIncreasedTime","delta","pendingDelta","minProfitExpired","Date","now","hasProfit","lte","deltaPercentage","pendingDeltaPercentage","getDeltaStr","deltaStr","deltaPercentageStr","getLeverage","increaseSize","collateralDelta","increaseCollateral","entryFundingRate","cumulativeFundingRate","includeDelta","nextSize","gte","remainingCollateral","fundingFee","getLiquidationPrice","adjustedDelta","positionFee","liquidationPriceForFees","liquidationPriceForMaxLeverage","getUsd","tokenAddress","max","orderOption","triggerPriceUsd","getTriggerPrice","getPositionKey","account","collateralTokenAddress","indexTokenAddress","getPositionContractKey","collateralToken","indexToken","solidityKeccak256","BSC_RPC_PROVIDERS","RPC_PROVIDERS","FALLBACK_PROVIDERS","host","formatDateTime","time","formatDateFn","getTimeRemaining","parseInt","diff","hours","minutes","activateInjectedProvider","providerName","isCoinbaseWallet","isMetaMask","provider","setSelectedProvider","getInjectedConnector","useChainId","useWeb3React","chainIdFromLocalStorage","removeItem","clearWalletConnectData","clearWalletLinkData","x","startsWith","getProvider","library","_","sample","StaticJsonRpcProvider","getFallbackProvider","BigNumber","from","pow","limitDecimals","maxDecimals","amountStr","split","dotIndex","indexOf","substr","_parseOrdersData","ordersData","indexes","extractor","uintPropsLength","addressPropsLength","uintProps","addressProps","count","orders","sliced","order","index","parseDecreaseOrdersData","decreaseOrdersData","triggerPrice","triggerAboveThreshold","type","parseIncreaseOrdersData","increaseOrdersData","purchaseToken","purchaseTokenAmount","parseSwapOrdersData","swapOrdersData","shouldUnwrap","amountIn","minOut","triggerRatio","every","tokenDecimals","displayDecimals","useCommas","formatUnits","minDecimals","padEnd","padDecimals","numberWithCommas","formatAmountFree","parseFloat","trimZeroDecimals","parseValue","pValue","isNaN","parseUnits","parts","replace","join","getExplorerUrl","usePrevious","ref","useRef","useEffect","current","approveTokens","setIsApproving","spender","onApproveSubmitted","pendingTxns","setPendingTxns","includeMessage","Contract","Token","abi","approve","MaxUint256","then","res","txUrl","hash","pendingTxn","message","catch","failMsg","finally","shouldRaiseGasError","balance","replaceNative","NETWORK_METADATA","addNetwork","metadata","switchNetwork","active","setItem","chainIdHex","getInjectedHandler","activate","fn","UnsupportedChainIdError","errString","setTokenUsingIndexPrices","indexPrices","indexPrice","indexPriceBn","spreadBps","minPrimaryPrice","halfSpreadBps","getInfoTokens","tokenBalances","vaultTokenInfo","fundingRateInfo","vaultPropsLength","parse","poolAmount","reservedAmount","bufferAmount","maxUsdgAmount","globalShortSize","maxGlobalShortSize","maxGlobalLongSize","guaranteedUsd","maxPrimaryPrice","maxAvailableShort","hasMaxAvailableShort","availableUsd","maxAvailableLong","hasMaxAvailableLong","remainingLongSize","maxLongCapacity","managedUsd","managedAmount","fundingRate","CHART_PERIODS","isAddressZero","isLocal","getPositionForOrder","positionsMap","getOrderError","positionForOrder","notifySuccess","text","url","errAlert","err","setIsLoading","msg","reason","getSlTpFromPercentage","isTP","percentage","openPriceNum","leverage","fees","Math","toFixed","msToTimeLeft","ms","h","floor","days","fromBigNumber","arguments","executePromise","args","successMsg","cb","apply","_toConsumableArray","tx","wait","DDL_POOL","_DDL_POOL","_USDC","getIsUsdcApproved","_asyncToGenerator","_regeneratorRuntime","mark","_callee","walletAddress","contractAddress","_args","wrap","_context","prev","next","allowance","abrupt","sent","stop","_x","_x2","OperationalTreasury","_OperationalTreasury","OperationalTreasury_ABI","HEGOPS","_HEGOPS","HEGOPS_ABI","HEGIC_STRATEGIES","short","HegicStrategy_CALL_100_BTC_1","HegicStrategy_CALL_100_ETH_1","HegicStrategy_CALL_110_BTC_1","HegicStrategy_CALL_110_ETH_1","HegicStrategy_CALL_120_BTC_1","HegicStrategy_CALL_120_ETH_1","HegicStrategy_CALL_130_BTC_1","HegicStrategy_CALL_130_ETH_1","HegicStrategy_PUT_100_BTC_1","HegicStrategy_PUT_100_ETH_1","HegicStrategy_PUT_70_BTC_1","HegicStrategy_PUT_70_ETH_1","HegicStrategy_PUT_80_BTC_1","HegicStrategy_PUT_80_ETH_1","HegicStrategy_PUT_90_BTC_1","HegicStrategy_PUT_90_ETH_1","medShort","HegicStrategy_CALL_100_BTC_2","HegicStrategy_CALL_100_ETH_2","HegicStrategy_CALL_110_BTC_2","HegicStrategy_CALL_110_ETH_2","HegicStrategy_CALL_120_BTC_2","HegicStrategy_CALL_120_ETH_2","HegicStrategy_CALL_130_BTC_2","HegicStrategy_CALL_130_ETH_2","HegicStrategy_PUT_100_BTC_2","HegicStrategy_PUT_100_ETH_2","HegicStrategy_PUT_70_BTC_2","HegicStrategy_PUT_70_ETH_2","HegicStrategy_PUT_80_BTC_2","HegicStrategy_PUT_80_ETH_2","HegicStrategy_PUT_90_BTC_2","HegicStrategy_PUT_90_ETH_2","medLong","HegicStrategy_CALL_100_BTC_3","HegicStrategy_CALL_100_ETH_3","HegicStrategy_CALL_110_BTC_3","HegicStrategy_CALL_110_ETH_3","HegicStrategy_CALL_120_BTC_3","HegicStrategy_CALL_120_ETH_3","HegicStrategy_CALL_130_BTC_3","HegicStrategy_CALL_130_ETH_3","HegicStrategy_PUT_100_BTC_3","HegicStrategy_PUT_100_ETH_3","HegicStrategy_PUT_70_BTC_3","HegicStrategy_PUT_70_ETH_3","HegicStrategy_PUT_80_BTC_3","HegicStrategy_PUT_80_ETH_3","HegicStrategy_PUT_90_BTC_3","HegicStrategy_PUT_90_ETH_3","long","HegicStrategy_CALL_100_BTC_4","HegicStrategy_CALL_100_ETH_4","HegicStrategy_CALL_110_BTC_4","HegicStrategy_CALL_110_ETH_4","HegicStrategy_CALL_120_BTC_4","HegicStrategy_CALL_120_ETH_4","HegicStrategy_CALL_130_BTC_4","HegicStrategy_CALL_130_ETH_4","HegicStrategy_PUT_100_BTC_4","HegicStrategy_PUT_100_ETH_4","HegicStrategy_PUT_70_BTC_4","HegicStrategy_PUT_70_ETH_4","HegicStrategy_PUT_80_BTC_4","HegicStrategy_PUT_80_ETH_4","HegicStrategy_PUT_90_BTC_4","HegicStrategy_PUT_90_ETH_4","PRICE_CALCULATORS","PriceCalculator_PUT_100_BTC","PriceCalculator_PUT_100_ETH","PriceCalculator_PUT_70_BTC","PriceCalculator_PUT_70_ETH","PriceCalculator_PUT_80_BTC","PriceCalculator_PUT_80_ETH","PriceCalculator_PUT_90_BTC","PriceCalculator_PUT_90_ETH","PriceCalculator_CALL_100_BTC","PriceCalculator_CALL_100_ETH","PriceCalculator_CALL_110_BTC","PriceCalculator_CALL_110_ETH","PriceCalculator_CALL_120_BTC","PriceCalculator_CALL_120_ETH","PriceCalculator_CALL_130_BTC","PriceCalculator_CALL_130_ETH","HegicStrategy_ABI","_HegicStrategy_ABI","PriceCalculator_ABI","_PriceCalculator_ABI","HEGIC_BUY_URLS","PUT_100_BTC","PUT_100_ETH","PUT_70_BTC","PUT_70_ETH","PUT_80_BTC","PUT_80_ETH","PUT_90_BTC","PUT_90_ETH","CALL_100_BTC","CALL_100_ETH","CALL_110_BTC","CALL_110_ETH","CALL_120_BTC","CALL_120_ETH","CALL_130_BTC","CALL_130_ETH","CHAI_CONTRACT_ETH","CHAI_CONTRACT_BTC","PremiaPools","separateThousands","num","symb","intPart","fractionPart","hasFraction","convertInputNum","result","match","removeNonNumeric","sepToNumber","str","fraction","formatForContract","val","getGlobalStats","globalStats","getTotalBalance","totalBalance","totalLocked","totalSupplied","round","availToBorrow","totalBorrowed","utilRate","borrowAPY","getUserStats","balanceOf","shareOf","curBalance","avail","min","userStats","Tabs","links","cls","link","isHidden","linkCls","isActive","isExternal","to","Header","setGlobalStats","useContext","setUserStats","stats","loc","useLocation","headerLinks","pathname","Footer","rx","fillRule","clipRule","parseEther","nativeTokenSymbol","defaultCollateralSymbol","defaultFlagOrdersEnabled","positionReaderPropsLength","v2","SWAP_ORDER_EXECUTION_GAS_FEE","INCREASE_ORDER_EXECUTION_GAS_FEE","DECREASE_ORDER_EXECUTION_GAS_FEE","wrappedTokenSymbol","getConstant","chainlinkClient","createClient","arbitrumGraphClient","avalancheGraphClient","arbitrumReferralsGraphClient","avalancheReferralsGraphClient","uri","ApolloClient","cache","InMemoryCache","fetcher","contractInfo","additionalArgs","arg0","arg1","isAddress","contractCall","getContractCall","shouldCallFallback","handleFallback","reject","fallbackProvider","contractName","Promise","setTimeout","contract","ToastifyDebug","open","setOpen","old","NOT_ENOUGH_FUNDS","USER_DENIED","SLIPPAGE","RPC_ERROR","TX_ERROR_PATTERNS","extractError","ex","patterns","pattern","matchCode","matchMessage","GAS_PRICE_ADJUSTMENT_MAP","MAX_GAS_PRICE_MAP","setGasPrice","txnOpts","maxGasPrice","premium","getGasPrice","gasPrice","getFeeData","feeData","maxPriorityFeePerGas","maxFeePerGas","getGasLimit","estimateGas","gasLimit","callContract","Array","isArray","sentMsg","hideSuccessMsg","autoCloseToast","errorData","originalError","autoClose","FEED_ID_MAP","BTC_USD","ETH_USD","BNB_USD","LINK_USD","UNI_USD","SUSHI_USD","AVAX_USD","AAVE_USD","YFI_USD","SPELL_USD","timezoneOffset","getTimezoneOffset","getChartPricesFromStats","period","timeDiff","done","fetch","lastEx","ok","status","statusText","json","prices","OBSOLETE_THRESHOLD","updatedAt","toISOString","close","c","high","low","l","getChainlinkChartPricesFromGraph","tokenSymbol","marketName","feedId","requests","query","gql","all","chunks","uniqTs","Set","forEach","chunk","rounds","item","has","unixTimestamp","sort","periodTime","candles","first","prevTsGroup","prevPrice","ts","tsGroup","getCandlesFromPrices","useChartPrices","currentAveragePrice","swrKey","useSWR","warn","dedupingInterval","focusThrottleInterval","updatePrices","mutate","currentAveragePriceString","retPrices","useMemo","periodSeconds","priceData","getStablePriceData","_prices","currentCandleTime","last","averagePriceValue","newCandle","appendCurrentAveragePrice","newPrices","prevTime","fillGaps","getGmxGraphClient","useInfoTokens","vaultReaderAddress","vaultAddress","positionRouterAddress","whitelistedTokenAddresses","refreshInterval","indexPricesUrl","_useSWR2","refreshWhenHidden","invariant","condition","errorMsg","useMinExecutionFee","multiplier","minExecutionFee","_useSWR8","_ref8","_callee6","_gasPrice","_context6","t0","_x4","_x5","finalExecutionFee","estimatedExecutionFee","finalExecutionFeeUSD","isFeeHigh","getHighExecutionFee","minExecutionFeeUSD","minExecutionFeeErrorMessage","useHasOutdatedUi","_useSWR11","hasOutdatedUi","approvePlugin","_x6","_x7","_x8","_approvePlugin","_callee7","pluginAddress","_ref10","routerAddress","_context7","createSwapOrder","_x9","_x10","_x11","_x12","_x13","_x14","_x15","_createSwapOrder","_callee8","executionFee","shouldWrap","orderBookAddress","_args8","_context8","_createIncreaseOrder","_callee9","fromETH","_args9","_context9","createDecreaseOrder","_x27","_x28","_x29","_x30","_x31","_x32","_x33","_x34","_x35","_createDecreaseOrder","_callee10","_args10","_context10","cancelSwapOrder","_x36","_x37","_x38","_x39","_cancelSwapOrder","_callee11","_context11","cancelDecreaseOrder","_x40","_x41","_x42","_x43","_cancelDecreaseOrder","_callee12","_context12","cancelIncreaseOrder","_x44","_x45","_x46","_x47","_cancelIncreaseOrder","_callee13","_context13","handleCancelOrder","func","cancelMultipleOrders","_x48","_x49","_cancelMultipleOrders","_callee14","allIndexes","ordersWithTypes","getIndexes","_args14","_context14","groupBy","v","updateDecreaseOrder","_x50","_x51","_x52","_x53","_x54","_x55","_x56","_x57","_updateDecreaseOrder","_callee15","_context15","updateIncreaseOrder","_x58","_x59","_x60","_x61","_x62","_x63","_x64","_updateIncreaseOrder","_callee16","_context16","updateSwapOrder","_x65","_x66","_x67","_x68","_x69","_x70","_x71","_updateSwapOrder","_callee17","_context17","REDIRECT_POPUP_TIMESTAMP_KEY","IS_TOUCH","OPEN_DELAY","CLOSE_DELAY","Tooltip","enabled","visible","setVisible","intervalCloseRef","intervalOpenRef","trigger","onMouseEnter","clearInterval","onMouseClick","onMouseLeave","style","disableHandleStyle","handleClassName","handle","renderContent","Tab","options","option","setOption","onChange","optionLabels","icons","disabledTooltip","opt","disabledNode","label","disabledList","el","TOUCH_MOVE_CONTAINER_CLASS_NAME","allowTouchMoveFn","body","parentElement","Modal","isVisible","setIsVisible","zIndex","onAfterOpen","allowContentTouchMove","disableBodyScrollLock","isNifty","modalRef","closeModal","disableLock","disableBodyScroll","allowTouchMove","enableBodyScroll","clearAllBodyScrollLocks","useLockBodyScroll","keyCode","AnimatePresence","motion","initial","animate","exit","variants","hidden","opacity","visibility","transition","duration","overflow","fontSize","transformStyle","transformOrigin","transform","Portal","root","createElement","appendChild","removeChild","createPortal","TooltipWithPortal","coords","setCoords","tooltipWidth","setTooltipWidth","handlerRef","updateTooltipCoords","rect","getBoundingClientRect","left","top","y","scrollY","fitHandleWidth","closeOnDoubleClick","TokenSelector","isModalVisible","setIsModalVisible","searchKeyword","setSearchKeyword","tokenInfo","mintingCap","showMintingCap","selectedTokenLabel","showBalances","showTokenImgInDropdown","showSymbolImage","showNewCaret","getTokenState","visibleTokens","onSelectToken","tokenImage","require","toLowerCase","filteredTokens","tokenIndex","tokenPopupImage","mintAmount","tokenState","portalClassName","default","stroke","strokeWidth","strokeLinecap","strokeLinejoin","dropDownIcon","ExchangeInfoRow","isTop","isWarning","Checkbox","isChecked","setIsChecked","selected","StatsTooltipRow","showDollar","SlippageInput","placeholder","onFocus","classList","onBlur","remove","NumberInput_v3","title","displayValueTitle","displayValue","hasError","maxValue","icon","iconAlt","hasFocus","setHasFocus","HIGH_SPREAD_THRESHOLD","ConfirmationBox","isSwap","isMarketOrder","isShort","isHigherSlippageAllowed","setIsHigherSlippageAllowed","onConfirmationClick","setIsConfirming","shortCollateralAddress","hasExistingPosition","existingPosition","existingLiquidationPrice","displayLiquidationPrice","shortCollateralToken","isPendingConfirmation","feesUsd","isSubmitting","fromUsdMin","toUsdMax","nextAveragePrice","feeBps","savedSlippageAmount","userSlippage","setUserSlippage","allowedSlippage","TPValue","setTPValue","SLValue","setSLValue","TPHasError","setTPHasError","SLHasError","setSLHasError","liquidity","fromTokenUsd","toTokenUsd","isProfitWarningAccepted","setIsProfitWarningAccepted","_useState3","_useState4","isTriggerWarningAccepted","setIsTriggerWarningAccepted","_useState5","_useState6","isLimitOrdersVisible","setIsLimitOrdersVisible","onCancelOrderClick","collateralAfterFees","existingOrder","_step","wrappedToken","_iterator","_createForOfIteratorHelper","s","sameToken","f","existingOrders","existingTriggerOrders","decreaseOrdersThatWillBeExecuted","markPrice","takeProfit","stopLoss","getError","borderTakeProfit","_calculatePositionDel","hasPendingProfit","spread","fromSpread","toSpread","isHigh","getSpread","showSpread","renderSpreadWarning","renderFeeWarning","renderMinProfitWarning","minProfitExpiration","_calculatePositionDel2","renderExistingOrderWarning","sizeInToken","p","triggerPricePrefix","renderExistingTriggerErrors","existingTriggerOrderLength","orderText","_Fragment","renderExistingTriggerWarning","renderMain","renderExecutionFee","renderAvailableLiquidity","availableLiquidity","_liquidity$market","formattedValue","isLiquidityRisk","riskThresholdBps","poolWithoutBuffer","adjustedMaxGlobalShortSize","sizeTokens","renderMarginSection","BsArrowRight","renderSwapSection","action","getPrimaryText","REGEX_VERIFY_BYTES32","getGraphClient","decodeReferralCode","hexCode","parseBytes32String","substring","String","fromCharCode","trim","encodeReferralCode","final","HashZero","formatBytes32String","useUserReferralCode","localStorageCode","referralStorageAddress","onChainCode","localStorageCodeOwner","test","attachedOnChain","userReferralCode","userReferralCodeString","NoLiquidityErrorModal","outputCurrency","modalError","setModalError","nativeToken","inputCurrency","swapTokenSymbol","oneInchSwapUrl","rootUrl","get1InchSwapUrl","Boolean","resetModal","isObligatory","onMouseDown","DDL_WALLET","DDL_WALLET_ENCODED","repeat","marketsList","GNS_FEES_MULTIPLIER","OPTIONS_DECIMALS","marketsOptions","PremiaStrikeRangeMultiplier","Call","Put","OPTION_TYPES","Hegic","Lyra","Premia","ChooseMarketModal","setMarkets","markets","liqs","draftMarkets","liqInfo","defaultChecked","checked","findIndex","splice","GNS_PAIRS","SLTPModal","onApply","btnText","setIsSubmitting","lineHeight","getBtnText","Selector","items","chosenItem","onSelect","closeSelector","SWAP_ICONS","_SWAP_ICONS","_defineProperty","longImg","shortImg","swapImg","longActiveImg","shortActiveImg","leverageSliderHandle","dragging","restProps","_objectWithoutProperties","_excluded","SliderTooltip","prefixCls","overlay","placement","Slider","Handle","_objectSpread","SwapBox","positions","_liquidity$suitableMa","pendingPositions","setPendingPositions","setFromTokenAddress","setToTokenAddress","swapOption","setSwapOption","tokenSelection","setTokenSelection","isConfirming","setIsPendingConfirmation","flagOrdersEnabled","savedIsPnlInLeverage","orderBookApproved","positionRouterApproved","isWaitingForPluginApproval","approveOrderBook","approvePositionRouter","setIsWaitingForPluginApproval","isWaitingForPositionRouterApproval","setIsWaitingForPositionRouterApproval","isPluginApproving","isPositionRouterApproving","savedShouldDisableValidationForTesting","pendingPositionsGNS","setPendingPositionsGNS","fromValue","setFromValue","toValue","setToValue","anchorOnFromAmount","setAnchorOnFromAmount","_useState7","_useState8","isApproving","_useState9","_useState10","isWaitingForApproval","setIsWaitingForApproval","_useState11","_useState12","_useState13","_useState14","_useState15","_useState16","_useUserReferralCode","_useState17","_useState18","_useLocalStorageByCha","_useLocalStorageByCha2","setShortCollateralAddress","_useLocalStorageSeria","_useLocalStorageSeria2","leverageOption","setLeverageOption","_useLocalStorageSeria3","_useLocalStorageSeria4","isLeverageSliderEnabled","hasLeverageOption","_useState19","_useState20","_useLocalStorageSeria5","_useLocalStorageSeria6","setOrderOption","positionKey","orderOptions","orderOptionLabels","_useState21","_useState22","triggerPriceValue","setTriggerPriceValue","fromTokens","stableTokens","indexTokens","shortableTokens","toTokens","needOrderBookApproval","prevNeedOrderBookApproval","needPositionRouterApproval","prevNeedPositionRouterApproval","tokenAllowanceAddress","tokenAllowance","tokenAllowanceGNS","GNS_Storage","Api","_useSWR3","_callee2","curPairSymbol","GNS_contract","GNS_PairIndex","GNS_Info","_context2","openInterestDai","t1","openInterest","maxOpenInterest","_ref3","_GNS_Info$maxOpenInte","liq","liquidityData","_useState23","_useState24","setLiquidity","_useLocalStorageSeria7","_useLocalStorageSeria8","_useState25","_useState26","modal","setModal","_useState27","_useState28","modalVisible","setModalVisible","_useState29","_useState30","suitableMarket","setSuitableMarket","reduce","_liquidity$result$nam","_liquidity$market$nam","fromBalance","toBalance","isPotentialWrap","isWrapOrUnwrap","needApproval","prevFromTokenAddress","prevNeedApproval","prevToTokenAddress","_useState31","_useState32","triggerRatioValue","setTriggerRatioValue","triggerRatioInverted","maxToTokenOut","_toTokenInfo$availabl","_toTokenInfo$poolAmou","_toTokenInfo$poolAmou2","maxToTokenOutUSD","maxFromTokenInUSD","_fromTokenInfo$maxUsd","entryMarkPrice","nextToAmount","nextToValue","nextFromAmount","nextFromValue","updateSwapAmounts","leverageMultiplier","fromUsdMinAfterFee","toNumerator","toDenominator","baseFromAmountUsd","swapFees","updateLeverageAmounts","liquidationPrice","nextDelta","nextHasProfit","nextPrice","divisor","getNextAveragePrice","liqPriceDistance","getToLabel","i18n","currentRate","usdgFromAmount","getSwapError","_leverage","requiredAmount","swapAmount","nextUsdgAmount","sizeUsd","stableTokenAmount","0","getLeverageError","isPrimaryEnabled","isStopOrder","_getError","_getError2","_useState33","_useState34","hasInputFocus","setHasInputFocus","_useState35","_useState36","hasInputError","setHasInputError","inputVal","_ref4","_callee4","_context4","WETH","_ref5","_callee3","_context3","unwrap","_ref6","_ref7","_callee5","_context5","_x3","swap","_getNextToAmount7","multiPath","_getNextFromAmount2","_multiPath","createIncreaseOrder","1","2","_x16","_x17","_x18","_x19","_x20","_x21","_x22","_x23","_x24","_x25","_x26","referralCode","increasePosition","tokenAddress0","refPrice","priceBasisPoints","priceLimit","boundedFromAmount","_getNextToAmount8","pendingChanges","showFromAndToSection","showTriggerPriceSection","showTriggerRatioSection","feeTokenPrice","_useState37","_useState38","_useState39","_useState40","_useState41","_useState42","_useState43","_useState44","openTrade","_ref12","pairIndex","posSize","openPrice","roundLeverage","typeOfOrder","slippage","GNS_Trading","tsc","positionSizeDai","curLeverage","marks","GNS","setFromValueToMaximumAvailable","maxAvailableAmount","icon_settings","React","Fragment","shouldShowMaxButton","Trans","getTokenLabel","evt","_ref13","_ref14","positive","negative","step","approveFromToken","_getError5","_getError6","errorCode","isSupportedChain","_getError3","_getError4","charAt","indexTokenInfo","nextToAmountUsd","ChartTokenSelector","selectedToken","as","Items","Item","marginLeft","marginRight","getChartToken","RED_COLOR","GREEN_COLOR","ExchangeTVChart","savedShouldShowPositionLines","currentChart","setCurrentChart","currentSeries","setCurrentSeries","setPeriod","hoveredCandlestick","setHoveredCandlestick","chartToken","setChartToken","tmp","previousMarketName","currentOrders","chartRef","updatePriceData","chartInited","setChartInited","scaleChart","timeScale","setVisibleRange","onCrosshairMove","seriesPrices","values","point","chart","createChart","offsetWidth","offsetHeight","layout","backgroundColor","textColor","fontFamily","localization","timeFormatter","businessDayOrTimestamp","grid","vertLines","color","horzLines","rightOffset","borderVisible","barSpacing","timeVisible","fixLeftEdge","priceScale","crosshair","horzLine","vertLine","mode","subscribeCrosshairMove","series","addCandlestickSeries","lineColor","topColor","bottomColor","lineWidth","priceLineColor","downColor","wickDownColor","upColor","wickUpColor","interval","setInterval","resizeChart","resize","setData","lines","line","removePriceLine","deltaPrice","candleStatsHtml","candlestick","timeThreshold","average","CLOSE_ICONS","Market","marketImg","Market_active","marketActiveImg","Stop","triggerImg","Stop_active","triggerActiveImg","ORDER_SIZE_DUST_USD","_orderOptionLabels","getTokenAmount","usdAmount","shouldSwap","receiveToken","isCollateralWrapped","isSameToken","isUnwrap","PositionSeller","setOrdersToaOpen","initTab","keepLeverage","prevIsVisible","savedRecieveTokenAddress","setSavedRecieveTokenAddress","swapToToken","setSwapToToken","maxAmount","maxAmountFormatted","maxAmountFormattedFree","convertedAmount","convertedAmountFormatted","nextLeverage","nextLiquidationPrice","isClosing","nextCollateral","isNotEnoughReceiveTokenLiquidity","isCollateralPoolCapacityExceeded","swapFeeToken","swapFee","_useMemo","_useMemo2","_useMemo2$","ret","isSwapAllowed","receiveAmount","convertedReceiveAmount","totalFees","executionFeeUsd","_step2","residualSize","_iterator2","abs","deductions","collateralInfo","receiveTokenInfo","_useMemo3","_getDeltaStr","_calculatePositionDel3","_getDeltaStr2","_useMemo4","onClickPrimary","minProfitTimeExpired","withdrawETH","_ref2","prefix","warning","tokenOptionInfo","convertedTokenAmount","_getSwapLimits","maxInUsd","maxIn","maxOut","maxOutUsd","fromInfo","toInfo","getSwapLimits","DEPOSIT","WITHDRAW","EDIT_OPTIONS","EDIT_ICONS","_EDIT_ICONS","depositImg","withdrawImg","depositActiveImg","withdrawActiveImg","PositionEditor","nextLeverageExcludingPnl","isSwapping","setIsSwapping","isDeposit","isWithdrawal","resetForm","depositCollateral","3","collateralSnapshot","expectingCollateralChange","withdrawCollateral","OrdersToa","SpinningLoader","ROOT_SHARE_URL","UPLOAD_URL","UPLOAD_SHARE","config","quality","canvasWidth","canvasHeight","getShareURL","imageInfo","PositionShareCard","positionRef","userAffiliateCode","uploadedImageInfo","uploadedImageError","sharePositionBgImg","deltaAfterFeesPercentageStr","homeURL","backgroundImage","gmxLogo","QRCodeSVG","PositionShare","_positionToShare$inde","setIsPositionShareModalOpen","isPositionShareModalOpen","positionToShare","affiliateCodes","setAffiliateCodes","variables","parsedAffiliateCodes","referrerTotalStats","useAffiliateCodes","setUploadedImageInfo","setUploadedImageError","_useCopyToClipboard","useCopyToClipboard","copyToClipboard","sourceLoaded","setSourceLoaded","img","Image","onload","useLoadImage","shareBgImg","tweetLink","hashtag","finalURL","encodeURIComponent","getTwitterIntentURL","_handleDownload","element","dataUrl","toJpeg","download","click","image","BiCopy","RiFileDownloadLine","FiTwitter","PositionsItem","_position$deltaAfterF","_position$deltaAfterF2","_position$sl","_position$sl2","_position$tp","_position$tp2","_position$deltaAfterF3","_position$deltaAfterF4","_position$sl3","_position$sl4","_position$tp3","_position$tp4","onPositionClick","setListSection","positionOrders","hasPositionProfit","showPnlAfterFees","positionDelta","hasOrderError","borrowFeeUSD","editPosition","sellPosition","isLarge","isPending","openSLTPModal","isCloseLoading","setIsCloseLoading","hasPendingChanges","openOrderModal","triggerPricesGMX","triggerOrdersGMX","SL","TP","ImSpinner2","muted","hasLowCollateral","icon_edit","display","deltaAfterFeesStr","sl","tp","getOrdersForPosition","hasMatchingIndexToken","hasMatchingCollateralToken","PositionsList","_Object$keys","_Object$keys2","positionsGNS","positionsDataIsLoading","setMarket","positionsLoading","hasPositions","SLTPModalInfo","setSLTPModalInfo","curVal","orderName","setSLTP","newValue","positionToEditKey","setPositionToEditKey","positionToSellKey","setPositionToSellKey","isPositionEditorVisible","setIsPositionEditorVisible","isPositionSellerVisible","setIsPositionSellerVisible","positionSellerTab","setPositionSellerTab","setCollateralTokenAddress","ordersToaOpen","setLoading","closeTradeMarket","_SLTPModalInfo","renderSLTPModal","borrowFeeRate","pos","trader","ADDRESS_ZERO","assign","buy","tokenSymb","tokenAddr","curPrice","initCollateral","pendingDeltaAfterFees","deltaBeforeFeesStr","entryPrice","liqPrice","posKey","colSpan","OrderEditor","setEditingOrder","initialRatio","indexTokenMarkPrice","OrderEditorGNS","priceValue","setPriceValue","SLVal","TPVal","updateOpenLimitOrder","OrdersList","ordersGNS","hideActions","cancelOrderIdList","setCancelOrderIdList","hasOrders","marketIconGNS","marketIconGMX","editingOrder","editingOrderGNS","setEditingOrderGNS","orderEditorGNSVisible","setOrderEditorGNSVisible","onCancelClick","cancelOpenLimitOrder","onEditClick","renderHead","renderEmptyRow","renderActions","renderLargeList","indexTokenSymbol","collateralTokenInfo","collateralUSD","renderLargeListGNS","ord","_order$maxPrice","_order$tp","_order$sl","positionSize","renderSmallListGNS","_order$maxPrice2","_order$tp2","_order$sl2","renderSmallList","getOrderActionTitle","actionDisplay","renderLiquidationTooltip","liquidationData","minCollateral","borrowFee","loss","getLiquidationData","liquidationsDataMap","timestamp","TradeHistory","shouldShowPaginationButtons","pageIds","setPageIds","pageIndex","setPageIndex","forSingleAccount","afterId","urlItem","URL","searchParams","append","_useSWR6","trades","updateTrades","item0","item1","data0","data1","time0","time1","block0","blockNumber","block1","useTrades","liquidationsData","graphClient","_data","liquidatedPositions","useLiquidationsData","memo","getMsg","trade","tradeData","defaultMsg","tokenAmount","tokenIn","tokenOut","amountOut","acceptablePrice","flags","isOrderExecution","isLiquidation","longShortDisplay","executionPriceDisplay","executionPrice","sizeDeltaDisplay","increase","priceDisplay","getPositionDisplay","fromAmountDisplay","toAmountDisplay","amountInDisplay","minOutDisplay","tradesWithMessages","txhash","lastTrade","ExchangeBanner","hideBanner","PENDING_POSITION_VALID_DURATION","notifications","pushSuccessNotification","transactionHash","pushErrorNotification","getFundingFee","getTokenAddress","applyPendingChanges","Exchange","forwardRef","setSavedIsPnlInLeverage","savedShowPnlAfterFees","setSavedShouldShowPositionLines","showBanner","setShowBanner","bannerHidden","setBannerHidden","updatedPositions","setUpdatedPositions","_useWeb3React","currentAccount","readerAddress","usdgAddress","positionQuery","collateralTokens","getPositionQuery","defaultTokenSelection","_useLocalStorageByCha3","_useLocalStorageByCha4","selectedSwapOption","newTokenSelection","tokenAddresses","positionData","positionDataError","positionsGNSLoading","setPositionsGNSLoading","pair","openTrades","positionsGNSError","VaultV2","_useMinExecutionFee","currentTokenPriceStr","_getPositions","propsLength","contractKey","hasRealisedProfit","realisedPnl","updatedPosition","collateralAfterFee","closingFee","hasProfitAfterFees","deltaPercentageAfterFees","netValue","getPositions","useImperativeHandle","onUpdatePosition","reserveAmount","onClosePosition","onIncreasePosition","fee","indexTokenItem","onDecreasePosition","onCancelIncreasePosition","blockGap","timeGap","onCancelDecreasePosition","receiver","_useAccountOrders","overrideAccount","connectedAccount","shouldRequest","orderBookReaderAddress","orderBookContract","orderBookReaderContract","fetchIndexesFromServer","ordersIndexesUrl","a","b","decrease","fetchLastIndex","_hex","fetchLastIndexes","getRange","_indexes","knownIndexes","lastIndex","getOrders","parseFunc","serverIndexes","lastIndexes","swapOrders","increaseOrders","decreaseOrders","useAccountOrders","_useSWR9","getOpenLimitOrder","ordersGNSData","setOrdersGNS","setIsPluginApproving","setIsPositionRouterApproving","setIsCancelMultipleOrderProcessing","finish","posLength","ordersLength","LIST_SECTIONS","_useLocalStorageByCha5","_useLocalStorageByCha6","listSection","LIST_SECTIONS_LABELS","Orders","Positions","getListSection","section","hiddenLimit","getTime","homeEventsData","validTill","bodyText","buttons","newTab","appEventsData","Icon","EventToast","event","button","useEventToast","isHome","visited","setVisited","isFuture","custom","EventToastContainer","useWindowScroll","breakpoint","createBreakpoint","XL","L","S","useBreakpoint","reverseOrder","gutter","containerClassName","containerStyle","right","toastOptions","Infinity","SEO","customMeta","meta","description","Helmet","property","RedirectPopupModal","redirectModalVisible","setRedirectModalVisible","appRedirectUrl","setRedirectPopupTimestamp","setShouldHideRedirectModal","shouldHideRedirectModal","removeRedirectPopupTimestamp","defaultLocale","dynamicActivate","locale","loadLocaleData","en","plurals","es","zh","ko","ru","ja","fr","getLibrary","autoRefreshOnNetworkChange","Jelly","cssTransition","enter","arbWsProvider","WebSocketProvider","avaxWsProvider","JsonRpcProvider","FullApp","setRegisterVisible","exchangeRef","connector","deactivate","history","useNavigate","activatingConnector","setActivatingConnector","triedEager","tried","setTried","shouldTryWalletConnect","rawData","connected","SyntaxError","currentProviderName","isAuthorized","useEagerConnect","suppress","injected","handleConnect","handleChainChanged","handleAccountsChanged","handleNetworkChanged","networkId","removeListener","useInactiveListener","search","URLSearchParams","useRouteQuery","get","encodedReferralCode","queryParams","delete","connectInjectedWallet","attemptActivateWallet","_useLocalStorage","_useLocalStorage2","selectedToPage","isSettingsVisible","setIsSettingsVisible","setSavedSlippageAmount","slippageAmount","setSlippageAmount","isPnlInLeverage","setIsPnlInLeverage","shouldDisableValidationForTesting","setShouldDisableValidationForTesting","setShowPnlAfterFees","setSavedShowPnlAfterFees","setSavedShouldDisableValidationForTesting","_useLocalStorageSeria9","_useLocalStorageSeria10","decodedRefCode","checkPendingTxns","updatedPendingTxns","receipt","_txUrl","getTransactionReceipt","wsVaultAbi","VaultV2b","wsProvider","getWsProvider","wsVault","wsPositionRouter","callExchangeRef","_exchangeRef$current","_len","_key","_len2","_key2","_len3","_key3","_len4","_key4","_len5","_key5","_len6","_key6","_len7","_key7","off","dgAddress","ToastContainer","limit","hideProgressBar","newestOnTop","closeOnClick","draggable","pauseOnHover","basisPoints","GMXInterface","SWRConfig","Web3ReactProvider","CALL","PUT","callIcon","putIcon","callActiveIcon","putActiveIcon","ASSET_OPTIONS","assetOption","setAssetOption","amountValue","setAmountValue","setOptions","setOptionsLength","setOptionsExpectedLength","isOptionsLoading","setIsOptionsLoading","optionPrices","setOptionPrices","scrollToList","chaiMarkPrice","isCall","expirationDate","expDateUTC","getUTCHours","setUTCDate","getUTCDate","setUTCHours","periodEightAM","fetchHegicOptions","strikes","periodDays","strategies","expectedLength","_loop","_args2","strategy","_strategy$split","_strategy$split2","strategySentiment","strikeScale","strategyTokenSymbol","strategyIsCall","strike","strategyAddress","strategyContract","priceName","priceAddress","priceContract","urlName","periodS","getAvailableContracts","initSize","hasLiquidity","buyUrl","isBuyingEnabled","getPremium","calculatePremium","cost","delegateYield","fetchLyraOptions","lyra","periodMs","boardId","board","_args5","mkt","baseToken","liveBoards","prevBd","curBd","expiryTimestamp","cur","expDate","liveBoardsMap","strikeId","strikePrice","toUpperCase","getTrade","WeiPerEther","expiry","contractAddresses","optionMarket","_getPremium","quoteOption","ask","_buy","isDisabled","disabledReason","referrer","sendTransaction","pricePerOption","fetchPremiaOptions","base","PremiaPool_ABI","getPoolSettings","DAI_ABI","strikeFormatted","rangeMultiplier","markPriceFormatted","lowerBoundary","higherBoundary","quote","fixedFromFloat","fixedToBn","baseCost64x64","feeCost64x64","totalSupply","assetIcons","iconETH","iconBTC","marginBottom","format","_require","_value$symbol","Menu","_tokenPopupImage","getChartOptions","_useChartPrices","_useChartPrices2","closePosition","expiresIn","pnl","_position$pnl","unrealizedPnl","unrealizedPnlPercentage","strat","closeBtnDisabled","isClosingDisabled","textAlign","ClosePositionModal","_pnlStr","pnlFormatted","pnlSign","pnlStr","pnlPercentage","pnlPercentageStr","setPosition","sizeValue","setSizeValue","setTrade","buyingPositions","closeModalVisible","setCloseModalVisible","cellSpacing","Loader","cy","r","OptionsItem","_option$buyUrl","buyPosition","logo","isITM","Filter","selectedItems","setSelectedItems","openFilter","icon_curve","icon_down","itemIcon","isSelected","Currency","isSmall","icon_usdc","BuyPositionModal","usdcBalance","setPremium","onSizeValueChange","delay","timer","debouncedCb","clearTimeout","useDebounce","isUsdcApproved","initSizeNumber","OptionsList","_options$","_options$2","isLoading","scrollRef","chaiAddress","_useSWR","_fetcher","Chai_ABI","latestAnswer","listFrontier","setListFrontier","unfoldVisible","setUnfoldVisible","sortType","setSortType","sortedOptions","setSortedOptions","sortOptions","param","dir","isInit","arr","filterOptions","sortFn","prevEl","_sortType$split","_sortType$split2","prevParam","prevDir","_sortType$split3","_sortType$split4","buyModalVisible","setBuyModalVisible","optPriceObj","scrollTo","behavior","icon_btnUp","_useLocalStorageByCha7","_useLocalStorageByCha8","optionsExpectedLength","fetchLyraPositions","posArr","isBuy","owner","_getTrade","_close","fetchHegicPositions","strategiesAddresses","transferFilter","events","tokenIds","buyFilterTopics","buyEventsPromises","allEventsArrs","allEvents","chaiContractETH","chaiContractBTC","chaiMarkPrices","obj","topics","hexZeroPad","queryFilter","tokenId","buyFilter","eventArr","additionalData","sentiment","buyingPrice","stratContract","profit","uniqStrategy","decode","lockedLiquidity","state","positivepnl","payOffAmount","t2","expiration","payOff","t3","_fetcher2","t4","t5","t6","call","positionsData","positionsDataError","setPositions","_useLocalStorageByCha9","_useLocalStorageByCha10","scrollIntoView","Options","AppRouter","setPath","nav","Routes","Route","Navigate","Warning","App","registerVisible","Provider","HashRouter","I18nProvider","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"0jnSAAA,IAAIA,EAAM,CACT,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,oBAAqB,IACrB,mBAAoB,IACpB,sBAAuB,IACvB,kBAAmB,IACnB,qBAAsB,IACtB,oBAAqB,IACrB,kBAAmB,IACnB,oBAAqB,IACrB,yBAA0B,IAC1B,kBAAmB,IACnB,oBAAqB,IACrB,8BAA+B,IAC/B,wBAAyB,IACzB,kBAAmB,IACnB,kBAAmB,IACnB,kBAAmB,IACnB,kBAAmB,IACnB,oBAAqB,IACrB,wBAAyB,IACzB,iBAAkB,IAClB,mBAAoB,IACpB,sBAAuB,IACvB,kBAAmB,IACnB,kBAAmB,IACnB,kBAAmB,IACnB,oBAAqB,KAItB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,EAC5B,CACA,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACA,OAAOP,EAAIE,EACZ,CACAD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,EACpB,EACAC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,E,q13DCnDpB,OAAe,cAA0B,qC,2x0ICAzC,OAAe,cAA0B,qC,si0OCAzC,IAAIH,EAAM,CACT,kBAAmB,IACnB,kBAAmB,IACnB,kBAAmB,IACnB,mBAAoB,IACpB,mBAAoB,IACpB,kBAAmB,IACnB,mBAAoB,IACpB,mBAAoB,IACpB,mBAAoB,KAIrB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,EAC5B,CACA,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACA,OAAOP,EAAIE,EACZ,CACAD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,EACpB,EACAC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,G,+BC9BpB,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,gCCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,gC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,iC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,6C,+BCAzC,OAAe,cAA0B,gC,iCCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,qC,y7iHCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BC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AUb,EACjBA,EAAeE,GAAK,G,+BCnNpB,OAAe,svC,+BCAf,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,8/C,+BCAf,OAAe,s1D,+BCAf,OAAe,cAA0B,+B,+BCAzC,OAAe,spE,+BCAf,OAAe,cAA0B,oC,+BCAzC,OAAe,07D,+BCAf,OAAe,cAA0B,mC,+BCAzC,OAAe,kwC,+BCAf,OAAe,kvG,+BCAf,OAAe,cAA0B,4C,+BCAzC,OAAe,8lK,+BCAf,OAAe,cAA0B,uC,+BCAzC,OAAe,8lY,+BCAf,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,s/S,+BCAf,OAAe,cAA0B,iC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,szB,+BCAf,OAAe,suB,+BCAf,OAAe,8zB,+BCAf,OAAe,khB,+BCAf,OAAe,kmB,+BCAf,OAAe,skB,+BCAf,OAAe,k7B,+BCAf,OAAe,syB,+BCAf,OAAe,02B,+BCAf,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,gC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,03C,+BCAf,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,00D,+BCAf,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+B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Ae,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,4C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,gC,+BCAzC,OAAe,cAA0B,gC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,iC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,03C,+BCAf,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,8C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,00D,+BCAf,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,2C,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,kC,+BCAzC,OAAe,cAA0B,mC,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,gD,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,+C,+BCAzC,OAAe,cAA0B,iD,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,yC,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,0C,+BCAzC,OAAe,cAA0B,oC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC,OAAe,cAA0B,uC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,qC,+BCAzC,OAAe,cAA0B,wC,+BCAzC,OAAe,cAA0B,sC,+BCAzC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","file":"static/js/main.448d0817.chunk.js","sourcesContent":["var map = {\n\t\"./icon-BTC.svg\": 244,\n\t\"./icon-ETH.svg\": 245,\n\t\"./icon-GMX.svg\": 318,\n\t\"./icon-GNS.svg\": 319,\n\t\"./icon-GNS_v2.svg\": 605,\n\t\"./icon-Hegic.svg\": 606,\n\t\"./icon-Hegic_sm.svg\": 320,\n\t\"./icon-Lyra.svg\": 607,\n\t\"./icon-Lyra_sm.svg\": 321,\n\t\"./icon-Premia.svg\": 608,\n\t\"./icon-WBTC.svg\": 609,\n\t\"./icon-btn-up.svg\": 246,\n\t\"./icon-call-active.svg\": 247,\n\t\"./icon-call.svg\": 248,\n\t\"./icon-dollar.svg\": 610,\n\t\"./icon-down-small-white.svg\": 322,\n\t\"./icon-down-small.svg\": 249,\n\t\"./icon-down.svg\": 611,\n\t\"./icon-edit.svg\": 132,\n\t\"./icon-hint.svg\": 612,\n\t\"./icon-link.svg\": 223,\n\t\"./icon-market.svg\": 250,\n\t\"./icon-put-active.svg\": 251,\n\t\"./icon-put.svg\": 252,\n\t\"./icon-repay.svg\": 613,\n\t\"./icon-settings.svg\": 243,\n\t\"./icon-sort.svg\": 614,\n\t\"./icon-usdc.svg\": 253,\n\t\"./icon-user.svg\": 615,\n\t\"./icon-wallet.svg\": 222\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 96;","export default __webpack_public_path__ + \"static/media/icon-edit.233d1510.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.1b83dd3c.svg\";","var map = {\n\t\"./ic_btc_40.svg\": 283,\n\t\"./ic_dai_40.svg\": 284,\n\t\"./ic_eth_40.svg\": 165,\n\t\"./ic_frax_40.svg\": 285,\n\t\"./ic_link_40.svg\": 286,\n\t\"./ic_uni_40.svg\": 287,\n\t\"./ic_usdc_40.svg\": 288,\n\t\"./ic_usdt_40.svg\": 289,\n\t\"./ic_weth_40.svg\": 290\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 220;","export default __webpack_public_path__ + \"static/media/ic_eth_40.1b83dd3c.svg\";","export default __webpack_public_path__ + \"static/media/icon-wallet.5b677892.svg\";","export default __webpack_public_path__ + \"static/media/icon-link.436183a1.svg\";","export default __webpack_public_path__ + \"static/media/DROP_DOWN.ef525fad.svg\";","export default __webpack_public_path__ + \"static/media/icon_dollar.f46a93fe.svg\";","export default __webpack_public_path__ + \"static/media/icon_dollar_active.3a2a7bba.svg\";","export default __webpack_public_path__ + \"static/media/icon_market.05f6ef86.svg\";","export default __webpack_public_path__ + \"static/media/icon_market_active.af684a3e.svg\";","export default __webpack_public_path__ + \"static/media/icon_trigger.c4291240.svg\";","export default __webpack_public_path__ + \"static/media/icon_trigger_active.a6e3f64a.svg\";","export default __webpack_public_path__ + \"static/media/icon_withdraw.29572b6d.svg\";","export default __webpack_public_path__ + \"static/media/icon_withdraw_active.7210cab7.svg\";","export default __webpack_public_path__ + \"static/media/long.0f8a81b9.svg\";","export default __webpack_public_path__ + \"static/media/long_active.8a037ed6.svg\";","export default __webpack_public_path__ + \"static/media/short.c75b3ee9.svg\";","export default __webpack_public_path__ + \"static/media/short_active.d3098d1c.svg\";","export default __webpack_public_path__ + \"static/media/gmx-logo-with-name.03a4464f.svg\";","export default __webpack_public_path__ + \"static/media/position-share-bg.900fbfaa.png\";","export default __webpack_public_path__ + \"static/media/swap.40fb8e49.svg\";","export default __webpack_public_path__ + \"static/media/icon-settings.269e4d1c.svg\";","export default __webpack_public_path__ + \"static/media/icon-BTC.d1a85829.svg\";","export default __webpack_public_path__ + \"static/media/icon-ETH.11294773.svg\";","export default __webpack_public_path__ + \"static/media/icon-btn-up.13730dce.svg\";","export default __webpack_public_path__ + \"static/media/icon-call-active.867eabe7.svg\";","export default __webpack_public_path__ + \"static/media/icon-call.7aeed2e7.svg\";","export default __webpack_public_path__ + \"static/media/icon-down-small.c32a162b.svg\";","export default __webpack_public_path__ + \"static/media/icon-market.9e95abb6.svg\";","export default __webpack_public_path__ + \"static/media/icon-put-active.d85cad03.svg\";","export default __webpack_public_path__ + \"static/media/icon-put.216aa799.svg\";","export default __webpack_public_path__ + \"static/media/icon-usdc.ac0408a8.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1ebc220b.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.ff92bfa1.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.4728adab.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.e61956ee.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.45c0523a.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.8bf1ff5d.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.d7851f5e.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.8dbce838.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_24.21ec7bfe.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_24.be4891c9.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_24.bab8cadc.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_24.f992927a.svg\";","export default __webpack_public_path__ + \"static/media/ic_busd_24.2432ce58.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_24.bafa9da6.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_24.6b1d8a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_24.7349c478.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_24.eff381d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_24.2b59d7e0.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_24.0d641e52.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_24.b6a1708c.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_24.25d2f4a7.svg\";","export default __webpack_public_path__ + \"static/media/ic_tether_24.a7c88dcd.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_24.47e903f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_24.5ab8778d.svg\";","export default __webpack_public_path__ + \"static/media/ic_wallet_24.4be97369.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_24.bc395894.svg\";","export default __webpack_public_path__ + \"static/media/icon-GMX.195e3c0f.svg\";","export default __webpack_public_path__ + \"static/media/icon-GNS.eb30a0a6.svg\";","export default __webpack_public_path__ + \"static/media/icon-Hegic_sm.9457ef55.svg\";","export default __webpack_public_path__ + \"static/media/icon-Lyra_sm.56a6eb58.svg\";","export default __webpack_public_path__ + \"static/media/icon-down-small-white.56e18ad5.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1ebc220b.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.ff92bfa1.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.4728adab.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.e61956ee.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.45c0523a.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.8bf1ff5d.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.d7851f5e.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.8dbce838.svg\";","var map = {\n\t\"./ic_btc_40.svg\": 328,\n\t\"./ic_dai_40.svg\": 329,\n\t\"./ic_eth_40.svg\": 221,\n\t\"./ic_frax_40.svg\": 330,\n\t\"./ic_link_40.svg\": 331,\n\t\"./ic_uni_40.svg\": 332,\n\t\"./ic_usdc_40.svg\": 333,\n\t\"./ic_usdt_40.svg\": 334,\n\t\"./ic_weth_40.svg\": 335\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 336;","var map = {\n\t\"./Anyswap.png\": 438,\n\t\"./Anyswap.svg\": 439,\n\t\"./Artwork.svg\": 440,\n\t\"./Artwork_gmx.svg\": 441,\n\t\"./Banxa.png\": 442,\n\t\"./DROP_DOWN.svg\": 225,\n\t\"./Hop.png\": 443,\n\t\"./Hop.svg\": 444,\n\t\"./Hop_dark.png\": 445,\n\t\"./Hop_dark.svg\": 446,\n\t\"./Synapse.png\": 447,\n\t\"./Synapse.svg\": 448,\n\t\"./binance.png\": 449,\n\t\"./bscscan.png\": 450,\n\t\"./btn_big_arbitrum.png\": 451,\n\t\"./btn_big_avalanche.png\": 452,\n\t\"./btn_big_bsc.png\": 453,\n\t\"./btn_big_purchasegmx.png\": 454,\n\t\"./btn_big_purchasegmx.svg\": 455,\n\t\"./buy_gmx.svg\": 456,\n\t\"./buy_gmx_bond.svg\": 457,\n\t\"./buy_transfer_eth.svg\": 458,\n\t\"./coinbaseWallet.png\": 459,\n\t\"./coingecko.png\": 460,\n\t\"./cross.svg\": 461,\n\t\"./ddl/chevron-down.svg\": 462,\n\t\"./ddl/chevron-down_sm.svg\": 463,\n\t\"./ddl/ic_btc_40.png\": 464,\n\t\"./ddl/ic_btc_40.svg\": 283,\n\t\"./ddl/ic_dai_40.png\": 465,\n\t\"./ddl/ic_dai_40.svg\": 284,\n\t\"./ddl/ic_eth_40.png\": 466,\n\t\"./ddl/ic_eth_40.svg\": 165,\n\t\"./ddl/ic_frax_40.png\": 467,\n\t\"./ddl/ic_frax_40.svg\": 285,\n\t\"./ddl/ic_link_40.png\": 468,\n\t\"./ddl/ic_link_40.svg\": 286,\n\t\"./ddl/ic_uni_40.png\": 469,\n\t\"./ddl/ic_uni_40.svg\": 287,\n\t\"./ddl/ic_usdc_40.png\": 470,\n\t\"./ddl/ic_usdc_40.svg\": 288,\n\t\"./ddl/ic_usdt_40.png\": 471,\n\t\"./ddl/ic_usdt_40.svg\": 289,\n\t\"./ddl/ic_weth_40.png\": 472,\n\t\"./ddl/ic_weth_40.svg\": 290,\n\t\"./ddl/icon_arrow.svg\": 473,\n\t\"./ddl/icon_check.svg\": 474,\n\t\"./ddl/icon_close.svg\": 475,\n\t\"./ddl/icon_close_sm.svg\": 476,\n\t\"./ddl/icon_close_toast.svg\": 477,\n\t\"./ddl/icon_dollar.svg\": 226,\n\t\"./ddl/icon_dollar_active.svg\": 227,\n\t\"./ddl/icon_market.svg\": 228,\n\t\"./ddl/icon_market_active.svg\": 229,\n\t\"./ddl/icon_trigger.svg\": 230,\n\t\"./ddl/icon_trigger_active.svg\": 231,\n\t\"./ddl/icon_withdraw.svg\": 232,\n\t\"./ddl/icon_withdraw_active.svg\": 233,\n\t\"./ddl/lock.svg\": 478,\n\t\"./ddl/long.svg\": 234,\n\t\"./ddl/long_active.svg\": 235,\n\t\"./ddl/short.svg\": 236,\n\t\"./ddl/short_active.svg\": 237,\n\t\"./flag_en.svg\": 479,\n\t\"./flag_es.svg\": 480,\n\t\"./flag_fr.svg\": 481,\n\t\"./flag_ja.svg\": 482,\n\t\"./flag_ko.svg\": 483,\n\t\"./flag_ru.svg\": 484,\n\t\"./flag_zh.svg\": 485,\n\t\"./glp_icon.svg\": 486,\n\t\"./gmx-logo-final-white-small.png\": 487,\n\t\"./gmx-logo-final-white.png\": 488,\n\t\"./gmx-logo-final.png\": 489,\n\t\"./gmx-logo-glow.png\": 490,\n\t\"./gmx-logo-with-name.svg\": 238,\n\t\"./gmx_logo.svg\": 491,\n\t\"./graphite-01.png\": 492,\n\t\"./ic-communityproject.svg\": 493,\n\t\"./ic_arbitrum_16.svg\": 494,\n\t\"./ic_arbitrum_24.svg\": 291,\n\t\"./ic_arbitrum_96.svg\": 495,\n\t\"./ic_arbitrum_hover_16.svg\": 496,\n\t\"./ic_arrowleft16.svg\": 497,\n\t\"./ic_arrowright16.svg\": 498,\n\t\"./ic_avalanche_16.svg\": 499,\n\t\"./ic_avalanche_24.svg\": 292,\n\t\"./ic_avalanche_96.svg\": 500,\n\t\"./ic_avax_24.svg\": 293,\n\t\"./ic_avax_30.svg\": 501,\n\t\"./ic_avax_40.svg\": 502,\n\t\"./ic_banxa.svg\": 503,\n\t\"./ic_binance_logo.svg\": 504,\n\t\"./ic_bsc.svg\": 505,\n\t\"./ic_bsc_96.svg\": 506,\n\t\"./ic_btc.b_24.svg\": 294,\n\t\"./ic_btc.b_40.svg\": 507,\n\t\"./ic_btc_24.svg\": 295,\n\t\"./ic_btc_40.svg\": 508,\n\t\"./ic_busd_24.svg\": 296,\n\t\"./ic_buy_glp.svg\": 509,\n\t\"./ic_cash.png\": 510,\n\t\"./ic_cash.svg\": 511,\n\t\"./ic_checked.svg\": 512,\n\t\"./ic_coingecko_16.svg\": 513,\n\t\"./ic_coingecko_hover_16.svg\": 514,\n\t\"./ic_convert_down.svg\": 515,\n\t\"./ic_copy_16.svg\": 516,\n\t\"./ic_cost.svg\": 517,\n\t\"./ic_dai_24.svg\": 297,\n\t\"./ic_dai_40.svg\": 518,\n\t\"./ic_discord.svg\": 519,\n\t\"./ic_eth_24.svg\": 298,\n\t\"./ic_eth_40.svg\": 520,\n\t\"./ic_frax_24.svg\": 299,\n\t\"./ic_frax_40.svg\": 521,\n\t\"./ic_github.svg\": 522,\n\t\"./ic_glp_24.svg\": 300,\n\t\"./ic_glp_40.svg\": 523,\n\t\"./ic_glp_custom.svg\": 524,\n\t\"./ic_gmx.svg\": 525,\n\t\"./ic_gmx_24.svg\": 301,\n\t\"./ic_gmx_30.svg\": 526,\n\t\"./ic_gmx_40.svg\": 527,\n\t\"./ic_gmx_64.svg\": 528,\n\t\"./ic_gmx_arbitrum.svg\": 529,\n\t\"./ic_gmx_avax.svg\": 530,\n\t\"./ic_gmx_big.svg\": 531,\n\t\"./ic_gmx_custom.svg\": 532,\n\t\"./ic_gmx_footer.svg\": 533,\n\t\"./ic_hop.svg\": 534,\n\t\"./ic_info.svg\": 535,\n\t\"./ic_language24.svg\": 536,\n\t\"./ic_link_24.svg\": 302,\n\t\"./ic_link_40.svg\": 537,\n\t\"./ic_liquidity.svg\": 538,\n\t\"./ic_medium.svg\": 539,\n\t\"./ic_menu_dots.svg\": 540,\n\t\"./ic_metamask_16.svg\": 541,\n\t\"./ic_metamask_hover_16.svg\": 542,\n\t\"./ic_mim_24.svg\": 303,\n\t\"./ic_mim_40.svg\": 543,\n\t\"./ic_multiswap.svg\": 544,\n\t\"./ic_new_link_16.svg\": 545,\n\t\"./ic_olympus.svg\": 546,\n\t\"./ic_olympus_arbitrum.svg\": 547,\n\t\"./ic_selector_dropdowns.svg\": 548,\n\t\"./ic_settings_16.svg\": 549,\n\t\"./ic_settings_24.svg\": 304,\n\t\"./ic_sign in_16.svg\": 550,\n\t\"./ic_sign_out_16.svg\": 551,\n\t\"./ic_simpleswaps.svg\": 552,\n\t\"./ic_stats.svg\": 553,\n\t\"./ic_stats_big.svg\": 554,\n\t\"./ic_synapse.svg\": 555,\n\t\"./ic_telegram.svg\": 556,\n\t\"./ic_tether_24.svg\": 305,\n\t\"./ic_tokens.svg\": 557,\n\t\"./ic_totaluser.svg\": 558,\n\t\"./ic_trading.svg\": 559,\n\t\"./ic_transfer_avax.svg\": 560,\n\t\"./ic_twitter.svg\": 561,\n\t\"./ic_uni_24.svg\": 306,\n\t\"./ic_uni_40.svg\": 562,\n\t\"./ic_usdc.e_24.svg\": 307,\n\t\"./ic_usdc.e_40.svg\": 563,\n\t\"./ic_usdc_24.svg\": 308,\n\t\"./ic_usdc_40.svg\": 564,\n\t\"./ic_usdt_24.svg\": 309,\n\t\"./ic_usdt_40.svg\": 565,\n\t\"./ic_wallet_24.svg\": 310,\n\t\"./ic_wavax_24.svg\": 311,\n\t\"./ic_wavax_40.svg\": 566,\n\t\"./ic_weth_24.svg\": 312,\n\t\"./ic_weth_40.svg\": 567,\n\t\"./lg_arbitrum.svg\": 568,\n\t\"./logo_GMX.svg\": 569,\n\t\"./logo_GMX_small.svg\": 570,\n\t\"./long.svg\": 571,\n\t\"./metamask-text.svg\": 572,\n\t\"./metamask.png\": 573,\n\t\"./page-not-found.svg\": 574,\n\t\"./position-share-bg.png\": 239,\n\t\"./short.svg\": 575,\n\t\"./swap.svg\": 240,\n\t\"./trading.jpg\": 576,\n\t\"./wallet-connect-text.svg\": 577,\n\t\"./walletconnect-circle-blue.svg\": 578,\n\t\"./wave-01.png\": 579,\n\t\"./wave-02.png\": 580\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 437;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAZlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Vn2moAAAAInRSTlMABhQdEgsKKUeEstIZdbP/wlfRwTjgpJRm8fDhhaNlk3ZW+c569wAAAsRJREFUeAHs0AEBwEAMAjFaCv4lbz7+IiHSrJ+3I40vfVzOo72it3JaxHLxI4IIIogggggiiCDia9cMdx5FwSj8aw84Ug4qCoL96t7/Te68YL7GjrPpn0nsxCepLXrA8IQ3NoY/IULp5keLJ0YbHKM1/gfd3PQni7Ak6b6bXU9y8DigIz1+hx9JsvefKwITyfBsVCIOgrPkjlGp7WDiPJqPFWF6kvHpISgox6R+DXKyI35DpK6LJn6oCPEwW/rNw6bEZC4Hc+0iu/Irmttw7wDdKKB8bSKwaDRPF6bpANUM96/aTT2GR3dOEeLBY9p7ABY6vDJkGJakG1N24krVdp+h5qRRaceyNPptgfg0O8dBuiVKt/spRbTiAa8esP4qQjFIxABwnMq85GO2K3Hm+PBVogcCqWp8zAaIMrKTHAL1CUVE8sgDJk7YU+fXlYgrOiJVneBaxjBrS44d4LkC41SOFtClergALkPI7oQiJoYjD5HUeGFMzU/qGi9T0ZKZ+1IZFRMzY5mpZ2ctvLTMfWQaiogAwY4nFOG4HHuY8ILnhtqJCFSlMryvKnIv57DOWGlWKph+Dstii4h6r8BTiggvHnQ88iCBTv8kct2JUAylMtyIgsvirOstFKNrJdV9l4atkTOWRmRSOw9YORx5QHIo5HEnAjaVylhrf5WsZKy0WivSYkmtRQQ9RFM4oQiTmW76q3/WReChh/h8sPqdiI51Yi1/3L4eafZ1DFOOClBz/69+sIiQe93SbE4oAj5TmOOzWHj0pLc0KChOOxHI9EXpMpN0ul5pZWi2pZFl+LkHnJOMUyf9Z7m0bIP6blNY8D59xoZROETV88Wf/5T3Eb6dVm3wPp4r3sS5v/bFjL83KRtcIlRL6/EuYfkbRFzvLC8Rl4hLxCXiEnGJuET8A+HaTFa3F17bC68Np9uG02sL8rYF+T+idSlyqmiqtwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Anyswap.491d1f32.svg\";","export default __webpack_public_path__ + \"static/media/Artwork.a2d41b8c.svg\";","export default __webpack_public_path__ + \"static/media/Artwork_gmx.cc61d732.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAABcVBMVEUAAAAoKDwnKTsnKTsnKTuGh5HJyc6urrWFhpA1Nkehoqrx8vO7vMF4eoVCRFRrbHhQUWARbooBqMcRcojKys////+vr7ZdX2zW19ry8vMUZIIBo8cBqMYBrMUUbYCTlJ0iN00BnsgAoscArMUDqbwiO0zl5ee8vcLX2NsNd50Bp8YBrcYAscQPgpHk5OYeRF8AmcgAo8cUaYEBssUAtsMdTl0Gh7gBmckPdpMPe5IBtsQIn6mgoalcXmtqa3gWVnoBlcoAmckDmMAlMUQiOUwDqr0Bu8MYYm4lL0QDicIBlMoAu8MDtrolM0MSYI0Bj8oFi7clMkQFpbMAv8EUd34iNU0Bi8sBkMsbTGgZXm8AwMIAxMEiPUwKb6gBi8wLeqcKl6EAv8IBxcEMl5YbRWkBhs0gPVYgRFUBwMIAycAdUlwGeLwBhswRY4wPh48Fuq8UVoQBgs0Azr8YaWwKbKkBzsAKqZ4ZS3IDfcQCxLcbXmRL8BeXAAAABHRSTlMAM7D2JaXEwgAAAp1JREFUeAHszjEBADAQArF7wL/myigDURA4OaWsg3OK+VCqCaeaSbkFF/xswQUfa2XRJa8OxNFNYF6gvUkz7u7u7u7u7m6f/1UqZArW/9wNhZ26kd+JZWvy/uMsjOPGQg8c247rOmHblrwm4a8UQ+K2HUswIp3JGhL0BOEmGRGHBzm6FYA29IXwUBCe5eMgUlAVQKUpLCouKTUvKFyaBO4KwCdBSSoqyMrgWV7wcUGK/VFeUZmpqq4xJej4SLIWSlpSIbGjgm6KBJE6eGgxVo/TSzRUFDU2NbeYEvRpUT39OCE7h9sKpJVHBblU8x0hh0a0tVd0dFZ1dfcYFrRCgp6sy6QRCeb0liNBligQwoXndSxEb19FPxtoHhwyJDg8goy6lAofNxyH7mUk6Ftqy5Eg1pJ6zoix8YnJKTY90z07ZzokQvepVa5xyg0mRs6hQ4KIpdJDzC8s9hXCtXRwaXnFtGDeX9MCHryNkaD6Oh4VrBcYFGJ1bXxdXjc2Z7e2jQjWlyk8lAC4q1v6+IgEVSjCgjmBJJlmZ3dvcR+rg6XDo2MzIaG6LGhaS/3zSTAIBaaJFrhePkuxgJPTtbOgPL+4vDIqWKYap1CGUhoPCbIUPBBaEM+SWu4Livv1ze7eLVPc3R89PBoQ1MvDW9UMetifpF1OgtKJBFPBCWIJPdHs6fn0hWleLx/eDAi6tgK6iYQ2COOQIBBHQT0iNb85HbD3j2fYg30VcBY3D8IefPj8MprieNAsikeC2sbTAXboRJG5+v54Pl0bn5BncVf37MXlw8/vPwrWkUdBXQrXrVZEKZDa8DDFyLAO92r0RCmA6/8rr0iFhKCWNjAEgWmwsmq0RY0XjDpw1IGjDhx14KAfwBz0Q8CDfhB90E9DAACtALoxSNWoNwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAYAAACZvCZrAAAFLElEQVR4Ae3aBWwcRxTG8QjKQqsUEtOJpTJzw+U2zMmGmZlJVIYwYznMya0ZjslU58Jo2Nu43L7Os2ej7eiMMt+30s8ws+a7f2Zn044PIrpbeFDonPAA4EHhbnsceDBJeEC4P2EBwAOyBZ0rIiFrkWSdAAAgm/BgO1kKdeUAAFhJdJaBUCYBABAIAKhzIAAAEAgAQCAAAIEAAAQCABAIAEAg8tcEHIExrqhPc/ui26Pt78wBAAIRmRXs4h3pIe9wH3lGBLa30V80AAJx6aszT0dXHFt+bslxZ+H841Q49xTlzzpDeTOcFJmWHM2dlr4/PD1zBq8a7qwgluU7vMP95B4cINfAMLlGFfbm8QbmELoIVa1Q2qvzANCAgbjyyekuRYuPUNHCY1Q4/wQVzLHioFNkajKFJ6dRaEI6BcdlkX9MDvlHe5zBCcGR/LHuoSE9R8Qhu18eZfYuKIuuvdnQT9QVVHl0qWK+izoP0IAQiPOrTmpFC49TwTyOw2nKm3mW8qaLOExJqYhDcEKGiEO2CEMO+TQ3eYd7yTMsQK7BQZ9reO7MrL4ch0JKf7+I0j88vx+BgDYGlxiFi07PLFygr8ifp888tyKzS8ESV5eCha4ukRkuLTzR9YV/tMvvG+khD8dhqIjDoBDl9I9QVp98yvyI43CO0t45Tym9LlJG72saAgEJBpuUvOfg00IrcgaGjOz+uZRZEYdfKO09jsMFSu51iZJ7XKWzXa6VucbecrSAQIwU9gtOYXu8c+TYcuV8thz7GoBA1ENgftSR1a/gQMaHHIcopb4t4tDzEundOQ7X6czrt4SSA80YiPaCT46fF3T5mo/98T6/7Xxd4iMqPI0HGyR8IMx9W3sbO74pMw/+UOt/+dP7np+Z+vZFEYfLIg7X6OyblXE49UoJnXzJoAYOhE9wxuGLEwinHFPvqsyU4yvifH6/YP/ZOQyG/Fx4wAECEdvxDZk719bpCZH24TVN78ZxuEGnXyumUy+X0skXY3TipdsNvYLwC3ocfiUQDiUCqgNCWQ0rFHUOqwjAJYa5Y+15EQiK7V6/oi4fl/xOsXb6NV41lJKza7l2ppvZO7yC2jfTJUbvGs6fqczLz48N0LgAgeDLitjezSPN3eu/4FUEu/3Tzjo9KU6/VrrjxAsmnXih/EAz3+acWcP5vesRCA0POEjcQFgrB46DZefasl/376n10ppXDMeeLT9/9KnfKX3gH45mDEQXZf9B9YWcdyifv31NMQFIvEDk6O1tYVCVmfs2abVeRfT4q8vhx/887xxIzRkIdl6Iqk96+X6ZoKufv4o9C6dg4HYnJPQKIrZjrd+KgrqS4PfN3es+55DU5XM2cyB6225TjpRzM2QcDOFp9fPbboF+JDnl2Ew82CChA8GXEhyD6vAt0NiejTN4v6IVBMIa99P/D12Jg/r5z9vONay9BwDc5ty7cYUSBUNZSdjfdpp7NnzOG5vGd9u6sPLvxNt7NizncQ5JC/pFta8yLvE3KR3S/QAIhE1sp7zUkMx9WzTewJTv14m1wdmiKYEAQCBquNSwrxSMnet28DhvVJoyHvb5qt43dnxt8KVIGwoEAALBYns3zLQ/4dX/L1Exv3PdAXVlwe/zOM+3ojgwzbqrAYBA1IK5a50uVwa2SwUAQCDkSqFyRbDWj180AAIBAAgEACAQANDwEAgAQCAAAIEAAATiAdsgAMADViAeFJKsCQAA2YQHORB3cynkAFYSAFg5JMkm3N2ODxmJB3kQABLeg1Yc/gOptOvB5Z4VkgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Hop.4b77c9e3.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/Hop_dark.423942af.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAABmFBMVEUAAAD///////////////////////+PcOZ/UON5R+KNT+iFQeWSYOi4hfWIP+aRP+iIP+WUP+ibPeqSPOiiauz///////////////95VON4U+O3N/C1LO9+WOL///////9yS+F4SeO/JvK+IvF4SOP///////////////9+WOWHVeXRQPbKHvTRO/b///////////+pOOyxKu6+KfG7JvCxKu+wRPH///////////////////////////////////+qL+21J+/CIvLTS/PCIPK2J++sMuz///////////+eT+2iOOu3QfG8MPDNQPbUH/beGff1Zv/gGPjVIfXNNvS+MvOiNuv///////96SOKHQeaZQ+noMvrvDfv3A/3vC/vmRPmHP+V6R+J7SOKIQuaXQefvDfz3Bf2ZQeehNuuzPu27MPDUHfbeG/fTIfWiNuurMuy2J/DBIPGtQO2wKu68KPGwKe7NKvXKHvR3SOJ4SOJ3UuK/SfG0Ku+7QfF7V+OUPuidPeqIQOaRPueQP+eQT+iFQOV6R+MNOs0rAAAAhnRSTlMABhQdEgsKKXb/V/84Gf+z/7OF4SkpZYRWdnVmwVeT////wv//lIU4s1dXOMI44MLSdv+U0v9H4dFHV6PBGbJ10v/gKf//o/DxZkekR3Y4lIUZk4VHZrN2pPHwdjiz/8Ip8fDS4Xaz4XazV3WUhYWkpP//V/+z/2bB//+FOMJHZrKF/8KzVzMrutwAAANDSURBVHgB7NDFAQRBCERRfHxa8091PYK9Ur8Fzo+IRdMnTMRqHslzUyaxQGFC6oHClfQ90f8QgAAEIACxAOLTuq2AeLcfOyDO67dcZ2qI8y6/rdQzM8TV+m/rYz65LYvt9nkgju7mDWSXp2Q5JdsfxkqscmunzMzMzPjqf4+isrv3iQq6yZzfQlf4W5gZZhkrYRHlFRoqqyo1VVckZGuQmlm6ImrrNNQ31GtqrP0ZtZDbYGeQl6yIpmYNLa1tmpqbfkYdV3WeU9JnxF9//6Pp3//+T45mfdUJDsJkRDkTmMlEPjClqhj59g4iYcqOIK8QmBnkDSiW24MalnoRnV3dPQp6evv6k6MW5mWRBFrUOdmY8ui6GMYF6ccUhQyAox+5HvoSwMYsEaiy50ZYSLeIgcGh4ZHRMYDxicmp6aGZgaSodBHbDUmYdYAGOQsCURBxGn4OgEUZIk+SrTmAjEcrhypBJADkHLIUi5hfWFT90vLK6pqixfWNpLCYi1AtiwINzUL2tjZcF8C2iTIOiWCEcxgXHEk5pqyRzGguxSI2t7aLInZ2d5YU7W1tQnKz52jJS5p4x6NpL7yJANNH9H0E4BFQy6GI/8J8hw1quwTUQjfdW2P/4HDq6Bhg/Phk6vDgNGlrSCFVP0urYQ6ZmmOB4k2EhXOcW1kSoU9VqjHuIgaStourWiblh+XZ+YU+LC/Oz5LXAs7q8c2qDxayLyL0JiERqI0x0EtjDgooFNss5SIur641Xd9cJkcjX1LH1ZA8h3bGFxE8BhYqEVxfKhBliHwXZBQULfIUi6hu1nB7d6upufpnNIehWWa2ozruCoizX0W4oSGMMFIisEYYvjpQYxI1WKBAYIiO0JNpfmLf/3hiP9QmZIWLiBGXxDJC9lWEpKrFkdFFmkXM5qjCI4ooj/F3OCfT/I54fNTw9Pyi6fXxl0vjnRwvwRT9K54R7H3EjL2T/WdDoRve0AhlNTbwEmGOJZ42opr8UB6YaWqGslqaCA7MqFuLuxuw4QmIkTJUJ2ruoYEns3vqD/XB29a2VjA9OpzfPjqcPzrBgxWMBsRoQIwGxGhAjAYEK4geXUwGXV44urwQuuB0dMEpdAny6BJkAMRHfxzYlb9eAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/Synapse.3cfd1d07.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAn1BMVEUAAAD////////////////////////1vjzzuzPzui/yvDTyujD////////////////2xE3/////////////////1nrzuzH////////////////zvTb1wELzvDL0wEbyvDb////////////////////////0uzDzuzHzuy/////////////////////////////0vDLyujD////////1wD3k7xDPAAAANXRSTlMABhQdEgsKZqT/o/EpRzgZOIX/wcIZ0nbx4JSEScJFiVeEk6NlsvbR8vDS4dFmpLPB8FZ1ZcrSjpcAAAKDSURBVHgB7NABAcBQFAFAD/SPvPX4LsIBRz2PB5ycPi7Wge7UhNJpBHV+i1jEIr527aipUR8IAPjTP4KSpGxigaoK0P49AFDv7vt/ttvNmpnrVfrgE7TZmcBOlIf8Jlkk5hsQNwHCRRTfBgjnEKNEgCAHkrhyCHJgieuGYAeWuGYIdri7uTsjkUgKRamW6kIh2GEjNmckUnBh0ECCvUyI+y07CJbY3n8NkUkps7wQQtndRUKQBDuQxIwDQki67UBdao14eESJpw1ebpFg84SX55dZiJJulWtJbWopKGRtqoTqSJXIxlSaOxtTl8LF/mDqZOkQD/H/jzwtXuNXngzPP+KXOYhDroWAFNuh7WwONNQGOttTJqEBa6HVrrPHzgYzPbifj0uGIIeYJdAhZgl0iE8lUhiMMUWOHAxBF91bGv6EfbaljLQUpK6kYOdIwzf0jJ5ArgRiy3VyHqKz1vZQe4iee+nFqt2YE4RwVdSiTmEFxbRjF4z8bS1LY8sO55fG6BCoTR5ClAeAwoBEiPETQvPoKTIYDEVbrKFYvlOxjKhYvp8vlqKzBMGNIUqwaZp2DkIyhJ8GfipxLByC68PH5+vzg+vEPIQ9gbAdZdkRhOBFIpRCp9KnS4egOkkS5MAVcx5CwXQCMVA2HENMrXuftpPQueEH01X8iU0S7BBHMzOiqaqqafPkGIJaJX8aOIZI8vaX3Bf02yOYvdy3vV48hJf47R3mvzXyt0T8CyF2AGAzGP+GEMpSr1sOZY/ppFf2GR6Jb4T6cpRS+NBqdRszUdiq8w5h89Y7hO18cggQ4R88sxEgAkSACBABIkD855JwmCwcL+Tjhf7AaThwGo4g8xHkP7gaLtKObnJaAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_arbitrum.ff6ad480.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAB/CAMAAADW6DvgAAABF1BMVEUbIDIeITUbHDAXGCwhGi2HLjhhJjNhJzNOIzJPIzI8HzBYJjNrKDRqKDRYJTM7Hy+QMDhGITGsNTwqHC51KjWaMTqPMDkzHi8eIDYbHDBFITB0KjYeITaiMzt+LDceITajMzt9LDdCIDCZMTo4HzA+IDBLKDmBMT15LzuuOD+TND05JjhRIzJyKjVwKjU2Hi+RMDgyHi8oIzdSIzJUKTp7LDYjGy5PJDKeMjuELThAIDBjJjSbMjqKLzg5HzBUJDJ5LDYlGy5hJzSSMDkfGSxqKDUpHC5EITEnGy5VJDMcGS02HS9DIDFAIDFFITFDIDAsHC4eITYcHzMaGy8TFiMeITUAAAASFiIcHzJlLDowJDduLjpCJjgHX8VeAAAAWXRSTlM4+O////////////////////////////+18P//+f/////////////////////////////////////////////////////////////////////6vvJR+SRTwHfs7R4AAA1sSURBVHgB7d2Hmuo6lgVgute2jKRNkLYoTcPgQ01NzjnnnKdzvO//HAOc2+jjkGRjwFT5vzmHtSwkWTaDwTe+iZOowJYqkY2GWhP2KIMvkLGsRuMJnf9Hm6lDiwq/UeBGRDOPBfUwGgh+bfZCuEY08ZvfGPzCt3Ca1vhMOCLL3DrCl5zBUWLUyRZYBVpMI54i/yRa5iHdOn+wnzmYqcGVvjX4xcx/OWszwldacIQxOCM6xVwOJ0gAWr6Uy4rQKpvyv6WoeDRHJoUrKEW4zuATTiOFrawhIFobT/4hJOdbELFFL36N0C6aeu9XEXdgFJcTXCYa1xB2N8zfCoCsISAq5doouXFKcTmfvPgNg5aRVZZwJ+SUGkecZwyuY4LcLH/GPlERR8hY6TYHOXKV31J4dqKVGgpOU4RrqZJuk390+JJTdBB+sNT6JCfl//zEspoTjmNcT8IQtChepeX8FQ4RGyQ0rlhuMMkhv7ESvBfR8miCI1SLE1tvkO+XLuZPFse4INiiYQjmJpPcuJxN1/E7vCtGqcMpYWhzZfvSav5acJRUJUDD10ITcIv8zcwCxuD9Icf7U8KocA2aTCbjclS8+c+Q7Zd/JeVfOzR+e5kpQdJq/noa8Y6R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\"","export default __webpack_public_path__ + \"static/media/btn_big_bsc.5e5ec82b.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_purchasegmx.86c08dee.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx.01459500.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx_bond.ed3174dc.svg\";","export default __webpack_public_path__ + \"static/media/buy_transfer_eth.373e200e.svg\";","export default __webpack_public_path__ + \"static/media/coinbaseWallet.ae86a337.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/cross.2c9772ea.svg\";","export default __webpack_public_path__ + \"static/media/chevron-down.88670207.svg\";","export default __webpack_public_path__ + \"static/media/chevron-down_sm.697f08ea.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHjSURBVHgBfVO/a1NRFP7Ova8NQYkZigSDJbqJQh4Ogk4NiqIuCiJuDZgOQhGKk1P9C1Tq4KJQR12yiRWkg4ODg3EQp7ahpTSUQtMftE2bvNN7zstLXtMfH7x3f5zznXO+c+8l9GB7IlsEYZgBn8BpBtUJqFjCZP/o4qe4L3VI7zM5apkyM3wcjyq8oJB8VqvKwkRENM10L9EMXEbfvY8w2ev6Oaif+kdk2VBDG/bSYySefEffrTe69q69iMfMUZPK6tfWWIxbeeUfTOYqzGAB2FoGDVyBHRwCNhbAqzOiNjN+P1U10pyjxFF/Sse9r0+x+/k2kDgD7+bbjr3FQdELu3oEOXsD3FiHzZd0pEQKvL7QrQ7kGzmOXqI0SpyDuW9K9PyRsIofY93gQNrIOcaJ9uIdWL8Ulvb/C1p/P2C3/Ci05UuxzKh7hKDi4gx1IrqsxpUskC5LqZQ6HxpdFd3MXLEv754mQ/Qg2gwWf2m3ldBYA5066wLMOwlTaP1+7cpptNn8Snu18+7cH2lcR7O7EKLZ5kew93Ncgx0AczX5fOmCp/Nm8BCWpkGUi7Kr5tkpHIIjunMqaBL5Jcdq4YYYToDoFD/1R+xhRNicyBQt0TAz+URIu/teJ3Ik4snkaO3Aq9oHE/y09owWmgYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGoSURBVHgBpVM7SwNBEJ7ZXHwSH6CFlQG1sPMB5hAUrQQro8ZgpWCpkNhZCLn8ApPCTrC0CDGpUvpsYoQQLSysoq2CSKIhJHfj7pm73AmagB8szDc3s/PNzB7CD5QSsps0ChDBEqdu3UmQA0Y5xli43ZvOW+PRSopxTxAJDuAPaERhly+jGJwZxkdMVhol6wmIoUJsSrEpKMblTSQ6FrZjcBFY34S96ksW1OeUzaeq5O3yZ5LsWwaFzAoiuVIA9SllHkf/OLQtxAE7BswLJAl1tViIyXMM6dz44JzcB+01qydaIQ37wTEwA+XrnboyUufxM+EJkAoR4WidPeQKxqERSqfTRv9Bia+sx1hG+Wr7VwVGgcrDkckJqef/CtQq3vEZNFQgDa8B8gFX0numD5mWYy5f+oLbeWswOl36xMVh/RPgHN0CacgP1fuINSzfvnx7KQlLBdp1ACaELaqLVUrdI2ak9v4I1bMNoEqx3j+QUmuj1ldcDvFnqkAzQFI6VzJh2wXNXiIG17F6E7VwO95OZHeLU+MvE8c4Hau583zOyXIVo73r9r/xCzLjs4Txvi/RAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHoSURBVHgBfVPPaxNBFP7eTBI31Wr8RdpDYRURxUMCIogemoJnrUdva/QoWC9etN0kXgXJP6C5eRK8efHSkygICYq0IDR4MIm1ECGaNMnOczNpNrtT6INd9s1775vv+2aHYITjNmwB+RCMZT+195arIFQVvGKlOF8P91M4ybvNFbB4gYOCveLLZ/OFSSqC4dVWwRw+lZK4cTUZBSDp5lcbUYC8+8sBkWtu9uDOUVw8m0D6pNwH4jxtLU8ZMPYNX89aWJiL6e8rlyyzDCFIsxX33e0cpmYF1G8tHQ7yE8cEMucTJobtPGnkBAvOmJWbSzOQPuuNrQE+fumh+dvTUo7MRDz3e2Qmxh6lRhomkYgT4v5T2+zrvLfL2Nzpw0oQTh+X6PwbBr0MSsVIcpu9KWp/wPj2vQ9PAecW4nptOGT8/KPAKsqUwG3hKaqZEqxDhAt2HOufu9hpe0jNSixeTqLTjSIopqoWdXettUUgO1y8d3sW1/yT+FDb1azevO/gb5dD9Ln+qpQ+o4+RCY9MFq/fdfTuSYvw6WsvMrwnoKCNHL2q6883MouPR/91blIe+F79aI4NG7GIUAcXKqV0eexDKJy1bVf4RRwQCmqlUporBzzMBn0blXR9WVm/mB3rRZ0Yb5XwyuZt/A/V0KylFRZwagAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEHSURBVHgBjVMLEYQgEGUuAQ3EJNrACNLACEYwgjYwAhGwAZqAa8DxdsAB8Rx3Zt3Zx779gYyVIr0qr9arCxZ+zx5EeNWB8E9NiCuIhnP+RHThvEhARK21W9fVCSHcMAxumiay8JdlccaYmECnM1JmBNyJtZbsPM9pJ7QDFQFUQCAqNE1DGCx8yGUs8M6tOiklBXVdl83ati3hGCHB7cd/eOy/qiqy27Zl29z3nayvnMIc5G/0juMgW9d1RvaVsyRBvsXMcUF935OPljEzMPjXmWUElFLZdq+Cq0yWdr44DRAVcLc4xNLGcaQOcAYc56G6SfsXAC5tvX5hZwL2/Lb1HTEVyV7+VT9KbxPpO/XgrgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFDSURBVHgBrZIxUoNQEIbfvkcVmxyBJmoSC3MDPIGWJmNBTgCeALhBPEGoJCVHwBNoJRgbvEGqjEXYdWHChHlA4Uz+hvfe/PuxO/uD6JH58D4cDC58Pt4jwjLbjJIuH3QXDlwA6RDRsGEMCyyCbDPOewE3T98WIq1LjugTUoACwxpUAa4fU1MpY81/tDSzz+YfCdITAE1oTnR4TqNJbJQ3KZXVLCYSCVGxbLQbThZfHgjpkqjGYpjh8DeWrQ4R/DS6vNNn/Xy9Cgo8zHR/C6AU5KJHOrQT8F+dHwBEZp+5zIj+ZugPKMifLrZmMzRauNoAxCJRSvHqhFXe2WLzau3pfLviHX8QoV9y6mIOz44Q4+P5JA6U3RGa03hVIa32v/uXPJ7tWoBa43nmggCnCeoIl+gFHLsxeQyPK2+RE5hFo7cu3x+G+J1ieOsLEAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEuSURBVHgBlVO9UgJBDP6wszut7LxWG6mtHF9AHR8A3gB9Anpt7C3Aws5CZ9TKmbOhgzlooIKDBjoWKuhCQrif5ff4ZjJ7m82X5MvuAUsgojybx2ZIYRb7HDaBD102n7YjkLh1xIDSwU6wBzGEn9SYcPfTJsgJ2bNcZsKeDjf2rIlKVd63ubehnsXwDrh4dmV69QHgOsBoCvTGwN078PDD/n4yKitkxyKOJmo3ZyIKKF4DhUtN9Pirq8KRto3VdvGPWzR2m7LmP1jKE1HhOxIoletR1c8m8NXSyu6R+v47al0DnLIvk4nECfktIjuHGiQayzXgpcJJjoHbc6B0DzR4FhcnYXQ5vC7fuiqZ9tWrrnGb+h3MVQa7X5gkCvXHkDjXGjKle6L+CnEpSeq/agZ2kCMI5PSNywAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI/SURBVHgBfVNNaFNBEJ7dF6sRUhJUqglK/KG8kEKF1tSCQiH1WEguHltvXgJG0iLtJcnFIFFsIR48xpteInpsAgpCTPRQpcHnXw1CA4KY0iCK5L11ZrfvNemhA8vb2flm9vtm9jHYY/qtatA0XTc4FzEQEKQzAbCGnzXOzaxxZ7LZi2e9Tmj+ddJi/D7sYwxE1shPZGyfOzcv1DJ2cuJKAGYvDTlJc5eHID5+FBQbliZsXwF9oX6NAgHfQSglR8BzSIPS25/4dclVXm9D5IwHY2EZI+xwqhZzCggGaXWzHyrrvyD3/Dt0/prSp7XZ/geLT75BpbEFD+bOKSkaSLZcT72ZomZFznrkLYVySwJyV0/DoFuTKzHtl2eF1U3MZBKHtwb1VHXKJbgYpSAdFl/9cHST5mjuPTLpwgVK2LEKyomGfVDf6IDg2igXgnkpQPoJbFthtSXpFq/rEDpx2DnfRgyxktIxlzMmtsghzdQwMgJ8aP2G2HIDEsXPOIXjToFBxGz/MVUfMJczy3xHTrnRhumwV92CgKWZU3Kc8fFj6O8yi474sJltuTfpcRn3Jl/gvln/2pENio+pec8+NFDWAIT8bslEvgd8GwHvgNSPAppf8pGXkrOwxE3GWWnx8QY8Qs2USNOgriu9TLEZOyILqxzISBk2teH5WpoxlqFkApPR7MmWZk6Cx+2C28/U+xBCZD7dncj2FegtAvualfyYv7hie2xvWE9Wg9YBLY2B86AWWdMS7KnW7a4Yy/1/43+jYdjzTW6D2QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHYSURBVHgBlVM9SCNBFH4zu0rk7nSvuuO8g72zuas81MafQrEVRYuUatDeYONfkU0VtVDSC0HFysJYWigR/Cn9AdFGXDCYiEViUBR15jkz68ZNiIIfPN7bN+9973vDLIEimLGg8UQrghxIFyXElDmOaBOCiTLGo3ZgyvbWE+9H9cJEUCRCCGjAGyAMw8lAxHK/NTf4OT9mCbqICH3wHihprepsIbnVrUReQfXCeL9wMUX02YBfn76W7D2/zUDyJqtizp66U4HpuP5yFnKL/H/qYLi2vSTBzME6zBxuOEI0fVa4ODFj4/8fNdhzixq//VYmMfivWfm5423ldy/PlEH+PlibznRqAvJ88iiTUlZVXgH+mnqoLPfB3MkOVJb5IHmbLVDEdK1W58gN7/Tcw70ikF7i+uFOxdLkuSRcOz92FAAYupdRypNF/po61XiUuXBW+dukLlCSuM0SCJDVGWMJTdMKSNw9ww0doghhILEEpYCI+zQtX5Z4ZfBBiGY73RvZpM4uPAwfhNjfkl5pz61s2196mkWStHqL5GUun+7B1f1N0XRuXfRNRl+IXvFjcTREkFrvDM5yZFaqbyrqUVKI77ERk2h0iKJQQ8B0RoKNwOOc43y66G98Bj1CxfZyFDl9AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgBdVJNaBNBFP5msjFRobsVsRVtGEE9RVgFT0VIQS9ejBfFk6voRRA82aBoLkLoLacetZ4EDzYo2INCAtKDl2bxKBTWRDH4uyuIxmRnnDdN0iS07zLvvZnvvfd98xjG7NtMwYNilxljrlLK0WeoTz/BsTTZKD0efsv6zk8xL2SXLyvAxTbGGAKekHOTwUIwABtgzKtKQVAcyTaacajPv8gmp2Hz1JYFLEoMA5/8fodfqg3oxMfd/3D362uc3XkUtydOGTC9kx2+rN3jrMfxEV28/PMeGcvBK7eD04UryOVyBlCr1fD25iKuhYcHE2gNPIvE6SeacYTWyT14sDKiiykiXgg8PXcPF37MmFws4XFNwgi02v5gOp8p3dhSLCEE0ldnERGlDXN1Z+WQN8HSJhMEAcrlMlzXRaVSQT6fHynS7Eawk/vIdSzdOaQCGcs2VWnEMAzhOI7x+3EURajX6+YHehZSZ59o2TyNS7uOwfd9eJ5nbse7rr9Zw2wq04uUz6VSA3Wyepz712+Z0ceNik49W99MKLZkluT7wTt1BeWeaC2ioTmROMVi0fAmqz5fQerhGi7GR3pABHs/lQ4Z8OfpeZFM8KreN7Habox0tFkK2R1TQx0RdGI5t7+1EAx2e7gAtjG9XX43lucJSDEbf/DlQMHjDHpxuJ6ZvlH/BqRPHPWoI9vzH5xq3+2NFxVlAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/icon_arrow.59b289c0.svg\";","export default __webpack_public_path__ + \"static/media/icon_check.a37b7ce5.svg\";","export default __webpack_public_path__ + \"static/media/icon_close.9972202b.svg\";","export default __webpack_public_path__ + \"static/media/icon_close_sm.be2b83ff.svg\";","export default __webpack_public_path__ + \"static/media/icon_close_toast.d527cc94.svg\";","export default __webpack_public_path__ + \"static/media/lock.3a55a760.svg\";","export default __webpack_public_path__ + \"static/media/flag_en.c92a8361.svg\";","export default __webpack_public_path__ + \"static/media/flag_es.4ba7dfef.svg\";","export default __webpack_public_path__ + \"static/media/flag_fr.589da1a2.svg\";","export default __webpack_public_path__ + \"static/media/flag_ja.81aa61af.svg\";","export default __webpack_public_path__ + \"static/media/flag_ko.97c8fe63.svg\";","export default __webpack_public_path__ + \"static/media/flag_ru.0c71e16b.svg\";","export default __webpack_public_path__ + \"static/media/flag_zh.fd0e8daf.svg\";","export default __webpack_public_path__ + \"static/media/glp_icon.ef02d046.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABPCAQAAAC3gKgqAAADyUlEQVR4Ae3BfWhVdQDH4e/Z3Uvb2lZukS5sOEI3UHS95xbBqg2iQmcvpCRZZClYkBoWaAvpD0ncHxVCFjE0iyE6eyFqK6K3RRTaiy1ptaXljDnL29h2t7v7iZGeTuuen9vd7r3nynke+Xw+n8/n800EWToXUMKrVCnVkcELwPsUKbWxlH5GbcZS6mI23/OPk9QqVZHNTv7VxiVKTawkhFMDAaUeKujkv4LUKdWQTzP/9zWlSi2sI0w0O8hU6qCSbqIbYLlSBYW04O4w5UoFWNQTwWQ3OfI+aujFbIhV8jqKaePsuqiQlxGggfHZT768iyX8xfiMsF5eRSnfMn7dVMmLyOJlJqaFafIe7mOQiYnwFJa8hXl0MHG91MhLyKWJ2LRRLO/gEYaJ1TYC8gau5iixC7JIXsAFvI1ZK3sxOcAsJR9PEMGki/mUcBCTF8lUcnEDv2MyxCpJoo4g7vpZqmTiIj7EbDc5kkSABkzaKVOykMYzmP1AuU6jmM8x2UW2koNb+AOTAe6VA7WcxN0QDysZmMkXmO0gUw5YbMakkwVKNNJ5DrODzNIYFPEBJs3kKbG4iz5MgixWFFzPcdyFeUyJxGV8h9lWAoqKxxnB3TEWKlE4j0bMPmOGbAQIyEYBb2DSQqESg/sZxKSXm+XAA6yWA1fQhbsIm5QIzOMnzOqxZKOCI3RzrRxYzRDuTnCj4o3z2YNZC4Wykc9+Rr3LNNnI4TVMPmGG4otHCWNyjIVyYB1hRkXYKAfKOYzJs6QpfriGXzEJs1YOVNLNGT1Uy4HlDODuFLcrXriQdzDbR55sFNKK00dcLBtZvITJV5QoPthIBJOfmS8bFk8z1hbSZKOUbzDZTqamHtX0YBLiQTlQQy9j/cmtcuAO+nDXzzJNNabzMWaNZMtGMW1E8yUzZSOdBkzaKdNUIo0tmB1itmwE2Iab58mQjWLaMNlJtqYOt3EKkyB3yoHFBHHTx91yoJZe3IV4SONi6awo0V5dLpNf1KiQLI1C6bpHZXJ3SIusDp2GpXo9qXS56VKddUCTRwbbmWqvkCUbRbRiso88TR7L6GeqDbJCDlRxHHdh1mqymEM78dDBXDmwgRHc/cZ1mgyy2UW8NJErGwW8icl7FCp2rCREvAyzRg5cyRHcRdikWLGATuLpKFfJgTUM4+4ENykW5NNMvL1FgWzk0oTJp0zXxLGeMPE2wgY5MJcfMdlKQBNDJT0kQi/VcmAFIdz1s0Qu0hVdjpoV0fhZik1Al2JZ6IzXVag5iii6dOXKq7Dk8/l8Pp/Pd676GwYUP6Kwt1/bAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/gmx-logo-final-white.b7833ed6.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-final.0b59e423.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-glow.83c5aea5.png\";","export default __webpack_public_path__ + \"static/media/gmx_logo.2b33868e.svg\";","export default __webpack_public_path__ + \"static/media/graphite-01.6f3526cd.png\";","export default __webpack_public_path__ + \"static/media/ic-communityproject.9b5f97dd.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_16.f4c1a9fe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_96.b12913b6.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_hover_16.d779b479.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowleft16.21502a04.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowright16.b425521a.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_16.90aca01d.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_96.b6255c50.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_30.403cd87e.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_40.ba220dde.svg\";","export default __webpack_public_path__ + \"static/media/ic_banxa.06412144.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance_logo.46794a16.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc.8de996f1.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc_96.369f1d28.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_buy_glp.8eb00e6a.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAsCAYAAAAq/ZsdAAAFI0lEQVR4Ac1ZA5AsSRCd2FkMvm2cbdu2bdu2bdt3obN9X6tGrW3vxv6x509e5dwtukZdXYt5EW9ZNf1eZFZmVbVJL8yyfJpZlT2UYIw4VzrVlC3IJXINChNhriLXZJOh56gon4Ahbw5RHs8SO+JRwrmmbEMuIfuYiRzgNYNzcK4pG5Gryk9j+vCkGs7JGgOiqYdjj7MEzj/OErrfCHHuBBiS9slR5XpMpXTEMZtf037hcdYgiPAEe3gHU7bghBkw43hrsNWoGZw77iLNqnqWWVW+yVElNR1xDG2mZ51gCRxg1BDOHT8nkrQFFfgLpVvP+rmorRUe6ekJPtrTU3P6Lt7PDRh6Ydy85CjSlVRkxKxIusr2TrXVMBq3NnVtOGq2b5An1TBdxyfFiPwRFbmep/cc1FCvMfRgTzfY/yqLzP6iehJTTVEW5SqyRA3FU0zUEP7dUkRiW13W0X3EIu/Tx9kCDyTjsZbABWNvRi1ckUuUOr0phpxdTuDGzg742+MG4vdrDLWEQvG/v9DfB4c01ofiG9WysiWmCUF5+cxcVaniMYNrxhGNgl6scnpg578anbsfMHgKjcj+oznmfcesyKuoyCC/GT784vDBwnfqk66hY63Bv+g6WiFuRpVf5dyrwT8eD/DCR/3fWBeDZauaYaMHW1IVBwfl9SLV7HTeUylGJxnQ5Cq3B9a4fEA8G6CSeu4Pac2cQP7jrNXVsOPpPelK+Ff8JbyoaBoVOMBbzW6iRYAFVjhrURmsLGxFwRre0xiDy6q1fzuAeKGgSIVDNvKkK+Uq19rKJdKLQzsAHmI5ZmEpIbBVcReK1c0tV3fB8kebMvUnB5rS1W+ouBgl8PKk5iZg8fWAH0Vy07a6DPbbySFsCrc193JFh+k9qVDkBHixnUmxNNx6VTesvL8ZRYuZov2mnREqnHYsmv0A3/ZriwHLw0kILOuI3o2rioUi6WFtqLKJ8Pv1LtCLCk9qYzP/qYZdj+7Xu4H9KjHdiHIP00S5iUVgb+KCL3rjJVkXvNHkppaXtsCOp/bqPmIcawudwDRS5S9RMxutaxsWdHZFDN7tikGxEzKiLwQJhrYhPbDpg208Z6YWxpD0i4ihXMojSChB2JC5x1ti8OfgUFNNxEvt2jl7Egcs+LSexxBoduc0Ql4RQxsVtukuy9hUGWAkNWMOI0GYsqacwxATJbMitxk1YysqgwOJl6fX4BZIA/ydHTPr92o4YoEPhXKvJUy5P40amlZUmZBij7XEv6dMQW80s6Gt3u3kv1CxhT4wIUQu4Dcr7dCIbfYPVTAszYnEIsAAK6PGzFEkPNSLeOkYMvS3ETP2deWwB3GwZriPEGw0dyODsPDdeqNXXiv+v2OTndxbnj9rYC/iRBHxMs2PxAqHnLu6DnY5vk/sDo8K/I23uVpKCRxJwsNCvhvgiUxyM5uXdMKitxoMmUHiBYspDlWdkavIMs8WaObq6gRBuAnFNYELvYVJQexD+HeMJptmx5Eobc6tMPeLWjhyrk/IEHNiVd5BU3qiNefvGq6ewy7+Y6kJPNhtWdIFtnVlsNFDicdwYUOIPEJ2zFXjrx8bKMO5RC5KGqFfqwzdyyE3+bQN8ktVmPldNWxyeyvsv71T2AxS6D4PK0q6D79+d22N/vyRqIBYjionAvohf6d7wIuXReJGkGcuGF8zqMWYCzZKlqBTTIg4UcNQdISBR2GBF1rCxGejhjF/S4cVhj9aYlHBZ/Lf1/Gn4QFxc+PIdK9a/gVaRiAcqhHzNAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_cash.21569a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_checked.b4f2217c.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_hover_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_convert_down.74b7eb02.svg\";","export default __webpack_public_path__ + \"static/media/ic_copy_16.fafdf331.svg\";","export default __webpack_public_path__ + \"static/media/ic_cost.56371371.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.6f901476.svg\";","export default __webpack_public_path__ + \"static/media/ic_discord.be4d716c.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.5e255508.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.1e127166.svg\";","export default __webpack_public_path__ + \"static/media/ic_github.dbd4de8a.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_40.087335c1.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_custom.11dd75db.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx.bf8fb0b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_30.375de394.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_40.8cd483b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_64.f4caeaad.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_arbitrum.59f04e87.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_avax.fb50658c.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_big.a0a74216.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_custom.fd35b66a.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer.e7821eb2.svg\";","export default __webpack_public_path__ + \"static/media/ic_hop.0f4a98a0.svg\";","export default __webpack_public_path__ + \"static/media/ic_info.f334ee0a.svg\";","export default __webpack_public_path__ + \"static/media/ic_language24.ceaebef6.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.4bb3a048.svg\";","export default __webpack_public_path__ + \"static/media/ic_liquidity.f00d35e4.svg\";","export default __webpack_public_path__ + \"static/media/ic_medium.f6051b2e.svg\";","export default __webpack_public_path__ + \"static/media/ic_menu_dots.87c2cfaa.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_hover_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_40.42c8b575.svg\";","export default __webpack_public_path__ + \"static/media/ic_multiswap.e577f4fa.svg\";","export default __webpack_public_path__ + \"static/media/ic_new_link_16.5b7cb7bf.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus.70b17676.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus_arbitrum.b358dc93.svg\";","export default __webpack_public_path__ + \"static/media/ic_selector_dropdowns.aaf0b8f0.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_16.9d97766b.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign in_16.b6f5b1d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign_out_16.1b0564f3.svg\";","export default __webpack_public_path__ + \"static/media/ic_simpleswaps.4cd51f2a.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats.f0a18011.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats_big.4a4ebfb7.svg\";","export default __webpack_public_path__ + \"static/media/ic_synapse.b100121a.svg\";","export default __webpack_public_path__ + \"static/media/ic_telegram.af1a4a66.svg\";","export default __webpack_public_path__ + \"static/media/ic_tokens.6a27251b.svg\";","export default __webpack_public_path__ + \"static/media/ic_totaluser.e274ef10.svg\";","export default __webpack_public_path__ + \"static/media/ic_trading.2c53815a.svg\";","export default __webpack_public_path__ + \"static/media/ic_transfer_avax.53893264.svg\";","export default __webpack_public_path__ + \"static/media/ic_twitter.9f35b403.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.efe1f12f.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.e357d24a.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_40.ba36eda4.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.334ca16a.svg\";","export default __webpack_public_path__ + \"static/media/lg_arbitrum.bdf133fe.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX.b956aa96.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_small.f593fa5c.svg\";","export default __webpack_public_path__ + \"static/media/long.0bc4a064.svg\";","export default __webpack_public_path__ + \"static/media/metamask-text.2f9c2df2.svg\";","export default __webpack_public_path__ + \"static/media/metamask.4b5d438a.png\";","export default __webpack_public_path__ + \"static/media/page-not-found.bb90d073.svg\";","export default __webpack_public_path__ + \"static/media/short.1f94a0c2.svg\";","export default __webpack_public_path__ + \"static/media/trading.7ea1604c.jpg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-text.78166b41.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect-circle-blue.31c29967.svg\";","export default __webpack_public_path__ + \"static/media/wave-01.3c9bce1e.png\";","export default __webpack_public_path__ + \"static/media/wave-02.4a56e8c7.png\";","var map = {\n\t\"./ic_arbitrum_24.svg\": 291,\n\t\"./ic_avalanche_24.svg\": 292,\n\t\"./ic_avax_24.svg\": 293,\n\t\"./ic_btc.b_24.svg\": 294,\n\t\"./ic_btc_24.svg\": 295,\n\t\"./ic_busd_24.svg\": 296,\n\t\"./ic_dai_24.svg\": 297,\n\t\"./ic_eth_24.svg\": 298,\n\t\"./ic_frax_24.svg\": 299,\n\t\"./ic_glp_24.svg\": 300,\n\t\"./ic_gmx_24.svg\": 301,\n\t\"./ic_link_24.svg\": 302,\n\t\"./ic_mim_24.svg\": 303,\n\t\"./ic_settings_24.svg\": 304,\n\t\"./ic_tether_24.svg\": 305,\n\t\"./ic_uni_24.svg\": 306,\n\t\"./ic_usdc.e_24.svg\": 307,\n\t\"./ic_usdc_24.svg\": 308,\n\t\"./ic_usdt_24.svg\": 309,\n\t\"./ic_wallet_24.svg\": 310,\n\t\"./ic_wavax_24.svg\": 311,\n\t\"./ic_weth_24.svg\": 312\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 599;","export default __webpack_public_path__ + \"static/media/icon-GNS_v2.43bcc479.svg\";","export default __webpack_public_path__ + \"static/media/icon-Hegic.e537c8cb.svg\";","export default __webpack_public_path__ + \"static/media/icon-Lyra.5cb62325.svg\";","export default __webpack_public_path__ + \"static/media/icon-Premia.54a2ca05.svg\";","export default __webpack_public_path__ + \"static/media/icon-WBTC.a98dae38.svg\";","export default __webpack_public_path__ + \"static/media/icon-dollar.c1bac52e.svg\";","export default __webpack_public_path__ + \"static/media/icon-down.5f041f55.svg\";","export default __webpack_public_path__ + \"static/media/icon-hint.1458d991.svg\";","export default __webpack_public_path__ + \"static/media/icon-repay.78acc3e0.svg\";","export default __webpack_public_path__ + \"static/media/icon-sort.ee46ea33.svg\";","export default __webpack_public_path__ + \"static/media/icon-user.346ff90d.svg\";","var map = {\n\t\"./Anyswap.png\": 642,\n\t\"./Anyswap.svg\": 643,\n\t\"./Artwork.svg\": 644,\n\t\"./Artwork_gmx.svg\": 645,\n\t\"./Banxa.png\": 646,\n\t\"./DROP_DOWN.svg\": 647,\n\t\"./Hop.png\": 648,\n\t\"./Hop.svg\": 649,\n\t\"./Hop_dark.png\": 650,\n\t\"./Hop_dark.svg\": 651,\n\t\"./Synapse.png\": 652,\n\t\"./Synapse.svg\": 653,\n\t\"./binance.png\": 654,\n\t\"./bscscan.png\": 655,\n\t\"./btn_big_arbitrum.png\": 656,\n\t\"./btn_big_avalanche.png\": 657,\n\t\"./btn_big_bsc.png\": 658,\n\t\"./btn_big_purchasegmx.png\": 659,\n\t\"./btn_big_purchasegmx.svg\": 660,\n\t\"./buy_gmx.svg\": 661,\n\t\"./buy_gmx_bond.svg\": 662,\n\t\"./buy_transfer_eth.svg\": 663,\n\t\"./coinbaseWallet.png\": 664,\n\t\"./coingecko.png\": 665,\n\t\"./cross.svg\": 666,\n\t\"./ddl/chevron-down.svg\": 667,\n\t\"./ddl/chevron-down_sm.svg\": 668,\n\t\"./ddl/ic_btc_40.png\": 669,\n\t\"./ddl/ic_btc_40.svg\": 328,\n\t\"./ddl/ic_dai_40.png\": 670,\n\t\"./ddl/ic_dai_40.svg\": 329,\n\t\"./ddl/ic_eth_40.png\": 671,\n\t\"./ddl/ic_eth_40.svg\": 221,\n\t\"./ddl/ic_frax_40.png\": 672,\n\t\"./ddl/ic_frax_40.svg\": 330,\n\t\"./ddl/ic_link_40.png\": 673,\n\t\"./ddl/ic_link_40.svg\": 331,\n\t\"./ddl/ic_uni_40.png\": 674,\n\t\"./ddl/ic_uni_40.svg\": 332,\n\t\"./ddl/ic_usdc_40.png\": 675,\n\t\"./ddl/ic_usdc_40.svg\": 333,\n\t\"./ddl/ic_usdt_40.png\": 676,\n\t\"./ddl/ic_usdt_40.svg\": 334,\n\t\"./ddl/ic_weth_40.png\": 677,\n\t\"./ddl/ic_weth_40.svg\": 335,\n\t\"./ddl/icon_arrow.svg\": 678,\n\t\"./ddl/icon_check.svg\": 679,\n\t\"./ddl/icon_close.svg\": 680,\n\t\"./ddl/icon_close_sm.svg\": 681,\n\t\"./ddl/icon_close_toast.svg\": 682,\n\t\"./ddl/icon_dollar.svg\": 683,\n\t\"./ddl/icon_dollar_active.svg\": 684,\n\t\"./ddl/icon_market.svg\": 685,\n\t\"./ddl/icon_market_active.svg\": 686,\n\t\"./ddl/icon_trigger.svg\": 687,\n\t\"./ddl/icon_trigger_active.svg\": 688,\n\t\"./ddl/icon_withdraw.svg\": 689,\n\t\"./ddl/icon_withdraw_active.svg\": 690,\n\t\"./ddl/lock.svg\": 691,\n\t\"./ddl/long.svg\": 692,\n\t\"./ddl/long_active.svg\": 693,\n\t\"./ddl/short.svg\": 694,\n\t\"./ddl/short_active.svg\": 695,\n\t\"./flag_en.svg\": 696,\n\t\"./flag_es.svg\": 697,\n\t\"./flag_fr.svg\": 698,\n\t\"./flag_ja.svg\": 699,\n\t\"./flag_ko.svg\": 700,\n\t\"./flag_ru.svg\": 701,\n\t\"./flag_zh.svg\": 702,\n\t\"./glp_icon.svg\": 703,\n\t\"./gmx-logo-final-white-small.png\": 704,\n\t\"./gmx-logo-final-white.png\": 705,\n\t\"./gmx-logo-final.png\": 706,\n\t\"./gmx-logo-glow.png\": 707,\n\t\"./gmx-logo-with-name.svg\": 708,\n\t\"./gmx_logo.svg\": 709,\n\t\"./graphite-01.png\": 710,\n\t\"./ic-communityproject.svg\": 711,\n\t\"./ic_arbitrum_16.svg\": 712,\n\t\"./ic_arbitrum_24.svg\": 713,\n\t\"./ic_arbitrum_96.svg\": 714,\n\t\"./ic_arbitrum_hover_16.svg\": 715,\n\t\"./ic_arrowleft16.svg\": 716,\n\t\"./ic_arrowright16.svg\": 717,\n\t\"./ic_avalanche_16.svg\": 718,\n\t\"./ic_avalanche_24.svg\": 719,\n\t\"./ic_avalanche_96.svg\": 720,\n\t\"./ic_avax_24.svg\": 721,\n\t\"./ic_avax_30.svg\": 722,\n\t\"./ic_avax_40.svg\": 723,\n\t\"./ic_banxa.svg\": 724,\n\t\"./ic_binance_logo.svg\": 725,\n\t\"./ic_bsc.svg\": 726,\n\t\"./ic_bsc_96.svg\": 727,\n\t\"./ic_btc.b_24.svg\": 728,\n\t\"./ic_btc.b_40.svg\": 729,\n\t\"./ic_btc_24.svg\": 730,\n\t\"./ic_btc_40.svg\": 731,\n\t\"./ic_busd_24.svg\": 732,\n\t\"./ic_buy_glp.svg\": 733,\n\t\"./ic_cash.png\": 734,\n\t\"./ic_cash.svg\": 735,\n\t\"./ic_checked.svg\": 736,\n\t\"./ic_coingecko_16.svg\": 737,\n\t\"./ic_coingecko_hover_16.svg\": 738,\n\t\"./ic_convert_down.svg\": 739,\n\t\"./ic_copy_16.svg\": 740,\n\t\"./ic_cost.svg\": 741,\n\t\"./ic_dai_24.svg\": 742,\n\t\"./ic_dai_40.svg\": 743,\n\t\"./ic_discord.svg\": 744,\n\t\"./ic_eth_24.svg\": 745,\n\t\"./ic_eth_40.svg\": 746,\n\t\"./ic_frax_24.svg\": 747,\n\t\"./ic_frax_40.svg\": 748,\n\t\"./ic_github.svg\": 749,\n\t\"./ic_glp_24.svg\": 750,\n\t\"./ic_glp_40.svg\": 751,\n\t\"./ic_glp_custom.svg\": 752,\n\t\"./ic_gmx.svg\": 753,\n\t\"./ic_gmx_24.svg\": 754,\n\t\"./ic_gmx_30.svg\": 755,\n\t\"./ic_gmx_40.svg\": 756,\n\t\"./ic_gmx_64.svg\": 757,\n\t\"./ic_gmx_arbitrum.svg\": 758,\n\t\"./ic_gmx_avax.svg\": 759,\n\t\"./ic_gmx_big.svg\": 760,\n\t\"./ic_gmx_custom.svg\": 761,\n\t\"./ic_gmx_footer.svg\": 762,\n\t\"./ic_hop.svg\": 763,\n\t\"./ic_info.svg\": 764,\n\t\"./ic_language24.svg\": 765,\n\t\"./ic_link_24.svg\": 766,\n\t\"./ic_link_40.svg\": 767,\n\t\"./ic_liquidity.svg\": 768,\n\t\"./ic_medium.svg\": 769,\n\t\"./ic_menu_dots.svg\": 770,\n\t\"./ic_metamask_16.svg\": 771,\n\t\"./ic_metamask_hover_16.svg\": 772,\n\t\"./ic_mim_24.svg\": 773,\n\t\"./ic_mim_40.svg\": 774,\n\t\"./ic_multiswap.svg\": 775,\n\t\"./ic_new_link_16.svg\": 776,\n\t\"./ic_olympus.svg\": 777,\n\t\"./ic_olympus_arbitrum.svg\": 778,\n\t\"./ic_selector_dropdowns.svg\": 779,\n\t\"./ic_settings_16.svg\": 780,\n\t\"./ic_settings_24.svg\": 781,\n\t\"./ic_sign in_16.svg\": 782,\n\t\"./ic_sign_out_16.svg\": 783,\n\t\"./ic_simpleswaps.svg\": 784,\n\t\"./ic_stats.svg\": 785,\n\t\"./ic_stats_big.svg\": 786,\n\t\"./ic_synapse.svg\": 787,\n\t\"./ic_telegram.svg\": 788,\n\t\"./ic_tether_24.svg\": 789,\n\t\"./ic_tokens.svg\": 790,\n\t\"./ic_totaluser.svg\": 791,\n\t\"./ic_trading.svg\": 792,\n\t\"./ic_transfer_avax.svg\": 793,\n\t\"./ic_twitter.svg\": 794,\n\t\"./ic_uni_24.svg\": 795,\n\t\"./ic_uni_40.svg\": 796,\n\t\"./ic_usdc.e_24.svg\": 797,\n\t\"./ic_usdc.e_40.svg\": 798,\n\t\"./ic_usdc_24.svg\": 799,\n\t\"./ic_usdc_40.svg\": 800,\n\t\"./ic_usdt_24.svg\": 801,\n\t\"./ic_usdt_40.svg\": 802,\n\t\"./ic_wallet_24.svg\": 803,\n\t\"./ic_wavax_24.svg\": 804,\n\t\"./ic_wavax_40.svg\": 805,\n\t\"./ic_weth_24.svg\": 806,\n\t\"./ic_weth_40.svg\": 807,\n\t\"./lg_arbitrum.svg\": 808,\n\t\"./logo_GMX.svg\": 809,\n\t\"./logo_GMX_small.svg\": 810,\n\t\"./long.svg\": 811,\n\t\"./metamask-text.svg\": 812,\n\t\"./metamask.png\": 813,\n\t\"./page-not-found.svg\": 814,\n\t\"./position-share-bg.png\": 815,\n\t\"./short.svg\": 816,\n\t\"./swap.svg\": 817,\n\t\"./trading.jpg\": 818,\n\t\"./wallet-connect-text.svg\": 819,\n\t\"./walletconnect-circle-blue.svg\": 820,\n\t\"./wave-01.png\": 821,\n\t\"./wave-02.png\": 822\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 641;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAZlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+Vn2moAAAAInRSTlMABhQdEgsKKUeEstIZdbP/wlfRwTjgpJRm8fDhhaNlk3ZW+c569wAAAsRJREFUeAHs0AEBwEAMAjFaCv4lbz7+IiHSrJ+3I40vfVzOo72it3JaxHLxI4IIIogggggiiCDia9cMdx5FwSj8aw84Ug4qCoL96t7/Te68YL7GjrPpn0nsxCepLXrA8IQ3NoY/IULp5keLJ0YbHKM1/gfd3PQni7Ak6b6bXU9y8DigIz1+hx9JsvefKwITyfBsVCIOgrPkjlGp7WDiPJqPFWF6kvHpISgox6R+DXKyI35DpK6LJn6oCPEwW/rNw6bEZC4Hc+0iu/Irmttw7wDdKKB8bSKwaDRPF6bpANUM96/aTT2GR3dOEeLBY9p7ABY6vDJkGJakG1N24krVdp+h5qRRaceyNPptgfg0O8dBuiVKt/spRbTiAa8esP4qQjFIxABwnMq85GO2K3Hm+PBVogcCqWp8zAaIMrKTHAL1CUVE8sgDJk7YU+fXlYgrOiJVneBaxjBrS44d4LkC41SOFtClergALkPI7oQiJoYjD5HUeGFMzU/qGi9T0ZKZ+1IZFRMzY5mpZ2ctvLTMfWQaiogAwY4nFOG4HHuY8ILnhtqJCFSlMryvKnIv57DOWGlWKph+Dstii4h6r8BTiggvHnQ88iCBTv8kct2JUAylMtyIgsvirOstFKNrJdV9l4atkTOWRmRSOw9YORx5QHIo5HEnAjaVylhrf5WsZKy0WivSYkmtRQQ9RFM4oQiTmW76q3/WReChh/h8sPqdiI51Yi1/3L4eafZ1DFOOClBz/69+sIiQe93SbE4oAj5TmOOzWHj0pLc0KChOOxHI9EXpMpN0ul5pZWi2pZFl+LkHnJOMUyf9Z7m0bIP6blNY8D59xoZROETV88Wf/5T3Eb6dVm3wPp4r3sS5v/bFjL83KRtcIlRL6/EuYfkbRFzvLC8Rl4hLxCXiEnGJuET8A+HaTFa3F17bC68Np9uG02sL8rYF+T+idSlyqmiqtwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Anyswap.491d1f32.svg\";","export default __webpack_public_path__ + \"static/media/Artwork.a2d41b8c.svg\";","export default __webpack_public_path__ + \"static/media/Artwork_gmx.cc61d732.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAAoCAMAAABO8gGqAAABcVBMVEUAAAAoKDwnKTsnKTsnKTuGh5HJyc6urrWFhpA1Nkehoqrx8vO7vMF4eoVCRFRrbHhQUWARbooBqMcRcojKys////+vr7ZdX2zW19ry8vMUZIIBo8cBqMYBrMUUbYCTlJ0iN00BnsgAoscArMUDqbwiO0zl5ee8vcLX2NsNd50Bp8YBrcYAscQPgpHk5OYeRF8AmcgAo8cUaYEBssUAtsMdTl0Gh7gBmckPdpMPe5IBtsQIn6mgoalcXmtqa3gWVnoBlcoAmckDmMAlMUQiOUwDqr0Bu8MYYm4lL0QDicIBlMoAu8MDtrolM0MSYI0Bj8oFi7clMkQFpbMAv8EUd34iNU0Bi8sBkMsbTGgZXm8AwMIAxMEiPUwKb6gBi8wLeqcKl6EAv8IBxcEMl5YbRWkBhs0gPVYgRFUBwMIAycAdUlwGeLwBhswRY4wPh48Fuq8UVoQBgs0Azr8YaWwKbKkBzsAKqZ4ZS3IDfcQCxLcbXmRL8BeXAAAABHRSTlMAM7D2JaXEwgAAAp1JREFUeAHszjEBADAQArF7wL/myigDURA4OaWsg3OK+VCqCaeaSbkFF/xswQUfa2XRJa8OxNFNYF6gvUkz7u7u7u7u7m6f/1UqZArW/9wNhZ26kd+JZWvy/uMsjOPGQg8c247rOmHblrwm4a8UQ+K2HUswIp3JGhL0BOEmGRGHBzm6FYA29IXwUBCe5eMgUlAVQKUpLCouKTUvKFyaBO4KwCdBSSoqyMrgWV7wcUGK/VFeUZmpqq4xJej4SLIWSlpSIbGjgm6KBJE6eGgxVo/TSzRUFDU2NbeYEvRpUT39OCE7h9sKpJVHBblU8x0hh0a0tVd0dFZ1dfcYFrRCgp6sy6QRCeb0liNBligQwoXndSxEb19FPxtoHhwyJDg8goy6lAofNxyH7mUk6Ftqy5Eg1pJ6zoix8YnJKTY90z07ZzokQvepVa5xyg0mRs6hQ4KIpdJDzC8s9hXCtXRwaXnFtGDeX9MCHryNkaD6Oh4VrBcYFGJ1bXxdXjc2Z7e2jQjWlyk8lAC4q1v6+IgEVSjCgjmBJJlmZ3dvcR+rg6XDo2MzIaG6LGhaS/3zSTAIBaaJFrhePkuxgJPTtbOgPL+4vDIqWKYap1CGUhoPCbIUPBBaEM+SWu4Livv1ze7eLVPc3R89PBoQ1MvDW9UMetifpF1OgtKJBFPBCWIJPdHs6fn0hWleLx/eDAi6tgK6iYQ2COOQIBBHQT0iNb85HbD3j2fYg30VcBY3D8IefPj8MprieNAsikeC2sbTAXboRJG5+v54Pl0bn5BncVf37MXlw8/vPwrWkUdBXQrXrVZEKZDa8DDFyLAO92r0RCmA6/8rr0iFhKCWNjAEgWmwsmq0RY0XjDpw1IGjDhx14KAfwBz0Q8CDfhB90E9DAACtALoxSNWoNwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/DROP_DOWN.ef525fad.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAYAAACZvCZrAAAFLElEQVR4Ae3aBWwcRxTG8QjKQqsUEtOJpTJzw+U2zMmGmZlJVIYwYznMya0ZjslU58Jo2Nu43L7Os2ej7eiMMt+30s8ws+a7f2Zn044PIrpbeFDonPAA4EHhbnsceDBJeEC4P2EBwAOyBZ0rIiFrkWSdAAAgm/BgO1kKdeUAAFhJdJaBUCYBABAIAKhzIAAAEAgAQCAAAIEAAAQCABAIAEAg8tcEHIExrqhPc/ui26Pt78wBAAIRmRXs4h3pIe9wH3lGBLa30V80AAJx6aszT0dXHFt+bslxZ+H841Q49xTlzzpDeTOcFJmWHM2dlr4/PD1zBq8a7qwgluU7vMP95B4cINfAMLlGFfbm8QbmELoIVa1Q2qvzANCAgbjyyekuRYuPUNHCY1Q4/wQVzLHioFNkajKFJ6dRaEI6BcdlkX9MDvlHe5zBCcGR/LHuoSE9R8Qhu18eZfYuKIuuvdnQT9QVVHl0qWK+izoP0IAQiPOrTmpFC49TwTyOw2nKm3mW8qaLOExJqYhDcEKGiEO2CEMO+TQ3eYd7yTMsQK7BQZ9reO7MrL4ch0JKf7+I0j88vx+BgDYGlxiFi07PLFygr8ifp888tyKzS8ESV5eCha4ukRkuLTzR9YV/tMvvG+khD8dhqIjDoBDl9I9QVp98yvyI43CO0t45Tym9LlJG72saAgEJBpuUvOfg00IrcgaGjOz+uZRZEYdfKO09jsMFSu51iZJ7XKWzXa6VucbecrSAQIwU9gtOYXu8c+TYcuV8thz7GoBA1ENgftSR1a/gQMaHHIcopb4t4tDzEundOQ7X6czrt4SSA80YiPaCT46fF3T5mo/98T6/7Xxd4iMqPI0HGyR8IMx9W3sbO74pMw/+UOt/+dP7np+Z+vZFEYfLIg7X6OyblXE49UoJnXzJoAYOhE9wxuGLEwinHFPvqsyU4yvifH6/YP/ZOQyG/Fx4wAECEdvxDZk719bpCZH24TVN78ZxuEGnXyumUy+X0skXY3TipdsNvYLwC3ocfiUQDiUCqgNCWQ0rFHUOqwjAJYa5Y+15EQiK7V6/oi4fl/xOsXb6NV41lJKza7l2ppvZO7yC2jfTJUbvGs6fqczLz48N0LgAgeDLitjezSPN3eu/4FUEu/3Tzjo9KU6/VrrjxAsmnXih/EAz3+acWcP5vesRCA0POEjcQFgrB46DZefasl/376n10ppXDMeeLT9/9KnfKX3gH45mDEQXZf9B9YWcdyifv31NMQFIvEDk6O1tYVCVmfs2abVeRfT4q8vhx/887xxIzRkIdl6Iqk96+X6ZoKufv4o9C6dg4HYnJPQKIrZjrd+KgrqS4PfN3es+55DU5XM2cyB6225TjpRzM2QcDOFp9fPbboF+JDnl2Ew82CChA8GXEhyD6vAt0NiejTN4v6IVBMIa99P/D12Jg/r5z9vONay9BwDc5ty7cYUSBUNZSdjfdpp7NnzOG5vGd9u6sPLvxNt7NizncQ5JC/pFta8yLvE3KR3S/QAIhE1sp7zUkMx9WzTewJTv14m1wdmiKYEAQCBquNSwrxSMnet28DhvVJoyHvb5qt43dnxt8KVIGwoEAALBYns3zLQ/4dX/L1Exv3PdAXVlwe/zOM+3ojgwzbqrAYBA1IK5a50uVwa2SwUAQCDkSqFyRbDWj180AAIBAAgEACAQANDwEAgAQCAAAIEAAATiAdsgAMADViAeFJKsCQAA2YQHORB3cynkAFYSAFg5JMkm3N2ODxmJB3kQABLeg1Yc/gOptOvB5Z4VkgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Hop.4b77c9e3.svg\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/Hop_dark.423942af.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAABmFBMVEUAAAD///////////////////////+PcOZ/UON5R+KNT+iFQeWSYOi4hfWIP+aRP+iIP+WUP+ibPeqSPOiiauz///////////////95VON4U+O3N/C1LO9+WOL///////9yS+F4SeO/JvK+IvF4SOP///////////////9+WOWHVeXRQPbKHvTRO/b///////////+pOOyxKu6+KfG7JvCxKu+wRPH///////////////////////////////////+qL+21J+/CIvLTS/PCIPK2J++sMuz///////////+eT+2iOOu3QfG8MPDNQPbUH/beGff1Zv/gGPjVIfXNNvS+MvOiNuv///////96SOKHQeaZQ+noMvrvDfv3A/3vC/vmRPmHP+V6R+J7SOKIQuaXQefvDfz3Bf2ZQeehNuuzPu27MPDUHfbeG/fTIfWiNuurMuy2J/DBIPGtQO2wKu68KPGwKe7NKvXKHvR3SOJ4SOJ3UuK/SfG0Ku+7QfF7V+OUPuidPeqIQOaRPueQP+eQT+iFQOV6R+MNOs0rAAAAhnRSTlMABhQdEgsKKXb/V/84Gf+z/7OF4SkpZYRWdnVmwVeT////wv//lIU4s1dXOMI44MLSdv+U0v9H4dFHV6PBGbJ10v/gKf//o/DxZkekR3Y4lIUZk4VHZrN2pPHwdjiz/8Ip8fDS4Xaz4XazV3WUhYWkpP//V/+z/2bB//+FOMJHZrKF/8KzVzMrutwAAANDSURBVHgB7NDFAQRBCERRfHxa8091PYK9Ur8Fzo+IRdMnTMRqHslzUyaxQGFC6oHClfQ90f8QgAAEIACxAOLTuq2AeLcfOyDO67dcZ2qI8y6/rdQzM8TV+m/rYz65LYvt9nkgju7mDWSXp2Q5JdsfxkqscmunzMzMzPjqf4+isrv3iQq6yZzfQlf4W5gZZhkrYRHlFRoqqyo1VVckZGuQmlm6ImrrNNQ31GtqrP0ZtZDbYGeQl6yIpmYNLa1tmpqbfkYdV3WeU9JnxF9//6Pp3//+T45mfdUJDsJkRDkTmMlEPjClqhj59g4iYcqOIK8QmBnkDSiW24MalnoRnV3dPQp6evv6k6MW5mWRBFrUOdmY8ui6GMYF6ccUhQyAox+5HvoSwMYsEaiy50ZYSLeIgcGh4ZHRMYDxicmp6aGZgaSodBHbDUmYdYAGOQsCURBxGn4OgEUZIk+SrTmAjEcrhypBJADkHLIUi5hfWFT90vLK6pqixfWNpLCYi1AtiwINzUL2tjZcF8C2iTIOiWCEcxgXHEk5pqyRzGguxSI2t7aLInZ2d5YU7W1tQnKz52jJS5p4x6NpL7yJANNH9H0E4BFQy6GI/8J8hw1quwTUQjfdW2P/4HDq6Bhg/Phk6vDgNGlrSCFVP0urYQ6ZmmOB4k2EhXOcW1kSoU9VqjHuIgaStourWiblh+XZ+YU+LC/Oz5LXAs7q8c2qDxayLyL0JiERqI0x0EtjDgooFNss5SIur641Xd9cJkcjX1LH1ZA8h3bGFxE8BhYqEVxfKhBliHwXZBQULfIUi6hu1nB7d6upufpnNIehWWa2ozruCoizX0W4oSGMMFIisEYYvjpQYxI1WKBAYIiO0JNpfmLf/3hiP9QmZIWLiBGXxDJC9lWEpKrFkdFFmkXM5qjCI4ooj/F3OCfT/I54fNTw9Pyi6fXxl0vjnRwvwRT9K54R7H3EjL2T/WdDoRve0AhlNTbwEmGOJZ42opr8UB6YaWqGslqaCA7MqFuLuxuw4QmIkTJUJ2ruoYEns3vqD/XB29a2VjA9OpzfPjqcPzrBgxWMBsRoQIwGxGhAjAYEK4geXUwGXV44urwQuuB0dMEpdAny6BJkAMRHfxzYlb9eAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/Synapse.3cfd1d07.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAAsCAMAAACuYtZZAAAAn1BMVEUAAAD////////////////////////1vjzzuzPzui/yvDTyujD////////////////2xE3/////////////////1nrzuzH////////////////zvTb1wELzvDL0wEbyvDb////////////////////////0uzDzuzHzuy/////////////////////////////0vDLyujD////////1wD3k7xDPAAAANXRSTlMABhQdEgsKZqT/o/EpRzgZOIX/wcIZ0nbx4JSEScJFiVeEk6NlsvbR8vDS4dFmpLPB8FZ1ZcrSjpcAAAKDSURBVHgB7NABAcBQFAFAD/SPvPX4LsIBRz2PB5ycPi7Wge7UhNJpBHV+i1jEIr527aipUR8IAPjTP4KSpGxigaoK0P49AFDv7vt/ttvNmpnrVfrgE7TZmcBOlIf8Jlkk5hsQNwHCRRTfBgjnEKNEgCAHkrhyCHJgieuGYAeWuGYIdri7uTsjkUgKRamW6kIh2GEjNmckUnBh0ECCvUyI+y07CJbY3n8NkUkps7wQQtndRUKQBDuQxIwDQki67UBdao14eESJpw1ebpFg84SX55dZiJJulWtJbWopKGRtqoTqSJXIxlSaOxtTl8LF/mDqZOkQD/H/jzwtXuNXngzPP+KXOYhDroWAFNuh7WwONNQGOttTJqEBa6HVrrPHzgYzPbifj0uGIIeYJdAhZgl0iE8lUhiMMUWOHAxBF91bGv6EfbaljLQUpK6kYOdIwzf0jJ5ArgRiy3VyHqKz1vZQe4iee+nFqt2YE4RwVdSiTmEFxbRjF4z8bS1LY8sO55fG6BCoTR5ClAeAwoBEiPETQvPoKTIYDEVbrKFYvlOxjKhYvp8vlqKzBMGNIUqwaZp2DkIyhJ8GfipxLByC68PH5+vzg+vEPIQ9gbAdZdkRhOBFIpRCp9KnS4egOkkS5MAVcx5CwXQCMVA2HENMrXuftpPQueEH01X8iU0S7BBHMzOiqaqqafPkGIJaJX8aOIZI8vaX3Bf02yOYvdy3vV48hJf47R3mvzXyt0T8CyF2AGAzGP+GEMpSr1sOZY/ppFf2GR6Jb4T6cpRS+NBqdRszUdiq8w5h89Y7hO18cggQ4R88sxEgAkSACBABIkD855JwmCwcL+Tjhf7AaThwGo4g8xHkP7gaLtKObnJaAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_arbitrum.ff6ad480.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAf8AAAB/CAMAAADW6DvgAAABF1BMVEUbIDIeITUbHDAXGCwhGi2HLjhhJjNhJzNOIzJPIzI8HzBYJjNrKDRqKDRYJTM7Hy+QMDhGITGsNTwqHC51KjWaMTqPMDkzHi8eIDYbHDBFITB0KjYeITaiMzt+LDceITajMzt9LDdCIDCZMTo4HzA+IDBLKDmBMT15LzuuOD+TND05JjhRIzJyKjVwKjU2Hi+RMDgyHi8oIzdSIzJUKTp7LDYjGy5PJDKeMjuELThAIDBjJjSbMjqKLzg5HzBUJDJ5LDYlGy5hJzSSMDkfGSxqKDUpHC5EITEnGy5VJDMcGS02HS9DIDFAIDFFITFDIDAsHC4eITYcHzMaGy8TFiMeITUAAAASFiIcHzJlLDowJDduLjpCJjgHX8VeAAAAWXRSTlM4+O////////////////////////////+18P//+f/////////////////////////////////////////////////////////////////////6vvJR+SRTwHfs7R4AAA1sSURBVHgB7d2Hmuo6lgVgute2jKRNkLYoTcPgQ01NzjnnnKdzvO//HAOc2+jjkGRjwFT5vzmHtSwkWTaDwTe+iZOowJYqkY2GWhP2KIMvkLGsRuMJnf9Hm6lDiwq/UeBGRDOPBfUwGgh+bfZCuEY08ZvfGPzCt3Ca1vhMOCLL3DrCl5zBUWLUyRZYBVpMI54i/yRa5iHdOn+wnzmYqcGVvjX4xcx/OWszwldacIQxOCM6xVwOJ0gAWr6Uy4rQKpvyv6WoeDRHJoUrKEW4zuATTiOFrawhIFobT/4hJOdbELFFL36N0C6aeu9XEXdgFJcTXCYa1xB2N8zfCoCsISAq5doouXFKcTmfvPgNg5aRVZZwJ+SUGkecZwyuY4LcLH/GPlERR8hY6TYHOXKV31J4dqKVGgpOU4RrqZJuk390+JJTdBB+sNT6JCfl//zEspoTjmNcT8IQtChepeX8FQ4RGyQ0rlhuMMkhv7ESvBfR8miCI1SLE1tvkO+XLuZPFse4INiiYQjmJpPcuJxN1/E7vCtGqcMpYWhzZfvSav5acJRUJUDD10ITcIv8zcwCxuD9Icf7U8KocA2aTCbjclS8+c+Q7Zd/JeVfOzR+e5kpQdJq/noa8Y6RZt51wBrUIJO1cm3BSnGh1qxZi5j6jVWbn//R4SgaFsFUY9ThIrKNAuG9E11V5VwgywWdu7Yn43JNbezCFhxBM7/GbeavcMycg6u/7DQGmejV4mOIdpvZy3DytWG5ZtSaU2tmA7niys/8S4v5k8WBOAou7Q2Ob5C/FBEfQrpoV5VSOmXd1EuEXi3ay18L9knJmpruPClkiQXhA2G/JmiDBABxpVrLn7/c5UnhNxgCFHLogA+Fpt5rtMI6rMlUt5R/1NihobKCYwxLi3c5RxofjRG0I2CLprqd/DmFz1Zwkh23df1TiGioRwGpAC3kTwpbc6UizoohtpK/BEJTPeeQCtBC/joCmLPKyrZsYfw3TGisx0BGAfLzrzBndsgTOV57/WuLdvT5pwI0z98ts8PPOxymCOewwbuhlm8Od2YcMgqQmb+MqhWhHgkG5xjzUWZ+wa9p3BcTGhYg5Z+Oc4gwarOKGuYfmfBuRL+xJNwVYx8VEVmGKX+ktZ4VJK0MAWI/yEe/8lsG9yQaNQswLA1A5Zsa/CpS+ByvOpTgFNWfAFqN98SkG7H3YwW5BUinqxeLZSUY/Nrby9tiPhmGNImPGs0Qu5oLQOKI96W4/+WPANQqQPhcUgdg8Ot+o3DtnEl0gXAUf5hNH1WEiLsihXoF8FvLoqiKwW8cnLQlheYouPzx3zB619MR9Qrgt2aOgCP5a0Gu/HtC4WYzvx4D9QrAfvcc1OA3/cabtHckndQ46/pnhzb0GDULQNVuj2LwWyvvfRAuCZ8ZDbT/TJKiG2369JxD3QIA2sev939imHkAuwYwkvaGAGewJ1aEVvQC0KAAM7fb/6MVNoRHAohCG0wVz20AakZLeowmBdC8yx9BsCVhEZWgFcQlkER9m5M+vajRpAD0lvJ3Oi3IXwgtMZU5PgGkyqAtPSY0KkCIu/wRkNrklKAdxCM6kn+sIjqB3u/Hf0YBnE35816bdGsNMIU5+JTSFXXl8HVBeHpi0bAAVcrfyv7enw4GrSBe0P71vwgdOnv/gqdnIxoWgGWXf7R7e39tNsDMHNL1Ly8WnUB+y+DZVUDDAojd5Q8+XEs4ZdAGql4FcMtXA7iZQzeYd5K/cGYIhAPhIP+ogcSEIdpgl+ORX3stVhFdsfIbhCdnHbJQIHzJyi5/Z1IN2m9AXPmtqeAasng1aIt+Hy8YKoDGBRC7y59U+vkNGmD9lsY14rLVk5VGsUYbaFGMCI8RK1xRAN7lj3DyRrIJJeFK0W8JrjFLf49OKR44kATGFQXQsstf0emtBOGrG1D5NW5jxqbQNX6teNhp4/EVBSC7y9/ozz/dqgE8WzG1sWJz/fWfvG2qZ5oXgHf5g4FzAUlYSBeOVhfoHCo8Ex5B+43iZdi0ADru8g+ggHMksOCh7N4Y0nNLv6ZAOixiowIQ7/LXTkWcR4oFvY6gVz9j//UVQbYaS4MCpPwlVLiIVDDodcFwWThI2lCD2DCkugXQu/wx08hAqjLoPVosCgOAFYAkMg+pVgEo5V8R8uhiiDWZEHoPQaOpwcYUX4pKzesUYJc/LQ1y6elovPB+qdF7gOFUY0srHOGY57kFSPlr5vqPuUbcW89U6uKQ7Zhj1t3AlH9BATX4rYD76slCUc7Lw0nzKF58z2bKPwYoQjZ6RP49KlmwEwTA+QrI+QKk/IMgauSilwccn+i5YJAQ4xKxYSynC5DypwoAI5OZsSm8X2ncTy8GjSR9d0DdCqQCpPy1A6CQhRZMAIwR3E2PWGFfhUzCYUjHCpDyr7CmIzK4StC7/wc/YZ/TyHBmZygWtMk/zSTF5r3l6d56wyD4UkA9MYT5YQE+5x8o8y29VuHeeiYYHBCFutLOUCrANn9ibHHGqz3urCdscURmFOd3hmKxzV8bbDmHM4QN7qxHpSIk+Yu/vJ0ht82/ynmUvLToPfiDP9EGzZHmsaT9n2gv52+C4M56hk3jp37ztgW2+aelhZWMr5m/j54EjVOMxtXE8pDW+RNfepdEaQm9x3/wJ4xWCK/z1xE7fLehX3n/5tCr8cGfiEJL1vmHs72S4G53dNmgl7HiP6CkvfyjPvcq0VIRavrt3/nd38v8wvICvUNSaZzHaC9/ptPLShMi6vp9v/YHTfPv0UgRztMGrZDhYvCH+4mHgwloTX/kN6q8A2QOX+iNg+CS0E72Ieg4+ON4aluxVIT6/sRv/WnOE6EW+3quMrgoalwnDjkoQ9i+/x97nD14gWc9f+Y3/hwXRSPY04uVRgYmNDcpFesU7eCPsYcqbEhl0dBf+LW/RK/R0c4MxGiG5iOlHAFIBn+IfVMCqAyExv7qr//mb1FTj8pKkEVJoyFfsY0Z3/8XNIaFQe++hlODTFx/yGelJfP7H9VbYdG7d/oKubRBPhkqVqbO93++zgQfD5VFKXgQU1SCbBUyxTErG5Fk5G8qPcXHI2/e+6XDvcXX0WT4MnPIZ2zWTK9U7AhJVv6kFKAiPpzCbyzlIS8hDYQaAl1e3CtrkGTn71gARIWPRvxnFvfF9f+hEi4s7tNMr17+6Xhf+LD5q0e8v4lQRzA4TuZpptcgf7I2e4R5f6Z+S+POuO4/U2bHZ3pW6Yikdv5OpdCdw0ej/Rah6wJjH03KtKfXLP+Dk90BHw2pmfdF9/Mfe4NE0kzvmvzJWuxhfEACKIVOU2mIwmTMrKWN8x+OBfus4NmNizGhtoI6P0vV29s4zI7QisGvG3xJLJ5Wej3FC6Euo9Bhxq8ti6qd7A/v/yWM56aavpyGBd1FM+99JWjV4BMOhfexnYfaKKDDJEx9gTvk7wyeGS0bHy41Gp2mvbpD/sR4XlLOiuYPFwRCp8WVvn3+YDyrYQgOcFM/NWiCAj5OAVL+72MFOF8EhzN0GXGJM+g2KeLN848aTyeOgqaLq8IRLmFCt1ERb50/FJ6LjCpLOE/lzQpE4Z0XICN/xhORcbCSuypkXGLjOy9ARv464knQMHBEjpB7j5/xvguQkT8pPIV5CBGZXO6qUNT7LkBG/uBnCJ/ZoQbOPW2lBFeS5yhAdCfzp85P91kT6hFDyMK4iix9Qbjs7/7+Hx5aADl9/RvX7RlfZQm3Ey2uEXKegAf+0ft/+ucHFsDR6fwR0FU0rKzgtpRcfawbF/m1f8ER7uWtrPlNbvX9678BZ/LnrobPHHFzxGhKFsUs6/r/Z7/2N6fuX9kbF+Df/wNn87fyRDO+9hnXsJ7WAdBViLjIeu//7NT4oXDTAph/w/n8xXZxgxd3owi1OacJNfznfxGOmaV16o0KIIQL+YPRJVJWmnBHFFBPRCS0IxYrDdy0AHim/Gnc/oyv3RuBoljwCBToRvlr86FmfFdsgZCTiEehQLfJn7gbM77g8BikkEMrTXggCnST/BHwaGYRNOFhrMElRilB0v0CkMvOn+nB0/3KCh4q4CxRyiB5hgL89/8gO3+jHxn+lCMeTRROoqFySJ6jAP87QX7+CLg3Go0EmI/eKo0uUBHHmbTSf6IC/N+30en86c17/+JXLOiIgCMoOkK3SEE4S78tRwGolb+KD3luZ0roDGMPbz1qdFAs6OKzo6pm/sbirqLfKgjdoQRAQloTOinOIk6Kr35tWcZa+aN6SP5+WRK6ggJ2nNLoLrMcD0vCFyaTcqSCYr8WFBfVaBiz8y8e8RqelYiaLSI6wllsEXREp9nNpRPxmUzGJStWzmBL+5XDltGKuZxIRv7K4K4o/PyAtgnFkNAJgQAZW4OuE7+2nA/LRQjKmog9UwckZKxSajyhwXdwmmPcnXvDFulqYdAB8XWuNAHPkb8vTjSVDQ6QUYPvfg8nGf/mi5JwV8GkIwjFWPBgw2nBeA7s/UrXG8u/N/j+D753oVGMu5Jw+KX1jyLWRiAQnoNREbXy/94PBj/80Y+/8+mEP/6NrU/39ZOf7v9L/PrPfuvTI/zhT3/61aeNn/7k0/P76qtPB77z4x/9P4Qy24RAkldyAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/btn_big_bsc.5e5ec82b.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/btn_big_purchasegmx.86c08dee.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx.01459500.svg\";","export default __webpack_public_path__ + \"static/media/buy_gmx_bond.ed3174dc.svg\";","export default __webpack_public_path__ + \"static/media/buy_transfer_eth.373e200e.svg\";","export default __webpack_public_path__ + \"static/media/coinbaseWallet.ae86a337.png\";","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/cross.2c9772ea.svg\";","export default __webpack_public_path__ + \"static/media/chevron-down.88670207.svg\";","export default __webpack_public_path__ + \"static/media/chevron-down_sm.697f08ea.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHjSURBVHgBfVO/a1NRFP7Ova8NQYkZigSDJbqJQh4Ogk4NiqIuCiJuDZgOQhGKk1P9C1Tq4KJQR12yiRWkg4ODg3EQp7ahpTSUQtMftE2bvNN7zstLXtMfH7x3f5zznXO+c+8l9GB7IlsEYZgBn8BpBtUJqFjCZP/o4qe4L3VI7zM5apkyM3wcjyq8oJB8VqvKwkRENM10L9EMXEbfvY8w2ev6Oaif+kdk2VBDG/bSYySefEffrTe69q69iMfMUZPK6tfWWIxbeeUfTOYqzGAB2FoGDVyBHRwCNhbAqzOiNjN+P1U10pyjxFF/Sse9r0+x+/k2kDgD7+bbjr3FQdELu3oEOXsD3FiHzZd0pEQKvL7QrQ7kGzmOXqI0SpyDuW9K9PyRsIofY93gQNrIOcaJ9uIdWL8Ulvb/C1p/P2C3/Ci05UuxzKh7hKDi4gx1IrqsxpUskC5LqZQ6HxpdFd3MXLEv754mQ/Qg2gwWf2m3ldBYA5066wLMOwlTaP1+7cpptNn8Snu18+7cH2lcR7O7EKLZ5kew93Ncgx0AczX5fOmCp/Nm8BCWpkGUi7Kr5tkpHIIjunMqaBL5Jcdq4YYYToDoFD/1R+xhRNicyBQt0TAz+URIu/teJ3Ik4snkaO3Aq9oHE/y09owWmgYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGoSURBVHgBpVM7SwNBEJ7ZXHwSH6CFlQG1sPMB5hAUrQQro8ZgpWCpkNhZCLn8ApPCTrC0CDGpUvpsYoQQLSysoq2CSKIhJHfj7pm73AmagB8szDc3s/PNzB7CD5QSsps0ChDBEqdu3UmQA0Y5xli43ZvOW+PRSopxTxAJDuAPaERhly+jGJwZxkdMVhol6wmIoUJsSrEpKMblTSQ6FrZjcBFY34S96ksW1OeUzaeq5O3yZ5LsWwaFzAoiuVIA9SllHkf/OLQtxAE7BswLJAl1tViIyXMM6dz44JzcB+01qydaIQ37wTEwA+XrnboyUufxM+EJkAoR4WidPeQKxqERSqfTRv9Bia+sx1hG+Wr7VwVGgcrDkckJqef/CtQq3vEZNFQgDa8B8gFX0numD5mWYy5f+oLbeWswOl36xMVh/RPgHN0CacgP1fuINSzfvnx7KQlLBdp1ACaELaqLVUrdI2ak9v4I1bMNoEqx3j+QUmuj1ldcDvFnqkAzQFI6VzJh2wXNXiIG17F6E7VwO95OZHeLU+MvE8c4Hau583zOyXIVo73r9r/xCzLjs4Txvi/RAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHoSURBVHgBfVPPaxNBFP7eTBI31Wr8RdpDYRURxUMCIogemoJnrUdva/QoWC9etN0kXgXJP6C5eRK8efHSkygICYq0IDR4MIm1ECGaNMnOczNpNrtT6INd9s1775vv+2aHYITjNmwB+RCMZT+195arIFQVvGKlOF8P91M4ybvNFbB4gYOCveLLZ/OFSSqC4dVWwRw+lZK4cTUZBSDp5lcbUYC8+8sBkWtu9uDOUVw8m0D6pNwH4jxtLU8ZMPYNX89aWJiL6e8rlyyzDCFIsxX33e0cpmYF1G8tHQ7yE8cEMucTJobtPGnkBAvOmJWbSzOQPuuNrQE+fumh+dvTUo7MRDz3e2Qmxh6lRhomkYgT4v5T2+zrvLfL2Nzpw0oQTh+X6PwbBr0MSsVIcpu9KWp/wPj2vQ9PAecW4nptOGT8/KPAKsqUwG3hKaqZEqxDhAt2HOufu9hpe0jNSixeTqLTjSIopqoWdXettUUgO1y8d3sW1/yT+FDb1azevO/gb5dD9Ln+qpQ+o4+RCY9MFq/fdfTuSYvw6WsvMrwnoKCNHL2q6883MouPR/91blIe+F79aI4NG7GIUAcXKqV0eexDKJy1bVf4RRwQCmqlUporBzzMBn0blXR9WVm/mB3rRZ0Yb5XwyuZt/A/V0KylFRZwagAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEHSURBVHgBjVMLEYQgEGUuAQ3EJNrACNLACEYwgjYwAhGwAZqAa8DxdsAB8Rx3Zt3Zx779gYyVIr0qr9arCxZ+zx5EeNWB8E9NiCuIhnP+RHThvEhARK21W9fVCSHcMAxumiay8JdlccaYmECnM1JmBNyJtZbsPM9pJ7QDFQFUQCAqNE1DGCx8yGUs8M6tOiklBXVdl83ati3hGCHB7cd/eOy/qiqy27Zl29z3nayvnMIc5G/0juMgW9d1RvaVsyRBvsXMcUF935OPljEzMPjXmWUElFLZdq+Cq0yWdr44DRAVcLc4xNLGcaQOcAYc56G6SfsXAC5tvX5hZwL2/Lb1HTEVyV7+VT9KbxPpO/XgrgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFDSURBVHgBrZIxUoNQEIbfvkcVmxyBJmoSC3MDPIGWJmNBTgCeALhBPEGoJCVHwBNoJRgbvEGqjEXYdWHChHlA4Uz+hvfe/PuxO/uD6JH58D4cDC58Pt4jwjLbjJIuH3QXDlwA6RDRsGEMCyyCbDPOewE3T98WIq1LjugTUoACwxpUAa4fU1MpY81/tDSzz+YfCdITAE1oTnR4TqNJbJQ3KZXVLCYSCVGxbLQbThZfHgjpkqjGYpjh8DeWrQ4R/DS6vNNn/Xy9Cgo8zHR/C6AU5KJHOrQT8F+dHwBEZp+5zIj+ZugPKMifLrZmMzRauNoAxCJRSvHqhFXe2WLzau3pfLviHX8QoV9y6mIOz44Q4+P5JA6U3RGa03hVIa32v/uXPJ7tWoBa43nmggCnCeoIl+gFHLsxeQyPK2+RE5hFo7cu3x+G+J1ieOsLEAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEuSURBVHgBlVO9UgJBDP6wszut7LxWG6mtHF9AHR8A3gB9Anpt7C3Aws5CZ9TKmbOhgzlooIKDBjoWKuhCQrif5ff4ZjJ7m82X5MvuAUsgojybx2ZIYRb7HDaBD102n7YjkLh1xIDSwU6wBzGEn9SYcPfTJsgJ2bNcZsKeDjf2rIlKVd63ubehnsXwDrh4dmV69QHgOsBoCvTGwN078PDD/n4yKitkxyKOJmo3ZyIKKF4DhUtN9Pirq8KRto3VdvGPWzR2m7LmP1jKE1HhOxIoletR1c8m8NXSyu6R+v47al0DnLIvk4nECfktIjuHGiQayzXgpcJJjoHbc6B0DzR4FhcnYXQ5vC7fuiqZ9tWrrnGb+h3MVQa7X5gkCvXHkDjXGjKle6L+CnEpSeq/agZ2kCMI5PSNywAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI/SURBVHgBfVNNaFNBEJ7dF6sRUhJUqglK/KG8kEKF1tSCQiH1WEguHltvXgJG0iLtJcnFIFFsIR48xpteInpsAgpCTPRQpcHnXw1CA4KY0iCK5L11ZrfvNemhA8vb2flm9vtm9jHYY/qtatA0XTc4FzEQEKQzAbCGnzXOzaxxZ7LZi2e9Tmj+ddJi/D7sYwxE1shPZGyfOzcv1DJ2cuJKAGYvDTlJc5eHID5+FBQbliZsXwF9oX6NAgHfQSglR8BzSIPS25/4dclVXm9D5IwHY2EZI+xwqhZzCggGaXWzHyrrvyD3/Dt0/prSp7XZ/geLT75BpbEFD+bOKSkaSLZcT72ZomZFznrkLYVySwJyV0/DoFuTKzHtl2eF1U3MZBKHtwb1VHXKJbgYpSAdFl/9cHST5mjuPTLpwgVK2LEKyomGfVDf6IDg2igXgnkpQPoJbFthtSXpFq/rEDpx2DnfRgyxktIxlzMmtsghzdQwMgJ8aP2G2HIDEsXPOIXjToFBxGz/MVUfMJczy3xHTrnRhumwV92CgKWZU3Kc8fFj6O8yi474sJltuTfpcRn3Jl/gvln/2pENio+pec8+NFDWAIT8bslEvgd8GwHvgNSPAppf8pGXkrOwxE3GWWnx8QY8Qs2USNOgriu9TLEZOyILqxzISBk2teH5WpoxlqFkApPR7MmWZk6Cx+2C28/U+xBCZD7dncj2FegtAvualfyYv7hie2xvWE9Wg9YBLY2B86AWWdMS7KnW7a4Yy/1/43+jYdjzTW6D2QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHYSURBVHgBlVM9SCNBFH4zu0rk7nSvuuO8g72zuas81MafQrEVRYuUatDeYONfkU0VtVDSC0HFysJYWigR/Cn9AdFGXDCYiEViUBR15jkz68ZNiIIfPN7bN+9973vDLIEimLGg8UQrghxIFyXElDmOaBOCiTLGo3ZgyvbWE+9H9cJEUCRCCGjAGyAMw8lAxHK/NTf4OT9mCbqICH3wHihprepsIbnVrUReQfXCeL9wMUX02YBfn76W7D2/zUDyJqtizp66U4HpuP5yFnKL/H/qYLi2vSTBzME6zBxuOEI0fVa4ODFj4/8fNdhzixq//VYmMfivWfm5423ldy/PlEH+PlibznRqAvJ88iiTUlZVXgH+mnqoLPfB3MkOVJb5IHmbLVDEdK1W58gN7/Tcw70ikF7i+uFOxdLkuSRcOz92FAAYupdRypNF/po61XiUuXBW+dukLlCSuM0SCJDVGWMJTdMKSNw9ww0doghhILEEpYCI+zQtX5Z4ZfBBiGY73RvZpM4uPAwfhNjfkl5pz61s2196mkWStHqL5GUun+7B1f1N0XRuXfRNRl+IXvFjcTREkFrvDM5yZFaqbyrqUVKI77ERk2h0iKJQQ8B0RoKNwOOc43y66G98Bj1CxfZyFDl9AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAILSURBVHgBdVJNaBNBFP5msjFRobsVsRVtGEE9RVgFT0VIQS9ejBfFk6voRRA82aBoLkLoLacetZ4EDzYo2INCAtKDl2bxKBTWRDH4uyuIxmRnnDdN0iS07zLvvZnvvfd98xjG7NtMwYNilxljrlLK0WeoTz/BsTTZKD0efsv6zk8xL2SXLyvAxTbGGAKekHOTwUIwABtgzKtKQVAcyTaacajPv8gmp2Hz1JYFLEoMA5/8fodfqg3oxMfd/3D362uc3XkUtydOGTC9kx2+rN3jrMfxEV28/PMeGcvBK7eD04UryOVyBlCr1fD25iKuhYcHE2gNPIvE6SeacYTWyT14sDKiiykiXgg8PXcPF37MmFws4XFNwgi02v5gOp8p3dhSLCEE0ldnERGlDXN1Z+WQN8HSJhMEAcrlMlzXRaVSQT6fHynS7Eawk/vIdSzdOaQCGcs2VWnEMAzhOI7x+3EURajX6+YHehZSZ59o2TyNS7uOwfd9eJ5nbse7rr9Zw2wq04uUz6VSA3Wyepz712+Z0ceNik49W99MKLZkluT7wTt1BeWeaC2ioTmROMVi0fAmqz5fQerhGi7GR3pABHs/lQ4Z8OfpeZFM8KreN7Habox0tFkK2R1TQx0RdGI5t7+1EAx2e7gAtjG9XX43lucJSDEbf/DlQMHjDHpxuJ6ZvlH/BqRPHPWoI9vzH5xq3+2NFxVlAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/icon_arrow.59b289c0.svg\";","export default __webpack_public_path__ + \"static/media/icon_check.a37b7ce5.svg\";","export default __webpack_public_path__ + \"static/media/icon_close.9972202b.svg\";","export default __webpack_public_path__ + \"static/media/icon_close_sm.be2b83ff.svg\";","export default __webpack_public_path__ + \"static/media/icon_close_toast.d527cc94.svg\";","export default __webpack_public_path__ + \"static/media/icon_dollar.f46a93fe.svg\";","export default __webpack_public_path__ + \"static/media/icon_dollar_active.3a2a7bba.svg\";","export default __webpack_public_path__ + \"static/media/icon_market.05f6ef86.svg\";","export default __webpack_public_path__ + \"static/media/icon_market_active.af684a3e.svg\";","export default __webpack_public_path__ + \"static/media/icon_trigger.c4291240.svg\";","export default __webpack_public_path__ + \"static/media/icon_trigger_active.a6e3f64a.svg\";","export default __webpack_public_path__ + \"static/media/icon_withdraw.29572b6d.svg\";","export default __webpack_public_path__ + \"static/media/icon_withdraw_active.7210cab7.svg\";","export default __webpack_public_path__ + \"static/media/lock.3a55a760.svg\";","export default __webpack_public_path__ + \"static/media/long.0f8a81b9.svg\";","export default __webpack_public_path__ + \"static/media/long_active.8a037ed6.svg\";","export default __webpack_public_path__ + \"static/media/short.c75b3ee9.svg\";","export default __webpack_public_path__ + \"static/media/short_active.d3098d1c.svg\";","export default __webpack_public_path__ + \"static/media/flag_en.c92a8361.svg\";","export default __webpack_public_path__ + \"static/media/flag_es.4ba7dfef.svg\";","export default __webpack_public_path__ + \"static/media/flag_fr.589da1a2.svg\";","export default __webpack_public_path__ + \"static/media/flag_ja.81aa61af.svg\";","export default __webpack_public_path__ + \"static/media/flag_ko.97c8fe63.svg\";","export default __webpack_public_path__ + \"static/media/flag_ru.0c71e16b.svg\";","export default __webpack_public_path__ + \"static/media/flag_zh.fd0e8daf.svg\";","export default __webpack_public_path__ + \"static/media/glp_icon.ef02d046.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABPCAQAAAC3gKgqAAADyUlEQVR4Ae3BfWhVdQDH4e/Z3Uvb2lZukS5sOEI3UHS95xbBqg2iQmcvpCRZZClYkBoWaAvpD0ncHxVCFjE0iyE6eyFqK6K3RRTaiy1ptaXljDnL29h2t7v7iZGeTuuen9vd7r3nynke+Xw+n8/n800EWToXUMKrVCnVkcELwPsUKbWxlH5GbcZS6mI23/OPk9QqVZHNTv7VxiVKTawkhFMDAaUeKujkv4LUKdWQTzP/9zWlSi2sI0w0O8hU6qCSbqIbYLlSBYW04O4w5UoFWNQTwWQ3OfI+aujFbIhV8jqKaePsuqiQlxGggfHZT768iyX8xfiMsF5eRSnfMn7dVMmLyOJlJqaFafIe7mOQiYnwFJa8hXl0MHG91MhLyKWJ2LRRLO/gEYaJ1TYC8gau5iixC7JIXsAFvI1ZK3sxOcAsJR9PEMGki/mUcBCTF8lUcnEDv2MyxCpJoo4g7vpZqmTiIj7EbDc5kkSABkzaKVOykMYzmP1AuU6jmM8x2UW2koNb+AOTAe6VA7WcxN0QDysZmMkXmO0gUw5YbMakkwVKNNJ5DrODzNIYFPEBJs3kKbG4iz5MgixWFFzPcdyFeUyJxGV8h9lWAoqKxxnB3TEWKlE4j0bMPmOGbAQIyEYBb2DSQqESg/sZxKSXm+XAA6yWA1fQhbsIm5QIzOMnzOqxZKOCI3RzrRxYzRDuTnCj4o3z2YNZC4Wykc9+Rr3LNNnI4TVMPmGG4otHCWNyjIVyYB1hRkXYKAfKOYzJs6QpfriGXzEJs1YOVNLNGT1Uy4HlDODuFLcrXriQdzDbR55sFNKK00dcLBtZvITJV5QoPthIBJOfmS8bFk8z1hbSZKOUbzDZTqamHtX0YBLiQTlQQy9j/cmtcuAO+nDXzzJNNabzMWaNZMtGMW1E8yUzZSOdBkzaKdNUIo0tmB1itmwE2Iab58mQjWLaMNlJtqYOt3EKkyB3yoHFBHHTx91yoJZe3IV4SONi6awo0V5dLpNf1KiQLI1C6bpHZXJ3SIusDp2GpXo9qXS56VKddUCTRwbbmWqvkCUbRbRiso88TR7L6GeqDbJCDlRxHHdh1mqymEM78dDBXDmwgRHc/cZ1mgyy2UW8NJErGwW8icl7FCp2rCREvAyzRg5cyRHcRdikWLGATuLpKFfJgTUM4+4ENykW5NNMvL1FgWzk0oTJp0zXxLGeMPE2wgY5MJcfMdlKQBNDJT0kQi/VcmAFIdz1s0Qu0hVdjpoV0fhZik1Al2JZ6IzXVag5iii6dOXKq7Dk8/l8Pp/Pd676GwYUP6Kwt1/bAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/gmx-logo-final-white.b7833ed6.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-final.0b59e423.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-glow.83c5aea5.png\";","export default __webpack_public_path__ + \"static/media/gmx-logo-with-name.03a4464f.svg\";","export default __webpack_public_path__ + \"static/media/gmx_logo.2b33868e.svg\";","export default __webpack_public_path__ + \"static/media/graphite-01.6f3526cd.png\";","export default __webpack_public_path__ + \"static/media/ic-communityproject.9b5f97dd.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_16.f4c1a9fe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_24.21ec7bfe.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_96.b12913b6.svg\";","export default __webpack_public_path__ + \"static/media/ic_arbitrum_hover_16.d779b479.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowleft16.21502a04.svg\";","export default __webpack_public_path__ + \"static/media/ic_arrowright16.b425521a.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_16.90aca01d.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_24.be4891c9.svg\";","export default __webpack_public_path__ + \"static/media/ic_avalanche_96.b6255c50.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_30.403cd87e.svg\";","export default __webpack_public_path__ + \"static/media/ic_avax_40.ba220dde.svg\";","export default __webpack_public_path__ + \"static/media/ic_banxa.06412144.svg\";","export default __webpack_public_path__ + \"static/media/ic_binance_logo.46794a16.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc.8de996f1.svg\";","export default __webpack_public_path__ + \"static/media/ic_bsc_96.369f1d28.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_24.bab8cadc.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc.b_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_24.f992927a.svg\";","export default __webpack_public_path__ + \"static/media/ic_btc_40.1560513c.svg\";","export default __webpack_public_path__ + \"static/media/ic_busd_24.2432ce58.svg\";","export default __webpack_public_path__ + \"static/media/ic_buy_glp.8eb00e6a.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAsCAYAAAAq/ZsdAAAFI0lEQVR4Ac1ZA5AsSRCd2FkMvm2cbdu2bdu2bdt3obN9X6tGrW3vxv6x509e5dwtukZdXYt5EW9ZNf1eZFZmVbVJL8yyfJpZlT2UYIw4VzrVlC3IJXINChNhriLXZJOh56gon4Ahbw5RHs8SO+JRwrmmbEMuIfuYiRzgNYNzcK4pG5Gryk9j+vCkGs7JGgOiqYdjj7MEzj/OErrfCHHuBBiS9slR5XpMpXTEMZtf037hcdYgiPAEe3gHU7bghBkw43hrsNWoGZw77iLNqnqWWVW+yVElNR1xDG2mZ51gCRxg1BDOHT8nkrQFFfgLpVvP+rmorRUe6ekJPtrTU3P6Lt7PDRh6Ydy85CjSlVRkxKxIusr2TrXVMBq3NnVtOGq2b5An1TBdxyfFiPwRFbmep/cc1FCvMfRgTzfY/yqLzP6iehJTTVEW5SqyRA3FU0zUEP7dUkRiW13W0X3EIu/Tx9kCDyTjsZbABWNvRi1ckUuUOr0phpxdTuDGzg742+MG4vdrDLWEQvG/v9DfB4c01ofiG9WysiWmCUF5+cxcVaniMYNrxhGNgl6scnpg578anbsfMHgKjcj+oznmfcesyKuoyCC/GT784vDBwnfqk66hY63Bv+g6WiFuRpVf5dyrwT8eD/DCR/3fWBeDZauaYaMHW1IVBwfl9SLV7HTeUylGJxnQ5Cq3B9a4fEA8G6CSeu4Pac2cQP7jrNXVsOPpPelK+Ff8JbyoaBoVOMBbzW6iRYAFVjhrURmsLGxFwRre0xiDy6q1fzuAeKGgSIVDNvKkK+Uq19rKJdKLQzsAHmI5ZmEpIbBVcReK1c0tV3fB8kebMvUnB5rS1W+ouBgl8PKk5iZg8fWAH0Vy07a6DPbbySFsCrc193JFh+k9qVDkBHixnUmxNNx6VTesvL8ZRYuZov2mnREqnHYsmv0A3/ZriwHLw0kILOuI3o2rioUi6WFtqLKJ8Pv1LtCLCk9qYzP/qYZdj+7Xu4H9KjHdiHIP00S5iUVgb+KCL3rjJVkXvNHkppaXtsCOp/bqPmIcawudwDRS5S9RMxutaxsWdHZFDN7tikGxEzKiLwQJhrYhPbDpg208Z6YWxpD0i4ihXMojSChB2JC5x1ti8OfgUFNNxEvt2jl7Egcs+LSexxBoduc0Ql4RQxsVtukuy9hUGWAkNWMOI0GYsqacwxATJbMitxk1YysqgwOJl6fX4BZIA/ydHTPr92o4YoEPhXKvJUy5P40amlZUmZBij7XEv6dMQW80s6Gt3u3kv1CxhT4wIUQu4Dcr7dCIbfYPVTAszYnEIsAAK6PGzFEkPNSLeOkYMvS3ETP2deWwB3GwZriPEGw0dyODsPDdeqNXXiv+v2OTndxbnj9rYC/iRBHxMs2PxAqHnLu6DnY5vk/sDo8K/I23uVpKCRxJwsNCvhvgiUxyM5uXdMKitxoMmUHiBYspDlWdkavIMs8WaObq6gRBuAnFNYELvYVJQexD+HeMJptmx5Eobc6tMPeLWjhyrk/IEHNiVd5BU3qiNefvGq6ewy7+Y6kJPNhtWdIFtnVlsNFDicdwYUOIPEJ2zFXjrx8bKMO5RC5KGqFfqwzdyyE3+bQN8ktVmPldNWxyeyvsv71T2AxS6D4PK0q6D79+d22N/vyRqIBYjionAvohf6d7wIuXReJGkGcuGF8zqMWYCzZKlqBTTIg4UcNQdISBR2GBF1rCxGejhjF/S4cVhj9aYlHBZ/Lf1/Gn4QFxc+PIdK9a/gVaRiAcqhHzNAAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/ic_cash.21569a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_checked.b4f2217c.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_coingecko_hover_16.ef20d202.svg\";","export default __webpack_public_path__ + \"static/media/ic_convert_down.74b7eb02.svg\";","export default __webpack_public_path__ + \"static/media/ic_copy_16.fafdf331.svg\";","export default __webpack_public_path__ + \"static/media/ic_cost.56371371.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_24.bafa9da6.svg\";","export default __webpack_public_path__ + \"static/media/ic_dai_40.6f901476.svg\";","export default __webpack_public_path__ + \"static/media/ic_discord.be4d716c.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_24.6b1d8a1d.svg\";","export default __webpack_public_path__ + \"static/media/ic_eth_40.5e255508.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_24.7349c478.svg\";","export default __webpack_public_path__ + \"static/media/ic_frax_40.1e127166.svg\";","export default __webpack_public_path__ + \"static/media/ic_github.dbd4de8a.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_24.eff381d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_40.087335c1.svg\";","export default __webpack_public_path__ + \"static/media/ic_glp_custom.11dd75db.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx.bf8fb0b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_24.2b59d7e0.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_30.375de394.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_40.8cd483b1.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_64.f4caeaad.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_arbitrum.59f04e87.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_avax.fb50658c.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_big.a0a74216.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_custom.fd35b66a.svg\";","export default __webpack_public_path__ + \"static/media/ic_gmx_footer.e7821eb2.svg\";","export default __webpack_public_path__ + \"static/media/ic_hop.0f4a98a0.svg\";","export default __webpack_public_path__ + \"static/media/ic_info.f334ee0a.svg\";","export default __webpack_public_path__ + \"static/media/ic_language24.ceaebef6.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_24.0d641e52.svg\";","export default __webpack_public_path__ + \"static/media/ic_link_40.4bb3a048.svg\";","export default __webpack_public_path__ + \"static/media/ic_liquidity.f00d35e4.svg\";","export default __webpack_public_path__ + \"static/media/ic_medium.f6051b2e.svg\";","export default __webpack_public_path__ + \"static/media/ic_menu_dots.87c2cfaa.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_metamask_hover_16.aa3dce32.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_24.b6a1708c.svg\";","export default __webpack_public_path__ + \"static/media/ic_mim_40.42c8b575.svg\";","export default __webpack_public_path__ + \"static/media/ic_multiswap.e577f4fa.svg\";","export default __webpack_public_path__ + \"static/media/ic_new_link_16.5b7cb7bf.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus.70b17676.svg\";","export default __webpack_public_path__ + \"static/media/ic_olympus_arbitrum.b358dc93.svg\";","export default __webpack_public_path__ + \"static/media/ic_selector_dropdowns.aaf0b8f0.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_16.9d97766b.svg\";","export default __webpack_public_path__ + \"static/media/ic_settings_24.25d2f4a7.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign in_16.b6f5b1d9.svg\";","export default __webpack_public_path__ + \"static/media/ic_sign_out_16.1b0564f3.svg\";","export default __webpack_public_path__ + \"static/media/ic_simpleswaps.4cd51f2a.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats.f0a18011.svg\";","export default __webpack_public_path__ + \"static/media/ic_stats_big.4a4ebfb7.svg\";","export default __webpack_public_path__ + \"static/media/ic_synapse.b100121a.svg\";","export default __webpack_public_path__ + \"static/media/ic_telegram.af1a4a66.svg\";","export default __webpack_public_path__ + \"static/media/ic_tether_24.a7c88dcd.svg\";","export default __webpack_public_path__ + \"static/media/ic_tokens.6a27251b.svg\";","export default __webpack_public_path__ + \"static/media/ic_totaluser.e274ef10.svg\";","export default __webpack_public_path__ + \"static/media/ic_trading.2c53815a.svg\";","export default __webpack_public_path__ + \"static/media/ic_transfer_avax.53893264.svg\";","export default __webpack_public_path__ + \"static/media/ic_twitter.9f35b403.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_24.47e903f7.svg\";","export default __webpack_public_path__ + \"static/media/ic_uni_40.efe1f12f.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc.e_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_24.0952740b.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdc_40.27f415ba.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_24.5ab8778d.svg\";","export default __webpack_public_path__ + \"static/media/ic_usdt_40.e357d24a.svg\";","export default __webpack_public_path__ + \"static/media/ic_wallet_24.4be97369.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_24.43583fc4.svg\";","export default __webpack_public_path__ + \"static/media/ic_wavax_40.ba36eda4.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_24.bc395894.svg\";","export default __webpack_public_path__ + \"static/media/ic_weth_40.334ca16a.svg\";","export default __webpack_public_path__ + \"static/media/lg_arbitrum.bdf133fe.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX.b956aa96.svg\";","export default __webpack_public_path__ + \"static/media/logo_GMX_small.f593fa5c.svg\";","export default __webpack_public_path__ + \"static/media/long.0bc4a064.svg\";","export default __webpack_public_path__ + \"static/media/metamask-text.2f9c2df2.svg\";","export default __webpack_public_path__ + \"static/media/metamask.4b5d438a.png\";","export default __webpack_public_path__ + \"static/media/page-not-found.bb90d073.svg\";","export default __webpack_public_path__ + \"static/media/position-share-bg.900fbfaa.png\";","export default __webpack_public_path__ + \"static/media/short.1f94a0c2.svg\";","export default __webpack_public_path__ + \"static/media/swap.40fb8e49.svg\";","export default __webpack_public_path__ + \"static/media/trading.7ea1604c.jpg\";","export default __webpack_public_path__ + \"static/media/wallet-connect-text.78166b41.svg\";","export default __webpack_public_path__ + \"static/media/walletconnect-circle-blue.31c29967.svg\";","export default __webpack_public_path__ + \"static/media/wave-01.3c9bce1e.png\";","export default __webpack_public_path__ + \"static/media/wave-02.4a56e8c7.png\";","var map = {\n\t\"./icon-Hegic_sm.svg\": 320,\n\t\"./icon-Lyra_sm.svg\": 321\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 829;","import React from 'react';\r\n\r\nconst Logo = () => {\r\n\treturn (\r\n\t\t<div className=\"logo-wrapper\">\r\n\t\t\t<a className='logo' href=\"/index.html\">DeDeLend</a>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Logo;","import React from 'react';\r\nimport cx from 'classnames';\r\n\r\nconst Button = ({children, className, clickHandler, disabled, isMain, ...props}) => {\r\n\tconst classes = cx('btn', className, (isMain && 'btn_main'), (props.btnActive && 'btn_hlight'));\r\n\t\r\n\tconst childProps = { ...props };\r\n\tdelete childProps.btnActive;\r\n\t\r\n\treturn (\r\n\t\t<button {...childProps} disabled={disabled} className={classes} data-text={children}>\r\n\t\t\t{\r\n\t\t\t\tisMain ? \r\n\t\t\t\t\t<span>{children.toString()}</span> :\r\n\t\t\t\t\tchildren\r\n\t\t\t}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default Button;","import { useState } from 'react';\r\n\r\nexport const useTogglePopup = () => {\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\r\n\tfunction openPopup(e) {\r\n\t\tif (isOpen) {\r\n\t\t\tclosePopup();\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\te.stopPropagation();\r\n\t\tdocument.addEventListener('click', closePopup);\r\n\t\tsetIsOpen(true);\r\n\t}\r\n\tfunction closePopup() {\r\n\t\tdocument.removeEventListener('click', closePopup);\r\n\t\tsetIsOpen(false);\r\n\t}\r\n\r\n\treturn {\r\n\t\tisOpen,\r\n\t\topenPopup,\r\n\t\tclosePopup,\r\n\t};\r\n}","import React, { useState } from 'react';\r\nimport icon_wallet from '../img/icon-wallet.svg';\r\nimport icon_link from '../img/icon-link.svg';\r\nimport Button from './UI/button/Button';\r\nimport { useTogglePopup } from './../hooks/useTogglePopup';\r\n\r\nconst Wallet = ({ address, setAddress }) => {\r\n\tconst {\r\n\t\tisOpen,\r\n\t\topenPopup: openWallet,\r\n\t\tclosePopup: closeWallet,\r\n\t} = useTogglePopup();\r\n\r\n\tfunction cutAddress(addr) {\r\n\t\tif (!addr) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn addr.slice(0, 9) + '...' + addr.slice(-15);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className={\"wallet\" + (isOpen ? \" active\" : \"\")}>\r\n\t\t\t<button className=\"wallet__header\" onClick={openWallet}>\r\n\t\t\t\t<div className=\"wallet__address\">\r\n\t\t\t\t\t<img src={icon_wallet} alt=\"ETH\" />\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t{cutAddress(address)}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t\t<div className=\"wallet__body\" onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t<button className=\"close-btn\" onClick={closeWallet}>\r\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\">\r\n\t\t\t\t\t\t<g clipPath=\"url(#clip0_1830_494)\">\r\n\t\t\t\t\t\t\t<path d=\"M10 0.875L9.125 0L5 4.125L0.875 0L0 0.875L4.125 5L0 9.125L0.875 10L5 5.875L9.125 10L10 9.125L5.875 5L10 0.875Z\" fill=\"white\"/>\r\n\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t<clipPath id=\"clip0_1830_494\">\r\n\t\t\t\t\t\t\t\t<rect width=\"10\" height=\"10\" fill=\"white\"/>\r\n\t\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t\t<a className=\"wallet__link\" href={`https://arbiscan.io/address/${address}`} rel='noreferrer' target='_blank'>\r\n\t\t\t\t\t<img src={icon_link} alt=\"external link\" />\r\n\t\t\t\t\t<span>View on Arbiscan</span>\r\n\t\t\t\t</a>\r\n\t\t\t\t<Button className=\"wallet__button\" btnActive={true} onClick={() => {\r\n\t\t\t\t\tsetAddress('');\r\n\t\t\t\t}}>\r\n\t\t\t\t\tDisconnect wallet\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Wallet;","import { createContext } from \"react\";\r\n\r\nexport const GlobalStatsContext = createContext(null)\r\nexport const UserStatsContext = createContext(null)","import { ethers } from 'ethers';\r\n\r\nconst ARBITRUM = 42161;\r\n\r\nexport const requestAccount = async (setWalletAddress) => {\r\n\tif (window.ethereum) {\r\n\t\ttry {\r\n\t\t\tif (window.ethereum.networkVersion && Number(window.ethereum.networkVersion) !== ARBITRUM) {\r\n\t\t\t\talert('Change your network (Arbitrum) and reload the page')\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait window.ethereum.request({\r\n\t\t\t\t\t\tmethod: \"wallet_switchEthereumChain\",\r\n\t\t\t\t\t\tparams: [{\r\n\t\t\t\t\t\t\tchainId: ethers.utils.hexlify(ARBITRUM)\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t} catch(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\r\n\t\t\t\t\tif (err.code === 4902) {\r\n\t\t\t\t\t\tawait window.ethereum.request({\r\n\t\t\t\t\t\t\tmethod: \"wallet_addEthereumChain\",\r\n\t\t\t\t\t\t\tparams: [{\r\n\t\t\t\t\t\t\t\tchainId: ethers.utils.hexlify(ARBITRUM),\r\n\t\t\t\t\t\t\t\tchainName: 'Arbitrum One',\r\n\t\t\t\t\t\t\t\tnativeCurrency: {\r\n\t\t\t\t\t\t\t\t\tsymbol: 'ETH',\r\n\t\t\t\t\t\t\t\t\tdecimals: 18\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\trpcUrls: ['https://arb1.arbitrum.io/rpc'],\r\n\t\t\t\t\t\t\t\tblockExplorerUrls: ['https://arbiscan.io/']\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\twindow.location.reload()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst accounts = await window.ethereum.request({\r\n\t\t\t\tmethod: 'eth_requestAccounts',\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tsetWalletAddress(accounts[0])\r\n\r\n\t\t\twindow.ethereum.on('accountsChanged', (accounts) => {\r\n\t\t\t\tsetWalletAddress(accounts[0])\r\n\t\t\t})\r\n\t\t} catch(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t\t\r\n\t} else {\r\n\t\talert('Please, install MetaMask extension to use this application.');\r\n\t}\r\n}\r\n\r\nexport const connectWallet = async (setWalletAddress) => {\r\n\tawait requestAccount(setWalletAddress);\r\n}\r\n\r\n\r\nexport const cutAddress = (addr, isAdaptive = true) => {\r\n\tif (!addr) {\r\n\t\treturn '';\r\n\t}\r\n\r\n\tif (isAdaptive && window.outerWidth <= 480) {\r\n\t\treturn addr.slice(0, 3) + '...' + addr.slice(-3);\r\n\t}\r\n\t\r\n\treturn addr.slice(0, 10) + '...' + addr.slice(-5);\r\n}","import { ethers } from 'ethers';\r\n\r\nexport const netProvider = new ethers.getDefaultProvider('https://arb-mainnet.g.alchemy.com/v2/r6kd0heyoOCe8RFndkyv0XW0F-BG38Fy');\r\n\r\n\r\nexport const mmProvider = window.ethereum ? new ethers.providers.Web3Provider(window.ethereum) : undefined;\r\n\r\nexport const signer = mmProvider?.getSigner()","const CONTRACTS = {\r\n  56: {\r\n    // bsc mainnet\r\n    Treasury: \"0xa44E7252a0C137748F523F112644042E5987FfC7\",\r\n    BUSD: \"0xe9e7cea3dedca5984780bafc599bd69add087d56\",\r\n    GMT: \"0x99e92123eB77Bc8f999316f622e5222498438784\",\r\n    Vault: \"0xc73A8DcAc88498FD4b4B1b2AaA37b0a2614Ff67B\",\r\n    Router: \"0xD46B23D042E976F8666F554E928e0Dc7478a8E1f\",\r\n    Reader: \"0x087A618fD25c92B61254DBe37b09E5E8065FeaE7\",\r\n    AmmFactory: \"0xBCfCcbde45cE874adCB698cC183deBcF17952812\",\r\n    AmmFactoryV2: \"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73\",\r\n    OrderBook: \"0x1111111111111111111111111111111111111111\",\r\n    OrderBookReader: \"0x1111111111111111111111111111111111111111\",\r\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\r\n    USDG: \"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7\",\r\n    NATIVE_TOKEN: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\r\n    XGMT: \"0xe304ff0983922787Fd84BC9170CD21bF78B16B10\",\r\n    GMT_USDG_PAIR: \"0xa41e57459f09a126F358E118b693789d088eA8A0\",\r\n    XGMT_USDG_PAIR: \"0x0b622208fc0691C2486A3AE6B7C875b4A174b317\",\r\n    GMT_USDG_FARM: \"0x3E8B08876c791dC880ADC8f965A02e53Bb9C0422\",\r\n    XGMT_USDG_FARM: \"0x68D7ee2A16AB7c0Ee1D670BECd144166d2Ae0759\",\r\n    USDG_YIELD_TRACKER: \"0x0EF0Cf825B8e9F89A43FfD392664131cFB4cfA89\",\r\n    XGMT_YIELD_TRACKER: \"0x82A012A9b3003b18B6bCd6052cbbef7Fa4892e80\",\r\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x08FAb024BEfcb6068847726b2eccEAd18b6c23Cd\",\r\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd8E26637B34B2487Cad1f91808878a391134C5c2\",\r\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0x026A02F7F26C1AFccb9Cba7C4df3Dc810F4e92e8\",\r\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x22458CEbD14a9679b2880147d08CA1ce5aa40E84\",\r\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\r\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\r\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\r\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\r\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\r\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\r\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\r\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\r\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\r\n  },\r\n  97: {\r\n    // bsc testnet\r\n    Vault: \"0x1B183979a5cd95FAF392c8002dbF0D5A1C687D9a\",\r\n    Router: \"0x10800f683aa564534497a5b67F45bE3556a955AB\",\r\n    Reader: \"0x98D4742F1B6a821bae672Cd8721283b91996E454\",\r\n    AmmFactory: \"0x6725f303b657a9451d8ba641348b6761a6cc7a17\",\r\n    AmmFactoryV2: \"0x1111111111111111111111111111111111111111\",\r\n    OrderBook: \"0x9afD7B4f0b58d65F6b2978D3581383a06b2ac4e9\",\r\n    OrderBookReader: \"0x0713562970D1A802Fa3FeB1D15F9809943982Ea9\",\r\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\r\n    USDG: \"0x2D549bdBf810523fe9cd660cC35fE05f0FcAa028\",\r\n    GMT: \"0xedba0360a44f885ed390fad01aa34d00d2532817\",\r\n    NATIVE_TOKEN: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\r\n    XGMT: \"0x28cba798eca1a3128ffd1b734afb93870f22e613\",\r\n    GMT_USDG_PAIR: \"0xe0b0a315746f51932de033ab27223d85114c6b85\",\r\n    XGMT_USDG_PAIR: \"0x0108de1eea192ce8448080c3d90a1560cf643fa0\",\r\n    GMT_USDG_FARM: \"0xbe3cB06CE03cA692b77902040479572Ba8D01b0B\",\r\n    XGMT_USDG_FARM: \"0x138E92195D4B99CE3618092D3F9FA830d9A69B4b\",\r\n    USDG_YIELD_TRACKER: \"0x62B49Bc3bF252a5DB26D88ccc7E61119e3179B4f\",\r\n    XGMT_YIELD_TRACKER: \"0x5F235A582e0993eE9466FeEb8F7B4682993a57d0\",\r\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x4f8EE3aE1152422cbCaFACd4e3041ba2D859913C\",\r\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd691B26E544Fe370f39A776964c991363aF72e56\",\r\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0xfd5617CFB082Ba9bcD62d654603972AE312bC695\",\r\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x0354387DD85b7D8aaD1611B3D167A384d6AE0c28\",\r\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\r\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\r\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\r\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\r\n  },\r\n  421611: {\r\n    // arbitrum testnet\r\n    Vault: \"0xBc9BC47A7aB63db1E0030dC7B60DDcDe29CF4Ffb\",\r\n    Router: \"0xe0d4662cdfa2d71477A7DF367d5541421FAC2547\",\r\n    VaultReader: \"0xFc371E380262536c819D12B9569106bf032cC41c\",\r\n    Reader: \"0x2E093c70E3A7E4919611d2555dFd8D697d2fC0a1\",\r\n    GlpManager: \"0xD875d99E09118d2Be80579b9d23E83469077b498\",\r\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\r\n    RewardReader: \"0x0000000000000000000000000000000000000000\",\r\n    NATIVE_TOKEN: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\r\n    GLP: \"0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\r\n    GMX: \"0x0000000000000000000000000000000000000000\",\r\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\r\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\r\n    USDG: \"0xBCDCaF67193Bf5C57be08623278fCB69f4cA9e68\",\r\n    ES_GMX_IOU: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\r\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\r\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    OrderBook: \"0xebD147E5136879520dDaDf1cA8FBa48050EFf016\",\r\n    OrderBookReader: \"0xC492c8d82DC576Ad870707bb40EDb63E2026111E\",\r\n\r\n    PositionRouter: \"0xB4bB78cd12B097603e2b55D2556c09C17a5815F8\",\r\n    PositionManager: \"0x168aDa266c2f10C1F37973B213d6178551030e44\",\r\n\r\n    // UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\r\n    ReferralStorage: \"0x0000000000000000000000000000000000000000\",\r\n    ReferralReader: \"0x0000000000000000000000000000000000000000\",\r\n  },\r\n  42161: {\r\n    // arbitrum mainnet\r\n    Vault: \"0x489ee077994B6658eAfA855C308275EAd8097C4A\",\r\n    Router: \"0xaBBc5F99639c9B6bCb58544ddf04EFA6802F4064\",\r\n    VaultReader: \"0xfebB9f4CAC4cD523598fE1C5771181440143F24A\",\r\n    Reader: \"0x2b43c90D1B727cEe1Df34925bcd5Ace52Ec37694\",\r\n    GlpManager: \"0x3963FfC9dff443c2A94f21b129D429891E32ec18\",\r\n    RewardRouter: \"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1\",\r\n    GlpRewardRouter: \"0xB95DB5B167D75e6d04227CfFFA61069348d271F5\",\r\n    RewardReader: \"0x8BFb8e82Ee4569aee78D03235ff465Bd436D40E0\",\r\n    NATIVE_TOKEN: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\r\n    GLP: \"0x4277f8F2c384827B5273592FF7CeBd9f2C1ac258\",\r\n    GMX: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\r\n    ES_GMX: \"0xf42Ae1D54fd613C9bb14810b0588FaAa09a426cA\",\r\n    BN_GMX: \"0x35247165119B69A40edD5304969560D0ef486921\",\r\n    USDG: \"0x45096e7aA921f27590f8F19e457794EB09678141\",\r\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\",\r\n    StakedGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\r\n    BonusGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\r\n    FeeGmxTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\r\n    StakedGlpTracker: \"0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\r\n    FeeGlpTracker: \"0x4e971a87900b931fF39d1Aad67697F49835400b6\",\r\n\r\n    StakedGmxDistributor: \"0x23208B91A98c7C1CD9FE63085BFf68311494F193\",\r\n    StakedGlpDistributor: \"0x60519b48ec4183a61ca2B8e37869E675FD203b34\",\r\n\r\n    GmxVester: \"0x199070DDfd1CFb69173aa2F7e20906F26B363004\",\r\n    GlpVester: \"0xA75287d2f8b217273E7FCD7E86eF07D33972042E\",\r\n\r\n    OrderBook: \"0x09f77E8A13De9a35a7231028187e9fD5DB8a2ACB\",\r\n    OrderExecutor: \"0x7257ac5D0a0aaC04AA7bA2AC0A6Eb742E332c3fB\",\r\n    OrderBookReader: \"0xa27C20A7CF0e1C68C0460706bB674f98F362Bc21\",\r\n\r\n    PositionRouter: \"0xb87a436B93fFE9D75c5cFA7bAcFff96430b09868\",\r\n    PositionManager: \"0x75E42e6f01baf1D6022bEa862A28774a9f8a4A0C\",\r\n\r\n    UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\r\n    ReferralStorage: \"0xe6fab3f0c7199b0d34d7fbe83394fc0e0d06e99d\",\r\n    ReferralReader: \"0x8Aa382760BCdCe8644C33e6C2D52f6304A76F5c8\",\r\n\r\n    Multicall: \"0xcA11bde05977b3631167028862bE2a173976CA11\",\r\n  },\r\n  43114: {\r\n    // avalanche\r\n    Vault: \"0x9ab2De34A33fB459b538c43f251eB825645e8595\",\r\n    Router: \"0x5F719c2F1095F7B9fc68a68e35B51194f4b6abe8\",\r\n    VaultReader: \"0x66eC8fc33A26feAEAe156afA3Cb46923651F6f0D\",\r\n    Reader: \"0x2eFEE1950ededC65De687b40Fd30a7B5f4544aBd\",\r\n    GlpManager: \"0xe1ae4d4b06A5Fe1fc288f6B4CD72f9F8323B107F\",\r\n    RewardRouter: \"0x82147C5A7E850eA4E28155DF107F2590fD4ba327\",\r\n    RewardReader: \"0x04Fc11Bd28763872d143637a7c768bD96E44c1b6\",\r\n    NATIVE_TOKEN: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\r\n    GLP: \"0x01234181085565ed162a948b6a5e88758CD7c7b8\",\r\n    GMX: \"0x62edc0692BD897D2295872a9FFCac5425011c661\",\r\n    ES_GMX: \"0xFf1489227BbAAC61a9209A08929E4c2a526DdD17\",\r\n    BN_GMX: \"0x8087a341D32D445d9aC8aCc9c14F5781E04A26d2\",\r\n    USDG: \"0xc0253c3cC6aa5Ab407b5795a04c28fB063273894\",\r\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\", // placeholder address\r\n\r\n    StakedGmxTracker: \"0x2bD10f8E93B3669b6d42E74eEedC65dd1B0a1342\",\r\n    BonusGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\r\n    FeeGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\r\n    StakedGlpTracker: \"0x9e295B5B976a184B14aD8cd72413aD846C299660\",\r\n    FeeGlpTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\r\n\r\n    StakedGmxDistributor: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\r\n    StakedGlpDistributor: \"0xDd593Cf40734199afc9207eBe9ffF23dA4Bf7720\",\r\n\r\n    GmxVester: \"0x472361d3cA5F49c8E633FB50385BfaD1e018b445\",\r\n    GlpVester: \"0x62331A7Bd1dfB3A7642B7db50B5509E57CA3154A\",\r\n\r\n    OrderBook: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\r\n    OrderExecutor: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\r\n    OrderBookReader: \"0xccFE3E576f8145403d3ce8f3c2f6519Dae40683B\",\r\n\r\n    PositionRouter: \"0xffF6D276Bc37c61A23f06410Dce4A400f66420f8\",\r\n    PositionManager: \"0xA21B83E579f4315951bA658654c371520BDcB866\",\r\n\r\n    TraderJoeGmxAvaxPool: \"0x0c91a070f862666bbcce281346be45766d874d98\",\r\n    ReferralStorage: \"0x827ed045002ecdabeb6e2b0d1604cf5fc3d322f8\",\r\n    ReferralReader: \"0x505Ce16D3017be7D76a7C2631C0590E71A975083\",\r\n  },\r\n};\r\n\r\nexport function getContract(chainId, name, market) {\r\n  if (!CONTRACTS[chainId]) {\r\n    throw new Error(`Unknown chainId ${chainId}`);\r\n  }\r\n  if (!CONTRACTS[chainId][name]) {\r\n    throw new Error(`Unknown contract \"${name}\" for chainId ${chainId}`);\r\n  }\r\n  return CONTRACTS[chainId][name];\r\n}\r\n\r\nexport const XGMT_EXCLUDED_ACCOUNTS = [\r\n  \"0x330eef6b9b1ea6edd620c825c9919dc8b611d5d5\",\r\n  \"0xd9b1c23411adbb984b1c4be515fafc47a12898b2\",\r\n  \"0xa633158288520807f91ccc98aa58e0ea43acb400\",\r\n  \"0xffd0a93b4362052a336a7b22494f1b77018dd34b\",\r\n];\r\n","import { ethers } from \"ethers\";\r\nimport { getContract } from \"./Addresses\";\r\n\r\nconst TOKENS = {\r\n  56: [\r\n    {\r\n      name: \"Bitcoin (BTCB)\",\r\n      symbol: \"BTC\",\r\n      decimals: 18,\r\n      address: \"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c\",\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-bitcoin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/14108/small/Binance-bitcoin.png\",\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: \"0x2170Ed0880ac9A755fd29B2688956BD959F933F8\",\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png\",\r\n    },\r\n    {\r\n      name: \"Binance Coin\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\r\n      isNative: true,\r\n    },\r\n    {\r\n      name: \"Wrapped Binance Coin\",\r\n      symbol: \"WBNB\",\r\n      decimals: 18,\r\n      address: getContract(56, \"NATIVE_TOKEN\"),\r\n      isWrapped: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\r\n      baseSymbol: \"BNB\",\r\n    },\r\n    {\r\n      name: \"USD Gambit\",\r\n      symbol: \"USDG\",\r\n      decimals: 18,\r\n      address: getContract(56, \"USDG\"),\r\n      isUsdg: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-gambit\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\r\n    },\r\n    {\r\n      name: \"Binance USD\",\r\n      symbol: \"BUSD\",\r\n      decimals: 18,\r\n      address: \"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-usd\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 18,\r\n      address: \"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 18,\r\n      address: \"0x55d398326f99059fF775485246999027B3197955\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/tether\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\r\n    },\r\n  ],\r\n  97: [\r\n    {\r\n      name: \"Bitcoin (BTCB)\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56\",\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: \"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02\",\r\n    },\r\n    {\r\n      name: \"Binance Coin\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n    },\r\n    {\r\n      name: \"Wrapped Binance Coin\",\r\n      symbol: \"WBNB\",\r\n      decimals: 18,\r\n      address: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\r\n      isWrapped: true,\r\n      baseSymbol: \"BNB\",\r\n    },\r\n    {\r\n      name: \"USD Gambit\",\r\n      symbol: \"USDG\",\r\n      decimals: 18,\r\n      address: getContract(97, \"USDG\"),\r\n      isUsdg: true,\r\n    },\r\n    {\r\n      name: \"Binance USD\",\r\n      symbol: \"BUSD\",\r\n      decimals: 18,\r\n      address: \"0x3F223C4E5ac67099CB695834b20cCd5E5D5AA9Ef\",\r\n      isStable: true,\r\n    },\r\n  ],\r\n  421611: [\r\n    {\r\n      name: \"Bitcoin\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0x27960f9A322BE96A1535E6c19B3958e80E6a2670\",\r\n      isShortable: true,\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n    },\r\n    // https://github.com/OffchainLabs/arbitrum/blob/950c2f91b2e951cd3764394e0a73eac3797aecf3/packages/arb-ts/src/lib/networks.ts#L65\r\n    {\r\n      name: \"Wrapped Ethereum\",\r\n      symbol: \"WETH\",\r\n      decimals: 18,\r\n      address: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\r\n      isWrapped: true,\r\n      baseSymbol: \"ETH\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 6,\r\n      address: \"0xf0DCd4737A20ED33481A49De94C599944a3Ca737\",\r\n      isStable: true,\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 6,\r\n      address: \"0x818ED84bA1927945b631016e0d402Db50cE8865f\",\r\n      isStable: true,\r\n    },\r\n  ],\r\n  42161: [\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\r\n    },\r\n    {\r\n      name: \"Wrapped Ethereum\",\r\n      symbol: \"WETH\",\r\n      decimals: 18,\r\n      address: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\r\n      isWrapped: true,\r\n      baseSymbol: \"ETH\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/2518/thumb/weth.png?1628852295\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (WBTC)\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f\",\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\r\n    },\r\n    {\r\n      name: \"Chainlink\",\r\n      symbol: \"LINK\",\r\n      decimals: 18,\r\n      address: \"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4\",\r\n      isStable: false,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/877/thumb/chainlink-new-logo.png?1547034700\",\r\n    },\r\n    {\r\n      name: \"Uniswap\",\r\n      symbol: \"UNI\",\r\n      decimals: 18,\r\n      address: \"0xFa7F8980b0f1E64A2062791cc3b0871572f1F7f0\",\r\n      isStable: false,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12504/thumb/uniswap-uni.png?1600306604\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 6,\r\n      address: \"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 6,\r\n      address: \"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/thumb/Tether-logo.png?1598003707\",\r\n    },\r\n    {\r\n      name: \"Dai\",\r\n      symbol: \"DAI\",\r\n      decimals: 18,\r\n      address: \"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/9956/thumb/4943.png?1636636734\",\r\n    },\r\n    {\r\n      name: \"Frax\",\r\n      symbol: \"FRAX\",\r\n      decimals: 18,\r\n      address: \"0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/13422/small/frax_logo.png?1608476506\",\r\n    },\r\n    {\r\n      name: \"Magic Internet Money\",\r\n      symbol: \"MIM\",\r\n      decimals: 18,\r\n      address: \"0xFEa7a6a0B346362BF88A9e4A88416B77a57D6c2A\",\r\n      isStable: true,\r\n      isTempHidden: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\r\n    },\r\n  ],\r\n  43114: [\r\n    {\r\n      name: \"Avalanche\",\r\n      symbol: \"AVAX\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\r\n    },\r\n    {\r\n      name: \"Wrapped AVAX\",\r\n      symbol: \"WAVAX\",\r\n      decimals: 18,\r\n      address: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\r\n      isWrapped: true,\r\n      baseSymbol: \"AVAX\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\r\n    },\r\n    {\r\n      name: \"Ethereum (WETH.e)\",\r\n      symbol: \"ETH\",\r\n      address: \"0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB\",\r\n      decimals: 18,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (WBTC.e)\",\r\n      symbol: \"BTC\",\r\n      address: \"0x50b7545627a5162F82A992c33b87aDc75187B218\",\r\n      decimals: 8,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (BTC.b)\",\r\n      symbol: \"BTC.b\",\r\n      address: \"0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\r\n      decimals: 8,\r\n      isShortable: false,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693\",\r\n    },\r\n    {\r\n      name: \"USD Coin (USDC.e)\",\r\n      symbol: \"USDC.e\",\r\n      address: \"0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664\",\r\n      decimals: 6,\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      address: \"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E\",\r\n      decimals: 6,\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"Magic Internet Money\",\r\n      symbol: \"MIM\",\r\n      address: \"0x130966628846BFd36ff31a822705796e8cb8C18D\",\r\n      decimals: 18,\r\n      isStable: true,\r\n      isTempHidden: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\r\n    },\r\n  ],\r\n};\r\n\r\nconst ADDITIONAL_TOKENS = {\r\n  42161: [\r\n    {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      address: getContract(42161, \"GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"Escrowed GMX\",\r\n      symbol: \"esGMX\",\r\n      address: getContract(42161, \"ES_GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      address: getContract(42161, \"GLP\"),\r\n      decimals: 18,\r\n    },\r\n  ],\r\n  43114: [\r\n    {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      address: getContract(43114, \"GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"Escrowed GMX\",\r\n      symbol: \"esGMX\",\r\n      address: getContract(43114, \"ES_GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      address: getContract(42161, \"GLP\"),\r\n      decimals: 18,\r\n    },\r\n  ],\r\n};\r\n\r\nconst CHAIN_IDS = [56, 97, 42161, 421611, 43114];\r\n\r\nconst TOKENS_MAP = {};\r\nconst TOKENS_BY_SYMBOL_MAP = {};\r\n\r\nfor (let j = 0; j < CHAIN_IDS.length; j++) {\r\n  const chainId = CHAIN_IDS[j];\r\n  TOKENS_MAP[chainId] = {};\r\n  TOKENS_BY_SYMBOL_MAP[chainId] = {};\r\n  let tokens = TOKENS[chainId];\r\n  if (ADDITIONAL_TOKENS[chainId]) {\r\n    tokens = tokens.concat(ADDITIONAL_TOKENS[chainId]);\r\n  }\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const token = tokens[i];\r\n    TOKENS_MAP[chainId][token.address] = token;\r\n    TOKENS_BY_SYMBOL_MAP[chainId][token.symbol] = token;\r\n  }\r\n}\r\n\r\nconst WRAPPED_TOKENS_MAP = {};\r\nconst NATIVE_TOKENS_MAP = {};\r\nfor (const chainId of CHAIN_IDS) {\r\n  for (const token of TOKENS[chainId]) {\r\n    if (token.isWrapped) {\r\n      WRAPPED_TOKENS_MAP[chainId] = token;\r\n    } else if (token.isNative) {\r\n      NATIVE_TOKENS_MAP[chainId] = token;\r\n    }\r\n  }\r\n}\r\n\r\nexport function getWrappedToken(chainId) {\r\n  return WRAPPED_TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getNativeToken(chainId) {\r\n  return NATIVE_TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getTokens(chainId) {\r\n  return TOKENS[chainId];\r\n}\r\n\r\nexport function isValidToken(chainId, address) {\r\n  if (!TOKENS_MAP[chainId]) {\r\n    throw new Error(`Incorrect chainId ${chainId}`);\r\n  }\r\n  return address in TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getToken(chainId, address) {\r\n  if (!TOKENS_MAP[chainId]) {\r\n    throw new Error(`Incorrect chainId ${chainId}`);\r\n  }\r\n  if (!TOKENS_MAP[chainId][address]) {\r\n    throw new Error(`Incorrect address \"${address}\" for chainId ${chainId}`);\r\n  }\r\n  return TOKENS_MAP[chainId][address];\r\n}\r\n\r\nexport function getTokenBySymbol(chainId, symbol) {\r\n  const token = TOKENS_BY_SYMBOL_MAP[chainId][symbol];\r\n  if (!token) {\r\n    throw new Error(`Incorrect symbol \"${symbol}\" for chainId ${chainId}`);\r\n  }\r\n  return token;\r\n}\r\n\r\nexport function getWhitelistedTokens(chainId) {\r\n  return TOKENS[chainId].filter((token) => token.symbol !== \"USDG\");\r\n}\r\n\r\nexport function getVisibleTokens(chainId) {\r\n  return getWhitelistedTokens(chainId).filter((token) => !token.isWrapped && !token.isTempHidden);\r\n}\r\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { InjectedConnector } from \"@web3-react/injected-connector\";\r\nimport {\r\n  UserRejectedRequestError as UserRejectedRequestErrorWalletConnect,\r\n  WalletConnectConnector,\r\n} from \"@web3-react/walletconnect-connector\";\r\nimport { toast } from \"react-toastify\";\r\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\r\nimport { useLocalStorage } from \"react-use\";\r\nimport { ethers } from \"ethers\";\r\nimport { format as formatDateFn } from \"date-fns\";\r\nimport Token from \"../abis/Token.json\";\r\nimport _ from \"lodash\";\r\nimport { getContract } from \"../config/Addresses\";\r\nimport useSWR from \"swr\";\r\n\r\nimport OrderBookReader from \"../abis/OrderBookReader.json\";\r\nimport OrderBook from \"../abis/OrderBook.json\";\r\n\r\nimport { getWhitelistedTokens, isValidToken } from \"../config/Tokens\";\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nexport const UI_VERSION = \"1.3\";\r\n\r\n// use a random placeholder account instead of the zero address as the zero address might have tokens\r\nexport const PLACEHOLDER_ACCOUNT = ethers.Wallet.createRandom().address;\r\n\r\nexport const MAINNET = 56;\r\nexport const AVALANCHE = 43114;\r\nexport const TESTNET = 97;\r\nexport const ARBITRUM_TESTNET = 421611;\r\nexport const ARBITRUM = 42161;\r\n// TODO take it from web3\r\nexport const DEFAULT_CHAIN_ID = ARBITRUM;\r\nexport const CHAIN_ID = DEFAULT_CHAIN_ID;\r\n\r\nexport const MIN_PROFIT_TIME = 0;\r\n\r\nconst SELECTED_NETWORK_LOCAL_STORAGE_KEY = \"SELECTED_NETWORK\";\r\n\r\nexport const IS_NETWORK_DISABLED = {\r\n  [ARBITRUM]: false,\r\n  [AVALANCHE]: false,\r\n};\r\n\r\nconst CHAIN_NAMES_MAP = {\r\n  [MAINNET]: \"BSC\",\r\n  [TESTNET]: \"BSC Testnet\",\r\n  [ARBITRUM_TESTNET]: \"ArbRinkeby\",\r\n  [ARBITRUM]: \"Arbitrum\",\r\n  [AVALANCHE]: \"Avalanche\",\r\n};\r\n\r\nconst alchemyWhitelistedDomains = [\"gmx.io\", \"app.gmx.io\"];\r\n\r\nexport function getDefaultArbitrumRpcUrl() {\r\n  return \"https://arb1.arbitrum.io/rpc\";\r\n}\r\n\r\nexport function getAlchemyHttpUrl() {\r\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\r\n    return \"https://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\r\n  }\r\n  return \"https://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\r\n}\r\n\r\nexport function getAlchemyWsUrl() {\r\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\r\n    return \"wss://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\r\n  }\r\n  return \"wss://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\r\n}\r\n\r\nconst ARBITRUM_RPC_PROVIDERS = [getDefaultArbitrumRpcUrl()];\r\nconst AVALANCHE_RPC_PROVIDERS = [\"https://api.avax.network/ext/bc/C/rpc\"];\r\nexport const WALLET_CONNECT_LOCALSTORAGE_KEY = \"walletconnect\";\r\nexport const WALLET_LINK_LOCALSTORAGE_PREFIX = \"-walletlink\";\r\nexport const SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY = \"eagerconnect\";\r\nexport const CURRENT_PROVIDER_LOCALSTORAGE_KEY = \"currentprovider\";\r\nexport const LANGUAGE_LOCALSTORAGE_KEY = \"LANGUAGE_KEY\";\r\n\r\nexport function getChainName(chainId) {\r\n  return CHAIN_NAMES_MAP[chainId];\r\n}\r\n\r\nexport const USDG_ADDRESS = getContract(CHAIN_ID, \"USDG\");\r\n\r\nexport const BASIS_POINTS_DIVISOR = 10000;\r\nexport const MAX_LEVERAGE = 100 * BASIS_POINTS_DIVISOR;\r\nexport const MAX_ALLOWED_LEVERAGE = 50 * BASIS_POINTS_DIVISOR;\r\n\r\nexport const MAX_PRICE_DEVIATION_BASIS_POINTS = 750;\r\nexport const DEFAULT_GAS_LIMIT = 1 * 1000 * 1000;\r\nexport const SECONDS_PER_YEAR = 31536000;\r\nexport const USDG_DECIMALS = 18;\r\nexport const USD_DECIMALS = 30;\r\nexport const DEPOSIT_FEE = 30;\r\nexport const DUST_BNB = \"2000000000000000\";\r\nexport const DUST_USD = expandDecimals(1, USD_DECIMALS);\r\nexport const PRECISION = expandDecimals(1, 30);\r\nexport const GLP_DECIMALS = 18;\r\nexport const GMX_DECIMALS = 18;\r\nexport const DEFAULT_MAX_USDG_AMOUNT = expandDecimals(200 * 1000 * 1000, 18);\r\n\r\nexport const TAX_BASIS_POINTS = 50;\r\nexport const STABLE_TAX_BASIS_POINTS = 5;\r\nexport const MINT_BURN_FEE_BASIS_POINTS = 25;\r\nexport const SWAP_FEE_BASIS_POINTS = 30;\r\nexport const STABLE_SWAP_FEE_BASIS_POINTS = 1;\r\nexport const MARGIN_FEE_BASIS_POINTS = 10;\r\n\r\nexport const LIQUIDATION_FEE = expandDecimals(5, USD_DECIMALS);\r\n\r\nexport const TRADES_PAGE_SIZE = 100;\r\n\r\nexport const GLP_COOLDOWN_DURATION = 15 * 60;\r\nexport const THRESHOLD_REDEMPTION_VALUE = expandDecimals(993, 27); // 0.993\r\nexport const FUNDING_RATE_PRECISION = 1000000;\r\n\r\nexport const SWAP = \"Swap\";\r\nexport const INCREASE = \"Increase\";\r\nexport const DECREASE = \"Decrease\";\r\nexport const LONG = \"Long\";\r\nexport const SHORT = \"Short\";\r\n\r\nexport const MARKET = \"Market\";\r\nexport const LIMIT = \"Limit\";\r\nexport const STOP = \"Stop\";\r\nexport const BORROW = \"Borrow\";\r\n\r\n// Market/limit orders disabling\r\n// export const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT, STOP];\r\nexport const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT];\r\n\r\nexport const SWAP_ORDER_OPTIONS = [MARKET, LIMIT];\r\n\r\n// Swap disabling\r\n// export const SWAP_OPTIONS = [LONG, SHORT, SWAP];\r\nexport const SWAP_OPTIONS = [LONG, SHORT];\r\n\r\n\r\n// Default Slippage\r\nexport const DEFAULT_SLIPPAGE_AMOUNT = 30;\r\n// export const DEFAULT_SLIPPAGE_AMOUNT = 100;\r\n\r\nexport const DEFAULT_HIGHER_SLIPPAGE_AMOUNT = 100;\r\n\r\nexport const SLIPPAGE_BPS_KEY = \"Exchange-swap-slippage-basis-points-v3\";\r\nexport const CLOSE_POSITION_RECEIVE_TOKEN_KEY = \"Close-position-receive-token\";\r\nexport const IS_PNL_IN_LEVERAGE_KEY = \"Exchange-swap-is-pnl-in-leverage\";\r\nexport const SHOW_PNL_AFTER_FEES_KEY = \"Exchange-swap-show-pnl-after-fees\";\r\nexport const DISABLE_ORDER_VALIDATION_KEY = \"disable-order-validation\";\r\nexport const SHOULD_SHOW_POSITION_LINES_KEY = \"Exchange-swap-should-show-position-lines\";\r\nexport const REFERRAL_CODE_KEY = \"GMX-referralCode\";\r\nexport const REFERRAL_CODE_QUERY_PARAM = \"ref\";\r\nexport const REFERRALS_SELECTED_TAB_KEY = \"Referrals-selected-tab\";\r\nexport const MAX_REFERRAL_CODE_LENGTH = 20;\r\n\r\nexport const TRIGGER_PREFIX_ABOVE = \">\";\r\nexport const TRIGGER_PREFIX_BELOW = \"<\";\r\n\r\nexport const MIN_PROFIT_BIPS = 0;\r\n\r\nexport const GLPPOOLCOLORS = {\r\n  ETH: \"#6062a6\",\r\n  BTC: \"#F7931A\",\r\n  \"BTC.b\": \"#F7931A\",\r\n  USDC: \"#2775CA\",\r\n  \"USDC.e\": \"#2A5ADA\",\r\n  USDT: \"#67B18A\",\r\n  MIM: \"#9695F8\",\r\n  FRAX: \"#000\",\r\n  DAI: \"#FAC044\",\r\n  UNI: \"#E9167C\",\r\n  AVAX: \"#E84142\",\r\n  LINK: \"#3256D6\",\r\n};\r\n\r\nexport const HIGH_EXECUTION_FEES_MAP = {\r\n  [ARBITRUM]: 3, // 3 USD\r\n  [AVALANCHE]: 3, // 3 USD\r\n};\r\n\r\nexport function getHighExecutionFee(chainId) {\r\n  return HIGH_EXECUTION_FEES_MAP[chainId] || 3;\r\n}\r\n\r\nexport const ICONLINKS = {\r\n  [ARBITRUM_TESTNET]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\r\n    },\r\n    GLP: {\r\n      arbitrum: \"https://testnet.arbiscan.io/token/0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\r\n    },\r\n  },\r\n  [ARBITRUM]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\r\n    },\r\n    GLP: {\r\n      arbitrum: \"https://arbiscan.io/token/0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\r\n    },\r\n    ETH: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/ethereum\",\r\n    },\r\n    BTC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      arbitrum: \"https://arbiscan.io/address/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f\",\r\n    },\r\n    LINK: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/chainlink\",\r\n      arbitrum: \"https://arbiscan.io/address/0xf97f4df75117a78c1a5a0dbb814af92458539fb4\",\r\n    },\r\n    UNI: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/uniswap\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfa7f8980b0f1e64a2062791cc3b0871572f1f7f0\",\r\n    },\r\n    USDC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      arbitrum: \"https://arbiscan.io/address/0xff970a61a04b1ca14834a43f5de4533ebddb5cc8\",\r\n    },\r\n    USDT: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/tether\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9\",\r\n    },\r\n    DAI: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/dai\",\r\n      arbitrum: \"https://arbiscan.io/address/0xda10009cbd5d07dd0cecc66161fc93d7c9000da1\",\r\n    },\r\n    MIM: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfea7a6a0b346362bf88a9e4a88416b77a57d6c2a\",\r\n    },\r\n    FRAX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/frax\",\r\n      arbitrum: \"https://arbiscan.io/address/0x17fc002b466eec40dae837fc4be5c67993ddbd6f\",\r\n    },\r\n  },\r\n  [AVALANCHE]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      avalanche: \"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661\",\r\n    },\r\n    GLP: {\r\n      avalanche: \"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660\",\r\n    },\r\n    AVAX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/avalanche\",\r\n    },\r\n    ETH: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\r\n      avalanche: \"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab\",\r\n    },\r\n    BTC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      avalanche: \"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218\",\r\n    },\r\n    \"BTC.b\": {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      avalanche: \"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\r\n    },\r\n    MIM: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\r\n      avalanche: \"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d\",\r\n    },\r\n    \"USDC.e\": {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e\",\r\n      avalanche: \"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664\",\r\n    },\r\n    USDC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      avalanche: \"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const platformTokens = {\r\n  42161: {\r\n    // arbitrum\r\n    GMX: {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      decimals: 18,\r\n      address: getContract(ARBITRUM, \"GMX\"),\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\r\n    },\r\n    GLP: {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      decimals: 18,\r\n      address: getContract(ARBITRUM, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\r\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\r\n    },\r\n  },\r\n  43114: {\r\n    // avalanche\r\n    GMX: {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      decimals: 18,\r\n      address: getContract(AVALANCHE, \"GMX\"),\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\r\n    },\r\n    GLP: {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      decimals: 18,\r\n      address: getContract(AVALANCHE, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\r\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\r\n    },\r\n  },\r\n};\r\n\r\nconst supportedChainIds = [ARBITRUM, AVALANCHE];\r\nif (isDevelopment()) {\r\n  supportedChainIds.push(ARBITRUM_TESTNET);\r\n}\r\nconst injectedConnector = new InjectedConnector({\r\n  supportedChainIds,\r\n});\r\n\r\nconst getWalletConnectConnector = () => {\r\n  const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\r\n  return new WalletConnectConnector({\r\n    rpc: {\r\n      [AVALANCHE]: AVALANCHE_RPC_PROVIDERS[0],\r\n      [ARBITRUM]: ARBITRUM_RPC_PROVIDERS[0],\r\n      [ARBITRUM_TESTNET]: \"https://rinkeby.arbitrum.io/rpc\",\r\n    },\r\n    qrcode: true,\r\n    chainId,\r\n  });\r\n};\r\n\r\nexport function isSupportedChain(chainId) {\r\n  return supportedChainIds.includes(chainId);\r\n}\r\n\r\nexport function deserialize(data) {\r\n  for (const [key, value] of Object.entries(data)) {\r\n    if (value._type === \"BigNumber\") {\r\n      data[key] = bigNumberify(value.value);\r\n    }\r\n  }\r\n  return data;\r\n}\r\n\r\nexport function isHomeSite() {\r\n  return process.env.REACT_APP_IS_HOME_SITE === \"true\";\r\n}\r\n\r\nexport const helperToast = {\r\n  success: (content, opts) => {\r\n    toast.dismiss();\r\n    toast.success(content, opts);\r\n  },\r\n  error: (content, opts) => {\r\n    toast.dismiss();\r\n    toast.error(content, opts);\r\n  },\r\n};\r\n\r\nexport function useLocalStorageByChainId(chainId, key, defaultValue) {\r\n  const [internalValue, setInternalValue] = useLocalStorage(key, {});\r\n\r\n  const setValue = useCallback(\r\n    (value) => {\r\n      setInternalValue((internalValue) => {\r\n        if (typeof value === \"function\") {\r\n          value = value(internalValue[chainId] || defaultValue);\r\n        }\r\n        const newInternalValue = {\r\n          ...internalValue,\r\n          [chainId]: value,\r\n        };\r\n        return newInternalValue;\r\n      });\r\n    },\r\n    [chainId, setInternalValue, defaultValue]\r\n  );\r\n\r\n  let value;\r\n  if (chainId in internalValue) {\r\n    value = internalValue[chainId];\r\n  } else {\r\n    value = defaultValue;\r\n  }\r\n\r\n  return [value, setValue];\r\n}\r\n\r\nexport function useLocalStorageSerializeKey(key, value, opts) {\r\n  key = JSON.stringify(key);\r\n  return useLocalStorage(key, value, opts);\r\n}\r\n\r\nfunction getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd) {\r\n  // Limit/stop orders are executed with price specified by user\r\n  if (orderOption && orderOption !== MARKET && triggerPriceUsd) {\r\n    return triggerPriceUsd;\r\n  }\r\n\r\n  // Market orders are executed with current market price\r\n  if (!info) {\r\n    return;\r\n  }\r\n  if (max && !info.maxPrice) {\r\n    return;\r\n  }\r\n  if (!max && !info.minPrice) {\r\n    return;\r\n  }\r\n  return max ? info.maxPrice : info.minPrice;\r\n}\r\n\r\nexport function getLiquidationPriceFromDelta({ liquidationAmount, size, collateral, averagePrice, isLong }) {\r\n  if (!size || size.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  if (liquidationAmount.gt(collateral)) {\r\n    const liquidationDelta = liquidationAmount.sub(collateral);\r\n    const priceDelta = liquidationDelta.mul(averagePrice).div(size);\r\n    return isLong ? averagePrice.add(priceDelta) : averagePrice.sub(priceDelta);\r\n  }\r\n\r\n  const liquidationDelta = collateral.sub(liquidationAmount);\r\n  const priceDelta = liquidationDelta.mul(averagePrice).div(size);\r\n\r\n  return isLong ? averagePrice.sub(priceDelta) : averagePrice.add(priceDelta);\r\n}\r\n\r\nexport const replaceNativeTokenAddress = (path, nativeTokenAddress) => {\r\n  if (!path) {\r\n    return;\r\n  }\r\n\r\n  let updatedPath = [];\r\n  for (let i = 0; i < path.length; i++) {\r\n    let address = path[i];\r\n    if (address === AddressZero) {\r\n      address = nativeTokenAddress;\r\n    }\r\n    updatedPath.push(address);\r\n  }\r\n\r\n  return updatedPath;\r\n};\r\n\r\nexport function getMarginFee(sizeDelta) {\r\n  if (!sizeDelta) {\r\n    return bigNumberify(0);\r\n  }\r\n  const afterFeeUsd = sizeDelta.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\r\n  return sizeDelta.sub(afterFeeUsd);\r\n}\r\n\r\nexport function getServerBaseUrl(chainId) {\r\n  if (!chainId) {\r\n    throw new Error(\"chainId is not provided\");\r\n  }\r\n  if (document.location.hostname.includes(\"deploy-preview\")) {\r\n    const fromLocalStorage = localStorage.getItem(\"SERVER_BASE_URL\");\r\n    if (fromLocalStorage) {\r\n      return fromLocalStorage;\r\n    }\r\n  }\r\n  if (chainId === MAINNET) {\r\n    return \"https://gambit-server-staging.uc.r.appspot.com\";\r\n  } else if (chainId === ARBITRUM_TESTNET) {\r\n    return \"https://gambit-server-devnet.uc.r.appspot.com\";\r\n  } else if (chainId === ARBITRUM) {\r\n    return \"https://gmx-server-mainnet.uw.r.appspot.com\";\r\n  } else if (chainId === AVALANCHE) {\r\n    return \"https://gmx-avax-server.uc.r.appspot.com\";\r\n  }\r\n  return \"https://gmx-server-mainnet.uw.r.appspot.com\";\r\n}\r\n\r\nexport function getServerUrl(chainId, path) {\r\n  return `${getServerBaseUrl(chainId)}${path}`;\r\n}\r\n\r\nexport function isTriggerRatioInverted(fromTokenInfo, toTokenInfo) {\r\n  if (!toTokenInfo || !fromTokenInfo) return false;\r\n  if (toTokenInfo.isStable || toTokenInfo.isUsdg) return true;\r\n  if (toTokenInfo.maxPrice) return toTokenInfo.maxPrice.lt(fromTokenInfo.maxPrice);\r\n  return false;\r\n}\r\n\r\nexport function getExchangeRate(tokenAInfo, tokenBInfo, inverted) {\r\n  if (!tokenAInfo || !tokenAInfo.minPrice || !tokenBInfo || !tokenBInfo.maxPrice) {\r\n    return;\r\n  }\r\n  if (inverted) {\r\n    return tokenAInfo.minPrice.mul(PRECISION).div(tokenBInfo.maxPrice);\r\n  }\r\n  return tokenBInfo.maxPrice.mul(PRECISION).div(tokenAInfo.minPrice);\r\n}\r\n\r\nexport function getMostAbundantStableToken(chainId, infoTokens) {\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n  let availableAmount;\r\n  let stableToken = whitelistedTokens.find((t) => t.isStable);\r\n  for (let i = 0; i < whitelistedTokens.length; i++) {\r\n    const info = getTokenInfo(infoTokens, whitelistedTokens[i].address);\r\n    if (!info.isStable || !info.availableAmount) {\r\n      continue;\r\n    }\r\n\r\n    const adjustedAvailableAmount = adjustForDecimals(info.availableAmount, info.decimals, USD_DECIMALS);\r\n    if (!availableAmount || adjustedAvailableAmount.gt(availableAmount)) {\r\n      availableAmount = adjustedAvailableAmount;\r\n      stableToken = info;\r\n    }\r\n  }\r\n  return stableToken;\r\n}\r\n\r\nexport function shouldInvertTriggerRatio(tokenA, tokenB) {\r\n  if (tokenB.isStable || tokenB.isUsdg) return true;\r\n  if (tokenB.maxPrice && tokenA.maxPrice && tokenB.maxPrice.lt(tokenA.maxPrice)) return true;\r\n  return false;\r\n}\r\n\r\nexport function getExchangeRateDisplay(rate, tokenA, tokenB, opts = {}) {\r\n  if (!rate || !tokenA || !tokenB) return \"...\";\r\n  if (shouldInvertTriggerRatio(tokenA, tokenB)) {\r\n    [tokenA, tokenB] = [tokenB, tokenA];\r\n    rate = PRECISION.mul(PRECISION).div(rate);\r\n  }\r\n  const rateValue = formatAmount(rate, USD_DECIMALS, tokenA.isStable || tokenA.isUsdg ? 2 : 4, true);\r\n  if (opts.omitSymbols) {\r\n    return rateValue;\r\n  }\r\n  return `${rateValue} ${tokenA.symbol}/${tokenB.symbol}`;\r\n}\r\n\r\nconst adjustForDecimalsFactory = (n) => (number) => {\r\n  if (n === 0) {\r\n    return number;\r\n  }\r\n  if (n > 0) {\r\n    return number.mul(expandDecimals(1, n));\r\n  }\r\n  return number.div(expandDecimals(1, -n));\r\n};\r\n\r\nexport function adjustForDecimals(amount, divDecimals, mulDecimals) {\r\n  return amount.mul(expandDecimals(1, mulDecimals)).div(expandDecimals(1, divDecimals));\r\n}\r\n\r\nexport function getTargetUsdgAmount(token, usdgSupply, totalTokenWeights) {\r\n  if (!token || !token.weight || !usdgSupply) {\r\n    return;\r\n  }\r\n\r\n  if (usdgSupply.eq(0)) {\r\n    return bigNumberify(0);\r\n  }\r\n\r\n  return token.weight.mul(usdgSupply).div(totalTokenWeights);\r\n}\r\n\r\nexport function getFeeBasisPoints(\r\n  token,\r\n  usdgDelta,\r\n  feeBasisPoints,\r\n  taxBasisPoints,\r\n  increment,\r\n  usdgSupply,\r\n  totalTokenWeights\r\n) {\r\n  if (!token || !token.usdgAmount || !usdgSupply || !totalTokenWeights) {\r\n    return 0;\r\n  }\r\n\r\n  feeBasisPoints = bigNumberify(feeBasisPoints);\r\n  taxBasisPoints = bigNumberify(taxBasisPoints);\r\n\r\n  const initialAmount = token.usdgAmount;\r\n  let nextAmount = initialAmount.add(usdgDelta);\r\n  if (!increment) {\r\n    nextAmount = usdgDelta.gt(initialAmount) ? bigNumberify(0) : initialAmount.sub(usdgDelta);\r\n  }\r\n\r\n  const targetAmount = getTargetUsdgAmount(token, usdgSupply, totalTokenWeights);\r\n  if (!targetAmount || targetAmount.eq(0)) {\r\n    return feeBasisPoints.toNumber();\r\n  }\r\n\r\n  const initialDiff = initialAmount.gt(targetAmount)\r\n    ? initialAmount.sub(targetAmount)\r\n    : targetAmount.sub(initialAmount);\r\n  const nextDiff = nextAmount.gt(targetAmount) ? nextAmount.sub(targetAmount) : targetAmount.sub(nextAmount);\r\n\r\n  if (nextDiff.lt(initialDiff)) {\r\n    const rebateBps = taxBasisPoints.mul(initialDiff).div(targetAmount);\r\n    return rebateBps.gt(feeBasisPoints) ? 0 : feeBasisPoints.sub(rebateBps).toNumber();\r\n  }\r\n\r\n  let averageDiff = initialDiff.add(nextDiff).div(2);\r\n  if (averageDiff.gt(targetAmount)) {\r\n    averageDiff = targetAmount;\r\n  }\r\n  const taxBps = taxBasisPoints.mul(averageDiff).div(targetAmount);\r\n  return feeBasisPoints.add(taxBps).toNumber();\r\n}\r\n\r\nexport function getBuyGlpToAmount(fromAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\r\n  if (!fromAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\r\n  if (!swapToken || !swapToken.minPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let glpAmount = fromAmount.mul(swapToken.minPrice).div(glpPrice);\r\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\r\n\r\n  let usdgAmount = fromAmount.mul(swapToken.minPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    swapToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n\r\n  return { amount: glpAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getSellGlpFromAmount(toAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\r\n  if (!toAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\r\n  if (!swapToken || !swapToken.maxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let glpAmount = toAmount.mul(swapToken.maxPrice).div(glpPrice);\r\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\r\n\r\n  let usdgAmount = toAmount.mul(swapToken.maxPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    swapToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\r\n\r\n  return { amount: glpAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getBuyGlpFromAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  if (!fromToken || !fromToken.minPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.minPrice);\r\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\r\n\r\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\r\n\r\n  return { amount: fromAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getSellGlpToAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  if (!fromToken || !fromToken.maxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.maxPrice);\r\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\r\n\r\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n\r\n  return { amount: fromAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getNextFromAmount(\r\n  chainId,\r\n  toAmount,\r\n  fromTokenAddress,\r\n  toTokenAddress,\r\n  infoTokens,\r\n  toTokenPriceUsd,\r\n  ratio,\r\n  usdgSupply,\r\n  totalTokenWeights,\r\n  forSwap\r\n) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n\r\n  if (!toAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\r\n    return defaultValue;\r\n  }\r\n\r\n  if (fromTokenAddress === toTokenAddress) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  if (fromToken.isNative && toToken.isWrapped) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  if (fromToken.isWrapped && toToken.isNative) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  // the realtime price should be used if it is for a transaction to open / close a position\r\n  // or if the transaction involves doing a swap and opening / closing a position\r\n  // otherwise use the contract price instead of realtime price for swaps\r\n\r\n  let fromTokenMinPrice;\r\n  if (fromToken) {\r\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\r\n  }\r\n\r\n  let toTokenMaxPrice;\r\n  if (toToken) {\r\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\r\n  }\r\n\r\n  if (!fromToken || !fromTokenMinPrice || !toToken || !toTokenMaxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const adjustDecimals = adjustForDecimalsFactory(fromToken.decimals - toToken.decimals);\r\n\r\n  let fromAmountBasedOnRatio;\r\n  if (ratio && !ratio.isZero()) {\r\n    fromAmountBasedOnRatio = toAmount.mul(ratio).div(PRECISION);\r\n  }\r\n\r\n  const fromAmount =\r\n    ratio && !ratio.isZero() ? fromAmountBasedOnRatio : toAmount.mul(toTokenMaxPrice).div(fromTokenMinPrice);\r\n\r\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, toToken.decimals, USDG_DECIMALS);\r\n  const swapFeeBasisPoints =\r\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\r\n  const feeBasisPoints0 = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints1 = getFeeBasisPoints(\r\n    toToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\r\n\r\n  return {\r\n    amount: adjustDecimals(fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints)),\r\n    feeBasisPoints,\r\n  };\r\n}\r\n\r\nexport function getNextToAmount(\r\n  chainId,\r\n  fromAmount,\r\n  fromTokenAddress,\r\n  toTokenAddress,\r\n  infoTokens,\r\n  toTokenPriceUsd,\r\n  ratio,\r\n  usdgSupply,\r\n  totalTokenWeights,\r\n  forSwap\r\n) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!fromAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\r\n    return defaultValue;\r\n  }\r\n\r\n  if (fromTokenAddress === toTokenAddress) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  if (fromToken.isNative && toToken.isWrapped) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  if (fromToken.isWrapped && toToken.isNative) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  // the realtime price should be used if it is for a transaction to open / close a position\r\n  // or if the transaction involves doing a swap and opening / closing a position\r\n  // otherwise use the contract price instead of realtime price for swaps\r\n\r\n  let fromTokenMinPrice;\r\n  if (fromToken) {\r\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\r\n  }\r\n\r\n  let toTokenMaxPrice;\r\n  if (toToken) {\r\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\r\n  }\r\n\r\n  if (!fromTokenMinPrice || !toTokenMaxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const adjustDecimals = adjustForDecimalsFactory(toToken.decimals - fromToken.decimals);\r\n\r\n  let toAmountBasedOnRatio = bigNumberify(0);\r\n  if (ratio && !ratio.isZero()) {\r\n    toAmountBasedOnRatio = fromAmount.mul(PRECISION).div(ratio);\r\n  }\r\n\r\n  if (toTokenAddress === USDG_ADDRESS) {\r\n    const feeBasisPoints = getSwapFeeBasisPoints(fromToken.isStable);\r\n\r\n    if (ratio && !ratio.isZero()) {\r\n      const toAmount = toAmountBasedOnRatio;\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const toAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n    return {\r\n      amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n      feeBasisPoints,\r\n    };\r\n  }\r\n\r\n  if (fromTokenAddress === USDG_ADDRESS) {\r\n    const redemptionValue = toToken.redemptionAmount\r\n      .mul(toTokenPriceUsd || toTokenMaxPrice)\r\n      .div(expandDecimals(1, toToken.decimals));\r\n\r\n    if (redemptionValue.gt(THRESHOLD_REDEMPTION_VALUE)) {\r\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\r\n\r\n      const toAmount =\r\n        ratio && !ratio.isZero()\r\n          ? toAmountBasedOnRatio\r\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\r\n\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const expectedAmount = fromAmount;\r\n\r\n    const stableToken = getMostAbundantStableToken(chainId, infoTokens);\r\n    if (!stableToken || stableToken.availableAmount.lt(expectedAmount)) {\r\n      const toAmount =\r\n        ratio && !ratio.isZero()\r\n          ? toAmountBasedOnRatio\r\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\r\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const feeBasisPoints0 = getSwapFeeBasisPoints(true);\r\n    const feeBasisPoints1 = getSwapFeeBasisPoints(false);\r\n\r\n    if (ratio && !ratio.isZero()) {\r\n      const toAmount = toAmountBasedOnRatio\r\n        .mul(BASIS_POINTS_DIVISOR - feeBasisPoints0 - feeBasisPoints1)\r\n        .div(BASIS_POINTS_DIVISOR);\r\n      return {\r\n        amount: adjustDecimals(toAmount),\r\n        path: [USDG_ADDRESS, stableToken.address, toToken.address],\r\n        feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\r\n      };\r\n    }\r\n\r\n    // get toAmount for USDG => stableToken\r\n    let toAmount = fromAmount.mul(PRECISION).div(stableToken.maxPrice);\r\n    // apply USDG => stableToken fees\r\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints0).div(BASIS_POINTS_DIVISOR);\r\n\r\n    // get toAmount for stableToken => toToken\r\n    toAmount = toAmount.mul(stableToken.minPrice).div(toTokenPriceUsd || toTokenMaxPrice);\r\n    // apply stableToken => toToken fees\r\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints1).div(BASIS_POINTS_DIVISOR);\r\n\r\n    return {\r\n      amount: adjustDecimals(toAmount),\r\n      path: [USDG_ADDRESS, stableToken.address, toToken.address],\r\n      feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\r\n    };\r\n  }\r\n\r\n  const toAmount =\r\n    ratio && !ratio.isZero()\r\n      ? toAmountBasedOnRatio\r\n      : fromAmount.mul(fromTokenMinPrice).div(toTokenPriceUsd || toTokenMaxPrice);\r\n\r\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, fromToken.decimals, USDG_DECIMALS);\r\n  const swapFeeBasisPoints =\r\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\r\n  const feeBasisPoints0 = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints1 = getFeeBasisPoints(\r\n    toToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\r\n\r\n  return {\r\n    amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n    feeBasisPoints,\r\n  };\r\n}\r\n\r\nexport function getProfitPrice(closePrice, position) {\r\n  let profitPrice;\r\n  if (position && position.averagePrice && closePrice) {\r\n    profitPrice = position.isLong\r\n      ? position.averagePrice.mul(BASIS_POINTS_DIVISOR + MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR)\r\n      : position.averagePrice.mul(BASIS_POINTS_DIVISOR - MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR);\r\n  }\r\n  return profitPrice;\r\n}\r\n\r\nexport function calculatePositionDelta(\r\n  price,\r\n  { size, collateral, isLong, averagePrice, lastIncreasedTime },\r\n  sizeDelta\r\n) {\r\n  if (!sizeDelta) {\r\n    sizeDelta = size;\r\n  }\r\n  const priceDelta = averagePrice.gt(price) ? averagePrice.sub(price) : price.sub(averagePrice);\r\n  let delta = sizeDelta.mul(priceDelta).div(averagePrice);\r\n  const pendingDelta = delta;\r\n\r\n  const minProfitExpired = lastIncreasedTime + MIN_PROFIT_TIME < Date.now() / 1000;\r\n  const hasProfit = isLong ? price.gt(averagePrice) : price.lt(averagePrice);\r\n  if (!minProfitExpired && hasProfit && delta.mul(BASIS_POINTS_DIVISOR).lte(size.mul(MIN_PROFIT_BIPS))) {\r\n    delta = bigNumberify(0);\r\n  }\r\n\r\n  const deltaPercentage = delta.mul(BASIS_POINTS_DIVISOR).div(collateral);\r\n  const pendingDeltaPercentage = pendingDelta.mul(BASIS_POINTS_DIVISOR).div(collateral);\r\n\r\n  return {\r\n    delta,\r\n    pendingDelta,\r\n    pendingDeltaPercentage,\r\n    hasProfit,\r\n    deltaPercentage,\r\n  };\r\n}\r\n\r\nexport function getDeltaStr({ delta, deltaPercentage, hasProfit }) {\r\n  let deltaStr;\r\n  let deltaPercentageStr;\r\n\r\n  if (delta.gt(0)) {\r\n    deltaStr = hasProfit ? \"+\" : \"-\";\r\n    deltaPercentageStr = hasProfit ? \"+\" : \"-\";\r\n  } else {\r\n    deltaStr = \"\";\r\n    deltaPercentageStr = \"\";\r\n  }\r\n  deltaStr += `$${formatAmount(delta, USD_DECIMALS, 2, true)}`;\r\n  deltaPercentageStr += `${formatAmount(deltaPercentage, 2, 2)}%`;\r\n\r\n  return { deltaStr, deltaPercentageStr };\r\n}\r\n\r\nexport function getLeverage({\r\n  size,\r\n  sizeDelta,\r\n  increaseSize,\r\n  collateral,\r\n  collateralDelta,\r\n  increaseCollateral,\r\n  entryFundingRate,\r\n  cumulativeFundingRate,\r\n  hasProfit,\r\n  delta,\r\n  includeDelta,\r\n}) {\r\n  if (!size && !sizeDelta) {\r\n    return;\r\n  }\r\n  if (!collateral && !collateralDelta) {\r\n    return;\r\n  }\r\n\r\n  let nextSize = size ? size : bigNumberify(0);\r\n  if (sizeDelta) {\r\n    if (increaseSize) {\r\n      nextSize = size.add(sizeDelta);\r\n    } else {\r\n      if (sizeDelta.gte(size)) {\r\n        return;\r\n      }\r\n      nextSize = size.sub(sizeDelta);\r\n    }\r\n  }\r\n\r\n  let remainingCollateral = collateral ? collateral : bigNumberify(0);\r\n  if (collateralDelta) {\r\n    if (increaseCollateral) {\r\n      remainingCollateral = collateral.add(collateralDelta);\r\n    } else {\r\n      if (collateralDelta.gte(collateral)) {\r\n        return;\r\n      }\r\n      remainingCollateral = collateral.sub(collateralDelta);\r\n    }\r\n  }\r\n\r\n  if (delta && includeDelta) {\r\n    if (hasProfit) {\r\n      remainingCollateral = remainingCollateral.add(delta);\r\n    } else {\r\n      if (delta.gt(remainingCollateral)) {\r\n        return;\r\n      }\r\n\r\n      remainingCollateral = remainingCollateral.sub(delta);\r\n    }\r\n  }\r\n\r\n  if (remainingCollateral.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  remainingCollateral = sizeDelta\r\n    ? remainingCollateral.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR)\r\n    : remainingCollateral;\r\n  if (entryFundingRate && cumulativeFundingRate) {\r\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\r\n    remainingCollateral = remainingCollateral.sub(fundingFee);\r\n  }\r\n\r\n  return nextSize.mul(BASIS_POINTS_DIVISOR).div(remainingCollateral);\r\n}\r\n\r\nexport function getLiquidationPrice(data) {\r\n  let {\r\n    isLong,\r\n    size,\r\n    collateral,\r\n    averagePrice,\r\n    entryFundingRate,\r\n    cumulativeFundingRate,\r\n    sizeDelta,\r\n    collateralDelta,\r\n    increaseCollateral,\r\n    increaseSize,\r\n    delta,\r\n    hasProfit,\r\n    includeDelta,\r\n  } = data;\r\n  if (!size || !collateral || !averagePrice) {\r\n    return;\r\n  }\r\n\r\n  let nextSize = size ? size : bigNumberify(0);\r\n  let remainingCollateral = collateral;\r\n\r\n  if (sizeDelta) {\r\n    if (increaseSize) {\r\n      nextSize = size.add(sizeDelta);\r\n    } else {\r\n      if (sizeDelta.gte(size)) {\r\n        return;\r\n      }\r\n      nextSize = size.sub(sizeDelta);\r\n    }\r\n\r\n    if (includeDelta && !hasProfit) {\r\n      const adjustedDelta = sizeDelta.mul(delta).div(size);\r\n      remainingCollateral = remainingCollateral.sub(adjustedDelta);\r\n    }\r\n  }\r\n\r\n  if (collateralDelta) {\r\n    if (increaseCollateral) {\r\n      remainingCollateral = remainingCollateral.add(collateralDelta);\r\n    } else {\r\n      if (collateralDelta.gte(remainingCollateral)) {\r\n        return;\r\n      }\r\n      remainingCollateral = remainingCollateral.sub(collateralDelta);\r\n    }\r\n  }\r\n\r\n  let positionFee = getMarginFee(size).add(LIQUIDATION_FEE);\r\n  if (entryFundingRate && cumulativeFundingRate) {\r\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\r\n    positionFee = positionFee.add(fundingFee);\r\n  }\r\n\r\n  const liquidationPriceForFees = getLiquidationPriceFromDelta({\r\n    liquidationAmount: positionFee,\r\n    size: nextSize,\r\n    collateral: remainingCollateral,\r\n    averagePrice,\r\n    isLong,\r\n  });\r\n\r\n  const liquidationPriceForMaxLeverage = getLiquidationPriceFromDelta({\r\n    liquidationAmount: nextSize.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE),\r\n    size: nextSize,\r\n    collateral: remainingCollateral,\r\n    averagePrice,\r\n    isLong,\r\n  });\r\n\r\n  if (!liquidationPriceForFees) {\r\n    return liquidationPriceForMaxLeverage;\r\n  }\r\n  if (!liquidationPriceForMaxLeverage) {\r\n    return liquidationPriceForFees;\r\n  }\r\n\r\n  if (isLong) {\r\n    // return the higher price\r\n    return liquidationPriceForFees.gt(liquidationPriceForMaxLeverage)\r\n      ? liquidationPriceForFees\r\n      : liquidationPriceForMaxLeverage;\r\n  }\r\n\r\n  // return the lower price\r\n  return liquidationPriceForFees.lt(liquidationPriceForMaxLeverage)\r\n    ? liquidationPriceForFees\r\n    : liquidationPriceForMaxLeverage;\r\n}\r\n\r\nexport function getUsd(amount, tokenAddress, max, infoTokens, orderOption, triggerPriceUsd) {\r\n  if (!amount) {\r\n    return;\r\n  }\r\n  if (tokenAddress === USDG_ADDRESS) {\r\n    return amount.mul(PRECISION).div(expandDecimals(1, 18));\r\n  }\r\n  const info = getTokenInfo(infoTokens, tokenAddress);\r\n  const price = getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd);\r\n  if (!price) {\r\n    return;\r\n  }\r\n\r\n  return amount.mul(price).div(expandDecimals(1, info.decimals));\r\n}\r\n\r\nexport function getPositionKey(account, collateralTokenAddress, indexTokenAddress, isLong, nativeTokenAddress) {\r\n  const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n  const tokenAddress1 = indexTokenAddress === AddressZero ? nativeTokenAddress : indexTokenAddress;\r\n  return account + \":\" + tokenAddress0 + \":\" + tokenAddress1 + \":\" + isLong;\r\n}\r\n\r\nexport function getPositionContractKey(account, collateralToken, indexToken, isLong) {\r\n  return ethers.utils.solidityKeccak256(\r\n    [\"address\", \"address\", \"address\", \"bool\"],\r\n    [account, collateralToken, indexToken, isLong]\r\n  );\r\n}\r\n\r\nexport function getSwapFeeBasisPoints(isStable) {\r\n  return isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n}\r\n\r\n// BSC TESTNET\r\n// const RPC_PROVIDERS = [\r\n//   \"https://data-seed-prebsc-1-s1.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s1.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-1-s2.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s2.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-1-s3.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s3.binance.org:8545\"\r\n// ]\r\n\r\n// BSC MAINNET\r\nexport const BSC_RPC_PROVIDERS = [\r\n  \"https://bsc-dataseed.binance.org\",\r\n  \"https://bsc-dataseed1.defibit.io\",\r\n  \"https://bsc-dataseed1.ninicoin.io\",\r\n  \"https://bsc-dataseed2.defibit.io\",\r\n  \"https://bsc-dataseed3.defibit.io\",\r\n  \"https://bsc-dataseed4.defibit.io\",\r\n  \"https://bsc-dataseed2.ninicoin.io\",\r\n  \"https://bsc-dataseed3.ninicoin.io\",\r\n  \"https://bsc-dataseed4.ninicoin.io\",\r\n  \"https://bsc-dataseed1.binance.org\",\r\n  \"https://bsc-dataseed2.binance.org\",\r\n  \"https://bsc-dataseed3.binance.org\",\r\n  \"https://bsc-dataseed4.binance.org\",\r\n];\r\n\r\nconst RPC_PROVIDERS = {\r\n  [MAINNET]: BSC_RPC_PROVIDERS,\r\n  [ARBITRUM]: ARBITRUM_RPC_PROVIDERS,\r\n  [AVALANCHE]: AVALANCHE_RPC_PROVIDERS,\r\n};\r\n\r\nconst FALLBACK_PROVIDERS = {\r\n  [ARBITRUM]: [getAlchemyHttpUrl()],\r\n  [AVALANCHE]: [\"https://avax-mainnet.gateway.pokt.network/v1/lb/626f37766c499d003aada23b\"],\r\n};\r\n\r\nexport function shortenAddress(address, length) {\r\n  if (!length) {\r\n    return \"\";\r\n  }\r\n  if (!address) {\r\n    return address;\r\n  }\r\n  if (address.length < 10) {\r\n    return address;\r\n  }\r\n  let left = Math.floor((length - 3) / 2) + 1;\r\n  return address.substring(0, left) + \"...\" + address.substring(address.length - (length - (left + 3)), address.length);\r\n}\r\n\r\nexport function formatDateTime(time) {\r\n  return formatDateFn(time * 1000, \"dd MMM yyyy, h:mm a\");\r\n}\r\n\r\nexport function getTimeRemaining(time) {\r\n  const now = parseInt(Date.now() / 1000);\r\n  if (time < now) {\r\n    return \"0h 0m\";\r\n  }\r\n  const diff = time - now;\r\n  const hours = parseInt(diff / (60 * 60));\r\n  const minutes = parseInt((diff - hours * 60 * 60) / 60);\r\n  return `${hours}h ${minutes}m`;\r\n}\r\n\r\nexport function formatDate(time) {\r\n  return formatDateFn(time * 1000, \"dd MMM yyyy\");\r\n}\r\n\r\nexport function hasMetaMaskWalletExtension() {\r\n  return window.ethereum;\r\n}\r\n\r\nexport function hasCoinBaseWalletExtension() {\r\n  const { ethereum } = window;\r\n\r\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet) {\r\n    return false;\r\n  }\r\n  return window.ethereum.isCoinbaseWallet || ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\r\n}\r\n\r\nexport function activateInjectedProvider(providerName) {\r\n  const { ethereum } = window;\r\n\r\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet && !ethereum?.isMetaMask) {\r\n    return undefined;\r\n  }\r\n\r\n  let provider;\r\n  if (ethereum?.providers) {\r\n    switch (providerName) {\r\n      case \"CoinBase\":\r\n        provider = ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\r\n        break;\r\n      case \"MetaMask\":\r\n      default:\r\n        provider = ethereum.providers.find(({ isMetaMask }) => isMetaMask);\r\n        break;\r\n    }\r\n  }\r\n\r\n  if (provider) {\r\n    ethereum.setSelectedProvider(provider);\r\n  }\r\n}\r\n\r\nexport function getInjectedConnector() {\r\n  return injectedConnector;\r\n}\r\n\r\nexport function useChainId() {\r\n  let { chainId } = useWeb3React();\r\n\r\n  if (!chainId) {\r\n    const chainIdFromLocalStorage = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\r\n    if (chainIdFromLocalStorage) {\r\n      chainId = parseInt(chainIdFromLocalStorage);\r\n      if (!chainId) {\r\n        // localstorage value is invalid\r\n        localStorage.removeItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!chainId || !supportedChainIds.includes(chainId)) {\r\n    chainId = DEFAULT_CHAIN_ID;\r\n  }\r\n  return { chainId };\r\n}\r\n\r\nexport function useENS(address) {\r\n  const [ensName, setENSName] = useState();\r\n\r\n  useEffect(() => {\r\n    async function resolveENS() {\r\n      if (address) {\r\n        const provider = new ethers.providers.JsonRpcProvider(\"https://rpc.ankr.com/eth\");\r\n        const name = await provider.lookupAddress(address.toLowerCase());\r\n        if (name) setENSName(name);\r\n      }\r\n    }\r\n    resolveENS();\r\n  }, [address]);\r\n\r\n  return { ensName };\r\n}\r\n\r\nexport function clearWalletConnectData() {\r\n  localStorage.removeItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\r\n}\r\n\r\nexport function clearWalletLinkData() {\r\n  Object.entries(localStorage)\r\n    .map((x) => x[0])\r\n    .filter((x) => x.startsWith(WALLET_LINK_LOCALSTORAGE_PREFIX))\r\n    .map((x) => localStorage.removeItem(x));\r\n}\r\n\r\nexport function useEagerConnect(setActivatingConnector) {\r\n  const { activate, active } = useWeb3React();\r\n  const [tried, setTried] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      if (Boolean(localStorage.getItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY)) !== true) {\r\n        // only works with WalletConnect\r\n        clearWalletConnectData();\r\n        // force clear localStorage connection for MM/CB Wallet (Brave legacy)\r\n        clearWalletLinkData();\r\n        return;\r\n      }\r\n\r\n      let shouldTryWalletConnect = false;\r\n      try {\r\n        // naive validation to not trigger Wallet Connect if data is corrupted\r\n        const rawData = localStorage.getItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\r\n        if (rawData) {\r\n          const data = JSON.parse(rawData);\r\n          if (data && data.connected) {\r\n            shouldTryWalletConnect = true;\r\n          }\r\n        }\r\n      } catch (ex) {\r\n        if (ex instanceof SyntaxError) {\r\n          // rawData is not a valid json\r\n          clearWalletConnectData();\r\n        }\r\n      }\r\n\r\n      if (shouldTryWalletConnect) {\r\n        try {\r\n          const connector = getWalletConnectConnector();\r\n          setActivatingConnector(connector);\r\n          await activate(connector, undefined, true);\r\n          // in case Wallet Connect is activated no need to check injected wallet\r\n          return;\r\n        } catch (ex) {\r\n          // assume data in localstorage is corrupted and delete it to not retry on next page load\r\n          clearWalletConnectData();\r\n        }\r\n      }\r\n\r\n      try {\r\n        const connector = getInjectedConnector();\r\n        const currentProviderName = localStorage.getItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY) ?? false;\r\n        if (currentProviderName !== false) {\r\n          activateInjectedProvider(currentProviderName);\r\n        }\r\n        const authorized = await connector.isAuthorized();\r\n        if (authorized) {\r\n          setActivatingConnector(connector);\r\n          await activate(connector, undefined, true);\r\n        }\r\n      } catch (ex) {}\r\n\r\n      setTried(true);\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // intentionally only running on mount (make sure it's only mounted once :))\r\n\r\n  // if the connection worked, wait until we get confirmation of that to flip the flag\r\n  useEffect(() => {\r\n    if (!tried && active) {\r\n      setTried(true);\r\n    }\r\n  }, [tried, active]);\r\n\r\n  return tried;\r\n}\r\n\r\nexport function useInactiveListener(suppress = false) {\r\n  const injected = getInjectedConnector();\r\n  const { active, error, activate } = useWeb3React();\r\n\r\n  useEffect(() => {\r\n    const { ethereum } = window;\r\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\r\n      const handleConnect = () => {\r\n        activate(injected);\r\n      };\r\n      const handleChainChanged = (chainId) => {\r\n        activate(injected);\r\n      };\r\n      const handleAccountsChanged = (accounts) => {\r\n        if (accounts.length > 0) {\r\n          activate(injected);\r\n        }\r\n      };\r\n      const handleNetworkChanged = (networkId) => {\r\n        activate(injected);\r\n      };\r\n\r\n      ethereum.on(\"connect\", handleConnect);\r\n      ethereum.on(\"chainChanged\", handleChainChanged);\r\n      ethereum.on(\"accountsChanged\", handleAccountsChanged);\r\n      ethereum.on(\"networkChanged\", handleNetworkChanged);\r\n\r\n      return () => {\r\n        if (ethereum.removeListener) {\r\n          ethereum.removeListener(\"connect\", handleConnect);\r\n          ethereum.removeListener(\"chainChanged\", handleChainChanged);\r\n          ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\r\n          ethereum.removeListener(\"networkChanged\", handleNetworkChanged);\r\n        }\r\n      };\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [active, error, suppress, activate]);\r\n}\r\n\r\nexport function getProvider(library, chainId) {\r\n  let provider;\r\n  if (library) {\r\n    return library.getSigner();\r\n  }\r\n  provider = _.sample(RPC_PROVIDERS[chainId]);\r\n  return new ethers.providers.StaticJsonRpcProvider(provider, { chainId });\r\n}\r\n\r\nexport function getFallbackProvider(chainId) {\r\n  if (!FALLBACK_PROVIDERS[chainId]) {\r\n    return;\r\n  }\r\n\r\n  const provider = _.sample(FALLBACK_PROVIDERS[chainId]);\r\n  return new ethers.providers.StaticJsonRpcProvider(provider, { chainId });\r\n}\r\n\r\nexport function bigNumberify(n) {\r\n  try {\r\n    return ethers.BigNumber.from(n);\r\n  } catch (e) {\r\n    console.error(\"bigNumberify error\", e);\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function expandDecimals(n, decimals) {\r\n  return bigNumberify(n).mul(bigNumberify(10).pow(decimals));\r\n}\r\n\r\nexport const trimZeroDecimals = (amount) => {\r\n  if (parseFloat(amount) === parseInt(amount)) {\r\n    return parseInt(amount).toString();\r\n  }\r\n  return amount;\r\n};\r\n\r\nexport const limitDecimals = (amount, maxDecimals) => {\r\n  let amountStr = amount.toString();\r\n  \r\n  if (maxDecimals === undefined) {\r\n    return amountStr;\r\n  }\r\n  if (maxDecimals === 0) {\r\n    return amountStr.split(\".\")[0];\r\n  }\r\n  const dotIndex = amountStr.indexOf(\".\");\r\n  if (dotIndex !== -1) {\r\n    let decimals = amountStr.length - dotIndex - 1;\r\n    if (decimals > maxDecimals) {\r\n      amountStr = amountStr.substr(0, amountStr.length - (decimals - maxDecimals));\r\n    }\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const padDecimals = (amount, minDecimals) => {\r\n  let amountStr = amount.toString();\r\n  const dotIndex = amountStr.indexOf(\".\");\r\n  if (dotIndex !== -1) {\r\n    const decimals = amountStr.length - dotIndex - 1;\r\n    if (decimals < minDecimals) {\r\n      amountStr = amountStr.padEnd(amountStr.length + (minDecimals - decimals), \"0\");\r\n    }\r\n  } else {\r\n    amountStr = amountStr + \".0000\";\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const formatKeyAmount = (map, key, tokenDecimals, displayDecimals, useCommas) => {\r\n  if (!map || !map[key]) {\r\n    return \"...\";\r\n  }\r\n\r\n  return formatAmount(map[key], tokenDecimals, displayDecimals, useCommas);\r\n};\r\n\r\nexport const formatArrayAmount = (arr, index, tokenDecimals, displayDecimals, useCommas) => {\r\n  if (!arr || !arr[index]) {\r\n    return \"...\";\r\n  }\r\n\r\n  return formatAmount(arr[index], tokenDecimals, displayDecimals, useCommas);\r\n};\r\n\r\nfunction _parseOrdersData(ordersData, account, indexes, extractor, uintPropsLength, addressPropsLength) {\r\n  if (!ordersData || ordersData.length === 0) {\r\n    return [];\r\n  }\r\n  const [uintProps, addressProps] = ordersData;\r\n  const count = uintProps.length / uintPropsLength;\r\n\r\n  const orders = [];\r\n  for (let i = 0; i < count; i++) {\r\n    const sliced = addressProps\r\n      .slice(addressPropsLength * i, addressPropsLength * (i + 1))\r\n      .concat(uintProps.slice(uintPropsLength * i, uintPropsLength * (i + 1)));\r\n\r\n    if (sliced[0] === AddressZero && sliced[1] === AddressZero) {\r\n      continue;\r\n    }\r\n\r\n    const order = extractor(sliced);\r\n    order.index = indexes[i];\r\n    order.account = account;\r\n    orders.push(order);\r\n  }\r\n\r\n  return orders;\r\n}\r\n\r\nfunction parseDecreaseOrdersData(chainId, decreaseOrdersData, account, indexes) {\r\n  const extractor = (sliced) => {\r\n    const isLong = sliced[4].toString() === \"1\";\r\n    return {\r\n      collateralToken: sliced[0],\r\n      indexToken: sliced[1],\r\n      collateralDelta: sliced[2],\r\n      sizeDelta: sliced[3],\r\n      isLong,\r\n      triggerPrice: sliced[5],\r\n      triggerAboveThreshold: sliced[6].toString() === \"1\",\r\n      type: DECREASE,\r\n    };\r\n  };\r\n  return _parseOrdersData(decreaseOrdersData, account, indexes, extractor, 5, 2).filter((order) => {\r\n    return isValidToken(chainId, order.collateralToken) && isValidToken(chainId, order.indexToken);\r\n  });\r\n}\r\n\r\nfunction parseIncreaseOrdersData(chainId, increaseOrdersData, account, indexes) {\r\n  const extractor = (sliced) => {\r\n    const isLong = sliced[5].toString() === \"1\";\r\n    return {\r\n      purchaseToken: sliced[0],\r\n      collateralToken: sliced[1],\r\n      indexToken: sliced[2],\r\n      purchaseTokenAmount: sliced[3],\r\n      sizeDelta: sliced[4],\r\n      isLong,\r\n      triggerPrice: sliced[6],\r\n      triggerAboveThreshold: sliced[7].toString() === \"1\",\r\n      type: INCREASE,\r\n    };\r\n  };\r\n  return _parseOrdersData(increaseOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\r\n    return (\r\n      isValidToken(chainId, order.purchaseToken) &&\r\n      isValidToken(chainId, order.collateralToken) &&\r\n      isValidToken(chainId, order.indexToken)\r\n    );\r\n  });\r\n}\r\n\r\nfunction parseSwapOrdersData(chainId, swapOrdersData, account, indexes) {\r\n  if (!swapOrdersData || !swapOrdersData.length) {\r\n    return [];\r\n  }\r\n\r\n  const extractor = (sliced) => {\r\n    const triggerAboveThreshold = sliced[6].toString() === \"1\";\r\n    const shouldUnwrap = sliced[7].toString() === \"1\";\r\n\r\n    return {\r\n      path: [sliced[0], sliced[1], sliced[2]].filter((address) => address !== AddressZero),\r\n      amountIn: sliced[3],\r\n      minOut: sliced[4],\r\n      triggerRatio: sliced[5],\r\n      triggerAboveThreshold,\r\n      type: SWAP,\r\n      shouldUnwrap,\r\n    };\r\n  };\r\n  return _parseOrdersData(swapOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\r\n    return order.path.every((token) => isValidToken(chainId, token));\r\n  });\r\n}\r\n\r\nexport function getOrderKey(order) {\r\n  return `${order.type}-${order.account}-${order.index}`;\r\n}\r\n\r\nexport function useAccountOrders(flagOrdersEnabled, overrideAccount) {\r\n  const { library, account: connectedAccount } = useWeb3React();\r\n  const active = true; // this is used in Actions.js so set active to always be true\r\n  const account = overrideAccount || connectedAccount;\r\n\r\n  const { chainId } = useChainId();\r\n  const shouldRequest = active && account && flagOrdersEnabled;\r\n\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const orderBookReaderAddress = getContract(chainId, \"OrderBookReader\");\r\n  const key = shouldRequest ? [active, chainId, orderBookAddress, account] : false;\r\n  const {\r\n    data: orders = [],\r\n    mutate: updateOrders,\r\n    error: ordersError,\r\n  } = useSWR(key, {\r\n    dedupingInterval: 5000,\r\n    fetcher: async (active, chainId, orderBookAddress, account) => {\r\n      const provider = getProvider(library, chainId);\r\n      const orderBookContract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\r\n      const orderBookReaderContract = new ethers.Contract(orderBookReaderAddress, OrderBookReader.abi, provider);\r\n\r\n      const fetchIndexesFromServer = () => {\r\n        const ordersIndexesUrl = `${getServerBaseUrl(chainId)}/orders_indices?account=${account}`;\r\n        return fetch(ordersIndexesUrl)\r\n          .then(async (res) => {\r\n            const json = await res.json();\r\n            const ret = {};\r\n            for (const key of Object.keys(json)) {\r\n              ret[key.toLowerCase()] = json[key].map((val) => parseInt(val.value)).sort((a, b) => a - b);\r\n            }\r\n\r\n            return ret;\r\n          })\r\n          .catch(() => ({ swap: [], increase: [], decrease: [] }));\r\n      };\r\n\r\n      const fetchLastIndex = async (type) => {\r\n        const method = type.toLowerCase() + \"OrdersIndex\";\r\n        return await orderBookContract[method](account).then((res) => bigNumberify(res._hex).toNumber());\r\n      };\r\n\r\n      const fetchLastIndexes = async () => {\r\n        const [swap, increase, decrease] = await Promise.all([\r\n          fetchLastIndex(\"swap\"),\r\n          fetchLastIndex(\"increase\"),\r\n          fetchLastIndex(\"decrease\"),\r\n        ]);\r\n\r\n        return { swap, increase, decrease };\r\n      };\r\n\r\n      const getRange = (to, from) => {\r\n        const LIMIT = 10;\r\n        const _indexes = [];\r\n        from = from || Math.max(to - LIMIT, 0);\r\n        for (let i = to - 1; i >= from; i--) {\r\n          _indexes.push(i);\r\n        }\r\n        return _indexes;\r\n      };\r\n\r\n      const getIndexes = (knownIndexes, lastIndex) => {\r\n        if (knownIndexes.length === 0) {\r\n          return getRange(lastIndex);\r\n        }\r\n        return [\r\n          ...knownIndexes,\r\n          ...getRange(lastIndex, knownIndexes[knownIndexes.length - 1] + 1).sort((a, b) => b - a),\r\n        ];\r\n      };\r\n\r\n      const getOrders = async (method, knownIndexes, lastIndex, parseFunc) => {\r\n        const indexes = getIndexes(knownIndexes, lastIndex);\r\n        const ordersData = await orderBookReaderContract[method](orderBookAddress, account, indexes);\r\n        const orders = parseFunc(chainId, ordersData, account, indexes);\r\n\r\n        return orders;\r\n      };\r\n\r\n      try {\r\n        const [serverIndexes, lastIndexes] = await Promise.all([fetchIndexesFromServer(), fetchLastIndexes()]);\r\n        const [swapOrders = [], increaseOrders = [], decreaseOrders = []] = await Promise.all([\r\n          getOrders(\"getSwapOrders\", serverIndexes.swap, lastIndexes.swap, parseSwapOrdersData),\r\n          getOrders(\"getIncreaseOrders\", serverIndexes.increase, lastIndexes.increase, parseIncreaseOrdersData),\r\n          getOrders(\"getDecreaseOrders\", serverIndexes.decrease, lastIndexes.decrease, parseDecreaseOrdersData),\r\n        ]);\r\n        return [...swapOrders, ...increaseOrders, ...decreaseOrders];\r\n      } catch (ex) {\r\n        console.error(ex);\r\n      }\r\n    },\r\n  });\r\n\r\n  return [orders, updateOrders, ordersError];\r\n}\r\n\r\nexport const formatAmount = (amount, tokenDecimals, displayDecimals, useCommas, defaultValue) => {\r\n  if (amount === null) {\r\n    return;\r\n  }\r\n  \r\n  if (!defaultValue) {\r\n    defaultValue = \"...\";\r\n  }\r\n  if (amount === undefined || amount.toString().length === 0) {\r\n    return defaultValue;\r\n  }\r\n  if (displayDecimals === undefined) {\r\n    displayDecimals = 4;\r\n  }\r\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\r\n  amountStr = limitDecimals(amountStr, displayDecimals);\r\n  if (displayDecimals !== 0) {\r\n    amountStr = padDecimals(amountStr, displayDecimals);\r\n  }\r\n  if (useCommas) {\r\n    return numberWithCommas(amountStr);\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const formatAmountFree = (amount, tokenDecimals, displayDecimals) => {\r\n  if (!amount) {\r\n    return \"...\";\r\n  }\r\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\r\n  amountStr = limitDecimals(amountStr, displayDecimals);\r\n  return trimZeroDecimals(amountStr);\r\n};\r\n\r\nexport const parseValue = (value, tokenDecimals) => {\r\n  const pValue = parseFloat(value);\r\n  if (isNaN(pValue)) {\r\n    return undefined;\r\n  }\r\n  value = limitDecimals(value, tokenDecimals);\r\n  const amount = ethers.utils.parseUnits(value, tokenDecimals);\r\n  return bigNumberify(amount);\r\n};\r\n\r\nexport function numberWithCommas(x) {\r\n  if (!x) {\r\n    return \"...\";\r\n  }\r\n  var parts = x.toString().split(\".\");\r\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  return parts.join(\".\");\r\n}\r\n\r\nexport function getExplorerUrl(chainId) {\r\n  if (chainId === 3) {\r\n    return \"https://ropsten.etherscan.io/\";\r\n  } else if (chainId === 42) {\r\n    return \"https://kovan.etherscan.io/\";\r\n  } else if (chainId === MAINNET) {\r\n    return \"https://bscscan.com/\";\r\n  } else if (chainId === TESTNET) {\r\n    return \"https://testnet.bscscan.com/\";\r\n  } else if (chainId === ARBITRUM_TESTNET) {\r\n    return \"https://testnet.arbiscan.io/\";\r\n  } else if (chainId === ARBITRUM) {\r\n    return \"https://arbiscan.io/\";\r\n  } else if (chainId === AVALANCHE) {\r\n    return \"https://snowtrace.io/\";\r\n  }\r\n  return \"https://etherscan.io/\";\r\n}\r\n\r\nexport function getAccountUrl(chainId, account) {\r\n  if (!account) {\r\n    return getExplorerUrl(chainId);\r\n  }\r\n  return getExplorerUrl(chainId) + \"address/\" + account;\r\n}\r\n\r\nexport function getTokenUrl(chainId, address) {\r\n  if (!address) {\r\n    return getExplorerUrl(chainId);\r\n  }\r\n  return getExplorerUrl(chainId) + \"token/\" + address;\r\n}\r\n\r\nexport function usePrevious(value) {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  });\r\n  return ref.current;\r\n}\r\n\r\nexport function approveTokens({\r\n  setIsApproving,\r\n  library,\r\n  tokenAddress,\r\n  spender,\r\n  chainId,\r\n  onApproveSubmitted,\r\n  getTokenInfo,\r\n  infoTokens,\r\n  pendingTxns,\r\n  setPendingTxns,\r\n  includeMessage,\r\n}) {\r\n  setIsApproving(true);\r\n  const contract = new ethers.Contract(tokenAddress, Token.abi, library.getSigner());\r\n  contract\r\n    .approve(spender, ethers.constants.MaxUint256)\r\n    .then(async (res) => {\r\n      const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\r\n      helperToast.success(\r\n        <div>\r\n          Approval submitted!{\" \"}\r\n          <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            View status.\r\n          </a>\r\n          <br />\r\n        </div>\r\n      );\r\n      if (onApproveSubmitted) {\r\n        onApproveSubmitted();\r\n      }\r\n      if (getTokenInfo && infoTokens && pendingTxns && setPendingTxns) {\r\n        const token = getTokenInfo(infoTokens, tokenAddress);\r\n        const pendingTxn = {\r\n          hash: res.hash,\r\n          message: includeMessage ? `${token.symbol} Approved!` : false,\r\n        };\r\n        setPendingTxns([...pendingTxns, pendingTxn]);\r\n      }\r\n    })\r\n    .catch((e) => {\r\n      console.error(e);\r\n      let failMsg;\r\n      if (\r\n        [\"not enough funds for gas\", \"failed to execute call with revert code InsufficientGasFunds\"].includes(\r\n          e.data?.message\r\n        )\r\n      ) {\r\n        failMsg = (\r\n          <div>\r\n            There is not enough ETH in your account on Arbitrum to send this transaction.\r\n            <br />\r\n            <br />\r\n            <a href={\"https://arbitrum.io/bridge-tutorial/\"} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              Bridge ETH to Arbitrum\r\n            </a>\r\n          </div>\r\n        );\r\n      } else if (e.message?.includes(\"User denied transaction signature\")) {\r\n        failMsg = \"Approval was cancelled\";\r\n      } else {\r\n        failMsg = \"Approval failed\";\r\n      }\r\n      helperToast.error(failMsg);\r\n    })\r\n    .finally(() => {\r\n      setIsApproving(false);\r\n    });\r\n}\r\n\r\nexport const shouldRaiseGasError = (token, amount) => {\r\n  if (!amount) {\r\n    return false;\r\n  }\r\n  if (token.address !== AddressZero) {\r\n    return false;\r\n  }\r\n  if (!token.balance) {\r\n    return false;\r\n  }\r\n  if (amount.gte(token.balance)) {\r\n    return true;\r\n  }\r\n  if (token.balance.sub(amount).lt(DUST_BNB)) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getTokenInfo = (infoTokens, tokenAddress, replaceNative, nativeTokenAddress) => {\r\n  if (replaceNative && tokenAddress === nativeTokenAddress) {\r\n    return infoTokens[AddressZero];\r\n  }\r\n  return infoTokens[tokenAddress];\r\n};\r\n\r\nconst NETWORK_METADATA = {\r\n  [MAINNET]: {\r\n    chainId: \"0x\" + MAINNET.toString(16),\r\n    chainName: \"BSC\",\r\n    nativeCurrency: {\r\n      name: \"BNB\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: BSC_RPC_PROVIDERS,\r\n    blockExplorerUrls: [\"https://bscscan.com\"],\r\n  },\r\n  [TESTNET]: {\r\n    chainId: \"0x\" + TESTNET.toString(16),\r\n    chainName: \"BSC Testnet\",\r\n    nativeCurrency: {\r\n      name: \"BNB\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: [\"https://data-seed-prebsc-1-s1.binance.org:8545/\"],\r\n    blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\r\n  },\r\n  [ARBITRUM_TESTNET]: {\r\n    chainId: \"0x\" + ARBITRUM_TESTNET.toString(16),\r\n    chainName: \"Arbitrum Testnet\",\r\n    nativeCurrency: {\r\n      name: \"ETH\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: [\"https://rinkeby.arbitrum.io/rpc\"],\r\n    blockExplorerUrls: [\"https://rinkeby-explorer.arbitrum.io/\"],\r\n  },\r\n  [ARBITRUM]: {\r\n    chainId: \"0x\" + ARBITRUM.toString(16),\r\n    chainName: \"Arbitrum\",\r\n    nativeCurrency: {\r\n      name: \"ETH\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: ARBITRUM_RPC_PROVIDERS,\r\n    blockExplorerUrls: [getExplorerUrl(ARBITRUM)],\r\n  },\r\n  [AVALANCHE]: {\r\n    chainId: \"0x\" + AVALANCHE.toString(16),\r\n    chainName: \"Avalanche\",\r\n    nativeCurrency: {\r\n      name: \"AVAX\",\r\n      symbol: \"AVAX\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: AVALANCHE_RPC_PROVIDERS,\r\n    blockExplorerUrls: [getExplorerUrl(AVALANCHE)],\r\n  },\r\n};\r\n\r\nexport const addBscNetwork = async () => {\r\n  return addNetwork(NETWORK_METADATA[MAINNET]);\r\n};\r\n\r\nexport const addNetwork = async (metadata) => {\r\n  await window.ethereum.request({ method: \"wallet_addEthereumChain\", params: [metadata] }).catch();\r\n};\r\n\r\nexport const switchNetwork = async (chainId, active) => {\r\n  if (!active) {\r\n    // chainId in localStorage allows to switch network even if wallet is not connected\r\n    // or there is no wallet at all\r\n    localStorage.setItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY, chainId);\r\n    document.location.reload();\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const chainIdHex = \"0x\" + chainId.toString(16);\r\n    await window.ethereum.request({\r\n      method: \"wallet_switchEthereumChain\",\r\n      params: [{ chainId: chainIdHex }],\r\n    });\r\n    helperToast.success(\"Connected to \" + getChainName(chainId));\r\n    return getChainName(chainId);\r\n  } catch (ex) {\r\n    // https://docs.metamask.io/guide/rpc-api.html#other-rpc-methods\r\n    // This error code indicates that the chain has not been added to MetaMask.\r\n    // 4001 error means user has denied the request\r\n    // If the error code is not 4001, then we need to add the network\r\n    if (ex.code !== 4001) {\r\n      return await addNetwork(NETWORK_METADATA[chainId]);\r\n    }\r\n\r\n    console.error(\"error\", ex);\r\n  }\r\n};\r\n\r\nexport const getWalletConnectHandler = (activate, deactivate, setActivatingConnector) => {\r\n  const fn = async () => {\r\n    const walletConnect = getWalletConnectConnector();\r\n    setActivatingConnector(walletConnect);\r\n    activate(walletConnect, (ex) => {\r\n      if (ex instanceof UnsupportedChainIdError) {\r\n        helperToast.error(\"Unsupported chain. Switch to Arbitrum network on your wallet and try again\");\r\n        console.warn(ex);\r\n      } else if (!(ex instanceof UserRejectedRequestErrorWalletConnect)) {\r\n        helperToast.error(ex.message);\r\n        console.warn(ex);\r\n      }\r\n      clearWalletConnectData();\r\n      deactivate();\r\n    });\r\n  };\r\n  return fn;\r\n};\r\n\r\nexport const getInjectedHandler = (activate) => {\r\n  const fn = async () => {\r\n    activate(getInjectedConnector(), (e) => {\r\n      const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\r\n\r\n      if (e instanceof UnsupportedChainIdError) {\r\n        helperToast.error(\r\n          <div>\r\n            <div>Your wallet is not connected to {getChainName(chainId)}.</div>\r\n            <br />\r\n            <div className=\"clickable underline margin-bottom\" onClick={() => switchNetwork(chainId, true)}>\r\n              Switch to {getChainName(chainId)}\r\n            </div>\r\n            <div className=\"clickable underline\" onClick={() => switchNetwork(chainId, true)}>\r\n              Add {getChainName(chainId)}\r\n            </div>\r\n          </div>\r\n        );\r\n        return;\r\n      }\r\n      const errString = e.message ?? e.toString();\r\n      helperToast.error(errString);\r\n    });\r\n  };\r\n  return fn;\r\n};\r\n\r\nexport function isMobileDevice(navigator) {\r\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n}\r\n\r\nexport function setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress) {\r\n  if (!indexPrices) {\r\n    // console.log('return');\r\n    return;\r\n  }\r\n\r\n  // console.log('-------------------WENT THROUGH')\r\n\r\n  const tokenAddress = token.isNative ? nativeTokenAddress : token.address;\r\n\r\n  const indexPrice = indexPrices[tokenAddress];\r\n  if (!indexPrice) {\r\n    return;\r\n  }\r\n\r\n  const indexPriceBn = bigNumberify(indexPrice);\r\n  if (indexPriceBn.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  const spread = token.maxPrice.sub(token.minPrice);\r\n  const spreadBps = spread.mul(BASIS_POINTS_DIVISOR).div(token.maxPrice.add(token.minPrice).div(2));\r\n\r\n  if (spreadBps.gt(MAX_PRICE_DEVIATION_BASIS_POINTS - 50)) {\r\n    // only set one of the values as there will be a spread between the index price and the Chainlink price\r\n    if (indexPriceBn.gt(token.minPrimaryPrice)) {\r\n      token.maxPrice = indexPriceBn;\r\n    } else {\r\n      token.minPrice = indexPriceBn;\r\n    }\r\n    return;\r\n  }\r\n\r\n  const halfSpreadBps = spreadBps.div(2).toNumber();\r\n  token.maxPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR + halfSpreadBps).div(BASIS_POINTS_DIVISOR);\r\n  token.minPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR - halfSpreadBps).div(BASIS_POINTS_DIVISOR);\r\n}\r\n\r\nexport function getInfoTokens(\r\n  tokens,\r\n  tokenBalances,\r\n  whitelistedTokens,\r\n  vaultTokenInfo,\r\n  fundingRateInfo,\r\n  vaultPropsLength,\r\n  indexPrices,\r\n  nativeTokenAddress\r\n) {\r\n  if (!vaultPropsLength) {\r\n    vaultPropsLength = 15;\r\n  }\r\n  const fundingRatePropsLength = 2;\r\n  const infoTokens = {};\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const token = JSON.parse(JSON.stringify(tokens[i]));\r\n    if (tokenBalances) {\r\n      token.balance = tokenBalances[i];\r\n    }\r\n    if (token.address === USDG_ADDRESS) {\r\n      token.minPrice = expandDecimals(1, USD_DECIMALS);\r\n      token.maxPrice = expandDecimals(1, USD_DECIMALS);\r\n    }\r\n    infoTokens[token.address] = token;\r\n  }\r\n\r\n  for (let i = 0; i < whitelistedTokens.length; i++) {\r\n    const token = JSON.parse(JSON.stringify(whitelistedTokens[i]));\r\n    if (vaultTokenInfo) {\r\n      token.poolAmount = vaultTokenInfo[i * vaultPropsLength];\r\n      token.reservedAmount = vaultTokenInfo[i * vaultPropsLength + 1];\r\n      token.availableAmount = token.poolAmount.sub(token.reservedAmount);\r\n      token.usdgAmount = vaultTokenInfo[i * vaultPropsLength + 2];\r\n      token.redemptionAmount = vaultTokenInfo[i * vaultPropsLength + 3];\r\n      token.weight = vaultTokenInfo[i * vaultPropsLength + 4];\r\n      token.bufferAmount = vaultTokenInfo[i * vaultPropsLength + 5];\r\n      token.maxUsdgAmount = vaultTokenInfo[i * vaultPropsLength + 6];\r\n      token.globalShortSize = vaultTokenInfo[i * vaultPropsLength + 7];\r\n      token.maxGlobalShortSize = vaultTokenInfo[i * vaultPropsLength + 8];\r\n      token.maxGlobalLongSize = vaultTokenInfo[i * vaultPropsLength + 9];\r\n      token.minPrice = vaultTokenInfo[i * vaultPropsLength + 10];\r\n      token.maxPrice = vaultTokenInfo[i * vaultPropsLength + 11];\r\n      token.guaranteedUsd = vaultTokenInfo[i * vaultPropsLength + 12];\r\n      token.maxPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 13];\r\n      token.minPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 14];\r\n\r\n      // save minPrice and maxPrice as setTokenUsingIndexPrices may override it\r\n      token.contractMinPrice = token.minPrice;\r\n      token.contractMaxPrice = token.maxPrice;\r\n\r\n      token.maxAvailableShort = bigNumberify(0);\r\n      token.hasMaxAvailableShort = false;\r\n      if (token.maxGlobalShortSize.gt(0)) {\r\n        token.hasMaxAvailableShort = true;\r\n        if (token.maxGlobalShortSize.gt(token.globalShortSize)) {\r\n          token.maxAvailableShort = token.maxGlobalShortSize.sub(token.globalShortSize);\r\n        }\r\n      }\r\n\r\n      if (token.maxUsdgAmount.eq(0)) {\r\n        token.maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\r\n      }\r\n\r\n      token.availableUsd = token.isStable\r\n        ? token.poolAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals))\r\n        : token.availableAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals));\r\n\r\n      token.maxAvailableLong = bigNumberify(0);\r\n      token.hasMaxAvailableLong = false;\r\n      if (token.maxGlobalLongSize.gt(0)) {\r\n        token.hasMaxAvailableLong = true;\r\n\r\n        if (token.maxGlobalLongSize.gt(token.guaranteedUsd)) {\r\n          const remainingLongSize = token.maxGlobalLongSize.sub(token.guaranteedUsd);\r\n          token.maxAvailableLong = remainingLongSize.lt(token.availableUsd) ? remainingLongSize : token.availableUsd;\r\n        }\r\n      } else {\r\n        token.maxAvailableLong = token.availableUsd;\r\n      }\r\n\r\n      token.maxLongCapacity =\r\n        token.maxGlobalLongSize.gt(0) && token.maxGlobalLongSize.lt(token.availableUsd.add(token.guaranteedUsd))\r\n          ? token.maxGlobalLongSize\r\n          : token.availableUsd.add(token.guaranteedUsd);\r\n\r\n      token.managedUsd = token.availableUsd.add(token.guaranteedUsd);\r\n      token.managedAmount = token.managedUsd.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\r\n\r\n      setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress);\r\n    }\r\n\r\n    if (fundingRateInfo) {\r\n      token.fundingRate = fundingRateInfo[i * fundingRatePropsLength];\r\n      token.cumulativeFundingRate = fundingRateInfo[i * fundingRatePropsLength + 1];\r\n    }\r\n\r\n    if (infoTokens[token.address]) {\r\n      token.balance = infoTokens[token.address].balance;\r\n    }\r\n\r\n    infoTokens[token.address] = token;\r\n  }\r\n\r\n  return infoTokens;\r\n}\r\n\r\nexport const CHART_PERIODS = {\r\n  \"5m\": 60 * 5,\r\n  \"15m\": 60 * 15,\r\n  \"1h\": 60 * 60,\r\n  \"4h\": 60 * 60 * 4,\r\n  \"1d\": 60 * 60 * 24,\r\n};\r\n\r\nexport function getTotalVolumeSum(volumes) {\r\n  if (!volumes || volumes.length === 0) {\r\n    return;\r\n  }\r\n\r\n  let volume = bigNumberify(0);\r\n  for (let i = 0; i < volumes.length; i++) {\r\n    volume = volume.add(volumes[i].data.volume);\r\n  }\r\n\r\n  return volume;\r\n}\r\n\r\nexport function getBalanceAndSupplyData(balances) {\r\n  if (!balances || balances.length === 0) {\r\n    return {};\r\n  }\r\n\r\n  const keys = [\"gmx\", \"esGmx\", \"glp\", \"stakedGmxTracker\"];\r\n  const balanceData = {};\r\n  const supplyData = {};\r\n  const propsLength = 2;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    balanceData[key] = balances[i * propsLength];\r\n    supplyData[key] = balances[i * propsLength + 1];\r\n  }\r\n\r\n  return { balanceData, supplyData };\r\n}\r\n\r\nexport function getDepositBalanceData(depositBalances) {\r\n  if (!depositBalances || depositBalances.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\r\n    \"gmxInStakedGmx\",\r\n    \"esGmxInStakedGmx\",\r\n    \"stakedGmxInBonusGmx\",\r\n    \"bonusGmxInFeeGmx\",\r\n    \"bnGmxInFeeGmx\",\r\n    \"glpInStakedGlp\",\r\n  ];\r\n  const data = {};\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = depositBalances[i];\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getVestingData(vestingInfo) {\r\n  if (!vestingInfo || vestingInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\"gmxVester\", \"glpVester\"];\r\n  const data = {};\r\n  const propsLength = 7;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      pairAmount: vestingInfo[i * propsLength],\r\n      vestedAmount: vestingInfo[i * propsLength + 1],\r\n      escrowedBalance: vestingInfo[i * propsLength + 2],\r\n      claimedAmounts: vestingInfo[i * propsLength + 3],\r\n      claimable: vestingInfo[i * propsLength + 4],\r\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\r\n      averageStakedAmount: vestingInfo[i * propsLength + 6],\r\n    };\r\n\r\n    data[key + \"PairAmount\"] = data[key].pairAmount;\r\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\r\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\r\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\r\n    data[key + \"Claimable\"] = data[key].claimable;\r\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\r\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getStakingData(stakingInfo) {\r\n  if (!stakingInfo || stakingInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\"stakedGmxTracker\", \"bonusGmxTracker\", \"feeGmxTracker\", \"stakedGlpTracker\", \"feeGlpTracker\"];\r\n  const data = {};\r\n  const propsLength = 5;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      claimable: stakingInfo[i * propsLength],\r\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\r\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\r\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\r\n      totalSupply: stakingInfo[i * propsLength + 4],\r\n    };\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getProcessedData(\r\n  balanceData,\r\n  supplyData,\r\n  depositBalanceData,\r\n  stakingData,\r\n  vestingData,\r\n  aum,\r\n  nativeTokenPrice,\r\n  stakedGmxSupply,\r\n  gmxPrice,\r\n  gmxSupply\r\n) {\r\n  if (\r\n    !balanceData ||\r\n    !supplyData ||\r\n    !depositBalanceData ||\r\n    !stakingData ||\r\n    !vestingData ||\r\n    !aum ||\r\n    !nativeTokenPrice ||\r\n    !stakedGmxSupply ||\r\n    !gmxPrice ||\r\n    !gmxSupply\r\n  ) {\r\n    return {};\r\n  }\r\n\r\n  const data = {};\r\n\r\n  data.gmxBalance = balanceData.gmx;\r\n  data.gmxBalanceUsd = balanceData.gmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.gmxSupply = bigNumberify(gmxSupply);\r\n\r\n  data.gmxSupplyUsd = data.gmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.stakedGmxSupply = stakedGmxSupply;\r\n  data.stakedGmxSupplyUsd = stakedGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.gmxInStakedGmx = depositBalanceData.gmxInStakedGmx;\r\n  data.gmxInStakedGmxUsd = depositBalanceData.gmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.esGmxBalance = balanceData.esGmx;\r\n  data.esGmxBalanceUsd = balanceData.esGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGmxTrackerSupply = supplyData.stakedGmxTracker;\r\n  data.stakedGmxTrackerSupplyUsd = supplyData.stakedGmxTracker.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.stakedEsGmxSupply = data.stakedGmxTrackerSupply.sub(data.stakedGmxSupply);\r\n  data.stakedEsGmxSupplyUsd = data.stakedEsGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.esGmxInStakedGmx = depositBalanceData.esGmxInStakedGmx;\r\n  data.esGmxInStakedGmxUsd = depositBalanceData.esGmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.bnGmxInFeeGmx = depositBalanceData.bnGmxInFeeGmx;\r\n  data.bonusGmxInFeeGmx = depositBalanceData.bonusGmxInFeeGmx;\r\n  data.feeGmxSupply = stakingData.feeGmxTracker.totalSupply;\r\n  data.feeGmxSupplyUsd = data.feeGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGmxTrackerRewards = stakingData.stakedGmxTracker.claimable;\r\n  data.stakedGmxTrackerRewardsUsd = stakingData.stakedGmxTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.bonusGmxTrackerRewards = stakingData.bonusGmxTracker.claimable;\r\n\r\n  data.feeGmxTrackerRewards = stakingData.feeGmxTracker.claimable;\r\n  data.feeGmxTrackerRewardsUsd = stakingData.feeGmxTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\r\n\r\n  data.boostBasisPoints = bigNumberify(0);\r\n  if (data && data.bnGmxInFeeGmx && data.bonusGmxInFeeGmx && data.bonusGmxInFeeGmx.gt(0)) {\r\n    data.boostBasisPoints = data.bnGmxInFeeGmx.mul(BASIS_POINTS_DIVISOR).div(data.bonusGmxInFeeGmx);\r\n  }\r\n\r\n  data.stakedGmxTrackerAnnualRewardsUsd = stakingData.stakedGmxTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(gmxPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.gmxAprForEsGmx =\r\n    data.stakedGmxTrackerSupplyUsd && data.stakedGmxTrackerSupplyUsd.gt(0)\r\n      ? data.stakedGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.stakedGmxTrackerSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.feeGmxTrackerAnnualRewardsUsd = stakingData.feeGmxTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(nativeTokenPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.gmxAprForNativeToken =\r\n    data.feeGmxSupplyUsd && data.feeGmxSupplyUsd.gt(0)\r\n      ? data.feeGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.feeGmxSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.gmxBoostAprForNativeToken = data.gmxAprForNativeToken.mul(data.boostBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n  data.gmxAprTotal = data.gmxAprForNativeToken.add(data.gmxAprForEsGmx);\r\n  data.gmxAprTotalWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken).add(data.gmxAprForEsGmx);\r\n  data.gmxAprForNativeTokenWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken);\r\n\r\n  data.totalGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.feeGmxTrackerRewardsUsd);\r\n\r\n  data.glpSupply = supplyData.glp;\r\n  data.glpPrice =\r\n    data.glpSupply && data.glpSupply.gt(0)\r\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(data.glpSupply)\r\n      : bigNumberify(0);\r\n\r\n  data.glpSupplyUsd = supplyData.glp.mul(data.glpPrice).div(expandDecimals(1, 18));\r\n\r\n  data.glpBalance = depositBalanceData.glpInStakedGlp;\r\n  data.glpBalanceUsd = depositBalanceData.glpInStakedGlp.mul(data.glpPrice).div(expandDecimals(1, GLP_DECIMALS));\r\n\r\n  data.stakedGlpTrackerRewards = stakingData.stakedGlpTracker.claimable;\r\n  data.stakedGlpTrackerRewardsUsd = stakingData.stakedGlpTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.feeGlpTrackerRewards = stakingData.feeGlpTracker.claimable;\r\n  data.feeGlpTrackerRewardsUsd = stakingData.feeGlpTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(gmxPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.glpAprForEsGmx =\r\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\r\n      ? data.stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(nativeTokenPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.glpAprForNativeToken =\r\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\r\n      ? data.feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.glpAprTotal = data.glpAprForNativeToken.add(data.glpAprForEsGmx);\r\n\r\n  data.totalGlpRewardsUsd = data.stakedGlpTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\r\n\r\n  data.totalEsGmxRewards = data.stakedGmxTrackerRewards.add(data.stakedGlpTrackerRewards);\r\n  data.totalEsGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.stakedGlpTrackerRewardsUsd);\r\n\r\n  data.gmxVesterRewards = vestingData.gmxVester.claimable;\r\n  data.glpVesterRewards = vestingData.glpVester.claimable;\r\n  data.totalVesterRewards = data.gmxVesterRewards.add(data.glpVesterRewards);\r\n  data.totalVesterRewardsUsd = data.totalVesterRewards.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.totalNativeTokenRewards = data.feeGmxTrackerRewards.add(data.feeGlpTrackerRewards);\r\n  data.totalNativeTokenRewardsUsd = data.feeGmxTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\r\n\r\n  data.totalRewardsUsd = data.totalEsGmxRewardsUsd.add(data.totalNativeTokenRewardsUsd).add(data.totalVesterRewardsUsd);\r\n\r\n  return data;\r\n}\r\n\r\nexport async function addTokenToMetamask(token) {\r\n  try {\r\n    const wasAdded = await window.ethereum.request({\r\n      method: \"wallet_watchAsset\",\r\n      params: {\r\n        type: \"ERC20\",\r\n        options: {\r\n          address: token.address,\r\n          symbol: token.symbol,\r\n          decimals: token.decimals,\r\n          image: token.imageUrl,\r\n        },\r\n      },\r\n    });\r\n    if (wasAdded) {\r\n      // https://github.com/MetaMask/metamask-extension/issues/11377\r\n      // We can show a toast message when the token is added to metamask but because of the bug we can't. Once the bug is fixed we can show a toast message.\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n\r\nexport function sleep(ms) {\r\n  return new Promise((resolve) => resolve(), ms);\r\n}\r\n\r\nexport function getPageTitle(data) {\r\n  return `${data} | DeDeLend`;\r\n}\r\n\r\nexport function isHashZero(value) {\r\n  return value === ethers.constants.HashZero;\r\n}\r\nexport function isAddressZero(value) {\r\n  return value === ethers.constants.AddressZero;\r\n}\r\n\r\nexport function useDebounce(value, delay) {\r\n  // State and setters for debounced value\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n  useEffect(\r\n    () => {\r\n      // Update debounced value after delay\r\n      const handler = setTimeout(() => {\r\n        setDebouncedValue(value);\r\n      }, delay);\r\n      // Cancel the timeout if value changes (also on delay change or unmount)\r\n      // This is how we prevent debounced value from updating if value is changed ...\r\n      // .. within the delay period. Timeout gets cleared and restarted.\r\n      return () => {\r\n        clearTimeout(handler);\r\n      };\r\n    },\r\n    [value, delay] // Only re-call effect if value or delay changes\r\n  );\r\n  return debouncedValue;\r\n}\r\n\r\nexport function isDevelopment() {\r\n  return !window.location.host?.includes(\"gmx.io\") && !window.location.host?.includes(\"ipfs.io\");\r\n}\r\n\r\nexport function isLocal() {\r\n  return window.location.host?.includes(\"localhost\");\r\n}\r\n\r\nexport function getHomeUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3010\";\r\n  }\r\n\r\n  return \"https://gmx.io\";\r\n}\r\n\r\nexport function getAppBaseUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3011/#\";\r\n  }\r\n\r\n  return \"https://app.gmx.io/#\";\r\n}\r\n\r\nexport function getRootShareApiUrl() {\r\n  if (isLocal()) {\r\n    return \"https://gmxs.vercel.app\";\r\n  }\r\n\r\n  return \"https://share.gmx.io\";\r\n}\r\n\r\nexport function getTradePageUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3011/#/trade\";\r\n  }\r\n\r\n  return \"https://app.gmx.io/#/trade\";\r\n}\r\n\r\nexport function importImage(name) {\r\n  let tokenImage = null;\r\n  try {\r\n    tokenImage = require(\"../img/\" + name);\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n  return tokenImage && tokenImage.default;\r\n}\r\n\r\nexport function getTwitterIntentURL(text, url = \"\", hashtag = \"\") {\r\n  let finalURL = \"https://twitter.com/intent/tweet?text=\";\r\n  if (text.length > 0) {\r\n    finalURL += encodeURIComponent(text.replace(/[\\r\\n]+/g, \" \"))\r\n      .replace(/\\*%7C/g, \"*|URL:\")\r\n      .replace(/%7C\\*/g, \"|*\");\r\n\r\n    if (hashtag.length > 0) {\r\n      finalURL += \"&hashtags=\" + encodeURIComponent(hashtag.replace(/#/g, \"\"));\r\n    }\r\n    if (url.length > 0) {\r\n      finalURL += \"&url=\" + encodeURIComponent(url);\r\n    }\r\n  }\r\n  return finalURL;\r\n}\r\n\r\nexport function isValidTimestamp(timestamp) {\r\n  return new Date(timestamp).getTime() > 0;\r\n}\r\n\r\nexport function getPositionForOrder(account, order, positionsMap) {\r\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\r\n  const position = positionsMap[key];\r\n  return position && position.size && position.size.gt(0) ? position : null;\r\n}\r\n\r\nexport function getOrderError(account, order, positionsMap, position) {\r\n  if (order.type !== DECREASE) {\r\n    return;\r\n  }\r\n\r\n  const positionForOrder = position ? position : getPositionForOrder(account, order, positionsMap);\r\n\r\n  if (!positionForOrder) {\r\n    return \"No open position, order cannot be executed unless a position is opened\";\r\n  }\r\n  if (positionForOrder.size.lt(order.sizeDelta)) {\r\n    return \"Order size is bigger than position, will only be executable if position increases\";\r\n  }\r\n\r\n  if (positionForOrder.size.gt(order.sizeDelta)) {\r\n    if (positionForOrder.size.sub(order.sizeDelta).lt(positionForOrder.collateral.sub(order.collateralDelta))) {\r\n      return \"Order cannot be executed as it would reduce the position's leverage below 1\";\r\n    }\r\n    if (positionForOrder.size.sub(order.sizeDelta).lt(expandDecimals(5, USD_DECIMALS))) {\r\n      return \"Order cannot be executed as the remaining position would be smaller than $5.00\";\r\n    }\r\n  }\r\n}\r\n\r\nexport function arrayURLFetcher(...urlArr) {\r\n  const fetcher = (url) => fetch(url).then((res) => res.json());\r\n  return Promise.all(urlArr.map(fetcher));\r\n}\r\n\r\nexport function shouldShowRedirectModal(timestamp) {\r\n  const thirtyDays = 1000 * 60 * 60 * 24 * 30;\r\n  const expiryTime = timestamp + thirtyDays;\r\n  return !isValidTimestamp(timestamp) || Date.now() > expiryTime;\r\n}\r\n","import { getExplorerUrl, helperToast } from './../../views/gmx-test/lib/legacy';\r\n\r\n\r\nexport const notifySuccess = (text, hash) => {\r\n\tconst url = getExplorerUrl(42161) + \"tx/\" + hash;\r\n\t\r\n\thelperToast.success(\r\n\t\t<div>\r\n\t\t\t{text}\r\n\t\t\t<br />\r\n\t\t\t{hash &&\r\n\t\t\t\t<a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\tView on Arbiscan\r\n\t\t\t\t</a>}\r\n\t\t\t<br />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport const errAlert = (err, setIsLoading) => {\r\n\tlet msg = err.reason ?? err.message;\r\n\tif (err.message === 'Internal JSON-RPC error.') {\r\n\t\tmsg = err.data.message;\r\n\t}\r\n\t\r\n\tconsole.log(err);\r\n\t// alert(`Error code: ${err.code}\\nError message: ${msg}\\n\\nCheck the console for details.`)\r\n\thelperToast.error(\r\n\t\t<div>\r\n\t\t\tError: {err.code}\r\n\t\t\t<br />\r\n\t\t\t{msg}\r\n\t\t\t<br /><br />\r\n\t\t\tCheck the console for details.\r\n\t\t</div>\r\n\t)\r\n\r\n\tif (setIsLoading) {\r\n\t\tsetIsLoading(false);\r\n\t}\r\n}","import { formatUnits } from \"ethers/lib/utils\";\r\nimport { formatAmount } from \"../../views/gmx-test/lib/legacy\";\r\nimport { errAlert, notifySuccess } from \"./notifications\";\r\n\r\n\r\nexport const getSlTpFromPercentage = (isLong, isTP, percentage, openPriceNum, leverage, fees) => {\r\n\tif (!percentage) {\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t// const feesDelta = formatAmount(fees, 30, 30, 0) / leverage;\r\n\t// const openPriceWithFees = isLong\r\n\t// \t? openPriceNum + feesDelta\r\n\t// \t: openPriceNum - feesDelta;\r\n\t\r\n\tif ((isTP && isLong) || (!isTP && !isLong)) {\r\n\t\treturn (\r\n\t\t\t(\r\n\t\t\t\topenPriceNum + (0.01 * openPriceNum * (percentage / leverage))\r\n\t\t\t) * 10**10\r\n\t\t).toFixed(0);\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t(\r\n\t\t\t\topenPriceNum - (0.01 * openPriceNum * (percentage / leverage))\r\n\t\t\t) * 10**10\r\n\t\t).toFixed(0);\r\n\t}\r\n}\r\n\r\nexport const daysToMs = (days) => {\r\n\treturn days * 24 * 60**2 * 1000;\r\n}\r\n\r\nexport const msToTimeLeft = (ms) => {\r\n\tconst s = ms / 1000;\r\n\tconst m = s / 60;\r\n\tconst h = m / 60;\r\n\tconst hours = Math.floor(h % 24);\r\n\tconst days = Math.floor(h / 24);\r\n\t\r\n\treturn `${days}d ${hours}h`;\r\n}\r\n\r\nexport function fromBigNumber(number, decimals = 18) {\r\n\tif (!number) {\r\n\t\treturn;\r\n\t}\r\n  return parseFloat(formatUnits(number.toString(), decimals));\r\n}\r\n\r\n\r\nexport const executePromise = (fn, args, successMsg, setIsLoading, cb) => {\r\n\tif (setIsLoading) {\r\n\t\tsetIsLoading(true);\r\n\t}\r\n\t\r\n\tfn(...args)\r\n\t\t.then(tx => {\r\n\t\t\tconsole.log(\"Submitting:\", tx);\r\n\t\t\ttx.wait().then(() => {\r\n\t\t\t\tnotifySuccess(successMsg, tx.hash);\r\n\t\t\t\tif (setIsLoading) {\r\n\t\t\t\t\tsetIsLoading(false);\r\n\t\t\t\t}\r\n\t\t\t\tif (cb) {\r\n\t\t\t\t\tcb();\r\n\t\t\t\t}\r\n\t\t\t}, (e) => {\r\n\t\t\t\terrAlert(e, setIsLoading);\r\n\t\t\t})\r\n\t\t}, (e) => {\r\n\t\t\terrAlert(e, setIsLoading);\r\n\t\t});\r\n}","import { ethers } from 'ethers';\r\nimport _DDL_POOL from '../../deployments/arbitrum_ddl/DDL_POOL.json'\r\nimport _USDC from \"../../deployments/arbitrum_ddl/USDC.json\";\r\nimport { signer } from './providers.js';\r\nimport { executePromise } from './utils';\r\nimport _OperationalTreasury from '../../deployments/options/OperationalTreasury.json';\r\nimport _HegicStrategy_ABI from '../../deployments/options/HegicStrategy_ABI.json';\r\nimport _PriceCalculator_ABI from '../../deployments/options/PriceCalculator_ABI.json';\r\nimport _HEGOPS from '../../deployments/options/HEGOPS.json';\r\n\r\n// Options Contracts\r\nexport const DDL_POOL = new ethers.Contract(_DDL_POOL.address, _DDL_POOL.abi, signer);\r\n\r\nexport const USDC = new ethers.Contract(_USDC.address, _USDC.abi, signer);\r\nexport const approveUSDC = (address, setIsLoading, cb) => {\r\n  executePromise(USDC.approve, [address, ethers.constants.MaxUint256], \"USDC approved!\", setIsLoading, cb);\r\n}\r\nexport const getIsUsdcApproved = async (walletAddress, contractAddress, amount = 1e15) => {\r\n  return (await USDC.allowance(walletAddress, contractAddress)).gt(amount);\r\n}\r\n\r\n\r\n// Hegic\r\nexport const OperationalTreasury = _OperationalTreasury.address;\r\nexport const OperationalTreasury_ABI = _OperationalTreasury.abi;\r\n\r\nexport const HEGOPS = _HEGOPS.address;\r\nexport const HEGOPS_ABI = _HEGOPS.abi;\r\n\r\nexport const HEGIC_STRATEGIES = {\r\n\tshort: {\r\n\t\tHegicStrategy_CALL_100_BTC_1: '0x527d1086C3DD22FcdB338F69D47A1e4bFE11E539',\r\n    HegicStrategy_CALL_100_ETH_1: '0x09a4B65b3144733f1bFBa6aEaBEDFb027a38Fb60',\r\n    HegicStrategy_CALL_110_BTC_1: '0x377191F680b52ce3d0060388fEF01be7ef68e3d5',\r\n    HegicStrategy_CALL_110_ETH_1: '0xF48f571DdD77dba9Ae10fefF6df04484685091D9',\r\n    HegicStrategy_CALL_120_BTC_1: '0x8Fb8529695237D4004cffb21499e7E49E982786a',\r\n    HegicStrategy_CALL_120_ETH_1: '0x96416b82C9DFA7649570c784Eb0D0FFcDE361cFE',\r\n    HegicStrategy_CALL_130_BTC_1: '0x32563D6151891c0A8d56eD644AcDEa6FE5f4E4eB',\r\n    HegicStrategy_CALL_130_ETH_1: '0xf8b8b54bE1Eb37E76873670Ac9DE3C28b507142C',\r\n\t\tHegicStrategy_PUT_100_BTC_1: '0xA8DF600289bEc25602741756f55f27ffFDAB69a6',\r\n    HegicStrategy_PUT_100_ETH_1: '0xaA0DfBFb8dA7f45BB41c0fB68B71FAEB959B22aa',\r\n    HegicStrategy_PUT_70_BTC_1: '0x7066286C1AA0FeBE0f63eF8a44F6Fea9F05FFBE0',\r\n    HegicStrategy_PUT_70_ETH_1: '0x35EF16F3c329a54050Ca120145340dfC2b4F9541',\r\n    HegicStrategy_PUT_80_BTC_1: '0x06c3Ba025bEd24Ea38c2BdDA4bcD2A7F9f5C30e1',\r\n    HegicStrategy_PUT_80_ETH_1: '0x77C8d12d9E2D21f6eE02E8ccA332fDe4BE5C2465',\r\n    HegicStrategy_PUT_90_BTC_1: '0xe115beD3b0752BBbbEF5C423021b464bBF93dC2c',\r\n    HegicStrategy_PUT_90_ETH_1: '0x6B7e5906F53d8bB365f4A6fA776Fd0f0caf57881',\r\n\t},\r\n\tmedShort: {\r\n\t\tHegicStrategy_CALL_100_BTC_2: '0x20ee3e61e8f1eB8ae959abf5F78bA8731d010Ac3',\r\n    HegicStrategy_CALL_100_ETH_2: '0x6418C3514923a6464A26A2ffA5f17bF1efC96a21',\r\n    HegicStrategy_CALL_110_BTC_2: '0xaFA483B18FE66251C8306C7018028f674F653012',\r\n    HegicStrategy_CALL_110_ETH_2: '0xaF38a4d9153B149F05FA85C2cCFAaA677c99040E',\r\n    HegicStrategy_CALL_120_BTC_2: '0xFe35F1AB7e18930d4316B86fCefBCF053bf44A45',\r\n    HegicStrategy_CALL_120_ETH_2: '0x1060e80c1156060a1E8DdB9C64Afe74564865Ee2',\r\n    HegicStrategy_CALL_130_BTC_2: '0xe4DB400BFC4D627559D592db4ca2839cb87Fbbfc',\r\n    HegicStrategy_CALL_130_ETH_2: '0xc00103524932d86770d4F671107b0E170BD0fe6c',\r\n\t\tHegicStrategy_PUT_100_BTC_2: '0xE0f083fd87ebAEBFCfa8236098048105d32639E4',\r\n    HegicStrategy_PUT_100_ETH_2: '0x2739A4C003080A5B3Ade22b92c3321EDa2Da3A9e',\r\n    HegicStrategy_PUT_70_BTC_2: '0x52442a8C632D4c998A8BDBf44A70481AA5599b0e',\r\n    HegicStrategy_PUT_70_ETH_2: '0x48EcF46Aa51992a064aB172439ABFE182F39b478',\r\n    HegicStrategy_PUT_80_BTC_2: '0xb02343D33d2447870E38b3452Ef59d0De7b3289d',\r\n    HegicStrategy_PUT_80_ETH_2: '0xb58ccd922B57422d0497904B7D9fccB922b8aaDf',\r\n    HegicStrategy_PUT_90_BTC_2: '0x7d0c3FDF0e8A6f475Ed1834ae05fDa1E519fd227',\r\n    HegicStrategy_PUT_90_ETH_2: '0x3e2a0fE32Cc000d87D9e5D6ed8b3D64e9c74C752',\r\n\t},\r\n\tmedLong: {\r\n\t\tHegicStrategy_CALL_100_BTC_3: '0x21a4b4441AA957735902507A72A58A3a1Caaa0dC',\r\n    HegicStrategy_CALL_100_ETH_3: '0xE377A1a97237b3B89a96d8B731A2ab10d5DaC16C',\r\n    HegicStrategy_CALL_110_BTC_3: '0x6c46e2531a42F618F2ae452971DC9a7c6AD48D15',\r\n    HegicStrategy_CALL_110_ETH_3: '0x05458B7d9531EaD242290De60bEaa3cC10C87560',\r\n    HegicStrategy_CALL_120_BTC_3: '0xe259410Bbfb45CE89FDA81ec0A97d36Da8Db4374',\r\n    HegicStrategy_CALL_120_ETH_3: '0x79F87E88088293FE34dEf4eBe71fBFa5367220B4',\r\n    HegicStrategy_CALL_130_BTC_3: '0x27806482457FC98F9C2e724b5E604C66BB5ba121',\r\n    HegicStrategy_CALL_130_ETH_3: '0xae2F4e15564995af79b7dd2378B2680f7Facc342',\r\n    HegicStrategy_PUT_100_BTC_3: '0x035b965c5B7bC20E00358ACF1794d2248eA1932A',\r\n    HegicStrategy_PUT_100_ETH_3: '0xf711D0BC60F37cA28845BA623ccd9C635E5073A1',\r\n    HegicStrategy_PUT_70_BTC_3: '0x55c4532e1790592120b7b27436842caD203E7CD3',\r\n    HegicStrategy_PUT_70_ETH_3: '0xF55F6d98e2F48F8D46757D5A6e225bf0ADC9651C',\r\n    HegicStrategy_PUT_80_BTC_3: '0x8dD239e0e51BCAAd503b06D818ce811e7D99c1Af',\r\n    HegicStrategy_PUT_80_ETH_3: '0xdF30cdb7abb3Ca707b82359A349D3b0C94d4a421',\r\n    HegicStrategy_PUT_90_BTC_3: '0xE56BEAfAe4731A21eF83fe81F63b95055e81E374',\r\n    HegicStrategy_PUT_90_ETH_3: '0x33a4B4403B8C6349371CbDf539138D78ec0Aab66',\r\n\t},\r\n\tlong: {\r\n\t\tHegicStrategy_CALL_100_BTC_4: '0xc07fBf677f417bb9FfDD8248A74c7FBcCFaDAe9e',\r\n    HegicStrategy_CALL_100_ETH_4: '0x2727B807D22fCAeB7F900F49894054Ed92b9125B',\r\n    HegicStrategy_CALL_110_BTC_4: '0x14d25367102A931E2E2F587F4ED94087dc585fd0',\r\n    HegicStrategy_CALL_110_ETH_4: '0xE53a20c824cEAB8151AF8Fc92E7Eb689cFbD1231',\r\n    HegicStrategy_CALL_120_BTC_4: '0xBAbccB37338488AFBaBECAE2C3D21b9a71289A73',\r\n    HegicStrategy_CALL_120_ETH_4: '0xB7b36483B256290435a060805bdF15B3f2b122eb',\r\n    HegicStrategy_CALL_130_BTC_4: '0x9fA4DFfBE3B129988e0d09536b0E2D74F6bF7D91',\r\n    HegicStrategy_CALL_130_ETH_4: '0x4dC39763ccC861dB1c8e80c34C0079c9A12f03E4',\r\n    HegicStrategy_PUT_100_BTC_4: '0xEd46f602212d1CbaCd699C876b4A49761421bf97',\r\n    HegicStrategy_PUT_100_ETH_4: '0x015FAA9aF7599e6cea597EBC7e7e04A149a3E992',\r\n    HegicStrategy_PUT_70_BTC_4: '0xa26541ccE18CcC6E21360562d34044ceb3B5A40e',\r\n    HegicStrategy_PUT_70_ETH_4: '0x5BBe6C4A66D4a48442dc0837a0eA859a11D7766C',\r\n    HegicStrategy_PUT_80_BTC_4: '0xFD203c73851986ad7e7B99457AeafF3d98e76228',\r\n    HegicStrategy_PUT_80_ETH_4: '0x7FD5E8B2Ef25A105bf6B1c45f62d8925Eaa068Bc',\r\n    HegicStrategy_PUT_90_BTC_4: '0x02d730e3dEb3B5876fE2Cba59423ef1Db8211DA1',\r\n    HegicStrategy_PUT_90_ETH_4: '0x3031EA515c2274024D93A8D3BfA91ce920E1192E',\r\n\t}\r\n}\r\nexport const PRICE_CALCULATORS = {\r\n  PriceCalculator_PUT_100_BTC: '0x4567600c2c813322F0CBb358a8d083296A7eEA37',\r\n  PriceCalculator_PUT_100_ETH: '0xB72FC913e45522cD721252476fEfB7F50a65E23A',\r\n  PriceCalculator_PUT_70_BTC: '0x3aFbaf00a6C42e6BE67f8a618b17fB3D441C1898',\r\n  PriceCalculator_PUT_70_ETH: '0xf3625e26cb920f762dEC8DB4fE4845E9384313C0',\r\n  PriceCalculator_PUT_80_BTC: '0x9C3BBe90191F8311939A34737c02A6B49e27caA5',\r\n  PriceCalculator_PUT_80_ETH: '0x58051Cb78094551afC202C50085B13bF00BF624E',\r\n  PriceCalculator_PUT_90_BTC: '0x56A2dC3fAc4bE0A1716c938295e141195e4A1cb3',\r\n  PriceCalculator_PUT_90_ETH: '0x1AF37c8412bCdAa6C6dD4D2E2aDae2B8292603D4',\r\n  PriceCalculator_CALL_100_BTC: '0xAA4483Da5c4D17830dE9a843d07C37b3eC028d9F',\r\n  PriceCalculator_CALL_100_ETH: '0xC62a0b7e480a23BdCfe13EA08BDAceDc278a14C1',\r\n  PriceCalculator_CALL_110_BTC: '0x04BFC83f6277cf50dFB032EFd348316aACbD7863',\r\n  PriceCalculator_CALL_110_ETH: '0x6316BC5f5dF141ae88C436Fe6047D334f1B7e485',\r\n  PriceCalculator_CALL_120_BTC: '0x965Ded687bc0Da3388c6925e0Eb330bD44629B77',\r\n  PriceCalculator_CALL_120_ETH: '0x321F8A71e8268f50eBd2f748D524E7750AD70798',\r\n  PriceCalculator_CALL_130_BTC: '0x4b350b7457b54C5A76828f81472f2719D801D0D5',\r\n  PriceCalculator_CALL_130_ETH: '0xffdc9da896d3301DE596b16a389138B70b1CBAdb',\r\n}\r\nexport const HegicStrategy_ABI = _HegicStrategy_ABI;\r\nexport const PriceCalculator_ABI = _PriceCalculator_ABI;\r\n\r\nexport const HEGIC_BUY_URLS = {\r\n  PUT_100_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-100&&strategyName=bear-put&asset=BTC&sentiment=bear\",\r\n  PUT_100_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-100&&strategyName=bear-put&asset=ETH&sentiment=bear\",\r\n  PUT_70_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-70&&strategyName=bear-put&asset=BTC&sentiment=bear\",\r\n  PUT_70_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-70&&strategyName=bear-put&asset=ETH&sentiment=bear\",\r\n  PUT_80_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-80&&strategyName=bear-put&asset=BTC&sentiment=bear\",\r\n  PUT_80_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-80&&strategyName=bear-put&asset=ETH&sentiment=bear\",\r\n  PUT_90_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-90&&strategyName=bear-put&asset=BTC&sentiment=bear\",\r\n  PUT_90_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=put-90&&strategyName=bear-put&asset=ETH&sentiment=bear\",\r\n\r\n  CALL_100_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-100&&strategyName=bull-call&asset=BTC&sentiment=bull\",\r\n  CALL_100_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-100&&strategyName=bull-call&asset=ETH\",\r\n  CALL_110_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-110&&strategyName=bull-call&asset=BTC&sentiment=bull\",\r\n  CALL_110_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-110&&strategyName=bull-call&asset=ETH\",\r\n  CALL_120_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-120&&strategyName=bull-call&asset=BTC&sentiment=bull\",\r\n  CALL_120_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-120&&strategyName=bull-call&asset=ETH\",\r\n  CALL_130_BTC: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-130&&strategyName=bull-call&asset=BTC&sentiment=bull\",\r\n  CALL_130_ETH: \"https://www.hegic.co/app#/arbitrum/trade/new?strikeName=call-130&&strategyName=bull-call&asset=ETH\",\r\n}\r\n\r\n\r\n// Chai\r\nexport const CHAI_CONTRACT_ETH = '0x639Fe6ab55C921f74e7fac1ee960C0B6293ba612';\r\nexport const CHAI_CONTRACT_BTC = '0x6ce185860a4963106506C203335A2910413708e9';\r\n\r\n\r\n// Lyra\r\nexport const LyraQuoter = '0x23236b4c7772636b5224df56Be8168A2f42df31C';\r\n\r\n// Premia\r\nexport const PremiaPools = {\r\n  ETH: \"0xE5DbC4EDf467B609A063c7ea7fAb976C6b9BAa1a\",\r\n  BTC: \"0xb5fE3bc2eF4c34cC233922dfF2Fcb1B1BF89A38E\"\r\n}","export const separateThousands = (num, symb = \",\") => {\r\n\tif (typeof num === 'undefined' || num === null) {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\tconst str = num.toString();\r\n\tlet [intPart, fractionPart] = str.split('.')\r\n\tconst hasFraction = fractionPart !== undefined;\r\n\r\n\tintPart = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, hasFraction ? ',' : symb)\r\n\t\r\n\tif (hasFraction) {\r\n\t\tif (fractionPart.length === 1 && symb !== ' ') {\r\n\t\t\tfractionPart += '0'\r\n\t\t}\r\n\t\t\r\n\t\treturn intPart + '.' + fractionPart\r\n\t} else {\r\n\t\treturn intPart;\r\n\t}\r\n}\r\n\r\n\r\nconst removeNonNumeric = (num) => {\r\n\tlet result = num.toString().replace(/^\\./g, '').replace(/[^0-9.]/g, '').replace(/^0\\d/, '');\r\n\r\n\tif (result.match(/\\./g)?.length > 1) {\r\n\t\tresult = result.replace(/\\.$/, '')\r\n\t}\r\n\r\n\tlet [, fractionPart] = result.split('.')\r\n\r\n\tif (fractionPart?.length > 6) {\r\n\t\tresult = result.substr(0, result.length - 1)\r\n\t}\r\n\t\r\n\treturn result;\r\n}\r\n\r\nexport const convertInputNum = (num) => {\r\n\treturn separateThousands(removeNonNumeric(num), ' ');\r\n}\r\n\r\nexport const nonFractionConvert = (num) => {\r\n\tconst val = (num).replace(/[^0-9]/g, '').replace(/^0\\d/, '').replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\r\n\treturn val;\r\n}\r\n\r\n\r\nexport const sepToNumber = (str, symb = ' ') => {\r\n\tif (typeof str !== 'string') {\r\n\t\treturn str;\r\n\t}\r\n\r\n\tif (symb === ' ' && str.split(symb).length === 1) {\r\n\t\tsymb = ',';\r\n\t}\r\n\t\r\n\treturn Number(str.split(symb).join(''));\r\n}","import { sepToNumber } from \"./sepThousands\";\r\n\r\nexport const floor = (num, fraction = 2) => {\r\n\tif (typeof num !== 'number') {\r\n\t\treturn '...'\r\n\t}\r\n\t\r\n\treturn Math.floor(num * 10**fraction) / 10**fraction;\r\n}\r\n\r\n\r\nexport const formatForContract = (val, fraction = 6) => {\r\n\treturn Math.floor(sepToNumber(val) * 10**fraction);\r\n}","import { ethers } from \"ethers\"\r\nimport { USDC, DDL_POOL } from './contracts';\r\nimport { floor } from './math';\r\n\r\n\r\nexport const getGlobalStats = async () => {\r\n\tconst globalStats = {}\r\n\t\r\n\tconst totalBalance = (await DDL_POOL.getTotalBalance()).toNumber()\r\n\t\r\n\tconst totalLocked = (await DDL_POOL.totalLocked()).toNumber()\r\n\tconst totalSupplied = totalBalance + totalLocked;\r\n\tglobalStats.totalSupplied = Math.round(ethers.utils.formatUnits(totalSupplied, 6));\r\n\tglobalStats.availToBorrow = Math.round(ethers.utils.formatUnits(totalBalance, 6));\r\n\tglobalStats.totalBorrowed = Math.round(ethers.utils.formatUnits(totalLocked, 6));\r\n\t\r\n\tglobalStats.utilRate = floor(totalSupplied === 0 ? \r\n\t\t0 : (totalLocked / totalSupplied * 100))\r\n\tglobalStats.borrowAPY = 10;\r\n\t\r\n\t\r\n\treturn globalStats;\r\n}\r\n\r\nexport const getUserStats = async (walletAddress) => {\r\n\ttry {\r\n\t\tconst balance = Number(ethers.utils.formatUnits(await USDC.balanceOf(walletAddress), 6))\r\n\t\tconst curBalance = Number(ethers.utils.formatUnits(await DDL_POOL.shareOf(walletAddress), 6))\r\n\t\r\n\t\tconst totalBalance = (await DDL_POOL.getTotalBalance()).toNumber()\r\n\t\tconst avail = Math.min(curBalance, totalBalance)\r\n\t\r\n\t\tconst userStats = {\r\n\t\t\tbalance: floor(balance),\r\n\t\t\tcurBalance: floor(curBalance),\r\n\t\t\tavail: floor(avail),\r\n\t\t}\r\n\t\r\n\t\treturn userStats;\r\n\t} catch(err) {\r\n\t\tconsole.log(err);\r\n\t}\r\n\t\r\n}","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport cx from 'classnames';\r\n\r\nconst Tabs = ({className, links}) => {\r\n\tconst cls = cx(className, 'tabs');\r\n\t\r\n\treturn (\r\n\t\t<div className={cls}>\r\n\t\t\t{links.map((link) => {\r\n\t\t\t\tif (link.isHidden) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst linkCls = cx('btn', 'btn_tab', link.isActive && 'active');\r\n\t\t\t\tconst linkEl = link.isExternal ?\r\n\t\t\t\t\t<a className={linkCls} target=\"_blank\" rel=\"noreferrer\" href={link.to}  key={link.to}>{link.name}</a>\r\n\t\t\t\t\t: <Link to={link.to} className={linkCls} key={link.to}>{link.name}</Link>\r\n\t\t\t\treturn (\r\n\t\t\t\t\tlinkEl\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Tabs;","import React, { useContext, useEffect, useState } from 'react';\r\nimport Logo from './components/UI/logo/Logo'\r\nimport Button from './components/UI/button/Button';\r\nimport Wallet from './components/Wallet';\r\nimport { GlobalStatsContext, UserStatsContext } from './context/context';\r\nimport { ethers } from 'ethers';\r\nimport { connectWallet } from './components/utils/wallet';\r\nimport { getGlobalStats, getUserStats } from './components/utils/stats';\r\nimport { useLocation } from 'react-router-dom';\r\nimport Tabs from './components/Tabs';\r\n\r\n\r\nconst Header = (props) => {\r\n\tconst {\r\n\t\twalletAddress, \r\n\t\tsetWalletAddress,\r\n\t} = props;\r\n\r\n\tconst { setGlobalStats } = useContext(GlobalStatsContext)\r\n\tconst { setUserStats } = useContext(UserStatsContext)\r\n\t\r\n\r\n\tuseEffect(() => {\r\n\t\tconnectWallet(setWalletAddress)\r\n\r\n\t\tgetGlobalStats()\r\n\t\t\t.then(stats => {\r\n\t\t\t\tsetGlobalStats(stats)\r\n\t\t\t})\r\n\t}, [window.ethereum?.networkVersion])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (walletAddress) {\r\n\t\t\tgetUserStats(walletAddress)\r\n\t\t\t\t.then(stats => {\r\n\t\t\t\t\tsetUserStats(stats)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}, [walletAddress])\r\n\r\n\r\n\tconst loc = useLocation();\r\n\tconst headerLinks = [\r\n\t\t{\r\n\t\t\tname: 'Perpetuals',\r\n\t\t\tto: '/perpetuals',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Options',\r\n\t\t\tto: '/options',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Borrow USDC',\r\n\t\t\tto: 'https://borrow.dedelend.co/',\r\n\t\t\tisExternal: true,\r\n\t\t},\r\n\t]\r\n\theaderLinks.find(link => {\r\n\t\tlink.isActive = loc.pathname === link.to;\r\n\t\treturn link.isActive;\r\n\t})\r\n\r\n\treturn (\r\n\t\t<header className='header'>\r\n\t\t\t<div className=\"header__content _container\">\r\n\t\t\t\t<div className=\"header__nav\">\r\n\t\t\t\t\t<Logo />\r\n\t\t\t\t\t<Tabs className='header__links' links={headerLinks} />\r\n\t\t\t\t</div>\r\n\t\t\t\t{walletAddress ?\r\n\t\t\t\t\t<Wallet address={walletAddress} \r\n\t\t\t\t\t\tsetAddress={setWalletAddress}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<Button isMain={true} onClick={(e) => {\r\n\t\t\t\t\t\tconnectWallet(setWalletAddress)\r\n\t\t\t\t\t}}>Connect wallet</Button>}\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport Logo from './components/UI/logo/Logo';\r\n\r\nconst Footer = () => {\r\n\treturn (\r\n\t\t<footer className=\"footer\">\r\n\t\t\t<div className=\"footer__content _container\">\r\n\t\t\t\t<Logo></Logo>\r\n\t\t\t\t<div className=\"footer__smedia-items\">\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://mirror.xyz/0x0641bc55DDAb3b9636e82CbF87EDE3c3c533039d\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<g clipPath=\"url(#clip0_58_113)\">\r\n\t\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t\t<path d=\"M9 14C9 10.6863 11.6863 8 15 8C18.3137 8 21 10.6863 21 14V21.3929C21 22.2805 20.2805 23 19.3929 23H10.6071C9.71954 23 9 22.2805 9 21.3929V14Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t<defs>\r\n\t\t\t\t\t\t\t\t<clipPath id=\"clip0_58_113\">\r\n\t\t\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"3\" fill=\"white\"/>\r\n\t\t\t\t\t\t\t\t</clipPath>\r\n\t\t\t\t\t\t\t</defs>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/DeDeLend\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M15.5 8C11.3562 8 8 11.4411 8 15.6897C8 19.0924 10.1469 21.9664 13.1281 22.9853C13.5031 23.0526 13.6437 22.8219 13.6437 22.62C13.6437 22.4374 13.6344 21.8319 13.6344 21.1878C11.75 21.5435 11.2625 20.7168 11.1125 20.2843C11.0281 20.0632 10.6625 19.3808 10.3438 19.1981C10.0812 19.0539 9.70625 18.6983 10.3344 18.6887C10.925 18.6791 11.3469 19.2462 11.4875 19.4769C12.1625 20.64 13.2406 20.3131 13.6719 20.1113C13.7375 19.6115 13.9344 19.275 14.15 19.0828C12.4812 18.8905 10.7375 18.2273 10.7375 15.286C10.7375 14.4497 11.0281 13.7577 11.5063 13.2194C11.4313 13.0271 11.1688 12.2389 11.5812 11.1816C11.5812 11.1816 12.2094 10.9798 13.6437 11.9698C14.2437 11.7968 14.8812 11.7103 15.5187 11.7103C16.1562 11.7103 16.7937 11.7968 17.3938 11.9698C18.8281 10.9701 19.4563 11.1816 19.4563 11.1816C19.8687 12.2389 19.6063 13.0271 19.5312 13.2194C20.0094 13.7577 20.3 14.4401 20.3 15.286C20.3 18.2369 18.5469 18.8905 16.8781 19.0828C17.15 19.3231 17.3844 19.7845 17.3844 20.5054C17.3844 21.5339 17.375 22.3605 17.375 22.62C17.375 22.8219 17.5156 23.0622 17.8906 22.9853C19.3795 22.4699 20.6732 21.4888 21.5898 20.1801C22.5063 18.8714 22.9996 17.3009 23 15.6897C23 11.4411 19.6438 8 15.5 8Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://twitter.com/DeDeLend\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<path d=\"M23 10.4234C22.4484 10.664 21.8558 10.8265 21.2328 10.8999C21.8756 10.5215 22.3565 9.92574 22.5858 9.22397C21.9819 9.57697 21.3209 9.82545 20.6317 9.95859C20.1682 9.47158 19.5543 9.14877 18.8852 9.0403C18.2162 8.93183 17.5295 9.04376 16.9317 9.35871C16.334 9.67366 15.8586 10.174 15.5794 10.7821C15.3002 11.3902 15.2328 12.0719 15.3877 12.7215C14.164 12.6611 12.9669 12.3481 11.8741 11.8029C10.7813 11.2577 9.81726 10.4924 9.04444 9.55683C8.78019 10.0054 8.62825 10.5255 8.62825 11.0794C8.62795 11.578 8.75273 12.069 8.99151 12.5088C9.23029 12.9486 9.57568 13.3236 9.99705 13.6005C9.50837 13.5852 9.03048 13.4552 8.60314 13.2215V13.2605C8.6031 13.9598 8.84892 14.6377 9.2989 15.1789C9.74888 15.7202 10.3753 16.0916 11.0719 16.2302C10.6185 16.3509 10.1433 16.3687 9.68193 16.2822C9.87847 16.8839 10.2613 17.4101 10.7768 17.7871C11.2923 18.1641 11.9148 18.373 12.5569 18.3846C11.4668 19.2268 10.1205 19.6836 8.73461 19.6816C8.48911 19.6816 8.24382 19.6675 8 19.6393C9.40677 20.5294 11.0444 21.0018 12.7168 21C18.3783 21 21.4733 16.3855 21.4733 12.3835C21.4733 12.2535 21.47 12.1221 21.4641 11.9921C22.0661 11.5637 22.5857 11.0332 22.9987 10.4254L23 10.4234Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://discord.gg/5DGZ7rzSfS\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<path d=\"M20.6981 10.9123C19.7418 10.4907 18.7169 10.179 17.645 10.0018C17.6355 10 17.6256 10.0012 17.6167 10.0051C17.6079 10.009 17.6005 10.0156 17.5956 10.0238C17.4644 10.2493 17.3182 10.5432 17.2157 10.7754C16.0789 10.6094 14.9232 10.6094 13.7864 10.7754C13.6722 10.5181 13.5435 10.2671 13.4008 10.0238C13.3959 10.0155 13.3886 10.0088 13.3798 10.0047C13.371 10.0005 13.3611 9.99908 13.3514 10.0006C12.2802 10.1778 11.2552 10.4894 10.2984 10.9117C10.2901 10.9151 10.2831 10.9208 10.2784 10.9282C8.33342 13.7238 7.80031 16.4504 8.06217 19.1428C8.0629 19.1494 8.065 19.1558 8.06833 19.1616C8.07166 19.1673 8.07616 19.1724 8.08155 19.1764C9.21676 19.9845 10.4829 20.6001 11.8271 20.9974C11.8364 21.0002 11.8465 21.0002 11.8558 20.9974C11.8652 20.9946 11.8735 20.989 11.8796 20.9815C12.1688 20.6033 12.4251 20.2021 12.6458 19.782C12.6489 19.7762 12.6506 19.7699 12.651 19.7635C12.6513 19.757 12.6502 19.7505 12.6478 19.7445C12.6454 19.7385 12.6417 19.733 12.6369 19.7285C12.6321 19.724 12.6264 19.7206 12.6202 19.7184C12.2164 19.5698 11.8252 19.3904 11.4502 19.1819C11.4435 19.1782 11.4378 19.1728 11.4337 19.1664C11.4296 19.16 11.4272 19.1526 11.4267 19.145C11.4262 19.1375 11.4276 19.1299 11.4308 19.123C11.4341 19.1161 11.439 19.1101 11.4452 19.1055C11.5239 19.0487 11.6027 18.9894 11.6777 18.9302C11.6844 18.9248 11.6926 18.9214 11.7012 18.9204C11.7098 18.9193 11.7185 18.9206 11.7264 18.9241C14.1807 20.002 16.8388 20.002 19.2643 18.9241C19.2723 18.9204 19.2811 18.9189 19.2898 18.9199C19.2986 18.9208 19.3068 18.9242 19.3137 18.9295C19.3887 18.9894 19.4668 19.0487 19.5462 19.1055C19.5525 19.11 19.5575 19.1159 19.5608 19.1228C19.5642 19.1296 19.5657 19.1371 19.5653 19.1447C19.565 19.1523 19.5627 19.1596 19.5587 19.1661C19.5547 19.1726 19.5491 19.1781 19.5425 19.1819C19.1687 19.3921 18.78 19.57 18.3719 19.7178C18.3656 19.7201 18.3599 19.7236 18.3551 19.7281C18.3504 19.7327 18.3466 19.7382 18.3442 19.7442C18.3418 19.7503 18.3407 19.7568 18.3411 19.7633C18.3414 19.7698 18.3432 19.7762 18.3463 19.782C18.5712 20.2018 18.8287 20.6014 19.1119 20.9809C19.1177 20.9887 19.1259 20.9945 19.1353 20.9976C19.1447 21.0006 19.1549 21.0008 19.1644 20.998C20.5108 20.6018 21.779 19.986 22.9155 19.1764C22.921 19.1726 22.9257 19.1677 22.9291 19.162C22.9326 19.1563 22.9348 19.15 22.9355 19.1434C23.248 16.0306 22.4118 13.326 20.7174 10.9294C20.7133 10.9216 20.7064 10.9155 20.6981 10.9123ZM13.0127 17.5033C12.2739 17.5033 11.6646 16.8501 11.6646 16.049C11.6646 15.2472 12.2621 14.5946 13.0127 14.5946C13.7689 14.5946 14.3726 15.2527 14.3607 16.049C14.3607 16.8507 13.7633 17.5033 13.0127 17.5033ZM17.9969 17.5033C17.2575 17.5033 16.6488 16.8501 16.6488 16.049C16.6488 15.2472 17.2457 14.5946 17.9969 14.5946C18.7531 14.5946 19.3568 15.2527 19.345 16.049C19.345 16.8507 18.7537 17.5033 17.9969 17.5033Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a className=\"footer__smedia-item\" target=\"_blank\" rel=\"noreferrer\" href=\"https://t.me/DeDeLend\">\r\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\">\r\n\t\t\t\t\t\t\t<rect width=\"30\" height=\"30\" rx=\"5\" fill=\"#181A3C\"/>\r\n\t\t\t\t\t\t\t<path d=\"M21.9875 9.0789L8.70041 13.9664C7.79362 14.3138 7.79886 14.7964 8.53404 15.0115L11.9454 16.0267L19.8382 11.2764C20.2114 11.0598 20.5524 11.1763 20.2721 11.4136L13.8774 16.9188H13.8759L13.8774 16.9195L13.642 20.2737C13.9868 20.2737 14.1389 20.1228 14.3323 19.9448L15.9892 18.4079L19.4358 20.8363C20.0713 21.1701 20.5277 20.9985 20.6858 20.2751L22.9483 10.104C23.1798 9.2183 22.5938 8.81726 21.9875 9.0789Z\" fill=\"#6988FF\"/>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t);\r\n};\r\n\r\nexport default Footer;","import { ethers } from \"ethers\";\r\n\r\nimport { MAINNET, TESTNET, ARBITRUM_TESTNET, ARBITRUM, AVALANCHE } from \"../lib/legacy\";\r\n\r\nconst { parseEther } = ethers.utils;\r\n\r\nconst constants = {\r\n  [MAINNET]: {\r\n    nativeTokenSymbol: \"BNB\",\r\n    defaultCollateralSymbol: \"BUSD\",\r\n    defaultFlagOrdersEnabled: false,\r\n    positionReaderPropsLength: 8,\r\n    v2: false,\r\n  },\r\n\r\n  [TESTNET]: {\r\n    nativeTokenSymbol: \"BNB\",\r\n    defaultCollateralSymbol: \"BUSD\",\r\n    defaultFlagOrdersEnabled: true,\r\n    positionReaderPropsLength: 8,\r\n    v2: false,\r\n  },\r\n\r\n  [ARBITRUM_TESTNET]: {\r\n    nativeTokenSymbol: \"ETH\",\r\n    defaultCollateralSymbol: \"USDC\",\r\n    defaultFlagOrdersEnabled: false,\r\n    positionReaderPropsLength: 9,\r\n    v2: true,\r\n\r\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\r\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\r\n    // contract requires that execution fee be strictly greater than instead of gte\r\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.000300001\"),\r\n  },\r\n\r\n  [ARBITRUM]: {\r\n    nativeTokenSymbol: \"ETH\",\r\n    wrappedTokenSymbol: \"WETH\",\r\n    defaultCollateralSymbol: \"USDC\",\r\n    defaultFlagOrdersEnabled: false,\r\n    positionReaderPropsLength: 9,\r\n    v2: true,\r\n\r\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\r\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0003\"),\r\n    // contract requires that execution fee be strictly greater than instead of gte\r\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.000300001\"),\r\n  },\r\n\r\n  [AVALANCHE]: {\r\n    nativeTokenSymbol: \"AVAX\",\r\n    wrappedTokenSymbol: \"WAVAX\",\r\n    defaultCollateralSymbol: \"MIM\",\r\n    defaultFlagOrdersEnabled: true,\r\n    positionReaderPropsLength: 9,\r\n    v2: true,\r\n\r\n    SWAP_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\r\n    INCREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.01\"),\r\n    // contract requires that execution fee be strictly greater than instead of gte\r\n    DECREASE_ORDER_EXECUTION_GAS_FEE: parseEther(\"0.0100001\"),\r\n  },\r\n};\r\n\r\nexport const getConstant = (chainId, key) => {\r\n  if (!constants[chainId]) {\r\n    throw new Error(`Unsupported chainId ${chainId}`);\r\n  }\r\n  if (!(key in constants[chainId])) {\r\n    throw new Error(`Key ${key} does not exist for chainId ${chainId}`);\r\n  }\r\n  return constants[chainId][key];\r\n};\r\n","import { ApolloClient, InMemoryCache } from \"@apollo/client\";\r\n\r\nexport const chainlinkClient = createClient(\"https://api.thegraph.com/subgraphs/name/deividask/chainlink\");\r\nexport const arbitrumGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-stats\");\r\nexport const avalancheGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-stats\");\r\nexport const nissohGraphClient = createClient(\"https://api.thegraph.com/subgraphs/name/nissoh/gmx-vault\");\r\nexport const arbitrumReferralsGraphClient = createClient(\r\n  \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-arbitrum-referrals\"\r\n);\r\nexport const avalancheReferralsGraphClient = createClient(\r\n  \"https://api.thegraph.com/subgraphs/name/gmx-io/gmx-avalanche-referrals\"\r\n);\r\n\r\nfunction createClient(uri) {\r\n  return new ApolloClient({\r\n    uri,\r\n    cache: new InMemoryCache(),\r\n  });\r\n}\r\n\r\nexport function get1InchSwapUrl(chainId, from, to) {\r\n  const rootUrl = `https://app.1inch.io/#/${chainId}/unified/swap`;\r\n  if (!from && !to) return rootUrl;\r\n  return `${rootUrl}/${from}/${to}`;\r\n}\r\n","// prettier-ignore\r\nimport {ethers} from \"ethers\";\r\nimport { Web3Provider } from \"@ethersproject/providers\";\r\nimport { getFallbackProvider, getProvider } from \"../legacy\";\r\n\r\nexport const fetcher =\r\n  (library: Web3Provider, contractInfo: any, additionalArgs: any[]) =>\r\n  (...args: any) => {\r\n    // eslint-disable-next-line\r\n    const [id, chainId, arg0, arg1, ...params] = args;\r\n    const provider = getProvider(library, chainId);\r\n\r\n    const method = ethers.utils.isAddress(arg0) ? arg1 : arg0;\r\n\r\n    const contractCall = getContractCall({\r\n      provider,\r\n      contractInfo,\r\n      arg0,\r\n      arg1,\r\n      method,\r\n      params,\r\n      additionalArgs,\r\n    });\r\n\r\n    let shouldCallFallback = true;\r\n\r\n    const handleFallback = async (resolve, reject, error) => {\r\n      if (!shouldCallFallback) {\r\n        return;\r\n      }\r\n      // prevent fallback from being called twice\r\n      shouldCallFallback = false;\r\n\r\n      const fallbackProvider = getFallbackProvider(chainId);\r\n      if (!fallbackProvider) {\r\n        reject(error);\r\n        return;\r\n      }\r\n\r\n      console.info(\"using fallbackProvider for\", method);\r\n      const fallbackContractCall = getContractCall({\r\n        provider: fallbackProvider,\r\n        contractInfo,\r\n        arg0,\r\n        arg1,\r\n        method,\r\n        params,\r\n        additionalArgs,\r\n      });\r\n\r\n      fallbackContractCall\r\n        .then((result) => resolve(result))\r\n        .catch((e) => {\r\n          console.error(\"fallback fetcher error\", id, contractInfo.contractName, method, e);\r\n          reject(e);\r\n        });\r\n    };\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n      contractCall\r\n        .then((result) => {\r\n          shouldCallFallback = false;\r\n          resolve(result);\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"fetcher error\", id, contractInfo.contractName, method, e);\r\n          handleFallback(resolve, reject, e);\r\n        });\r\n\r\n      setTimeout(() => {\r\n        handleFallback(resolve, reject, \"contractCall timeout\");\r\n      }, 2000);\r\n    });\r\n  };\r\n\r\nfunction getContractCall({ provider, contractInfo, arg0, arg1, method, params, additionalArgs }) {\r\n  if (ethers.utils.isAddress(arg0)) {\r\n    const address = arg0;\r\n    const contract = new ethers.Contract(address, contractInfo.abi, provider);\r\n\r\n    if (additionalArgs) {\r\n      return contract[method](...params.concat(additionalArgs));\r\n    }\r\n    return contract[method](...params);\r\n  }\r\n\r\n  if (!provider) {\r\n    return;\r\n  }\r\n\r\n  return provider[method](arg1, ...params);\r\n}\r\n","import { toast, ToastContent, ToastOptions } from \"react-toastify\";\r\n\r\nexport const helperToast = {\r\n  success: (content: ToastContent, opts?: ToastOptions) => {\r\n    toast.dismiss();\r\n    toast.success(content, opts);\r\n  },\r\n  error: (content: ToastContent, opts?: ToastOptions) => {\r\n    toast.dismiss();\r\n    toast.error(content, opts);\r\n  },\r\n};\r\n","import { useState } from \"react\";\r\n\r\nexport function ToastifyDebug(props) {\r\n  const [open, setOpen] = useState(false);\r\n  return (\r\n    <div className=\"Toastify-debug\">\r\n      <span className=\"Toastify-debug-button\" onClick={() => setOpen((old) => !old)}>\r\n        {open ? \"Hide error\" : \"Show error\"}\r\n      </span>\r\n      {open && <div className=\"Toastify-debug-content\">{props.children}</div>}\r\n    </div>\r\n  );\r\n}\r\n","export const NOT_ENOUGH_FUNDS = \"NOT_ENOUGH_FUNDS\";\r\nexport const USER_DENIED = \"USER_DENIED\";\r\nexport const SLIPPAGE = \"SLIPPAGE\";\r\nexport const RPC_ERROR = \"RPC_ERROR\";\r\n\r\ntype ErrorPattern = { msg?: string; code?: number };\r\n\r\nconst TX_ERROR_PATTERNS: { [key: string]: ErrorPattern[] } = {\r\n  [NOT_ENOUGH_FUNDS]: [\r\n    { msg: \"not enough funds for gas\" },\r\n    { msg: \"failed to execute call with revert code InsufficientGasFunds\" },\r\n  ],\r\n  [USER_DENIED]: [{ msg: \"User denied transaction signature\" }],\r\n  [SLIPPAGE]: [{ msg: \"Router: mark price lower than limit\" }, { msg: \"Router: mark price higher than limit\" }],\r\n  [RPC_ERROR]: [\r\n    // @see https://eips.ethereum.org/EIPS/eip-1474#error-codes\r\n    { code: -32005 },\r\n    { msg: \"Non-200 status code\" },\r\n    { msg: \"Request limit exceeded\" },\r\n    { msg: \"Internal JSON-RPC error\" },\r\n    { msg: \"Response has no error or result\" },\r\n    { msg: \"couldn't connect to the network\" },\r\n  ],\r\n};\r\n\r\ntype TxError = {\r\n  message?: string;\r\n  code?: number;\r\n  data?: any;\r\n};\r\n\r\nexport function extractError(ex: TxError) {\r\n  if (!ex) {\r\n    return [];\r\n  }\r\n\r\n  const message = ex.data?.message || ex.message;\r\n  const code = ex.code;\r\n\r\n  if (!message && !code) {\r\n    return [];\r\n  }\r\n\r\n  for (const [type, patterns] of Object.entries(TX_ERROR_PATTERNS)) {\r\n    for (const pattern of patterns) {\r\n      const matchCode = pattern.code && code === pattern.code;\r\n      const matchMessage = pattern.msg && message && message.includes(pattern.msg);\r\n\r\n      if (matchCode || matchMessage) {\r\n        return [message, type, ex.data];\r\n      }\r\n    }\r\n  }\r\n\r\n  return [message, null, ex.data];\r\n}\r\n","import { ARBITRUM, AVALANCHE } from \"../legacy\";\r\n\r\nexport const GAS_PRICE_ADJUSTMENT_MAP = {\r\n  [ARBITRUM]: \"0\",\r\n  [AVALANCHE]: \"3000000000\", // 3 gwei\r\n};\r\n\r\nexport const MAX_GAS_PRICE_MAP = {\r\n  [AVALANCHE]: \"200000000000\", // 200 gwei\r\n};","import { bigNumberify } from \"../legacy\";\r\nimport { GAS_PRICE_ADJUSTMENT_MAP, MAX_GAS_PRICE_MAP } from \"./constants\";\r\nimport { Provider } from \"@ethersproject/providers\";\r\nimport { Contract } from \"ethers\";\r\n\r\nexport async function setGasPrice(txnOpts: any, provider: Provider, chainId: number) {\r\n  let maxGasPrice = MAX_GAS_PRICE_MAP[chainId];\r\n  const premium = GAS_PRICE_ADJUSTMENT_MAP[chainId] || bigNumberify(0);\r\n\r\n  const gasPrice = await provider.getGasPrice();\r\n\r\n  if (maxGasPrice) {\r\n    if (gasPrice.gt(maxGasPrice)) {\r\n      maxGasPrice = gasPrice;\r\n    }\r\n\r\n    const feeData = await provider.getFeeData();\r\n\r\n    // the wallet provider might not return maxPriorityFeePerGas in feeData\r\n    // in which case we should fallback to the usual getGasPrice flow handled below\r\n    if (feeData && feeData.maxPriorityFeePerGas) {\r\n      txnOpts.maxFeePerGas = maxGasPrice;\r\n      txnOpts.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas.add(premium);\r\n      return;\r\n    }\r\n  }\r\n\r\n  txnOpts.gasPrice = gasPrice.add(premium);\r\n  return;\r\n}\r\n\r\nexport async function getGasLimit(contract: Contract, method, params = [], value) {\r\n  const defaultValue = bigNumberify(0);\r\n\r\n  if (!value) {\r\n    value = defaultValue;\r\n  }\r\n  \r\n  let gasLimit = await contract.estimateGas[method](...params, { value });\r\n\r\n  if (gasLimit.lt(22000)) {\r\n    gasLimit = bigNumberify(22000)!;\r\n  }\r\n\r\n  return gasLimit.mul(11000).div(10000); // add a 10% buffer\r\n}\r\n","import { BigNumber, Contract } from \"ethers\";\r\nimport { helperToast } from \"../helperToast\";\r\nimport { ToastifyDebug } from \"../../components/ToastifyDebug/ToastifyDebug\";\r\nimport { extractError, NOT_ENOUGH_FUNDS, RPC_ERROR, SLIPPAGE, USER_DENIED } from \"./transactionErrors\";\r\nimport { getExplorerUrl } from \"../legacy\";\r\nimport { getGasLimit, setGasPrice } from \"./utils\";\r\n\r\nexport async function callContract(\r\n  chainId: number,\r\n  contract: Contract,\r\n  method: string,\r\n  params: any,\r\n  opts: {\r\n    value?: BigNumber | number;\r\n    gasLimit?: BigNumber | number;\r\n    sentMsg?: string;\r\n    successMsg?: string;\r\n    hideSuccessMsg?: boolean;\r\n    failMsg?: string;\r\n    setPendingTxns?: (txns: any) => void;\r\n  }\r\n) {\r\n  try {\r\n    if (!Array.isArray(params) && typeof params === \"object\" && opts === undefined) {\r\n      opts = params;\r\n      params = [];\r\n    }\r\n    \r\n    if (!opts) {\r\n      opts = {};\r\n    }\r\n    \r\n    const txnOpts: any = {};\r\n    \r\n    if (opts.value) {\r\n      txnOpts.value = opts.value;\r\n    }\r\n    \r\n    txnOpts.gasLimit = opts.gasLimit ? opts.gasLimit : await getGasLimit(contract, method, params, opts.value);\r\n    \r\n    await setGasPrice(txnOpts, contract.provider, chainId);\r\n\r\n    const res = await contract[method](...params, txnOpts);\r\n    \r\n    const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\r\n    const sentMsg = opts.sentMsg || \"Transaction sent.\";\r\n\r\n    helperToast.success(\r\n      <div>\r\n        {sentMsg}{\" \"}\r\n        <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n          View status.\r\n        </a>\r\n        <br />\r\n      </div>\r\n    );\r\n\r\n    if (opts.setPendingTxns) {\r\n      const message = opts.hideSuccessMsg ? undefined : opts.successMsg || \"Transaction completed!\";\r\n      const pendingTxn = {\r\n        hash: res.hash,\r\n        message,\r\n      };\r\n      opts.setPendingTxns((pendingTxns) => [...pendingTxns, pendingTxn]);\r\n    }\r\n    return res;\r\n  } catch (e) {\r\n    let failMsg;\r\n\r\n    let autoCloseToast: number | boolean = 5000;\r\n\r\n    const [message, type, errorData] = extractError(e);\r\n    switch (type) {\r\n      case NOT_ENOUGH_FUNDS:\r\n        failMsg = (\r\n          <div>\r\n            There is not enough ETH in your account on Arbitrum to send this transaction.\r\n            <br />\r\n            <br />\r\n            <a href={\"https://arbitrum.io/bridge-tutorial/\"} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              Bridge ETH to Arbitrum\r\n            </a>\r\n          </div>\r\n        );\r\n        break;\r\n      case USER_DENIED:\r\n        failMsg = \"Transaction was cancelled.\";\r\n        break;\r\n      case SLIPPAGE:\r\n        failMsg =\r\n          'The mark price has changed, consider increasing your Allowed Slippage by clicking on the \"...\" icon next to your address.';\r\n        break;\r\n      case RPC_ERROR:\r\n        autoCloseToast = false;\r\n\r\n        const originalError = errorData?.error?.message || errorData?.message || message;\r\n\r\n        failMsg = (\r\n          <div>\r\n            Transaction failed due to RPC error.\r\n            <br />\r\n            <br />\r\n            Please try changing the RPC url in your wallet settings.{\" \"}\r\n            <a href=\"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n              More info\r\n            </a>\r\n            <br />\r\n            {originalError && <ToastifyDebug>{originalError}</ToastifyDebug>}\r\n          </div>\r\n        );\r\n        break;\r\n      default:\r\n        autoCloseToast = false;\r\n\r\n        failMsg = (\r\n          <div>\r\n            {opts.failMsg || \"Transaction failed\"}\r\n            <br />\r\n            {message && <ToastifyDebug>{message}</ToastifyDebug>}\r\n          </div>\r\n        );\r\n    }\r\n\r\n    helperToast.error(failMsg, { autoClose: autoCloseToast });\r\n    throw e;\r\n  }\r\n}\r\n","import { useMemo } from \"react\";\r\nimport { gql } from \"@apollo/client\";\r\nimport useSWR from \"swr\";\r\nimport { ethers } from \"ethers\";\r\n\r\nimport { USD_DECIMALS, CHART_PERIODS, formatAmount, sleep } from \"../lib/legacy\";\r\nimport { chainlinkClient } from \"./common\";\r\n\r\nconst BigNumber = ethers.BigNumber;\r\n\r\n// Ethereum network, Chainlink Aggregator contracts\r\nconst FEED_ID_MAP = {\r\n  BTC_USD: \"0xae74faa92cb67a95ebcab07358bc222e33a34da7\",\r\n  ETH_USD: \"0x37bc7498f4ff12c19678ee8fe19d713b87f6a9e6\",\r\n  BNB_USD: \"0xc45ebd0f901ba6b2b8c7e70b717778f055ef5e6d\",\r\n  LINK_USD: \"0xdfd03bfc3465107ce570a0397b247f546a42d0fa\",\r\n  UNI_USD: \"0x68577f915131087199fe48913d8b416b3984fd38\",\r\n  SUSHI_USD: \"0x7213536a36094cd8a768a5e45203ec286cba2d74\",\r\n  AVAX_USD: \"0x0fc3657899693648bba4dbd2d8b33b82e875105d\",\r\n  AAVE_USD: \"0xe3f0dede4b499c07e12475087ab1a084b5f93bc0\",\r\n  YFI_USD: \"0x8a4d74003870064d41d4f84940550911fbfccf04\",\r\n  SPELL_USD: \"0x8640b23468815902e011948f3ab173e1e83f9879\",\r\n};\r\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\r\n\r\nfunction fillGaps(prices, periodSeconds) {\r\n  if (prices.length < 2) {\r\n    return prices;\r\n  }\r\n\r\n  const newPrices = [prices[0]];\r\n  let prevTime = prices[0].time;\r\n  for (let i = 1; i < prices.length; i++) {\r\n    const { time, open } = prices[i];\r\n    if (prevTime) {\r\n      let j = (time - prevTime) / periodSeconds - 1;\r\n      while (j > 0) {\r\n        newPrices.push({\r\n          time: time - j * periodSeconds,\r\n          open,\r\n          close: open,\r\n          high: open * 1.0003,\r\n          low: open * 0.9996,\r\n        });\r\n        j--;\r\n      }\r\n    }\r\n\r\n    prevTime = time;\r\n    newPrices.push(prices[i]);\r\n  }\r\n\r\n  return newPrices;\r\n}\r\n\r\nasync function getChartPricesFromStats(chainId, symbol, period) {\r\n  if ([\"WBTC\", \"WETH\", \"WAVAX\"].includes(symbol)) {\r\n    symbol = symbol.substr(1);\r\n  } else if (symbol === \"BTC.b\") {\r\n    symbol = \"BTC\";\r\n  }\r\n  const hostname = \"https://stats.gmx.io/\";\r\n  // const hostname = 'http://localhost:3113/'\r\n  const timeDiff = CHART_PERIODS[period] * 3000;\r\n  const from = Math.floor(Date.now() / 1000 - timeDiff);\r\n  const url = `${hostname}api/candles/${symbol}?preferableChainId=${chainId}&period=${period}&from=${from}&preferableSource=fast`;\r\n  const TIMEOUT = 5000;\r\n  const res = await new Promise(async (resolve, reject) => {\r\n    let done = false;\r\n    setTimeout(() => {\r\n      done = true;\r\n      reject(new Error(`request timeout ${url}`));\r\n    }, TIMEOUT);\r\n\r\n    let lastEx;\r\n    for (let i = 0; i < 3; i++) {\r\n      if (done) return;\r\n      try {\r\n        const res = await fetch(url);\r\n        resolve(res);\r\n        return;\r\n      } catch (ex) {\r\n        await sleep(300);\r\n        lastEx = ex;\r\n      }\r\n    }\r\n    reject(lastEx);\r\n  });\r\n  if (!res.ok) {\r\n    throw new Error(`request failed ${res.status} ${res.statusText}`);\r\n  }\r\n  const json = await res.json();\r\n  let prices = json?.prices;\r\n  if (!prices || prices.length < 10) {\r\n    throw new Error(`not enough prices data: ${prices?.length}`);\r\n  }\r\n\r\n  const OBSOLETE_THRESHOLD = Date.now() / 1000 - 60 * 30; // 30 min ago\r\n  const updatedAt = json?.updatedAt || 0;\r\n  if (updatedAt < OBSOLETE_THRESHOLD) {\r\n    throw new Error(\r\n      \"chart data is obsolete, last price record at \" +\r\n        new Date(updatedAt * 1000).toISOString() +\r\n        \" now: \" +\r\n        new Date().toISOString()\r\n    );\r\n  }\r\n\r\n  prices = prices.map(({ t, o: open, c: close, h: high, l: low }) => ({\r\n    time: t + timezoneOffset,\r\n    open,\r\n    close,\r\n    high,\r\n    low,\r\n  }));\r\n  return prices;\r\n}\r\n\r\nfunction getCandlesFromPrices(prices, period) {\r\n  const periodTime = CHART_PERIODS[period];\r\n\r\n  if (prices.length < 2) {\r\n    return [];\r\n  }\r\n\r\n  const candles = [];\r\n  const first = prices[0];\r\n  let prevTsGroup = Math.floor(first[0] / periodTime) * periodTime;\r\n  let prevPrice = first[1];\r\n  let o = prevPrice;\r\n  let h = prevPrice;\r\n  let l = prevPrice;\r\n  let c = prevPrice;\r\n  for (let i = 1; i < prices.length; i++) {\r\n    const [ts, price] = prices[i];\r\n    const tsGroup = Math.floor(ts / periodTime) * periodTime;\r\n    if (prevTsGroup !== tsGroup) {\r\n      candles.push({ t: prevTsGroup + timezoneOffset, o, h, l, c });\r\n      o = c;\r\n      h = Math.max(o, c);\r\n      l = Math.min(o, c);\r\n    }\r\n    c = price;\r\n    h = Math.max(h, price);\r\n    l = Math.min(l, price);\r\n    prevTsGroup = tsGroup;\r\n  }\r\n\r\n  return candles.map(({ t: time, o: open, c: close, h: high, l: low }) => ({\r\n    time,\r\n    open,\r\n    close,\r\n    high,\r\n    low,\r\n  }));\r\n}\r\n\r\nfunction getChainlinkChartPricesFromGraph(tokenSymbol, period) {\r\n  if ([\"WBTC\", \"WETH\", \"WAVAX\"].includes(tokenSymbol)) {\r\n    tokenSymbol = tokenSymbol.substr(1);\r\n  }\r\n  const marketName = tokenSymbol + \"_USD\";\r\n  const feedId = FEED_ID_MAP[marketName];\r\n  if (!feedId) {\r\n    throw new Error(`undefined marketName ${marketName}`);\r\n  }\r\n\r\n  const PER_CHUNK = 1000;\r\n  const CHUNKS_TOTAL = 6;\r\n  const requests = [];\r\n  for (let i = 0; i < CHUNKS_TOTAL; i++) {\r\n    const query = gql(`{\r\n      rounds(\r\n        first: ${PER_CHUNK},\r\n        skip: ${i * PER_CHUNK},\r\n        orderBy: unixTimestamp,\r\n        orderDirection: desc,\r\n        where: {feed: \"${feedId}\"}\r\n      ) {\r\n        unixTimestamp,\r\n        value\r\n      }\r\n    }`);\r\n    requests.push(chainlinkClient.query({ query }));\r\n  }\r\n\r\n  return Promise.all(requests)\r\n    .then((chunks) => {\r\n      let prices = [];\r\n      const uniqTs = new Set();\r\n      chunks.forEach((chunk) => {\r\n        chunk.data.rounds.forEach((item) => {\r\n          if (uniqTs.has(item.unixTimestamp)) {\r\n            return;\r\n          }\r\n\r\n          uniqTs.add(item.unixTimestamp);\r\n          prices.push([item.unixTimestamp, Number(item.value) / 1e8]);\r\n        });\r\n      });\r\n\r\n      prices.sort(([timeA], [timeB]) => timeA - timeB);\r\n      prices = getCandlesFromPrices(prices, period);\r\n      return prices;\r\n    })\r\n    .catch((err) => {\r\n      console.error(err);\r\n    });\r\n}\r\n\r\nexport function useChartPrices(chainId, symbol, isStable, period, currentAveragePrice) {\r\n  const swrKey = !isStable && symbol ? [\"getChartCandles\", chainId, symbol, period] : null;\r\n  let { data: prices, mutate: updatePrices } = useSWR(swrKey, {\r\n    fetcher: async (...args) => {\r\n      try {\r\n        return await getChartPricesFromStats(chainId, symbol, period);\r\n      } catch (ex) {\r\n        console.warn(ex);\r\n        console.warn(\"Switching to graph chainlink data\");\r\n        try {\r\n          return await getChainlinkChartPricesFromGraph(symbol, period);\r\n        } catch (ex2) {\r\n          console.warn(\"getChainlinkChartPricesFromGraph failed\");\r\n          console.warn(ex2);\r\n          return [];\r\n        }\r\n      }\r\n    },\r\n    dedupingInterval: 60000,\r\n    focusThrottleInterval: 60000 * 10,\r\n  });\r\n\r\n  const currentAveragePriceString = currentAveragePrice && currentAveragePrice.toString();\r\n  const retPrices = useMemo(() => {\r\n    if (isStable) {\r\n      return getStablePriceData(period);\r\n    }\r\n\r\n    if (!prices) {\r\n      return [];\r\n    }\r\n\r\n    let _prices = [...prices];\r\n    if (currentAveragePriceString && prices.length) {\r\n      _prices = appendCurrentAveragePrice(_prices, BigNumber.from(currentAveragePriceString), period);\r\n    }\r\n\r\n    return fillGaps(_prices, CHART_PERIODS[period]);\r\n  }, [prices, isStable, currentAveragePriceString, period]);\r\n\r\n  return [retPrices, updatePrices];\r\n}\r\n\r\nfunction appendCurrentAveragePrice(prices, currentAveragePrice, period) {\r\n  const periodSeconds = CHART_PERIODS[period];\r\n  const currentCandleTime = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds + timezoneOffset;\r\n  const last = prices[prices.length - 1];\r\n  const averagePriceValue = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\r\n  if (currentCandleTime === last.time) {\r\n    last.close = averagePriceValue;\r\n    last.high = Math.max(last.high, averagePriceValue);\r\n    last.low = Math.max(last.low, averagePriceValue);\r\n    return prices;\r\n  } else {\r\n    const newCandle = {\r\n      time: currentCandleTime,\r\n      open: last.close,\r\n      close: averagePriceValue,\r\n      high: averagePriceValue,\r\n      low: averagePriceValue,\r\n    };\r\n    return [...prices, newCandle];\r\n  }\r\n}\r\n\r\nfunction getStablePriceData(period) {\r\n  const periodSeconds = CHART_PERIODS[period];\r\n  const now = Math.floor(Date.now() / 1000 / periodSeconds) * periodSeconds;\r\n  let priceData = [];\r\n  for (let i = 100; i > 0; i--) {\r\n    priceData.push({\r\n      time: now - i * periodSeconds,\r\n      open: 1,\r\n      close: 1,\r\n      high: 1,\r\n      low: 1,\r\n    });\r\n  }\r\n  return priceData;\r\n}\r\n","import { ethers } from \"ethers\";\r\nimport { gql } from \"@apollo/client\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Token as UniToken } from \"@uniswap/sdk-core\";\r\nimport { Pool } from \"@uniswap/v3-sdk\";\r\nimport useSWR from \"swr\";\r\n\r\nimport OrderBook from \"../abis/OrderBook.json\";\r\nimport PositionManager from \"../abis/PositionManager.json\";\r\nimport Vault from \"../abis/Vault.json\";\r\nimport Router from \"../abis/Router.json\";\r\nimport UniPool from \"../abis/UniPool.json\";\r\nimport UniswapV2 from \"../abis/UniswapV2.json\";\r\nimport Token from \"../abis/Token.json\";\r\nimport VaultReader from \"../abis/VaultReader.json\";\r\nimport PositionRouter from \"../abis/PositionRouter.json\";\r\n\r\nimport { getContract } from \"../config/Addresses\";\r\nimport { getConstant } from \"../config/chains\";\r\nimport {\r\n  ARBITRUM,\r\n  ARBITRUM_TESTNET,\r\n  AVALANCHE,\r\n  bigNumberify,\r\n  DECREASE,\r\n  expandDecimals,\r\n  getHighExecutionFee,\r\n  getInfoTokens,\r\n  getOrderKey,\r\n  getProvider,\r\n  getServerBaseUrl,\r\n  getServerUrl,\r\n  getUsd,\r\n  INCREASE,\r\n  parseValue,\r\n  replaceNativeTokenAddress,\r\n  SWAP,\r\n  UI_VERSION,\r\n  USD_DECIMALS,\r\n} from \"../lib/legacy\";\r\nimport { getTokenBySymbol, getTokens, getWhitelistedTokens } from \"../config/Tokens\";\r\n\r\nimport { arbitrumGraphClient, avalancheGraphClient, nissohGraphClient } from \"./common\";\r\nimport { groupBy } from \"lodash\";\r\nimport { fetcher } from \"../lib/contracts/fetcher\";\r\nimport { callContract } from \"../lib/contracts/callContract\";\r\n\r\nexport * from \"./prices\";\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nfunction getGmxGraphClient(chainId) {\r\n  if (chainId === ARBITRUM) {\r\n    return arbitrumGraphClient;\r\n  } else if (chainId === AVALANCHE) {\r\n    return avalancheGraphClient;\r\n  } else if (chainId === ARBITRUM_TESTNET) {\r\n    return null;\r\n  }\r\n  throw new Error(`Unsupported chain ${chainId}`);\r\n}\r\n\r\nexport function useAllOrdersStats(chainId) {\r\n  const query = gql(`{\r\n    orderStat(id: \"total\") {\r\n      openSwap\r\n      openIncrease\r\n      openDecrease\r\n      executedSwap\r\n      executedIncrease\r\n      executedDecrease\r\n      cancelledSwap\r\n      cancelledIncrease\r\n      cancelledDecrease\r\n    }\r\n  }`);\r\n\r\n  const [res, setRes] = useState();\r\n\r\n  useEffect(() => {\r\n    const graphClient = getGmxGraphClient(chainId);\r\n    if (graphClient) {\r\n      graphClient.query({ query }).then(setRes).catch(console.warn);\r\n    }\r\n  }, [setRes, query, chainId]);\r\n\r\n  return res ? res.data.orderStat : null;\r\n}\r\n\r\nexport function useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo, vaultPropsLength) {\r\n  const tokens = getTokens(chainId);\r\n  const vaultReaderAddress = getContract(chainId, \"VaultReader\");\r\n  const vaultAddress = getContract(chainId, \"Vault\");\r\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\r\n  \r\n  const { data: vaultTokenInfo } = useSWR(\r\n    [`useInfoTokens:${active}`, chainId, vaultReaderAddress, \"getVaultTokenInfoV4\"],\r\n    {\r\n      fetcher: fetcher(library, VaultReader, [\r\n        vaultAddress,\r\n        positionRouterAddress,\r\n        nativeTokenAddress,\r\n        expandDecimals(1, 18),\r\n        whitelistedTokenAddresses,\r\n      ]),\r\n      refreshInterval: 5000\r\n    }\r\n  );\r\n\r\n  const indexPricesUrl = getServerUrl(chainId, \"/prices\");\r\n  const { data: indexPrices } = useSWR([indexPricesUrl], {\r\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\r\n    refreshInterval: 1000,\r\n    refreshWhenHidden: true,\r\n  });\r\n\r\n  return {\r\n    infoTokens: getInfoTokens(\r\n      tokens,\r\n      tokenBalances,\r\n      whitelistedTokens,\r\n      vaultTokenInfo,\r\n      fundingRateInfo,\r\n      vaultPropsLength,\r\n      indexPrices,\r\n      nativeTokenAddress\r\n    ),\r\n  };\r\n}\r\n\r\nexport function useUserStat(chainId) {\r\n  const query = gql(`{\r\n    userStat(id: \"total\") {\r\n      id\r\n      uniqueCount\r\n    }\r\n  }`);\r\n\r\n  const [res, setRes] = useState();\r\n\r\n  useEffect(() => {\r\n    getGmxGraphClient(chainId).query({ query }).then(setRes).catch(console.warn);\r\n  }, [setRes, query, chainId]);\r\n\r\n  return res ? res.data.userStat : null;\r\n}\r\n\r\nexport function useLiquidationsData(chainId, account) {\r\n  const [data, setData] = useState(null);\r\n  useEffect(() => {\r\n    if (account) {\r\n      const query = gql(`{\r\n         liquidatedPositions(\r\n           where: {account: \"${account.toLowerCase()}\"}\r\n           first: 100\r\n           orderBy: timestamp\r\n           orderDirection: desc\r\n         ) {\r\n           key\r\n           timestamp\r\n           borrowFee\r\n           loss\r\n           collateral\r\n           size\r\n           markPrice\r\n           type\r\n         }\r\n      }`);\r\n      const graphClient = getGmxGraphClient(chainId);\r\n      if (!graphClient) {\r\n        return;\r\n      }\r\n\r\n      graphClient\r\n        .query({ query })\r\n        .then((res) => {\r\n          const _data = res.data.liquidatedPositions.map((item) => {\r\n            return {\r\n              ...item,\r\n              size: bigNumberify(item.size),\r\n              collateral: bigNumberify(item.collateral),\r\n              markPrice: bigNumberify(item.markPrice),\r\n            };\r\n          });\r\n          setData(_data);\r\n        })\r\n        .catch(console.warn);\r\n    }\r\n  }, [setData, chainId, account]);\r\n\r\n  return data;\r\n}\r\n\r\nexport function useAllPositions(chainId, library) {\r\n  const count = 1000;\r\n  const query = gql(`{\r\n    aggregatedTradeOpens(\r\n      first: ${count}\r\n    ) {\r\n      account\r\n      initialPosition{\r\n        indexToken\r\n        collateralToken\r\n        isLong\r\n        sizeDelta\r\n      }\r\n      increaseList {\r\n        sizeDelta\r\n      }\r\n      decreaseList {\r\n        sizeDelta\r\n      }\r\n    }\r\n  }`);\r\n\r\n  const [res, setRes] = useState();\r\n\r\n  useEffect(() => {\r\n    nissohGraphClient.query({ query }).then(setRes).catch(console.warn);\r\n  }, [setRes, query]);\r\n\r\n  const key = res ? `allPositions${count}__` : false;\r\n  const { data: positions = [] } = useSWR(key, async () => {\r\n    const provider = getProvider(library, chainId);\r\n    const vaultAddress = getContract(chainId, \"Vault\");\r\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\r\n    const ret = await Promise.all(\r\n      res.data.aggregatedTradeOpens.map(async (dataItem) => {\r\n        try {\r\n          const { indexToken, collateralToken, isLong } = dataItem.initialPosition;\r\n          const positionData = await contract.getPosition(dataItem.account, collateralToken, indexToken, isLong);\r\n          const position = {\r\n            size: bigNumberify(positionData[0]),\r\n            collateral: bigNumberify(positionData[1]),\r\n            entryFundingRate: bigNumberify(positionData[3]),\r\n            account: dataItem.account,\r\n          };\r\n          position.fundingFee = await contract.getFundingFee(collateralToken, position.size, position.entryFundingRate);\r\n          position.marginFee = position.size.div(1000);\r\n          position.fee = position.fundingFee.add(position.marginFee);\r\n\r\n          const THRESHOLD = 5000;\r\n          const collateralDiffPercent = position.fee.mul(10000).div(position.collateral);\r\n          position.danger = collateralDiffPercent.gt(THRESHOLD);\r\n\r\n          return position;\r\n        } catch (ex) {\r\n          console.error(ex);\r\n        }\r\n      })\r\n    );\r\n\r\n    return ret.filter(Boolean);\r\n  });\r\n\r\n  return positions;\r\n}\r\n\r\nexport function useAllOrders(chainId, library) {\r\n  const query = gql(`{\r\n    orders(\r\n      first: 1000,\r\n      orderBy: createdTimestamp,\r\n      orderDirection: desc,\r\n      where: {status: \"open\"}\r\n    ) {\r\n      type\r\n      account\r\n      index\r\n      status\r\n      createdTimestamp\r\n    }\r\n  }`);\r\n\r\n  const [res, setRes] = useState();\r\n\r\n  useEffect(() => {\r\n    getGmxGraphClient(chainId).query({ query }).then(setRes);\r\n  }, [setRes, query, chainId]);\r\n\r\n  const key = res ? res.data.orders.map((order) => `${order.type}-${order.account}-${order.index}`) : null;\r\n  const { data: orders = [] } = useSWR(key, () => {\r\n    const provider = getProvider(library, chainId);\r\n    const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n    const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\r\n    return Promise.all(\r\n      res.data.orders.map(async (order) => {\r\n        try {\r\n          const type = order.type.charAt(0).toUpperCase() + order.type.substring(1);\r\n          const method = `get${type}Order`;\r\n          const orderFromChain = await contract[method](order.account, order.index);\r\n          const ret = {};\r\n          for (const [key, val] of Object.entries(orderFromChain)) {\r\n            ret[key] = val;\r\n          }\r\n          if (order.type === \"swap\") {\r\n            ret.path = [ret.path0, ret.path1, ret.path2].filter((address) => address !== AddressZero);\r\n          }\r\n          ret.type = type;\r\n          ret.index = order.index;\r\n          ret.account = order.account;\r\n          ret.createdTimestamp = order.createdTimestamp;\r\n          return ret;\r\n        } catch (ex) {\r\n          console.error(ex);\r\n        }\r\n      })\r\n    );\r\n  });\r\n\r\n  return orders.filter(Boolean);\r\n}\r\n\r\nexport function usePositionsForOrders(chainId, library, orders) {\r\n  const key = orders ? orders.map((order) => getOrderKey(order) + \"____\") : null;\r\n  const { data: positions = {} } = useSWR(key, async () => {\r\n    const provider = getProvider(library, chainId);\r\n    const vaultAddress = getContract(chainId, \"Vault\");\r\n    const contract = new ethers.Contract(vaultAddress, Vault.abi, provider);\r\n    const data = await Promise.all(\r\n      orders.map(async (order) => {\r\n        try {\r\n          const position = await contract.getPosition(\r\n            order.account,\r\n            order.collateralToken,\r\n            order.indexToken,\r\n            order.isLong\r\n          );\r\n          if (position[0].eq(0)) {\r\n            return [null, order];\r\n          }\r\n          return [position, order];\r\n        } catch (ex) {\r\n          console.error(ex);\r\n        }\r\n      })\r\n    );\r\n    return data.reduce((memo, [position, order]) => {\r\n      memo[getOrderKey(order)] = position;\r\n      return memo;\r\n    }, {});\r\n  });\r\n\r\n  return positions;\r\n}\r\n\r\nfunction invariant(condition, errorMsg) {\r\n  if (!condition) {\r\n    throw new Error(errorMsg);\r\n  }\r\n}\r\n\r\nexport function useTrades(chainId, account, forSingleAccount, afterId) {\r\n  let url =\r\n    account && account.length > 0\r\n      ? `${getServerBaseUrl(chainId)}/actions?account=${account}`\r\n      : !forSingleAccount && `${getServerBaseUrl(chainId)}/actions`;\r\n\r\n  if (afterId && afterId.length > 0) {\r\n    const urlItem = new URL(url);\r\n    urlItem.searchParams.append(\"after\", afterId);\r\n    url = urlItem.toString();\r\n  }\r\n\r\n  const { data: trades, mutate: updateTrades } = useSWR(url && url, {\r\n    dedupingInterval: 10000,\r\n    fetcher: (...args) => fetch(...args).then((res) => res.json()),\r\n  });\r\n\r\n  if (trades) {\r\n    trades.sort((item0, item1) => {\r\n      const data0 = item0.data;\r\n      const data1 = item1.data;\r\n      const time0 = parseInt(data0.timestamp);\r\n      const time1 = parseInt(data1.timestamp);\r\n      if (time1 > time0) {\r\n        return 1;\r\n      }\r\n      if (time1 < time0) {\r\n        return -1;\r\n      }\r\n\r\n      const block0 = parseInt(data0.blockNumber);\r\n      const block1 = parseInt(data1.blockNumber);\r\n\r\n      if (isNaN(block0) && isNaN(block1)) {\r\n        return 0;\r\n      }\r\n\r\n      if (isNaN(block0)) {\r\n        return 1;\r\n      }\r\n\r\n      if (isNaN(block1)) {\r\n        return -1;\r\n      }\r\n\r\n      if (block1 > block0) {\r\n        return 1;\r\n      }\r\n\r\n      if (block1 < block0) {\r\n        return -1;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  return { trades, updateTrades };\r\n}\r\n\r\nexport function useMinExecutionFee(library, active, chainId, infoTokens) {\r\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n\r\n  const { data: minExecutionFee } = useSWR([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\r\n    fetcher: fetcher(library, PositionRouter),\r\n  });\r\n\r\n  const { data: gasPrice } = useSWR([\"gasPrice\", chainId], {\r\n    fetcher: () => {\r\n      return new Promise(async (resolve, reject) => {\r\n        const provider = getProvider(library, chainId);\r\n        if (!provider) {\r\n          resolve(undefined);\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const gasPrice = await provider.getGasPrice();\r\n          resolve(gasPrice);\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n      });\r\n    },\r\n  });\r\n\r\n  let multiplier;\r\n\r\n  // if gas prices on Arbitrum are high, the main transaction costs would come from the L2 gas usage\r\n  // for executing positions this is around 65,000 gas\r\n  // if gas prices on Ethereum are high, than the gas usage might be higher, this calculation doesn't deal with that\r\n  // case yet\r\n  if (chainId === ARBITRUM || chainId === ARBITRUM_TESTNET) {\r\n    multiplier = 65000;\r\n  }\r\n\r\n  // multiplier for Avalanche is just the average gas usage\r\n  if (chainId === AVALANCHE) {\r\n    multiplier = 700000;\r\n  }\r\n\r\n  let finalExecutionFee = minExecutionFee;\r\n\r\n  if (gasPrice && minExecutionFee) {\r\n    const estimatedExecutionFee = gasPrice.mul(multiplier);\r\n    if (estimatedExecutionFee.gt(minExecutionFee)) {\r\n      finalExecutionFee = estimatedExecutionFee;\r\n    }\r\n  }\r\n\r\n  const finalExecutionFeeUSD = getUsd(finalExecutionFee, nativeTokenAddress, false, infoTokens);\r\n  const isFeeHigh = finalExecutionFeeUSD?.gt(expandDecimals(getHighExecutionFee(chainId), USD_DECIMALS));\r\n  const errorMessage =\r\n    isFeeHigh &&\r\n    `The network cost to send transactions is high at the moment, please check the \"Execution Fee\" value before proceeding.`;\r\n\r\n  return {\r\n    minExecutionFee: finalExecutionFee,\r\n    minExecutionFeeUSD: finalExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage: errorMessage,\r\n  };\r\n}\r\n\r\nexport function useStakedGmxSupply(library, active) {\r\n  const gmxAddressArb = getContract(ARBITRUM, \"GMX\");\r\n  const stakedGmxTrackerAddressArb = getContract(ARBITRUM, \"StakedGmxTracker\");\r\n\r\n  const { data: arbData, mutate: arbMutate } = useSWR(\r\n    [`StakeV2:stakedGmxSupply:${active}`, ARBITRUM, gmxAddressArb, \"balanceOf\", stakedGmxTrackerAddressArb],\r\n    {\r\n      fetcher: fetcher(library, Token),\r\n    }\r\n  );\r\n\r\n  const gmxAddressAvax = getContract(AVALANCHE, \"GMX\");\r\n  const stakedGmxTrackerAddressAvax = getContract(AVALANCHE, \"StakedGmxTracker\");\r\n\r\n  const { data: avaxData, mutate: avaxMutate } = useSWR(\r\n    [`StakeV2:stakedGmxSupply:${active}`, AVALANCHE, gmxAddressAvax, \"balanceOf\", stakedGmxTrackerAddressAvax],\r\n    {\r\n      fetcher: fetcher(undefined, Token),\r\n    }\r\n  );\r\n\r\n  let data;\r\n  if (arbData && avaxData) {\r\n    data = arbData.add(avaxData);\r\n  }\r\n\r\n  const mutate = () => {\r\n    arbMutate();\r\n    avaxMutate();\r\n  };\r\n\r\n  return { data, mutate };\r\n}\r\n\r\nexport function useHasOutdatedUi() {\r\n  const url = getServerUrl(ARBITRUM, \"/ui_version\");\r\n  const { data, mutate } = useSWR([url], {\r\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\r\n  });\r\n\r\n  let hasOutdatedUi = false;\r\n\r\n  if (data && parseFloat(data) > parseFloat(UI_VERSION)) {\r\n    // hasOutdatedUi = true;\r\n    hasOutdatedUi = false;\r\n  }\r\n\r\n  return { data: hasOutdatedUi, mutate };\r\n}\r\n\r\nexport function useGmxPrice(chainId, libraries, active) {\r\n  const arbitrumLibrary = libraries && libraries.arbitrum ? libraries.arbitrum : undefined;\r\n  const { data: gmxPriceFromArbitrum, mutate: mutateFromArbitrum } = useGmxPriceFromArbitrum(arbitrumLibrary, active);\r\n  const { data: gmxPriceFromAvalanche, mutate: mutateFromAvalanche } = useGmxPriceFromAvalanche();\r\n\r\n  const gmxPrice = chainId === ARBITRUM ? gmxPriceFromArbitrum : gmxPriceFromAvalanche;\r\n  const mutate = useCallback(() => {\r\n    mutateFromAvalanche();\r\n    mutateFromArbitrum();\r\n  }, [mutateFromAvalanche, mutateFromArbitrum]);\r\n\r\n  return {\r\n    gmxPrice,\r\n    gmxPriceFromArbitrum,\r\n    gmxPriceFromAvalanche,\r\n    mutate,\r\n  };\r\n}\r\n\r\n// use only the supply endpoint on arbitrum, it includes the supply on avalanche\r\nexport function useTotalGmxSupply() {\r\n  const gmxSupplyUrlArbitrum = getServerUrl(ARBITRUM, \"/gmx_supply\");\r\n\r\n  const { data: gmxSupply, mutate: updateGmxSupply } = useSWR([gmxSupplyUrlArbitrum], {\r\n    fetcher: (...args) => fetch(...args).then((res) => res.text()),\r\n  });\r\n\r\n  return {\r\n    total: gmxSupply ? bigNumberify(gmxSupply) : undefined,\r\n    mutate: updateGmxSupply,\r\n  };\r\n}\r\n\r\nexport function useTotalGmxStaked() {\r\n  const stakedGmxTrackerAddressArbitrum = getContract(ARBITRUM, \"StakedGmxTracker\");\r\n  const stakedGmxTrackerAddressAvax = getContract(AVALANCHE, \"StakedGmxTracker\");\r\n  let totalStakedGmx = useRef(bigNumberify(0));\r\n  const { data: stakedGmxSupplyArbitrum, mutate: updateStakedGmxSupplyArbitrum } = useSWR(\r\n    [\r\n      `StakeV2:stakedGmxSupply:${ARBITRUM}`,\r\n      ARBITRUM,\r\n      getContract(ARBITRUM, \"GMX\"),\r\n      \"balanceOf\",\r\n      stakedGmxTrackerAddressArbitrum,\r\n    ],\r\n    {\r\n      fetcher: fetcher(undefined, Token),\r\n    }\r\n  );\r\n  const { data: stakedGmxSupplyAvax, mutate: updateStakedGmxSupplyAvax } = useSWR(\r\n    [\r\n      `StakeV2:stakedGmxSupply:${AVALANCHE}`,\r\n      AVALANCHE,\r\n      getContract(AVALANCHE, \"GMX\"),\r\n      \"balanceOf\",\r\n      stakedGmxTrackerAddressAvax,\r\n    ],\r\n    {\r\n      fetcher: fetcher(undefined, Token),\r\n    }\r\n  );\r\n\r\n  const mutate = useCallback(() => {\r\n    updateStakedGmxSupplyArbitrum();\r\n    updateStakedGmxSupplyAvax();\r\n  }, [updateStakedGmxSupplyArbitrum, updateStakedGmxSupplyAvax]);\r\n\r\n  if (stakedGmxSupplyArbitrum && stakedGmxSupplyAvax) {\r\n    let total = bigNumberify(stakedGmxSupplyArbitrum).add(stakedGmxSupplyAvax);\r\n    totalStakedGmx.current = total;\r\n  }\r\n\r\n  return {\r\n    avax: stakedGmxSupplyAvax,\r\n    arbitrum: stakedGmxSupplyArbitrum,\r\n    total: totalStakedGmx.current,\r\n    mutate,\r\n  };\r\n}\r\n\r\nexport function useTotalGmxInLiquidity() {\r\n  let poolAddressArbitrum = getContract(ARBITRUM, \"UniswapGmxEthPool\");\r\n  let poolAddressAvax = getContract(AVALANCHE, \"TraderJoeGmxAvaxPool\");\r\n  let totalGMX = useRef(bigNumberify(0));\r\n\r\n  const { data: gmxInLiquidityOnArbitrum, mutate: mutateGMXInLiquidityOnArbitrum } = useSWR(\r\n    [`StakeV2:gmxInLiquidity:${ARBITRUM}`, ARBITRUM, getContract(ARBITRUM, \"GMX\"), \"balanceOf\", poolAddressArbitrum],\r\n    {\r\n      fetcher: fetcher(undefined, Token),\r\n    }\r\n  );\r\n  const { data: gmxInLiquidityOnAvax, mutate: mutateGMXInLiquidityOnAvax } = useSWR(\r\n    [`StakeV2:gmxInLiquidity:${AVALANCHE}`, AVALANCHE, getContract(AVALANCHE, \"GMX\"), \"balanceOf\", poolAddressAvax],\r\n    {\r\n      fetcher: fetcher(undefined, Token),\r\n    }\r\n  );\r\n  const mutate = useCallback(() => {\r\n    mutateGMXInLiquidityOnArbitrum();\r\n    mutateGMXInLiquidityOnAvax();\r\n  }, [mutateGMXInLiquidityOnArbitrum, mutateGMXInLiquidityOnAvax]);\r\n\r\n  if (gmxInLiquidityOnAvax && gmxInLiquidityOnArbitrum) {\r\n    let total = bigNumberify(gmxInLiquidityOnArbitrum).add(gmxInLiquidityOnAvax);\r\n    totalGMX.current = total;\r\n  }\r\n  return {\r\n    avax: gmxInLiquidityOnAvax,\r\n    arbitrum: gmxInLiquidityOnArbitrum,\r\n    total: totalGMX.current,\r\n    mutate,\r\n  };\r\n}\r\n\r\nfunction useGmxPriceFromAvalanche() {\r\n  const poolAddress = getContract(AVALANCHE, \"TraderJoeGmxAvaxPool\");\r\n\r\n  const { data, mutate: updateReserves } = useSWR([\"TraderJoeGmxAvaxReserves\", AVALANCHE, poolAddress, \"getReserves\"], {\r\n    fetcher: fetcher(undefined, UniswapV2),\r\n  });\r\n  const { _reserve0: gmxReserve, _reserve1: avaxReserve } = data || {};\r\n\r\n  const vaultAddress = getContract(AVALANCHE, \"Vault\");\r\n  const avaxAddress = getTokenBySymbol(AVALANCHE, \"WAVAX\").address;\r\n  const { data: avaxPrice, mutate: updateAvaxPrice } = useSWR(\r\n    [`StakeV2:avaxPrice`, AVALANCHE, vaultAddress, \"getMinPrice\", avaxAddress],\r\n    {\r\n      fetcher: fetcher(undefined, Vault),\r\n    }\r\n  );\r\n\r\n  const PRECISION = bigNumberify(10).pow(18);\r\n  let gmxPrice;\r\n  if (avaxReserve && gmxReserve && avaxPrice) {\r\n    gmxPrice = avaxReserve.mul(PRECISION).div(gmxReserve).mul(avaxPrice).div(PRECISION);\r\n  }\r\n\r\n  const mutate = useCallback(() => {\r\n    updateReserves(undefined, true);\r\n    updateAvaxPrice(undefined, true);\r\n  }, [updateReserves, updateAvaxPrice]);\r\n\r\n  return { data: gmxPrice, mutate };\r\n}\r\n\r\nfunction useGmxPriceFromArbitrum(library, active) {\r\n  const poolAddress = getContract(ARBITRUM, \"UniswapGmxEthPool\");\r\n  const { data: uniPoolSlot0, mutate: updateUniPoolSlot0 } = useSWR(\r\n    [`StakeV2:uniPoolSlot0:${active}`, ARBITRUM, poolAddress, \"slot0\"],\r\n    {\r\n      fetcher: fetcher(library, UniPool),\r\n    }\r\n  );\r\n\r\n  const vaultAddress = getContract(ARBITRUM, \"Vault\");\r\n  const ethAddress = getTokenBySymbol(ARBITRUM, \"WETH\").address;\r\n  const { data: ethPrice, mutate: updateEthPrice } = useSWR(\r\n    [`StakeV2:ethPrice:${active}`, ARBITRUM, vaultAddress, \"getMinPrice\", ethAddress],\r\n    {\r\n      fetcher: fetcher(library, Vault),\r\n    }\r\n  );\r\n\r\n  const gmxPrice = useMemo(() => {\r\n    if (uniPoolSlot0 && ethPrice) {\r\n      const tokenA = new UniToken(ARBITRUM, ethAddress, 18, \"SYMBOL\", \"NAME\");\r\n\r\n      const gmxAddress = getContract(ARBITRUM, \"GMX\");\r\n      const tokenB = new UniToken(ARBITRUM, gmxAddress, 18, \"SYMBOL\", \"NAME\");\r\n\r\n      const pool = new Pool(\r\n        tokenA, // tokenA\r\n        tokenB, // tokenB\r\n        10000, // fee\r\n        uniPoolSlot0.sqrtPriceX96, // sqrtRatioX96\r\n        1, // liquidity\r\n        uniPoolSlot0.tick, // tickCurrent\r\n        []\r\n      );\r\n\r\n      const poolTokenPrice = pool.priceOf(tokenB).toSignificant(6);\r\n      const poolTokenPriceAmount = parseValue(poolTokenPrice, 18);\r\n      return poolTokenPriceAmount.mul(ethPrice).div(expandDecimals(1, 18));\r\n    }\r\n  }, [ethPrice, uniPoolSlot0, ethAddress]);\r\n\r\n  const mutate = useCallback(() => {\r\n    updateUniPoolSlot0(undefined, true);\r\n    updateEthPrice(undefined, true);\r\n  }, [updateEthPrice, updateUniPoolSlot0]);\r\n\r\n  return { data: gmxPrice, mutate };\r\n}\r\n\r\nexport async function approvePlugin(\r\n  chainId,\r\n  pluginAddress,\r\n  { library, pendingTxns, setPendingTxns, sentMsg, failMsg }\r\n) {\r\n  const routerAddress = getContract(chainId, \"Router\");\r\n  const contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\r\n  return callContract(chainId, contract, \"approvePlugin\", [pluginAddress], {\r\n    sentMsg,\r\n    failMsg,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n  });\r\n}\r\n\r\nexport async function createSwapOrder(\r\n  chainId,\r\n  library,\r\n  path,\r\n  amountIn,\r\n  minOut,\r\n  triggerRatio,\r\n  nativeTokenAddress,\r\n  opts = {}\r\n) {\r\n  const executionFee = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\r\n  const triggerAboveThreshold = false;\r\n  let shouldWrap = false;\r\n  let shouldUnwrap = false;\r\n  opts.value = executionFee;\r\n\r\n  if (path[0] === AddressZero) {\r\n    shouldWrap = true;\r\n    opts.value = opts.value.add(amountIn);\r\n  }\r\n  if (path[path.length - 1] === AddressZero) {\r\n    shouldUnwrap = true;\r\n  }\r\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\r\n\r\n  const params = [path, amountIn, minOut, triggerRatio, triggerAboveThreshold, executionFee, shouldWrap, shouldUnwrap];\r\n\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, \"createSwapOrder\", params, opts);\r\n}\r\n\r\nexport async function createIncreaseOrder(\r\n  chainId,\r\n  library,\r\n  nativeTokenAddress,\r\n  path,\r\n  amountIn,\r\n  indexTokenAddress,\r\n  minOut,\r\n  sizeDelta,\r\n  collateralTokenAddress,\r\n  isLong,\r\n  triggerPrice,\r\n  opts = {}\r\n) {\r\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\r\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\r\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\r\n\r\n  const fromETH = path[0] === AddressZero;\r\n\r\n  path = replaceNativeTokenAddress(path, nativeTokenAddress);\r\n  const shouldWrap = fromETH;\r\n  const triggerAboveThreshold = !isLong;\r\n  const executionFee = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\r\n\r\n  const params = [\r\n    path,\r\n    amountIn,\r\n    indexTokenAddress,\r\n    minOut,\r\n    sizeDelta,\r\n    collateralTokenAddress,\r\n    isLong,\r\n    triggerPrice,\r\n    triggerAboveThreshold,\r\n    executionFee,\r\n    shouldWrap,\r\n  ];\r\n\r\n  if (!opts.value) {\r\n    opts.value = fromETH ? amountIn.add(executionFee) : executionFee;\r\n  }\r\n\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, \"createIncreaseOrder\", params, opts);\r\n}\r\n\r\nexport async function createDecreaseOrder(\r\n  chainId,\r\n  library,\r\n  indexTokenAddress,\r\n  sizeDelta,\r\n  collateralTokenAddress,\r\n  collateralDelta,\r\n  isLong,\r\n  triggerPrice,\r\n  triggerAboveThreshold,\r\n  opts = {}\r\n) {\r\n  invariant(!isLong || indexTokenAddress === collateralTokenAddress, \"invalid token addresses\");\r\n  invariant(indexTokenAddress !== AddressZero, \"indexToken is 0\");\r\n  invariant(collateralTokenAddress !== AddressZero, \"collateralToken is 0\");\r\n\r\n  const executionFee = getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\");\r\n\r\n  const params = [\r\n    indexTokenAddress,\r\n    sizeDelta,\r\n    collateralTokenAddress,\r\n    collateralDelta,\r\n    isLong,\r\n    triggerPrice,\r\n    triggerAboveThreshold,\r\n  ];\r\n  opts.value = executionFee;\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, \"createDecreaseOrder\", params, opts);\r\n}\r\n\r\nexport async function cancelSwapOrder(chainId, library, index, opts) {\r\n  const params = [index];\r\n  const method = \"cancelSwapOrder\";\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, method, params, opts);\r\n}\r\n\r\nexport async function cancelDecreaseOrder(chainId, library, index, opts) {\r\n  const params = [index];\r\n  const method = \"cancelDecreaseOrder\";\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, method, params, opts);\r\n}\r\n\r\nexport async function cancelIncreaseOrder(chainId, library, index, opts) {\r\n  const params = [index];\r\n  const method = \"cancelIncreaseOrder\";\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, method, params, opts);\r\n}\r\n\r\nexport function handleCancelOrder(chainId, library, order, opts) {\r\n  let func;\r\n  if (order.type === SWAP) {\r\n    func = cancelSwapOrder;\r\n  } else if (order.type === INCREASE) {\r\n    func = cancelIncreaseOrder;\r\n  } else if (order.type === DECREASE) {\r\n    func = cancelDecreaseOrder;\r\n  }\r\n\r\n  return func(chainId, library, order.index, {\r\n    successMsg: \"Order cancelled.\",\r\n    failMsg: \"Cancel failed.\",\r\n    sentMsg: \"Cancel submitted.\",\r\n    pendingTxns: opts.pendingTxns,\r\n    setPendingTxns: opts.setPendingTxns,\r\n  });\r\n}\r\n\r\nexport async function cancelMultipleOrders(chainId, library, allIndexes = [], opts) {\r\n  const ordersWithTypes = groupBy(allIndexes, (v) => v.split(\"-\")[0]);\r\n  function getIndexes(key) {\r\n    if (!ordersWithTypes[key]) return;\r\n    return ordersWithTypes[key].map((d) => d.split(\"-\")[1]);\r\n  }\r\n  // params order => swap, increase, decrease\r\n  const params = [\"Swap\", \"Increase\", \"Decrease\"].map((key) => getIndexes(key) || []);\r\n  const method = \"cancelMultiple\";\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n  return callContract(chainId, contract, method, params, opts);\r\n}\r\n\r\nexport async function updateDecreaseOrder(\r\n  chainId,\r\n  library,\r\n  index,\r\n  collateralDelta,\r\n  sizeDelta,\r\n  triggerPrice,\r\n  triggerAboveThreshold,\r\n  opts\r\n) {\r\n  const params = [index, collateralDelta, sizeDelta, triggerPrice, triggerAboveThreshold];\r\n  const method = \"updateDecreaseOrder\";\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, method, params, opts);\r\n}\r\n\r\nexport async function updateIncreaseOrder(\r\n  chainId,\r\n  library,\r\n  index,\r\n  sizeDelta,\r\n  triggerPrice,\r\n  triggerAboveThreshold,\r\n  opts\r\n) {\r\n  const params = [index, sizeDelta, triggerPrice, triggerAboveThreshold];\r\n  const method = \"updateIncreaseOrder\";\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, method, params, opts);\r\n}\r\n\r\nexport async function updateSwapOrder(chainId, library, index, minOut, triggerRatio, triggerAboveThreshold, opts) {\r\n  const params = [index, minOut, triggerRatio, triggerAboveThreshold];\r\n  const method = \"updateSwapOrder\";\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const contract = new ethers.Contract(orderBookAddress, OrderBook.abi, library.getSigner());\r\n\r\n  return callContract(chainId, contract, method, params, opts);\r\n}\r\n\r\nexport async function _executeOrder(chainId, library, method, account, index, feeReceiver, opts) {\r\n  const params = [account, index, feeReceiver];\r\n  const positionManagerAddress = getContract(chainId, \"PositionManager\");\r\n  const contract = new ethers.Contract(positionManagerAddress, PositionManager.abi, library.getSigner());\r\n  return callContract(chainId, contract, method, params, opts);\r\n}\r\n\r\nexport function executeSwapOrder(chainId, library, account, index, feeReceiver, opts) {\r\n  return _executeOrder(chainId, library, \"executeSwapOrder\", account, index, feeReceiver, opts);\r\n}\r\n\r\nexport function executeIncreaseOrder(chainId, library, account, index, feeReceiver, opts) {\r\n  return _executeOrder(chainId, library, \"executeIncreaseOrder\", account, index, feeReceiver, opts);\r\n}\r\n\r\nexport function executeDecreaseOrder(chainId, library, account, index, feeReceiver, opts) {\r\n  return _executeOrder(chainId, library, \"executeDecreaseOrder\", account, index, feeReceiver, opts);\r\n}","export const REDIRECT_POPUP_TIMESTAMP_KEY = \"redirect-popup-timestamp\";\r\n\r\nexport const IS_TOUCH = \"ontouchstart\" in window;\r\n","import cx from \"classnames\";\r\nimport { useCallback, useState, useRef } from \"react\";\r\nimport { IS_TOUCH } from \"../../config/ui\";\r\n\r\nconst OPEN_DELAY = 0;\r\nconst CLOSE_DELAY = 100;\r\n\r\nexport default function Tooltip(props) {\r\n  const { enabled } = props;\r\n  const [visible, setVisible] = useState(false);\r\n  const intervalCloseRef = useRef(null);\r\n  const intervalOpenRef = useRef(null);\r\n\r\n  const position = props.position ?? \"left-bottom\";\r\n  const trigger = props.trigger ?? \"hover\";\r\n\r\n  const onMouseEnter = useCallback(() => {\r\n    if (trigger !== \"hover\" || IS_TOUCH) return;\r\n\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (!intervalOpenRef.current) {\r\n      intervalOpenRef.current = setTimeout(() => {\r\n        if (enabled) {\r\n          setVisible(true)\r\n        }\r\n        intervalOpenRef.current = null;\r\n      }, OPEN_DELAY);\r\n    }\r\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger]);\r\n\r\n  const onMouseClick = useCallback(() => {\r\n    if (trigger !== \"click\" && !IS_TOUCH) return;\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n\r\n    if (enabled) {\r\n      setVisible(true)\r\n    }\r\n  }, [setVisible, intervalCloseRef, trigger]);\r\n\r\n  const onMouseLeave = useCallback(() => {\r\n    intervalCloseRef.current = setTimeout(() => {\r\n      setVisible(false);\r\n      intervalCloseRef.current = null;\r\n    }, CLOSE_DELAY);\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n  }, [setVisible, intervalCloseRef]);\r\n\r\n  const className = cx(\"Tooltip\", props.className);\r\n\r\n  return (\r\n    <span className={className} style={props.style} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick} id={props.id}>\r\n      <span\r\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\r\n      >\r\n        {props.handle}\r\n      </span>\r\n      {visible && <div className={cx([\"Tooltip-popup\", position])}>{props.renderContent()}</div>}\r\n    </span>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport cx from \"classnames\";\r\n\r\nimport \"./Tab.css\";\r\n\r\nexport default function Tab(props) {\r\n  const { options, option, setOption, onChange, type = \"block\", className, optionLabels, icons, disabled, disabledTooltip } = props;\r\n  \r\n  const onClick = (opt) => {\r\n    if (disabled) {\r\n      return;\r\n    }\r\n    \r\n    if (setOption) {\r\n      setOption(opt);\r\n    }\r\n    if (onChange) {\r\n      onChange(opt);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cx(\"Tab\", type, className, disabled && 'disabled')}>\r\n      {options.map((opt) => {\r\n        const label = optionLabels && optionLabels[opt] ? optionLabels[opt] : opt;\r\n        let disabledNode;\r\n        \r\n        if (props.disabledList) {\r\n          props.disabledList.forEach(el => {\r\n            if (el.label === label && el.disabled) {\r\n              disabledNode = (\r\n                <div className={cx(\"Tab-option\", \"tab-tooltip-container\")} onClick={() => {return}} key={opt}>\r\n                  {disabledTooltip}\r\n                  {icons && icons[opt] && <img className=\"Tab-option-icon\" src={opt === option ? icons[opt + '_active'] : icons[opt]} alt={option} />}\r\n                  {label}\r\n                </div>\r\n              );\r\n            }\r\n          })\r\n        }\r\n\r\n        if (disabledNode) {\r\n          return disabledNode;\r\n        }\r\n        \r\n        return (\r\n          <div className={cx(\"Tab-option\", \"muted\", { active: opt === option })} onClick={() => onClick(opt)} key={opt}>\r\n            {icons && icons[opt] && <img className=\"Tab-option-icon\" src={opt === option ? icons[opt + '_active'] : icons[opt]} alt={option} />}\r\n            {label}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from \"body-scroll-lock\";\r\nimport { RefObject, useEffect } from \"react\";\r\n\r\nexport const TOUCH_MOVE_CONTAINER_CLASS_NAME = \"DiableScroll-touch-move-container\";\r\n\r\n// @see https://github.com/willmcpo/body-scroll-lock#allowtouchmove\r\nconst allowTouchMoveFn = (el: HTMLElement) => {\r\n  while (el && el !== document.body) {\r\n    if (el.className?.includes?.(TOUCH_MOVE_CONTAINER_CLASS_NAME)) return true;\r\n\r\n    el = el.parentElement as HTMLElement;\r\n  }\r\n};\r\n\r\nexport default function useLockBodyScroll(\r\n  ref: RefObject<HTMLElement>,\r\n  isVisible: boolean,\r\n  opts: {\r\n    disableLock?: boolean;\r\n    allowTouchMove?: boolean;\r\n  } = {}\r\n) {\r\n  useEffect(() => {\r\n    if (opts.disableLock) {\r\n      return;\r\n    }\r\n\r\n    if (ref.current) {\r\n      if (isVisible) {\r\n        disableBodyScroll(ref.current, {\r\n          allowTouchMove: opts.allowTouchMove ? allowTouchMoveFn : undefined,\r\n        });\r\n      } else {\r\n        enableBodyScroll(ref.current);\r\n      }\r\n    }\r\n\r\n    return () => clearAllBodyScrollLocks();\r\n\r\n    // needs ref.current in deps, not just ref\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ref.current, opts.allowTouchMove, opts.disableLock, isVisible]);\r\n}\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport cx from \"classnames\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nimport { MdClose } from \"react-icons/md\";\r\n\r\nimport \"./Modal.scss\";\r\nimport useLockBodyScroll, { TOUCH_MOVE_CONTAINER_CLASS_NAME } from \"../../lib/useLockBodyScroll\";\r\n\r\nexport default function Modal(props) {\r\n  const { isVisible, setIsVisible, className, zIndex, onAfterOpen, disableBodyScrollLock, allowContentTouchMove, isNifty } =\r\n    props;\r\n\r\n  const modalRef = useRef(null);\r\n\r\n  const [isActive, setIsActive] = useState(isVisible);\r\n\r\n  function closeModal() {\r\n    setIsVisible(false);\r\n  }\r\n\r\n  useLockBodyScroll(modalRef, isVisible, {\r\n    disableLock: false,\r\n    allowTouchMove: allowContentTouchMove,\r\n  });\r\n\r\n\r\n  useEffect(() => {\r\n    function close(e) {\r\n      if (e.keyCode === 27) {\r\n        setIsVisible(false);\r\n      }\r\n    }\r\n    window.addEventListener(\"keydown\", close);\r\n    return () => window.removeEventListener(\"keydown\", close);\r\n  }, [setIsVisible]);\r\n\r\n  useEffect(() => {\r\n    if (typeof onAfterOpen === \"function\") onAfterOpen();\r\n  }, [onAfterOpen]);\r\n\r\n  const fadeVariants = {\r\n    hidden: { opacity: 0, visibility: 'hidden' },\r\n    visible: { opacity: 1, visibility: 'visible' },\r\n  };\r\n  const niftyFadeVariants = {\r\n    hidden: {\r\n      transform: 'rotateX(-60deg)',\r\n      opacity: 0,\r\n    },\r\n    visible: {\r\n      transform: 'rotateX(0)',\r\n      opacity: 1,\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isVisible && (\r\n        <motion.div\r\n          className={cx(\"Modal\", isNifty && \"Modal_nifty\", isNifty && isActive && \"active\", className)}\r\n          style={{ zIndex }}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          exit=\"hidden\"\r\n          variants={fadeVariants}\r\n          transition={{ duration: 0 }}\r\n        >\r\n          <div\r\n            className=\"Modal-backdrop\"\r\n            style={{\r\n              overflow: isVisible ? \"hidden\" : \"visible\",\r\n              position: \"fixed\",\r\n            }}\r\n            onClick={closeModal}\r\n          ></div>\r\n\r\n          {isNifty && (\r\n            <div className=\"Modal-close-button\" onClick={closeModal}>\r\n              <MdClose fontSize={20} className=\"Modal-close-icon\" />\r\n            </div>\r\n          )}\r\n          \r\n\r\n          <div className={isNifty && \"Modal-content-wrapper\"}>\r\n            <motion.div\r\n              className={cx(\"Modal-content\")}\r\n              style={{ transformStyle: 'preserve-3d', transformOrigin: '50% 0' }}\r\n              initial=\"hidden\"\r\n              animate=\"visible\"\r\n              exit=\"hidden\"\r\n              variants={isNifty && niftyFadeVariants}\r\n              transition={{ duration: 0 }}\r\n            >\r\n              <div className=\"Modal-title-bar\">\r\n                <div className=\"Modal-title\">{props.label}</div>\r\n              </div>\r\n              <div className=\"divider\" />\r\n              <div className={cx(\"Modal-body\", TOUCH_MOVE_CONTAINER_CLASS_NAME)} ref={modalRef}>\r\n                {props.children}\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n","import { useEffect, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nexport default function Portal({ children }) {\r\n  const root = document.body;\r\n\r\n  const el = useMemo(() => document.createElement(\"div\"), []);\r\n\r\n  useEffect(() => {\r\n    root.appendChild(el);\r\n    return () => root.removeChild(el);\r\n  }, [root, el]);\r\n\r\n  return createPortal(children, el);\r\n}\r\n","import { useCallback, useRef, useState } from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport \"./Tooltip.scss\";\r\nimport { IS_TOUCH } from \"../../config/ui\";\r\nimport Portal from \"../Common/Portal\";\r\n\r\nconst OPEN_DELAY = 0;\r\nconst CLOSE_DELAY = 100;\r\n\r\nexport default function TooltipWithPortal(props) {\r\n  const [visible, setVisible] = useState(false);\r\n  const [coords, setCoords] = useState({});\r\n  const [tooltipWidth, setTooltipWidth] = useState();\r\n  const intervalCloseRef = useRef(null);\r\n  const intervalOpenRef = useRef(null);\r\n\r\n  const position = props.position ?? \"left-bottom\";\r\n  const trigger = props.trigger ?? \"hover\";\r\n  const handlerRef = useRef();\r\n\r\n  const updateTooltipCoords = useCallback(() => {\r\n    const rect = handlerRef.current.getBoundingClientRect();\r\n\r\n    setCoords({\r\n      height: rect.height,\r\n      width: rect.width,\r\n      left: rect.x,\r\n      top: rect.y + window.scrollY,\r\n    });\r\n\r\n    if (props.fitHandleWidth) {\r\n      setTooltipWidth(`${rect.width}px`);\r\n    }\r\n  }, [handlerRef, props.fitHandleWidth]);\r\n\r\n  const onMouseEnter = useCallback(() => {\r\n    if (trigger !== \"hover\" || IS_TOUCH) return;\r\n\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (!intervalOpenRef.current) {\r\n      intervalOpenRef.current = setTimeout(() => {\r\n        setVisible(true);\r\n        intervalOpenRef.current = null;\r\n      }, OPEN_DELAY);\r\n    }\r\n    updateTooltipCoords();\r\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger, updateTooltipCoords]);\r\n\r\n  const onMouseClick = useCallback(() => {\r\n    if (trigger !== \"click\" && !IS_TOUCH) return;\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n    updateTooltipCoords();\r\n\r\n    if (props.closeOnDoubleClick) {\r\n      setVisible((old) => !old);\r\n    } else {\r\n      setVisible(true);\r\n    }\r\n  }, [setVisible, intervalCloseRef, trigger, updateTooltipCoords, props.closeOnDoubleClick]);\r\n\r\n  const onMouseLeave = useCallback(() => {\r\n    intervalCloseRef.current = setTimeout(() => {\r\n      setVisible(false);\r\n      intervalCloseRef.current = null;\r\n    }, CLOSE_DELAY);\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n    updateTooltipCoords();\r\n  }, [setVisible, intervalCloseRef, updateTooltipCoords]);\r\n\r\n  const className = cx(\"Tooltip\", props.className);\r\n\r\n  return (\r\n    <span className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick}>\r\n      <span\r\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\r\n        ref={handlerRef}\r\n      >\r\n        {props.handle}\r\n      </span>\r\n      {visible && coords.left && (\r\n        <Portal>\r\n          <div style={{ ...coords, position: \"absolute\" }}>\r\n            <div className={cx([\"Tooltip-popup\", position])} style={{ width: tooltipWidth }}>\r\n              {props.renderContent()}\r\n            </div>\r\n          </div>\r\n        </Portal>\r\n      )}\r\n    </span>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport { formatAmount, expandDecimals, bigNumberify } from \"../../lib/legacy\";\r\n\r\nimport { getToken } from \"../../config/Tokens\";\r\n\r\n// import { BiChevronDown } from \"react-icons/bi\";\r\n\r\nimport Modal from \"../Modal/Modal\";\r\n\r\nimport dropDownIcon from \"../../img/DROP_DOWN.svg\";\r\nimport \"./TokenSelector.scss\";\r\nimport TooltipWithPortal from \"../Tooltip/TooltipWithPortal\";\r\n\r\nexport default function TokenSelector(props) {\r\n  \r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [searchKeyword, setSearchKeyword] = useState(\"\");\r\n  const tokenInfo = getToken(props.chainId, props.tokenAddress);\r\n  const {\r\n    tokens,\r\n    mintingCap,\r\n    infoTokens,\r\n    showMintingCap,\r\n    disabled,\r\n    selectedTokenLabel,\r\n    showBalances = true,\r\n    showTokenImgInDropdown = false,\r\n    showSymbolImage = false,\r\n    showNewCaret = false,\r\n    getTokenState = () => ({ disabled: false, message: null }),\r\n    disableBodyScrollLock,\r\n  } = props;\r\n\r\n  const visibleTokens = tokens.filter((t) => !t.isTempHidden);\r\n\r\n  const onSelectToken = (token) => {\r\n    setIsModalVisible(false);\r\n    props.onSelectToken(token);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isModalVisible) {\r\n      setSearchKeyword(\"\");\r\n    }\r\n  }, [isModalVisible]);\r\n\r\n  if (!tokenInfo) {\r\n    return null;\r\n  }\r\n\r\n  var tokenImage = null;\r\n\r\n  try {\r\n    tokenImage = require(\"../../img/ic_\" + tokenInfo.symbol.toLowerCase() + \"_24.svg\");\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n\r\n  const onSearchKeywordChange = (e) => {\r\n    setSearchKeyword(e.target.value);\r\n  };\r\n\r\n  const filteredTokens = visibleTokens.filter((item) => {\r\n    return (\r\n      item.name.toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1 ||\r\n      item.symbol.toLowerCase().indexOf(searchKeyword.toLowerCase()) > -1\r\n    );\r\n  });\r\n\r\n  const _handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && filteredTokens.length > 0) {\r\n      onSelectToken(filteredTokens[0]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cx(\"TokenSelector\", { disabled }, props.className) + (isModalVisible ? ' opened' : '')}>\r\n      <Modal\r\n        disableBodyScrollLock={disableBodyScrollLock}\r\n        isVisible={isModalVisible}\r\n        setIsVisible={setIsModalVisible}\r\n        label={props.label}\r\n      >\r\n        <div className=\"TokenSelector-tokens\">\r\n          {/* <div className=\"TokenSelector-token-row TokenSelector-token-input-row\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search Token\"\r\n              value={searchKeyword}\r\n              onChange={(e) => onSearchKeywordChange(e)}\r\n              onKeyDown={_handleKeyDown}\r\n              autoFocus\r\n            />\r\n          </div> */}\r\n          {filteredTokens.map((token, tokenIndex) => {\r\n            let tokenPopupImage;\r\n            try {\r\n              tokenPopupImage = require(\"../../img/ddl/ic_\" + token.symbol.toLowerCase() + \"_40.svg\");\r\n            } catch (error) {\r\n              tokenPopupImage = require(\"../../img/ddl/ic_eth_40.svg\");\r\n            }\r\n            let info = infoTokens ? infoTokens[token.address] : {};\r\n            let mintAmount;\r\n            let balance = info.balance;\r\n            if (showMintingCap && mintingCap && info.usdgAmount) {\r\n              mintAmount = mintingCap.sub(info.usdgAmount);\r\n            }\r\n            if (mintAmount && mintAmount.lt(0)) {\r\n              mintAmount = bigNumberify(0);\r\n            }\r\n            let balanceUsd;\r\n            if (balance && info.maxPrice) {\r\n              balanceUsd = balance.mul(info.maxPrice).div(expandDecimals(1, token.decimals));\r\n            }\r\n\r\n            const tokenState = getTokenState(info) || {};\r\n\r\n            return (\r\n              <div\r\n                key={token.address}\r\n                className={cx(\"TokenSelector-token-row\", token.symbol === tokenInfo?.symbol ? 'chosen' : '' , { disabled: tokenState.disabled })}\r\n                onClick={() => !tokenState.disabled && onSelectToken(token)}\r\n              >\r\n                {tokenState.disabled && tokenState.message && (\r\n                  <TooltipWithPortal\r\n                    className=\"TokenSelector-tooltip\"\r\n                    portalClassName=\"TokenSelector-tooltip-portal\"\r\n                    handle={<div className=\"TokenSelector-tooltip-backing\" />}\r\n                    position={tokenIndex < filteredTokens.length / 2 ? \"center-bottom\" : \"center-top\"}\r\n                    disableHandleStyle\r\n                    closeOnDoubleClick\r\n                    fitHandleWidth\r\n                    renderContent={() => tokenState.message}\r\n                  />\r\n                )}\r\n                <div className=\"Token-info\">\r\n                  {showTokenImgInDropdown && (\r\n                    <img src={tokenPopupImage?.default} alt={token.name} className=\"token-logo\" />\r\n                  )}\r\n                  <div className=\"Token-symbol\">\r\n                    <div className=\"Token-text\">{token.symbol}</div>\r\n                    {/* <span className=\"text-accent\">{token.name}</span> */}\r\n                  </div>\r\n                </div>\r\n                {/* <div className=\"Token-balance\">\r\n                  {showBalances && balance && (\r\n                    <div className=\"Token-text\">\r\n                      {balance.gt(0) && formatAmount(balance, token.decimals, 4, true)}\r\n                      {balance.eq(0) && \"-\"}\r\n                    </div>\r\n                  )}\r\n                  <span className=\"text-accent\">\r\n                    {mintAmount && <div>Mintable: {formatAmount(mintAmount, token.decimals, 2, true)} USDG</div>}\r\n                    {showMintingCap && !mintAmount && <div>-</div>}\r\n                    {!showMintingCap && showBalances && balanceUsd && balanceUsd.gt(0) && (\r\n                      <div>${formatAmount(balanceUsd, 30, 2, true)}</div>\r\n                    )}\r\n                  </span>\r\n                </div> */}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </Modal>\r\n      {selectedTokenLabel ? (\r\n        <div className=\"TokenSelector-box\" onClick={(e) => {\r\n          setIsModalVisible(true)\r\n        }}>\r\n          {selectedTokenLabel}\r\n          {!showNewCaret && \r\n            <svg className=\"TokenSelector-caret\" xmlns=\"http://www.w3.org/2000/svg\" width=\"13\" height=\"13\" viewBox=\"0 0 13 13\" fill=\"none\">\r\n              <path d=\"M2.60001 4.76666L7.10001 8.76666L11.6 4.76666\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n          </svg>\r\n          }\r\n        </div>\r\n      ) : (\r\n        <div className=\"TokenSelector-box\" onClick={(e) => {\r\n          setIsModalVisible(true)\r\n        }}>\r\n          {tokenInfo.symbol}\r\n          {showSymbolImage && (\r\n            <img src={tokenImage && tokenImage.default} alt={tokenInfo.symbol} className=\"TokenSelector-box-symbol\" />\r\n          )}\r\n          {showNewCaret && <img src={dropDownIcon} alt=\"dropDownIcon\" className=\"TokenSelector-box-caret\" />}\r\n          {!showNewCaret &&\r\n            <svg className=\"TokenSelector-caret\" xmlns=\"http://www.w3.org/2000/svg\" width=\"13\" height=\"13\" viewBox=\"0 0 13 13\" fill=\"none\">\r\n              <path d=\"M2.60001 4.76666L7.10001 8.76666L11.6 4.76666\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n            </svg>\r\n          }\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import cx from \"classnames\";\r\n\r\nexport default function ExchangeInfoRow(props) {\r\n  const { label, children, value, isTop, isWarning } = props;\r\n\r\n  return (\r\n    <div className={cx(\"Exchange-info-row\", { \"top-line\": isTop }) + ' ' + props.className}>\r\n      <div className=\"Exchange-info-label\">{label}</div>\r\n      <div className={`align-right ${isWarning ? \"Exchange-info-value-warning\" : \"\"}`}>{children || value}</div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport cx from \"classnames\";\r\n\r\nimport \"./Checkbox.scss\";\r\nimport { ImCheckboxUnchecked, ImCheckboxChecked } from \"react-icons/im\";\r\n\r\nexport default function Checkbox(props) {\r\n  const { isChecked, setIsChecked, disabled, className } = props;\r\n\r\n  return (\r\n    <div\r\n      className={cx(\"Checkbox\", { disabled, selected: isChecked }, className)}\r\n      onClick={() => setIsChecked(!isChecked)}\r\n    >\r\n      <span className=\"Checkbox-icon-wrapper\">\r\n        {isChecked && <ImCheckboxChecked className=\"App-icon Checkbox-icon active\" />}\r\n        {!isChecked && <ImCheckboxUnchecked className=\"App-icon Checkbox-icon inactive\" />}\r\n      </span>\r\n      <span className=\"Checkbox-label\">{props.children}</span>\r\n    </div>\r\n  );\r\n}\r\n","import \"./StatsTooltip.css\";\r\ntype Props = {\r\n  label: string;\r\n  value: number | [number];\r\n  showDollar?: boolean;\r\n};\r\n\r\nexport default function StatsTooltipRow({ label, value, showDollar = true }: Props) {\r\n  function renderValue() {\r\n    if (Array.isArray(value)) {\r\n      return (\r\n        <ul className=\"Tooltip-row-values\">\r\n          {value.map((v, i) => (\r\n            <li key={i}>{v}</li>\r\n          ))}\r\n        </ul>\r\n      );\r\n    }\r\n    return (\r\n      <span className=\"Tooltip-row-value\">\r\n        {showDollar && \"$\"}\r\n        {value}\r\n      </span>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"Tooltip-row\">\r\n      <span className=\"label\">{label}:</span>\r\n      {renderValue()}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport './Slippage.scss';\r\n\r\nconst SlippageInput = ({ value, setValue }) => {\r\n\treturn (\r\n\t\t<div className=\"Exchange-swap-section Slippage-input-container\">\r\n\t\t\t<div className=\"Exchange-swap-section-bottom\">\r\n\t\t\t\t<div className=\"Exchange-swap-input-container\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"Slippage (%)\"\r\n\t\t\t\t\t\tclassName=\"Exchange-swap-input Slippage-input\"\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tconst val = (e.target.value).replace(/[^0-9]/g, '').replace(/^0\\d/, '');\r\n\t\t\t\t\t\t\t// const valStr = convertInputNum(e.target.value)\r\n\t\t\t\t\t\t\t// const val = sepToNumber(valStr);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (val > 100) {\r\n\t\t\t\t\t\t\t\tsetValue(100);\r\n\t\t\t\t\t\t\t} else if (val < 0) {\r\n\t\t\t\t\t\t\t\tsetValue(0);\r\n\t\t\t\t\t\t\t} else if (val === 0) {\r\n\t\t\t\t\t\t\t\tsetValue(0.3);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetValue(val);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={(e) => {\r\n\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonBlur={(e) => {\r\n\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default SlippageInput;","import React, { useState } from 'react';\r\nimport cx from 'classnames';\r\nimport { convertInputNum } from '../../utils/sepThousands';\r\n\r\nconst NumberInput_v3 = (props) => {\r\n\tconst {\r\n\t\ttitle,\r\n\t\tdisplayValueTitle,\r\n\t\tdisplayValue,\r\n\t\tvalue,\r\n\t\tsetValue,\r\n\t\thasError,\r\n\t\tmaxValue,\r\n\t\tonChange,\r\n\t\ticon,\r\n\t\ticonAlt,\r\n\t} = props;\r\n\r\n\tconst [hasFocus, setHasFocus] = useState(false);\r\n\r\n\tconst cls = cx(props.className, hasFocus && 'hlight', hasError && 'error');\r\n\t\r\n\treturn (\r\n\t\t<div className={\"Exchange-swap-section\" + (cls && ` ${cls}`)}>\r\n\t\t\t<div className=\"Exchange-swap-section-top\">\r\n\t\t\t\t<div className=\"muted\">\r\n\t\t\t\t\t<div className=\"Exchange-swap-usd\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t{displayValue && (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"muted align-right clickable\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetValue(displayValue);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{displayValueTitle}: {displayValue}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{icon && (\r\n\t\t\t\t\t<div className='align-right'>\r\n\t\t\t\t\t\t<img src={icon} alt={iconAlt ?? \"icon\"} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"Exchange-swap-section-bottom\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder=\"0.0\"\r\n\t\t\t\t\t\tclassName=\"Exchange-swap-input\"\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tsetValue(convertInputNum(e.target.value));\r\n\r\n\t\t\t\t\t\t\tif (onChange) {\r\n\t\t\t\t\t\t\t\tonChange(e.target.value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={(e) => {\r\n\t\t\t\t\t\t\tsetHasFocus(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonBlur={(e) => {\r\n\t\t\t\t\t\t\tsetHasFocus(false);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{maxValue &&\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"input-max-btn\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetValue(maxValue)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tMax\r\n\t\t\t\t\t</button>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default NumberInput_v3;","import React, { useCallback, useState, useMemo, useEffect } from \"react\";\r\nimport \"./ConfirmationBox.css\";\r\nimport {\r\n  USD_DECIMALS,\r\n  PRECISION,\r\n  BASIS_POINTS_DIVISOR,\r\n  LIMIT,\r\n  MIN_PROFIT_TIME,\r\n  INCREASE,\r\n  expandDecimals,\r\n  getExchangeRate,\r\n  getProfitPrice,\r\n  getTimeRemaining,\r\n  formatAmount,\r\n  formatAmountFree,\r\n  getExchangeRateDisplay,\r\n  formatDateTime,\r\n  calculatePositionDelta,\r\n  DECREASE,\r\n  TRIGGER_PREFIX_ABOVE,\r\n  TRIGGER_PREFIX_BELOW,\r\n} from \"../../lib/legacy\";\r\nimport { getConstant } from \"../../config/chains\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\r\nimport { cancelDecreaseOrder, handleCancelOrder } from \"../../domain/legacy\";\r\nimport { getNativeToken, getToken, getWrappedToken } from \"../../config/Tokens\";\r\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\r\nimport SlippageInput from './../SlippageInput/SlippageInput';\r\nimport { formatForContract } from \"../../../../components/utils/math\";\r\nimport NumberInput_v3 from './../../../../components/UI/input/NumberInput_v3';\r\nimport { getSlTpFromPercentage } from './../../../../components/utils/utils';\r\n\r\nconst HIGH_SPREAD_THRESHOLD = expandDecimals(1, USD_DECIMALS).div(100); // 1%;\r\n\r\nfunction getSpread(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress) {\r\n  if (fromTokenInfo && fromTokenInfo.maxPrice && toTokenInfo && toTokenInfo.minPrice) {\r\n    const fromDiff = fromTokenInfo.maxPrice.sub(fromTokenInfo.minPrice).div(2);\r\n    const fromSpread = fromDiff.mul(PRECISION).div(fromTokenInfo.maxPrice.add(fromTokenInfo.minPrice).div(2));\r\n    const toDiff = toTokenInfo.maxPrice.sub(toTokenInfo.minPrice).div(2);\r\n    const toSpread = toDiff.mul(PRECISION).div(toTokenInfo.maxPrice.add(toTokenInfo.minPrice).div(2));\r\n\r\n    let value = fromSpread.add(toSpread);\r\n\r\n    const fromTokenAddress = fromTokenInfo.isNative ? nativeTokenAddress : fromTokenInfo.address;\r\n    const toTokenAddress = toTokenInfo.isNative ? nativeTokenAddress : toTokenInfo.address;\r\n\r\n    if (isLong && fromTokenAddress === toTokenAddress) {\r\n      value = fromSpread;\r\n    }\r\n\r\n    return {\r\n      value,\r\n      isHigh: value.gt(HIGH_SPREAD_THRESHOLD),\r\n    };\r\n  }\r\n}\r\n\r\nexport default function ConfirmationBox(props) {\r\n  const {\r\n    fromToken,\r\n    fromTokenInfo,\r\n    toToken,\r\n    toTokenInfo,\r\n    isSwap,\r\n    isLong,\r\n    isMarketOrder,\r\n    orderOption,\r\n    isShort,\r\n    toAmount,\r\n    fromAmount,\r\n    isHigherSlippageAllowed,\r\n    setIsHigherSlippageAllowed,\r\n    onConfirmationClick,\r\n    setIsConfirming,\r\n    shortCollateralAddress,\r\n    hasExistingPosition,\r\n    leverage,\r\n    existingPosition,\r\n    existingLiquidationPrice,\r\n    displayLiquidationPrice,\r\n    shortCollateralToken,\r\n    isPendingConfirmation,\r\n    triggerPriceUsd,\r\n    triggerRatio,\r\n    fees,\r\n    feesUsd,\r\n    isSubmitting,\r\n    fromUsdMin,\r\n    toUsdMax,\r\n    nextAveragePrice,\r\n    collateralTokenAddress,\r\n    feeBps,\r\n    chainId,\r\n    orders,\r\n    library,\r\n    setPendingTxns,\r\n    pendingTxns,\r\n    minExecutionFee,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n    savedSlippageAmount,\r\n    userSlippage,\r\n    setUserSlippage,\r\n    allowedSlippage,\r\n    market,\r\n    TPValue,\r\n    setTPValue,\r\n    SLValue,\r\n    setSLValue,\r\n    TPHasError,\r\n    setTPHasError,\r\n    SLHasError,\r\n    setSLHasError,\r\n    liquidity,\r\n  } = props;\r\n\r\n  useEffect(() => {\r\n    setTPValue('');\r\n    setSLValue('');\r\n  }, []);\r\n\r\n  \r\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\r\n  \r\n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\r\n  const [isTriggerWarningAccepted, setIsTriggerWarningAccepted] = useState(false);\r\n  const [isLimitOrdersVisible, setIsLimitOrdersVisible] = useState(false);\r\n\r\n  const onCancelOrderClick = useCallback(\r\n    (order) => {\r\n      handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\r\n    },\r\n    [library, pendingTxns, setPendingTxns, chainId]\r\n  );\r\n\r\n  let minOut;\r\n  let fromTokenUsd;\r\n  let toTokenUsd;\r\n\r\n  let collateralAfterFees = fromUsdMin;\r\n  if (feesUsd) {\r\n    collateralAfterFees = fromUsdMin.sub(feesUsd);\r\n  }\r\n\r\n  if (isSwap) {\r\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - savedSlippageAmount).div(BASIS_POINTS_DIVISOR);\r\n\r\n    fromTokenUsd = fromTokenInfo ? formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true) : 0;\r\n    toTokenUsd = toTokenInfo ? formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true) : 0;\r\n  }\r\n\r\n  const getTitle = () => {\r\n    if (!isMarketOrder) {\r\n      return \"Confirm Limit Order\";\r\n    }\r\n    if (isSwap) {\r\n      return \"Confirm Swap\";\r\n    }\r\n    return isLong ? \"Confirm Long\" : \"Confirm Short\";\r\n  };\r\n  const title = getTitle();\r\n\r\n  const existingOrder = useMemo(() => {\r\n    const wrappedToken = getWrappedToken(chainId);\r\n    for (const order of orders) {\r\n      if (order.type !== INCREASE) continue;\r\n      const sameToken =\r\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\r\n      if (order.isLong === isLong && sameToken) {\r\n        return order;\r\n      }\r\n    }\r\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\r\n\r\n  const existingOrders = useMemo(() => {\r\n    const wrappedToken = getWrappedToken(chainId);\r\n    return orders.filter((order) => {\r\n      if (order.type !== INCREASE) return false;\r\n      const sameToken =\r\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\r\n      return order.isLong === isLong && sameToken;\r\n    });\r\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\r\n\r\n  const existingTriggerOrders = useMemo(() => {\r\n    const wrappedToken = getWrappedToken(chainId);\r\n    return orders.filter((order) => {\r\n      if (order.type !== DECREASE) return false;\r\n      const sameToken =\r\n        order.indexToken === wrappedToken.address ? toToken.isNative : order.indexToken === toToken.address;\r\n      return order.isLong === isLong && sameToken;\r\n    });\r\n  }, [orders, chainId, isLong, toToken.address, toToken.isNative]);\r\n\r\n  const decreaseOrdersThatWillBeExecuted = useMemo(() => {\r\n    if (isSwap) return [];\r\n    return existingTriggerOrders.filter((order) => {\r\n      if (order.triggerAboveThreshold) {\r\n        return existingPosition?.markPrice.gte(order.triggerPrice);\r\n      } else {\r\n        return existingPosition?.markPrice.lte(order.triggerPrice);\r\n      }\r\n    });\r\n  }, [existingPosition, existingTriggerOrders, isSwap]);\r\n\r\n  const takeProfit = Number(formatForContract(TPValue, 10).toFixed(0));\r\n  const stopLoss = Number(formatForContract(SLValue, 10).toFixed(0));\r\n  const price = Number(formatAmount(isMarketOrder ? toTokenInfo.maxPrice : triggerPriceUsd, 20, 0, 0));\r\n  const getError = () => {\r\n    if (market === 'GNS') {\r\n      if (stopLoss) {\r\n        if ((isLong && stopLoss >= price) || (!isLong && stopLoss <= price)) {\r\n          setSLHasError(true);\r\n          return `${isLong ? 'Long' : 'Short'} SL can't be ${isLong ? 'greater' : 'less'} than entry price.`;\r\n        } else {\r\n          setSLHasError(false);\r\n        }\r\n      } else {\r\n        setSLHasError(false);\r\n      }\r\n      if (takeProfit) {\r\n        if ((isLong && takeProfit <= price) || (!isLong && takeProfit >= price)) {\r\n          setTPHasError(true);\r\n          return `${isLong ? 'Long' : 'Short'} TP can't be ${isLong ? 'less' : 'greater'} than entry price.`;\r\n        } else {\r\n          setTPHasError(false);\r\n        }\r\n  \r\n        const borderTakeProfit = Number(getSlTpFromPercentage(isLong, true, 900, price / 10**10, leverage / 10**4));\r\n        if (isLong ? takeProfit > borderTakeProfit : takeProfit < borderTakeProfit) {\r\n          setTPHasError(true);\r\n          return `${isLong ? 'Max' : 'Min'} Take Profit price: ${formatAmount(borderTakeProfit, 10, 2, true)}`;\r\n        } else {\r\n          setTPHasError(false);\r\n        }\r\n      } else {\r\n        setTPHasError(false);\r\n        return `Take Profit is required`;\r\n      }\r\n    }\r\n    \r\n    if (!isSwap && hasExistingPosition && !isMarketOrder) {\r\n      const { delta, hasProfit } = calculatePositionDelta(triggerPriceUsd, existingPosition);\r\n      if (hasProfit && delta.eq(0)) {\r\n        return \"Invalid price, see warning\";\r\n      }\r\n    }\r\n    if (isMarketOrder && hasPendingProfit && !isProfitWarningAccepted) {\r\n      return \"Forfeit profit not checked\";\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\r\n      return `Accept confirmation of trigger orders`;\r\n    }\r\n\r\n\r\n    if (!isPendingConfirmation) {\r\n      const error = getError();\r\n      if (error) {\r\n        return error;\r\n      }\r\n\r\n      if (isSwap) {\r\n        return title;\r\n      }\r\n      const action = isMarketOrder ? (isLong ? \"Long\" : \"Short\") : \"Create Order\";\r\n\r\n      if (\r\n        isMarketOrder &&\r\n        MIN_PROFIT_TIME > 0 &&\r\n        hasExistingPosition &&\r\n        existingPosition.delta.eq(0) &&\r\n        existingPosition.pendingDelta.gt(0)\r\n      ) {\r\n        return isLong ? `Forfeit profit and ${action}` : `Forfeit profit and Short`;\r\n      }\r\n\r\n      return isMarketOrder && MIN_PROFIT_TIME > 0 ? `Accept minimum and ${action}` : action;\r\n    }\r\n\r\n    if (!isMarketOrder) {\r\n      return \"Creating Order...\";\r\n    }\r\n    if (isSwap) {\r\n      return \"Swapping...\";\r\n    }\r\n    if (isLong) {\r\n      return \"Longing...\";\r\n    }\r\n    return \"Shorting...\";\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    if (getError()) {\r\n      return false;\r\n    }\r\n    if (decreaseOrdersThatWillBeExecuted.length > 0 && !isTriggerWarningAccepted) {\r\n      return false;\r\n    }\r\n    return !isPendingConfirmation && !isSubmitting;\r\n  };\r\n\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n  const spread = getSpread(fromTokenInfo, toTokenInfo, isLong, nativeTokenAddress);\r\n  // it's meaningless for limit/stop orders to show spread based on current prices\r\n  const showSpread = isMarketOrder && !!spread;\r\n\r\n  const renderSpreadWarning = useCallback(() => {\r\n    if (!isMarketOrder) {\r\n      return null;\r\n    }\r\n\r\n    if (spread && spread.isHigh) {\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          The spread is {`>`} 1%, please ensure the trade details are acceptable before comfirming\r\n        </div>\r\n      );\r\n    }\r\n  }, [isMarketOrder, spread]);\r\n\r\n  const renderFeeWarning = useCallback(() => {\r\n    if (orderOption === LIMIT || !feeBps || feeBps <= 60) {\r\n      return null;\r\n    }\r\n\r\n    if (isSwap) {\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          Fees are high to swap from {fromToken.symbol} to {toToken.symbol}.\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!collateralTokenAddress) {\r\n      return null;\r\n    }\r\n\r\n    const collateralToken = getToken(chainId, collateralTokenAddress);\r\n    return (\r\n      <div className=\"Confirmation-box-warning\">\r\n        Fees are high to swap from {fromToken.symbol} to {collateralToken.symbol}. <br />\r\n        {collateralToken.symbol} is needed for collateral.\r\n      </div>\r\n    );\r\n  }, [feeBps, isSwap, collateralTokenAddress, chainId, fromToken.symbol, toToken.symbol, orderOption]);\r\n\r\n  const hasPendingProfit =\r\n    MIN_PROFIT_TIME > 0 && existingPosition && existingPosition.delta.eq(0) && existingPosition.pendingDelta.gt(0);\r\n\r\n  const renderMinProfitWarning = useCallback(() => {\r\n    if (MIN_PROFIT_TIME === 0) {\r\n      return null;\r\n    }\r\n    if (!isSwap) {\r\n      if (hasExistingPosition) {\r\n        const minProfitExpiration = existingPosition.lastIncreasedTime + MIN_PROFIT_TIME;\r\n        if (isMarketOrder && existingPosition.delta.eq(0) && existingPosition.pendingDelta.gt(0)) {\r\n          const profitPrice = getProfitPrice(existingPosition.markPrice, existingPosition);\r\n          return (\r\n            <div className=\"Confirmation-box-warning\">\r\n              Increasing this position at the current price will forfeit a&nbsp;\r\n              <a\r\n                href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                pending profit\r\n              </a>{\" \"}\r\n              of {existingPosition.deltaStr}.<br />\r\n              <br />\r\n              Profit price: {existingPosition.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}.\r\n              This rule only applies for the next {getTimeRemaining(minProfitExpiration)}, until{\" \"}\r\n              {formatDateTime(minProfitExpiration)}.\r\n            </div>\r\n          );\r\n        }\r\n        if (!isMarketOrder) {\r\n          const { delta, hasProfit } = calculatePositionDelta(triggerPriceUsd, existingPosition);\r\n          if (hasProfit && delta.eq(0)) {\r\n            const profitPrice = getProfitPrice(existingPosition.markPrice, existingPosition);\r\n            return (\r\n              <div className=\"Confirmation-box-warning\">\r\n                This order will forfeit a&nbsp;\r\n                <a\r\n                  href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  profit\r\n                </a>{\" \"}\r\n                of {existingPosition.deltaStr}.<br />\r\n                Profit price: {existingPosition.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}.\r\n                This rule only applies for the next {getTimeRemaining(minProfitExpiration)}, until{\" \"}\r\n                {formatDateTime(minProfitExpiration)}.\r\n              </div>\r\n            );\r\n          }\r\n        }\r\n      }\r\n\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          A minimum price change of&nbsp;\r\n          <a href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            1.5%\r\n          </a>{\" \"}\r\n          is required for a position to be in profit. This only applies for the first {MIN_PROFIT_TIME / 60 / 60} hours\r\n          after increasing a position.\r\n        </div>\r\n      );\r\n    }\r\n  }, [isSwap, hasExistingPosition, existingPosition, isMarketOrder, triggerPriceUsd]);\r\n\r\n  const renderExistingOrderWarning = useCallback(() => {\r\n    if (isSwap || !existingOrder) {\r\n      return;\r\n    }\r\n    const indexToken = getToken(chainId, existingOrder.indexToken);\r\n    const sizeInToken = formatAmount(\r\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\r\n      USD_DECIMALS,\r\n      4,\r\n      true\r\n    );\r\n    if (existingOrders?.length > 1) {\r\n      return (\r\n        <div>\r\n          <div className=\"Confirmation-box-info\">\r\n            <span>\r\n              You have multiple existing Increase {existingOrder.isLong ? \"Long\" : \"Short\"} {indexToken.symbol} limit\r\n              orders{\" \"}\r\n            </span>\r\n            <span onClick={() => setIsLimitOrdersVisible((p) => !p)} className=\"view-orders\">\r\n              ({isLimitOrdersVisible ? \"hide\" : \"view\"})\r\n            </span>\r\n          </div>\r\n          {isLimitOrdersVisible && (\r\n            <ul className=\"order-list\">\r\n              {existingOrders.map((order) => {\r\n                const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\r\n                const id = `${account}-${index}`;\r\n                const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n                const indexToken = getToken(chainId, order.indexToken);\r\n\r\n                return (\r\n                  <li key={id} className=\"font-sm\">\r\n                    <p>\r\n                      {type === INCREASE ? \"Increase\" : \"Decrease\"} {indexToken.symbol} {isLong ? \"Long\" : \"Short\"}{\" \"}\r\n                      &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\r\n                    </p>\r\n                    <button onClick={() => onCancelOrderClick(order)}>Cancel</button>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"Confirmation-box-info\">\r\n        You have an active Limit Order to Increase {existingOrder.isLong ? \"Long\" : \"Short\"} {sizeInToken}{\" \"}\r\n        {indexToken.symbol} (${formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at price $\r\n        {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\r\n      </div>\r\n    );\r\n  }, [existingOrder, isSwap, chainId, existingOrders, isLong, isLimitOrdersVisible, onCancelOrderClick]);\r\n\r\n  const renderExistingTriggerErrors = useCallback(() => {\r\n    if (isSwap || decreaseOrdersThatWillBeExecuted?.length < 1) {\r\n      return;\r\n    }\r\n    const existingTriggerOrderLength = decreaseOrdersThatWillBeExecuted.length;\r\n    const orderText = existingTriggerOrderLength > 1 ? \"orders\" : \"order\";\r\n    return (\r\n      <>\r\n        <div className=\"Confirmation-box-warning\">\r\n          You have {existingTriggerOrderLength > 1 ? `${existingTriggerOrderLength}` : \"an\"} active trigger {orderText}{\" \"}\r\n          that might execute immediately after you open this position. Please cancel the {orderText} or accept the\r\n          confirmation to continue.\r\n        </div>\r\n        <ul className=\"order-list\">\r\n          {decreaseOrdersThatWillBeExecuted.map((order) => {\r\n            const { account, index, type, triggerAboveThreshold, triggerPrice } = order;\r\n            const id = `${account}-${index}`;\r\n            const triggerPricePrefix = triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n            const indexToken = getToken(chainId, order.indexToken);\r\n            return (\r\n              <li key={id} className=\"font-sm\">\r\n                <p>\r\n                  {type === INCREASE ? \"Increase\" : \"Decrease\"} {indexToken.symbol} {isLong ? \"Long\" : \"Short\"}\r\n                  &nbsp;{triggerPricePrefix} ${formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\r\n                </p>\r\n                <button\r\n                  onClick={() =>\r\n                    cancelDecreaseOrder(chainId, library, index, {\r\n                      successMsg: \"Order cancelled\",\r\n                      failMsg: \"Cancel failed\",\r\n                      sentMsg: \"Cancel submitted\",\r\n                      pendingTxns,\r\n                      setPendingTxns,\r\n                    })\r\n                  }\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </>\r\n    );\r\n  }, [decreaseOrdersThatWillBeExecuted, isSwap, chainId, library, pendingTxns, setPendingTxns, isLong]);\r\n\r\n  const renderExistingTriggerWarning = useCallback(() => {\r\n    if (\r\n      isSwap ||\r\n      existingTriggerOrders.length < 1 ||\r\n      decreaseOrdersThatWillBeExecuted.length > 0 ||\r\n      renderExistingOrderWarning()\r\n    ) {\r\n      return;\r\n    }\r\n    const existingTriggerOrderLength = existingTriggerOrders.length;\r\n    return (\r\n      <div className=\"Confirmation-box-info\">\r\n        You have {existingTriggerOrderLength > 1 ? `${existingTriggerOrderLength}` : \"an\"} active trigger{\" \"}\r\n        {existingTriggerOrderLength > 1 ? \"orders\" : \"order\"} that could impact this position.\r\n      </div>\r\n    );\r\n  }, [existingTriggerOrders, isSwap, decreaseOrdersThatWillBeExecuted, renderExistingOrderWarning]);\r\n\r\n  // TODO handle unaprproved order plugin (very unlikely case)\r\n  const renderMain = useCallback(() => {\r\n    if (isSwap) {\r\n      return (\r\n        <div className=\"Confirmation-box-main\">\r\n          <div className=\"Confirmation-box-main-label\">\r\n            <div className=\"label-title\">Pay</div>&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\r\n            {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\r\n          </div>\r\n          <div className=\"Confirmation-box-main-icon\"></div>\r\n          <div className=\"Confirmation-box-main-label\">\r\n            <div className=\"label-title\">Recieve</div>&nbsp;{formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\r\n            {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"Confirmation-box-main\">\r\n        <div className=\"Confirmation-box-main-label\">\r\n          <div className=\"label-title\">Pay</div>&nbsp;{formatAmount(fromAmount, fromToken.decimals, 4, true)} {fromToken.symbol} ($\r\n          {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)})\r\n        </div>\r\n        <div className=\"Confirmation-box-main-icon\"></div>\r\n        <div className=\"Confirmation-box-main-label\">\r\n          <div className=\"label-title\">{isLong ? \"Long\" : \"Short\"}</div>&nbsp;\r\n          {formatAmount(toAmount, toToken.decimals, 4, true)} {toToken.symbol} ($\r\n          {formatAmount(toUsdMax, USD_DECIMALS, 2, true)})\r\n        </div>\r\n      </div>\r\n    );\r\n  }, [isSwap, fromAmount, fromToken, toToken, fromUsdMin, toUsdMax, isLong, toAmount]);\r\n\r\n  const SWAP_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"SWAP_ORDER_EXECUTION_GAS_FEE\");\r\n  const INCREASE_ORDER_EXECUTION_GAS_FEE = getConstant(chainId, \"INCREASE_ORDER_EXECUTION_GAS_FEE\");\r\n  const executionFee = isSwap ? SWAP_ORDER_EXECUTION_GAS_FEE : INCREASE_ORDER_EXECUTION_GAS_FEE;\r\n  const renderExecutionFee = useCallback(() => {\r\n    if (isMarketOrder) {\r\n      return null;\r\n    }\r\n    return (\r\n      <ExchangeInfoRow label=\"Execution Fee\">\r\n        {formatAmount(executionFee, 18, 4)} {getNativeToken(chainId).symbol}\r\n      </ExchangeInfoRow>\r\n    );\r\n  }, [isMarketOrder, executionFee, chainId]);\r\n\r\n  const renderAvailableLiquidity = useCallback(() => {\r\n    let availableLiquidity;\r\n\r\n    if (market === 'GNS') {\r\n      availableLiquidity = liquidity[market]?.formattedValue;\r\n      return (\r\n        <ExchangeInfoRow label=\"Available Liquidity\">\r\n          ${availableLiquidity}\r\n        </ExchangeInfoRow>\r\n      );\r\n    }\r\n    \r\n    const riskThresholdBps = 5000;\r\n    let isLiquidityRisk;\r\n    const token = isSwap || isLong ? toTokenInfo : shortCollateralToken;\r\n\r\n    if (!token || !token.poolAmount || !token.availableAmount) {\r\n      return null;\r\n    }\r\n\r\n    if (isSwap) {\r\n      const poolWithoutBuffer = token.poolAmount.sub(token.bufferAmount);\r\n      availableLiquidity = token.availableAmount.gt(poolWithoutBuffer) ? poolWithoutBuffer : token.availableAmount;\r\n      isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\r\n    } else {\r\n      if (isShort) {\r\n        availableLiquidity = token.availableAmount;\r\n\r\n        let adjustedMaxGlobalShortSize;\r\n\r\n        if (toTokenInfo.maxAvailableShort && toTokenInfo.maxAvailableShort.gt(0)) {\r\n          adjustedMaxGlobalShortSize = toTokenInfo.maxAvailableShort\r\n            .mul(expandDecimals(1, token.decimals))\r\n            .div(expandDecimals(1, USD_DECIMALS));\r\n        }\r\n\r\n        if (adjustedMaxGlobalShortSize && adjustedMaxGlobalShortSize.lt(token.availableAmount)) {\r\n          availableLiquidity = adjustedMaxGlobalShortSize;\r\n        }\r\n\r\n        const sizeTokens = toUsdMax.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\r\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(sizeTokens);\r\n      } else {\r\n        availableLiquidity = token.availableAmount;\r\n        isLiquidityRisk = availableLiquidity.mul(riskThresholdBps).div(BASIS_POINTS_DIVISOR).lt(toAmount);\r\n      }\r\n    }\r\n\r\n    if (!availableLiquidity) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <ExchangeInfoRow label=\"Available Liquidity\">\r\n        <Tooltip\r\n          position=\"right-bottom\"\r\n          handleClassName={isLiquidityRisk ? \"negative\" : null}\r\n          handle={\r\n            <>\r\n              {formatAmount(availableLiquidity, token.decimals, token.isStable ? 0 : 2, true)} {token.symbol}\r\n            </>\r\n          }\r\n          renderContent={() =>\r\n            isLiquidityRisk\r\n              ? \"There may not be sufficient liquidity to execute your order when the price conditions are met\"\r\n              : \"The order will only execute if the price conditions are met and there is sufficient liquidity\"\r\n          }\r\n        />\r\n      </ExchangeInfoRow>\r\n    );\r\n  }, [toTokenInfo, shortCollateralToken, isShort, isLong, isSwap, toAmount, toUsdMax]);\r\n\r\n  const renderMarginSection = useCallback(() => {\r\n    return (\r\n      <>\r\n        <div>\r\n          {renderMain()}\r\n          {renderFeeWarning()}\r\n          {renderMinProfitWarning()}\r\n          {renderExistingOrderWarning()}\r\n          {renderExistingTriggerErrors()}\r\n          {renderExistingTriggerWarning()}\r\n          {minExecutionFeeErrorMessage && <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>}\r\n          {hasPendingProfit && isMarketOrder && (\r\n            <div className=\"PositionEditor-accept-profit-warning\">\r\n              <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\r\n                <span className=\"muted\">Forfeit profit</span>\r\n              </Checkbox>\r\n            </div>\r\n          )}\r\n          {orderOption === LIMIT && renderAvailableLiquidity()}\r\n\r\n          {market === 'GNS' && <div className=\"row-divider\" />}\r\n          \r\n          {market === 'GMX' && isShort && (\r\n            <ExchangeInfoRow label=\"Collateral In\" isTop={true}>{getToken(chainId, shortCollateralAddress).symbol}</ExchangeInfoRow>\r\n          )}\r\n          {market === 'GMX' && isLong && <ExchangeInfoRow label=\"Collateral In\" isTop={true} value={toTokenInfo.symbol} />}\r\n          {\r\n            market === 'GMX' &&\r\n            <ExchangeInfoRow label=\"Leverage\">\r\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\r\n                <div className=\"inline-block muted\">\r\n                  {formatAmount(existingPosition.leverage, 4, 2)}x\r\n                  <BsArrowRight className=\"transition-arrow\" />\r\n                </div>\r\n              )}\r\n              {toAmount && leverage && leverage.gt(0) && `${formatAmount(leverage, 4, 2)}x`}\r\n              {!toAmount && leverage && leverage.gt(0) && `-`}\r\n              {leverage && leverage.eq(0) && `-`}\r\n            </ExchangeInfoRow>\r\n          }\r\n          {\r\n            market === 'GMX' &&\r\n            <ExchangeInfoRow label=\"Liq. Price\">\r\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\r\n                <div className=\"inline-block muted\">\r\n                  ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\r\n                  <BsArrowRight className=\"transition-arrow\" />\r\n                </div>\r\n              )}\r\n              {toAmount && displayLiquidationPrice && `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\r\n              {!toAmount && displayLiquidationPrice && `-`}\r\n              {!displayLiquidationPrice && `-`}\r\n            </ExchangeInfoRow>\r\n          }\r\n          \r\n          <ExchangeInfoRow label=\"Fees\">${formatAmount(feesUsd, USD_DECIMALS, 2, true)}</ExchangeInfoRow>\r\n          <ExchangeInfoRow label=\"Collateral\">\r\n            <Tooltip\r\n              handle={`$${formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}`}\r\n              position=\"right-bottom\"\r\n              renderContent={() => {\r\n                return (\r\n                  <>\r\n                    Your position's collateral after deducting fees.\r\n                    <br />\r\n                    <br />\r\n                    <StatsTooltipRow label=\"Pay Amount\" value={formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} />\r\n                    <StatsTooltipRow label=\"Fees\" value={formatAmount(feesUsd, USD_DECIMALS, 2, true)} />\r\n                    <div className=\"Tooltip-divider\" />\r\n                    <StatsTooltipRow\r\n                      label=\"Collateral\"\r\n                      value={formatAmount(collateralAfterFees, USD_DECIMALS, 2, true)}\r\n                    />\r\n                  </>\r\n                );\r\n              }}\r\n            />\r\n          </ExchangeInfoRow>\r\n          {/* {\r\n            market === 'GMX' &&\r\n            showSpread && (\r\n              <ExchangeInfoRow label=\"Spread\" isWarning={spread.isHigh} isTop={true}>\r\n                {formatAmount(spread.value.mul(100), USD_DECIMALS, 2, true)}%\r\n              </ExchangeInfoRow>\r\n            )\r\n          } */}\r\n          {\r\n            market === 'GNS' &&\r\n            <>\r\n              <NumberInput_v3\r\n                value={TPValue}\r\n                setValue={setTPValue}\r\n                title={\"Take Profit\"}\r\n                hasError={TPHasError}\r\n              />\r\n              <NumberInput_v3 \r\n                value={SLValue}\r\n                setValue={setSLValue}\r\n                title={\"Stop Loss\"}\r\n                hasError={SLHasError}\r\n              />\r\n            </>\r\n          }\r\n          {market === 'GNS' && <div className=\"row-divider\" />}\r\n          {isMarketOrder && (\r\n            <ExchangeInfoRow label=\"Entry Price\">\r\n              {hasExistingPosition && toAmount && toAmount.gt(0) && (\r\n                <div className=\"inline-block muted\">\r\n                  ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\r\n                  <BsArrowRight className=\"transition-arrow\" />\r\n                </div>\r\n              )}\r\n              {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\r\n              {!nextAveragePrice && `-`}\r\n            </ExchangeInfoRow>\r\n          )}\r\n          {!isMarketOrder && (\r\n            <ExchangeInfoRow label=\"Limit Price\">\r\n              ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}\r\n            </ExchangeInfoRow>\r\n          )}\r\n          {\r\n            market === 'GMX' &&\r\n            <ExchangeInfoRow label=\"Borrow Fee\">\r\n              {isLong && toTokenInfo && formatAmount(toTokenInfo.fundingRate, 4, 4)}\r\n              {isShort && shortCollateralToken && formatAmount(shortCollateralToken.fundingRate, 4, 4)}\r\n              {((isLong && toTokenInfo && toTokenInfo.fundingRate) ||\r\n                (isShort && shortCollateralToken && shortCollateralToken.fundingRate)) &&\r\n                \"% / 1h\"}\r\n            </ExchangeInfoRow>\r\n          }\r\n          \r\n          {isMarketOrder && (\r\n            <div className=\"PositionEditor-allow-higher-slippage\">\r\n              <ExchangeInfoRow label=\"Execution Fee\">\r\n                <Tooltip\r\n                  handle={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol}`}\r\n                  position=\"right-top\"\r\n                  renderContent={() => {\r\n                    return (\r\n                      <>\r\n                        <StatsTooltipRow\r\n                          label=\"Network fee\"\r\n                          value={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol} ($${formatAmount(\r\n                            minExecutionFeeUSD,\r\n                            USD_DECIMALS,\r\n                            2\r\n                          )})`}\r\n                        />\r\n                        <br />\r\n                        This is the network cost required to execute the postion.{\" \"}\r\n                        <a\r\n                          href=\"https://gmxio.gitbook.io/gmx/trading#execution-fee\"\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                        >\r\n                          More Info\r\n                        </a>\r\n                      </>\r\n                    );\r\n                  }}\r\n                />\r\n              </ExchangeInfoRow>\r\n            </div>\r\n          )}\r\n          {decreaseOrdersThatWillBeExecuted.length > 0 && (\r\n            <div className=\"PositionEditor-allow-higher-slippage\">\r\n              <Checkbox isChecked={isTriggerWarningAccepted} setIsChecked={setIsTriggerWarningAccepted}>\r\n                <span className=\"muted font-sm\">I am aware of the trigger orders</span>\r\n              </Checkbox>\r\n            </div>\r\n          )}\r\n          {renderExecutionFee()}\r\n          <SlippageInput\r\n            value={userSlippage}\r\n            setValue={setUserSlippage}\r\n            />\r\n          <ExchangeInfoRow label=\"Allowed Slippage\" className=\"Slippage-row\">\r\n            <Tooltip\r\n              handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\r\n              position=\"right-top\"\r\n              renderContent={() => {\r\n                return (\r\n                  <>\r\n                    You can change this in the settings menu on the top right of the page.\r\n                    <br />\r\n                    <br />\r\n                    Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices are\r\n                    volatile.\r\n                  </>\r\n                );\r\n              }}\r\n            />\r\n          </ExchangeInfoRow>\r\n        </div>\r\n      </>\r\n    );\r\n  }, [\r\n    renderMain,\r\n    renderMinProfitWarning,\r\n    shortCollateralAddress,\r\n    isShort,\r\n    isLong,\r\n    toTokenInfo,\r\n    nextAveragePrice,\r\n    toAmount,\r\n    hasExistingPosition,\r\n    existingPosition,\r\n    isMarketOrder,\r\n    triggerPriceUsd,\r\n    showSpread,\r\n    spread,\r\n    displayLiquidationPrice,\r\n    existingLiquidationPrice,\r\n    feesUsd,\r\n    leverage,\r\n    renderExecutionFee,\r\n    shortCollateralToken,\r\n    chainId,\r\n    renderFeeWarning,\r\n    hasPendingProfit,\r\n    isProfitWarningAccepted,\r\n    renderAvailableLiquidity,\r\n    orderOption,\r\n    fromUsdMin,\r\n    collateralAfterFees,\r\n    renderExistingOrderWarning,\r\n    renderExistingTriggerWarning,\r\n    renderExistingTriggerErrors,\r\n    isHigherSlippageAllowed,\r\n    setIsHigherSlippageAllowed,\r\n    allowedSlippage,\r\n    isTriggerWarningAccepted,\r\n    decreaseOrdersThatWillBeExecuted,\r\n    minExecutionFee,\r\n    nativeTokenSymbol,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n  ]);\r\n\r\n  const renderSwapSection = useCallback(() => {\r\n    return (\r\n      <>\r\n        <div>\r\n          {renderMain()}\r\n          {renderFeeWarning()}\r\n          {renderSpreadWarning()}\r\n          {orderOption === LIMIT && renderAvailableLiquidity()}\r\n          <ExchangeInfoRow label=\"Min. Receive\">\r\n            {formatAmount(minOut, toTokenInfo.decimals, 4, true)} {toTokenInfo.symbol}\r\n          </ExchangeInfoRow>\r\n          <ExchangeInfoRow label=\"Price\">\r\n            {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromTokenInfo, toTokenInfo)}\r\n          </ExchangeInfoRow>\r\n          {!isMarketOrder && (\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">Limit Price</div>\r\n              <div className=\"align-right\">{getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}</div>\r\n            </div>\r\n          )}\r\n          {showSpread && (\r\n            <ExchangeInfoRow label=\"Spread\" isWarning={spread.isHigh}>\r\n              {formatAmount(spread.value.mul(100), USD_DECIMALS, 2, true)}%\r\n            </ExchangeInfoRow>\r\n          )}\r\n          <div className=\"Exchange-info-row\">\r\n            <div className=\"Exchange-info-label\">Fees</div>\r\n            <div className=\"align-right\">\r\n              {formatAmount(feeBps, 2, 2, true)}% ({formatAmount(fees, fromTokenInfo.decimals, 4, true)}{\" \"}\r\n              {fromTokenInfo.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\r\n            </div>\r\n          </div>\r\n          {renderExecutionFee()}\r\n          {fromTokenUsd && (\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">{fromTokenInfo.symbol} Price</div>\r\n              <div className=\"align-right\">{fromTokenUsd} USD</div>\r\n            </div>\r\n          )}\r\n          {toTokenUsd && (\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">{toTokenInfo.symbol} Price</div>\r\n              <div className=\"align-right\">{toTokenUsd} USD</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }, [\r\n    renderMain,\r\n    renderSpreadWarning,\r\n    fromTokenInfo,\r\n    toTokenInfo,\r\n    orderOption,\r\n    showSpread,\r\n    spread,\r\n    feesUsd,\r\n    feeBps,\r\n    renderExecutionFee,\r\n    fromTokenUsd,\r\n    toTokenUsd,\r\n    triggerRatio,\r\n    fees,\r\n    isMarketOrder,\r\n    minOut,\r\n    renderFeeWarning,\r\n    renderAvailableLiquidity,\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"Confirmation-box\">\r\n      <Modal isVisible={true} setIsVisible={() => setIsConfirming(false)} label={title} allowContentTouchMove isNifty={true}>\r\n        {isSwap && renderSwapSection()}\r\n        {!isSwap && renderMarginSection()}\r\n        <div className=\"Confirmation-box-row\">\r\n          <button\r\n            onClick={onConfirmationClick}\r\n            className=\"App-cta Confirmation-box-button hlight\"\r\n            disabled={!isPrimaryEnabled()}\r\n          >\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  formatAmount,\r\n  bigNumberify,\r\n  isAddressZero,\r\n  USD_DECIMALS,\r\n  MAX_REFERRAL_CODE_LENGTH,\r\n  ARBITRUM,\r\n  AVALANCHE,\r\n} from \"../../lib/legacy\";\r\nimport { encodeReferralCode, getReferralCodeOwner } from \"../../domain/referrals\";\r\n\r\nexport const REFERRAL_CODE_REGEX = /^\\w+$/; // only number, string and underscore is allowed\r\nexport const REGEX_VERIFY_BYTES32 = /^0x[0-9a-f]{64}$/;\r\n\r\nexport function isRecentReferralCodeNotExpired(referralCodeInfo) {\r\n  const REFERRAL_DATA_MAX_TIME = 60000 * 5; // 5 minutes\r\n  if (referralCodeInfo.time) {\r\n    return referralCodeInfo.time + REFERRAL_DATA_MAX_TIME > Date.now();\r\n  }\r\n}\r\n\r\nexport async function getReferralCodeTakenStatus(account, referralCode, chainId) {\r\n  const referralCodeBytes32 = encodeReferralCode(referralCode);\r\n  const [ownerArbitrum, ownerAvax] = await Promise.all([\r\n    getReferralCodeOwner(ARBITRUM, referralCodeBytes32),\r\n    getReferralCodeOwner(AVALANCHE, referralCodeBytes32),\r\n  ]);\r\n\r\n  const takenOnArb =\r\n    !isAddressZero(ownerArbitrum) && (ownerArbitrum !== account || (ownerArbitrum === account && chainId === ARBITRUM));\r\n  const takenOnAvax =\r\n    !isAddressZero(ownerAvax) && (ownerAvax !== account || (ownerAvax === account && chainId === AVALANCHE));\r\n\r\n  const referralCodeTakenInfo = {\r\n    [ARBITRUM]: takenOnArb,\r\n    [AVALANCHE]: takenOnAvax,\r\n    both: takenOnArb && takenOnAvax,\r\n    ownerArbitrum,\r\n    ownerAvax,\r\n  };\r\n\r\n  if (referralCodeTakenInfo.both) {\r\n    return { status: \"all\", info: referralCodeTakenInfo };\r\n  }\r\n  if (referralCodeTakenInfo[chainId]) {\r\n    return { status: \"current\", info: referralCodeTakenInfo };\r\n  }\r\n  if (chainId === AVALANCHE ? referralCodeTakenInfo[ARBITRUM] : referralCodeTakenInfo[AVALANCHE]) {\r\n    return { status: \"other\", info: referralCodeTakenInfo };\r\n  }\r\n  return { status: \"none\", info: referralCodeTakenInfo };\r\n}\r\n\r\nexport function getTierIdDisplay(tierId) {\r\n  return Number(tierId) + 1;\r\n}\r\n\r\nexport const tierRebateInfo = {\r\n  0: 5,\r\n  1: 10,\r\n  2: 15,\r\n};\r\n\r\nexport const tierDiscountInfo = {\r\n  0: 5,\r\n  1: 10,\r\n  2: 10,\r\n};\r\n\r\nfunction areObjectsWithSameKeys(obj1, obj2) {\r\n  return Object.keys(obj1).every((key) => key in obj2);\r\n}\r\n\r\nexport function deserializeSampleStats(input) {\r\n  const parsedData = JSON.parse(input);\r\n  if (!Array.isArray(parsedData)) return [];\r\n  return parsedData\r\n    .map((data) => {\r\n      if (!areObjectsWithSameKeys(getSampleReferrarStat(), data)) return null;\r\n      return Object.keys(data).reduce((acc, cv) => {\r\n        const currentValue = data[cv];\r\n        if (currentValue?.type === \"BigNumber\") {\r\n          acc[cv] = bigNumberify(currentValue.hex || 0);\r\n        } else {\r\n          acc[cv] = currentValue;\r\n        }\r\n        return acc;\r\n      }, {});\r\n    })\r\n    .filter(Boolean);\r\n}\r\n\r\nexport const getSampleReferrarStat = (code = \"\", ownerOnOtherNetwork = \"\", account = \"\") => {\r\n  return {\r\n    discountUsd: bigNumberify(0),\r\n    referralCode: code,\r\n    totalRebateUsd: bigNumberify(0),\r\n    tradedReferralsCount: 0,\r\n    registeredReferralsCount: 0,\r\n    trades: 0,\r\n    volume: bigNumberify(0),\r\n    time: Date.now(),\r\n    ownerOnOtherChain: {\r\n      code: encodeReferralCode(code),\r\n      codeString: code,\r\n      owner: undefined,\r\n      isTaken: !isAddressZero(ownerOnOtherNetwork),\r\n      isTakenByCurrentUser:\r\n        !isAddressZero(ownerOnOtherNetwork) && ownerOnOtherNetwork.toLowerCase() === account.toLowerCase(),\r\n    },\r\n  };\r\n};\r\n\r\nexport function getUSDValue(value, decimals = 2) {\r\n  return `$${formatAmount(value, USD_DECIMALS, decimals, true, \"0.00\")}`;\r\n}\r\n\r\nexport function getCodeError(value) {\r\n  const trimmedValue = value.trim();\r\n  if (!trimmedValue) return \"\";\r\n\r\n  if (trimmedValue.length > MAX_REFERRAL_CODE_LENGTH) {\r\n    return `The referral code can't be more than ${MAX_REFERRAL_CODE_LENGTH} characters.`;\r\n  }\r\n\r\n  if (!REFERRAL_CODE_REGEX.test(trimmedValue)) {\r\n    return \"Only letters, numbers and underscores are allowed.\";\r\n  }\r\n  return \"\";\r\n}\r\n\r\nexport function getTwitterShareUrl(referralCode) {\r\n  const message = \"Trying out trading on @GMX_IO, up to 30x leverage on $BTC, $ETH %0a%0aFor fee discounts use:\";\r\n\r\n  return `http://twitter.com/intent/tweet?text=${message}&url=https://gmx.io?ref=${referralCode}`;\r\n}\r\n","import { ethers } from \"ethers\";\r\nimport { gql } from \"@apollo/client\";\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport useSWR from \"swr\";\r\n\r\nimport ReferralStorage from \"../abis/ReferralStorage.json\";\r\nimport {\r\n  ARBITRUM,\r\n  AVALANCHE,\r\n  MAX_REFERRAL_CODE_LENGTH,\r\n  bigNumberify,\r\n  isAddressZero,\r\n  helperToast,\r\n  getProvider,\r\n  isHashZero,\r\n  REFERRAL_CODE_KEY,\r\n} from \"../lib/legacy\";\r\nimport { arbitrumReferralsGraphClient, avalancheReferralsGraphClient } from \"./common\";\r\nimport { getContract } from \"../config/Addresses\";\r\nimport { REGEX_VERIFY_BYTES32 } from \"../components/Referrals/referralsHelper\";\r\nimport { fetcher } from \"../lib/contracts/fetcher\";\r\nimport { callContract } from \"../lib/contracts/callContract\";\r\n\r\nconst ACTIVE_CHAINS = [ARBITRUM, AVALANCHE];\r\nconst DISTRIBUTION_TYPE_REBATES = \"1\";\r\nconst DISTRIBUTION_TYPE_DISCOUNT = \"2\";\r\n\r\nfunction getGraphClient(chainId) {\r\n  if (chainId === ARBITRUM) {\r\n    return arbitrumReferralsGraphClient;\r\n  } else if (chainId === AVALANCHE) {\r\n    return avalancheReferralsGraphClient;\r\n  }\r\n  throw new Error(`Unsupported chain ${chainId}`);\r\n}\r\n\r\nexport function decodeReferralCode(hexCode) {\r\n  try {\r\n    return ethers.utils.parseBytes32String(hexCode);\r\n  } catch (ex) {\r\n    let code = \"\";\r\n    hexCode = hexCode.substring(2);\r\n    for (let i = 0; i < 32; i++) {\r\n      code += String.fromCharCode(parseInt(hexCode.substring(i * 2, i * 2 + 2), 16));\r\n    }\r\n    return code.trim();\r\n  }\r\n}\r\n\r\nexport function encodeReferralCode(code) {\r\n  let final = code.replace(/[^\\w_]/g, \"\"); // replace everything other than numbers, string  and underscor to ''\r\n  if (final.length > MAX_REFERRAL_CODE_LENGTH) {\r\n    return ethers.constants.HashZero;\r\n  }\r\n  return ethers.utils.formatBytes32String(final);\r\n}\r\n\r\nasync function getCodeOwnersData(network, account, codes = []) {\r\n  if (codes.length === 0 || !account || !network) {\r\n    return undefined;\r\n  }\r\n  const query = gql`\r\n    query allCodes($codes: [String!]!) {\r\n      referralCodes(where: { code_in: $codes }) {\r\n        owner\r\n        id\r\n      }\r\n    }\r\n  `;\r\n  return getGraphClient(network)\r\n    .query({ query, variables: { codes } })\r\n    .then(({ data }) => {\r\n      const { referralCodes } = data;\r\n      const codeOwners = referralCodes.reduce((acc, cv) => {\r\n        acc[cv.id] = cv.owner;\r\n        return acc;\r\n      }, {});\r\n      return codes.map((code) => {\r\n        const owner = codeOwners[code];\r\n        return {\r\n          code,\r\n          codeString: decodeReferralCode(code),\r\n          owner,\r\n          isTaken: Boolean(owner),\r\n          isTakenByCurrentUser: owner && owner.toLowerCase() === account.toLowerCase(),\r\n        };\r\n      });\r\n    });\r\n}\r\n\r\nexport function useUserCodesOnAllChain(account) {\r\n  const [data, setData] = useState(null);\r\n  const query = gql`\r\n    query referralCodesOnAllChain($account: String!) {\r\n      referralCodes(first: 1000, where: { owner: $account }) {\r\n        code\r\n      }\r\n    }\r\n  `;\r\n  useEffect(() => {\r\n    async function main() {\r\n      const [arbitrumCodes, avalancheCodes] = await Promise.all(\r\n        ACTIVE_CHAINS.map((chainId) => {\r\n          return getGraphClient(chainId)\r\n            .query({ query, variables: { account: (account || \"\").toLowerCase() } })\r\n            .then(({ data }) => {\r\n              return data.referralCodes.map((c) => c.code);\r\n            });\r\n        })\r\n      );\r\n      const [codeOwnersOnAvax = [], codeOwnersOnArbitrum = []] = await Promise.all([\r\n        getCodeOwnersData(AVALANCHE, account, arbitrumCodes),\r\n        getCodeOwnersData(ARBITRUM, account, avalancheCodes),\r\n      ]);\r\n\r\n      setData({\r\n        [ARBITRUM]: codeOwnersOnAvax.reduce((acc, cv) => {\r\n          acc[cv.code] = cv;\r\n          return acc;\r\n        }, {}),\r\n        [AVALANCHE]: codeOwnersOnArbitrum.reduce((acc, cv) => {\r\n          acc[cv.code] = cv;\r\n          return acc;\r\n        }, {}),\r\n      });\r\n    }\r\n\r\n    main();\r\n  }, [account, query]);\r\n  return data;\r\n}\r\n\r\nexport function useReferralsData(chainId, account) {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const ownerOnOtherChain = useUserCodesOnAllChain(account);\r\n  useEffect(() => {\r\n    if (!chainId || !account) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const startOfDayTimestamp = Math.floor(parseInt(Date.now() / 1000) / 86400) * 86400;\r\n    const query = gql`\r\n      query referralData($typeIds: [String!]!, $account: String!, $timestamp: Int!, $referralTotalStatsId: String!) {\r\n        distributions(\r\n          first: 1000\r\n          orderBy: timestamp\r\n          orderDirection: desc\r\n          where: { receiver: $account, typeId_in: $typeIds }\r\n        ) {\r\n          receiver\r\n          amount\r\n          typeId\r\n          token\r\n          transactionHash\r\n          timestamp\r\n        }\r\n        referrerTotalStats: referrerStats(\r\n          first: 1000\r\n          orderBy: volume\r\n          orderDirection: desc\r\n          where: { period: total, referrer: $account }\r\n        ) {\r\n          referralCode\r\n          volume\r\n          trades\r\n          tradedReferralsCount\r\n          registeredReferralsCount\r\n          totalRebateUsd\r\n          discountUsd\r\n        }\r\n        referrerLastDayStats: referrerStats(\r\n          first: 1000\r\n          where: { period: daily, referrer: $account, timestamp: $timestamp }\r\n        ) {\r\n          referralCode\r\n          volume\r\n          trades\r\n          tradedReferralsCount\r\n          registeredReferralsCount\r\n          totalRebateUsd\r\n          discountUsd\r\n        }\r\n        referralCodes(first: 1000, where: { owner: $account }) {\r\n          code\r\n        }\r\n        referralTotalStats: referralStat(id: $referralTotalStatsId) {\r\n          volume\r\n          discountUsd\r\n        }\r\n        referrerTierInfo: referrer(id: $account) {\r\n          tierId\r\n          id\r\n          discountShare\r\n        }\r\n      }\r\n    `;\r\n    setLoading(true);\r\n\r\n    getGraphClient(chainId)\r\n      .query({\r\n        query,\r\n        variables: {\r\n          typeIds: [DISTRIBUTION_TYPE_REBATES, DISTRIBUTION_TYPE_DISCOUNT],\r\n          account: (account || \"\").toLowerCase(),\r\n          timestamp: startOfDayTimestamp,\r\n          referralTotalStatsId: account && `total:0:${account.toLowerCase()}`,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        const rebateDistributions = [];\r\n        const discountDistributions = [];\r\n        res.data.distributions.forEach((d) => {\r\n          const item = {\r\n            timestamp: parseInt(d.timestamp),\r\n            transactionHash: d.transactionHash,\r\n            receiver: ethers.utils.getAddress(d.receiver),\r\n            amount: bigNumberify(d.amount),\r\n            typeId: d.typeId,\r\n            token: ethers.utils.getAddress(d.token),\r\n          };\r\n          if (d.typeId === DISTRIBUTION_TYPE_REBATES) {\r\n            rebateDistributions.push(item);\r\n          } else {\r\n            discountDistributions.push(item);\r\n          }\r\n        });\r\n\r\n        function prepareStatsItem(e) {\r\n          return {\r\n            volume: bigNumberify(e.volume),\r\n            trades: parseInt(e.trades),\r\n            tradedReferralsCount: parseInt(e.tradedReferralsCount),\r\n            registeredReferralsCount: parseInt(e.registeredReferralsCount),\r\n            totalRebateUsd: bigNumberify(e.totalRebateUsd),\r\n            discountUsd: bigNumberify(e.discountUsd),\r\n            referralCode: decodeReferralCode(e.referralCode),\r\n            ownerOnOtherChain: ownerOnOtherChain?.[chainId][e.referralCode],\r\n          };\r\n        }\r\n\r\n        function getCumulativeStats(data = []) {\r\n          return data.reduce(\r\n            (acc, cv) => {\r\n              acc.totalRebateUsd = acc.totalRebateUsd.add(cv.totalRebateUsd);\r\n              acc.volume = acc.volume.add(cv.volume);\r\n              acc.discountUsd = acc.discountUsd.add(cv.discountUsd);\r\n              acc.trades = acc.trades + cv.trades;\r\n              acc.tradedReferralsCount = acc.tradedReferralsCount + cv.tradedReferralsCount;\r\n              acc.registeredReferralsCount = acc.registeredReferralsCount + cv.registeredReferralsCount;\r\n              return acc;\r\n            },\r\n            {\r\n              totalRebateUsd: bigNumberify(0),\r\n              volume: bigNumberify(0),\r\n              discountUsd: bigNumberify(0),\r\n              trades: 0,\r\n              tradedReferralsCount: 0,\r\n              registeredReferralsCount: 0,\r\n            }\r\n          );\r\n        }\r\n\r\n        let referrerTotalStats = res.data.referrerTotalStats.map(prepareStatsItem);\r\n        setData({\r\n          rebateDistributions,\r\n          discountDistributions,\r\n          referrerTotalStats,\r\n          referrerTierInfo: res.data.referrerTierInfo,\r\n          referrerLastDayStats: res.data.referrerLastDayStats.map(prepareStatsItem),\r\n          cumulativeStats: getCumulativeStats(referrerTotalStats),\r\n          codes: res.data.referralCodes.map((e) => decodeReferralCode(e.code)),\r\n          referralTotalStats: res.data.referralTotalStats\r\n            ? {\r\n                volume: bigNumberify(res.data.referralTotalStats.volume),\r\n                discountUsd: bigNumberify(res.data.referralTotalStats.discountUsd),\r\n              }\r\n            : {\r\n                volume: bigNumberify(0),\r\n                discountUsd: bigNumberify(0),\r\n              },\r\n        });\r\n      })\r\n      .catch(console.warn)\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, [setData, chainId, account, ownerOnOtherChain]);\r\n\r\n  return {\r\n    data: data || null,\r\n    loading,\r\n  };\r\n}\r\n\r\nexport async function registerReferralCode(chainId, referralCode, library, opts) {\r\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\r\n  const referralCodeHex = encodeReferralCode(referralCode);\r\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, library.getSigner());\r\n  return callContract(chainId, contract, \"registerCode\", [referralCodeHex], opts);\r\n}\r\n\r\nexport async function setTraderReferralCodeByUser(chainId, referralCode, library, opts) {\r\n  const referralCodeHex = encodeReferralCode(referralCode);\r\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\r\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, library.getSigner());\r\n  const codeOwner = await contract.codeOwners(referralCodeHex);\r\n  if (isAddressZero(codeOwner)) {\r\n    const errorMsg = \"Referral code does not exist\";\r\n    helperToast.error(errorMsg);\r\n    return Promise.reject(errorMsg);\r\n  }\r\n  return callContract(chainId, contract, \"setTraderReferralCodeByUser\", [referralCodeHex], opts);\r\n}\r\n\r\nexport async function getReferralCodeOwner(chainId, referralCode) {\r\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\r\n  const provider = getProvider(null, chainId);\r\n  const contract = new ethers.Contract(referralStorageAddress, ReferralStorage.abi, provider);\r\n  const codeOwner = await contract.codeOwners(referralCode);\r\n  return codeOwner;\r\n}\r\n\r\nexport function useUserReferralCode(library, chainId, account) {\r\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\r\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\r\n  const { data: onChainCode } = useSWR(\r\n    account && [\"ReferralStorage\", chainId, referralStorageAddress, \"traderReferralCodes\", account],\r\n    { fetcher: fetcher(library, ReferralStorage) }\r\n  );\r\n  const { data: localStorageCodeOwner } = useSWR(\r\n    localStorageCode &&\r\n      REGEX_VERIFY_BYTES32.test(localStorageCode) && [\r\n        \"ReferralStorage\",\r\n        chainId,\r\n        referralStorageAddress,\r\n        \"codeOwners\",\r\n        localStorageCode,\r\n      ],\r\n    { fetcher: fetcher(library, ReferralStorage) }\r\n  );\r\n  const [attachedOnChain, userReferralCode, userReferralCodeString] = useMemo(() => {\r\n    if (onChainCode && !isHashZero(onChainCode)) {\r\n      return [true, onChainCode, decodeReferralCode(onChainCode)];\r\n    } else if (localStorageCodeOwner && !isAddressZero(localStorageCodeOwner)) {\r\n      return [false, localStorageCode, decodeReferralCode(localStorageCode)];\r\n    }\r\n    return [false];\r\n  }, [localStorageCode, localStorageCodeOwner, onChainCode]);\r\n\r\n  return {\r\n    userReferralCode,\r\n    userReferralCodeString,\r\n    attachedOnChain,\r\n  };\r\n}\r\n\r\nexport function useReferrerTier(library, chainId, account) {\r\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\r\n  const { data: referrerTier, mutate: mutateReferrerTier } = useSWR(\r\n    account && [`ReferralStorage:referrerTiers`, chainId, referralStorageAddress, \"referrerTiers\", account],\r\n    {\r\n      fetcher: fetcher(library, ReferralStorage),\r\n    }\r\n  );\r\n  return {\r\n    referrerTier,\r\n    mutateReferrerTier,\r\n  };\r\n}\r\n\r\nexport function useCodeOwner(library, chainId, account, code) {\r\n  const referralStorageAddress = getContract(chainId, \"ReferralStorage\");\r\n  const { data: codeOwner, mutate: mutateCodeOwner } = useSWR(\r\n    account && code && [`ReferralStorage:codeOwners`, chainId, referralStorageAddress, \"codeOwners\", code],\r\n    {\r\n      fetcher: fetcher(library, ReferralStorage),\r\n    }\r\n  );\r\n  return {\r\n    codeOwner,\r\n    mutateCodeOwner,\r\n  };\r\n}\r\n\r\nexport async function validateReferralCodeExists(referralCode, chainId) {\r\n  const referralCodeBytes32 = encodeReferralCode(referralCode);\r\n  const referralCodeOwner = await getReferralCodeOwner(chainId, referralCodeBytes32);\r\n  return !isAddressZero(referralCodeOwner);\r\n}\r\n\r\nexport function useAffiliateCodes(chainId, account) {\r\n  const [affiliateCodes, setAffiliateCodes] = useState({ code: null, success: false });\r\n  const query = gql`\r\n    query userReferralCodes($account: String!) {\r\n      referrerTotalStats: referrerStats(\r\n        first: 1000\r\n        orderBy: volume\r\n        orderDirection: desc\r\n        where: { period: total, referrer: $account }\r\n      ) {\r\n        referralCode\r\n      }\r\n    }\r\n  `;\r\n  useEffect(() => {\r\n    if (!chainId) return;\r\n    getGraphClient(chainId)\r\n      .query({ query, variables: { account: account?.toLowerCase() } })\r\n      .then((res) => {\r\n        const parsedAffiliateCodes = res?.data?.referrerTotalStats.map((c) => decodeReferralCode(c?.referralCode));\r\n        setAffiliateCodes({ code: parsedAffiliateCodes[0], success: true });\r\n      });\r\n    return () => {\r\n      setAffiliateCodes({ code: null, success: false });\r\n    };\r\n  }, [chainId, query, account]);\r\n  return affiliateCodes;\r\n}\r\n","import { getNativeToken } from \"../../config/Tokens\";\r\nimport { ethers } from \"ethers\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport { TokenInfo, Token } from \"../../domain/tokens/types\";\r\nimport { get1InchSwapUrl } from \"../../domain/common\";\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\ntype Props = {\r\n  chainId: number;\r\n  modalError: string;\r\n  isShort: boolean;\r\n  isLong: boolean;\r\n  fromToken: Token;\r\n  toToken: Token;\r\n  shortCollateralToken: TokenInfo;\r\n  setModalError: () => void;\r\n};\r\n\r\nexport default function NoLiquidityErrorModal({\r\n  chainId,\r\n  fromToken,\r\n  toToken,\r\n  shortCollateralToken,\r\n  isLong,\r\n  isShort,\r\n  modalError,\r\n  setModalError,\r\n}: Props) {\r\n  const nativeToken = getNativeToken(chainId);\r\n  const inputCurrency = fromToken.address === AddressZero ? nativeToken.symbol : fromToken.address;\r\n  let outputCurrency;\r\n  if (isLong) {\r\n    outputCurrency = toToken.address === AddressZero ? nativeToken.symbol : toToken.address;\r\n  } else {\r\n    outputCurrency = shortCollateralToken.address;\r\n  }\r\n  const swapTokenSymbol = isLong ? toToken.symbol : shortCollateralToken.symbol;\r\n  const oneInchSwapUrl = get1InchSwapUrl(chainId, inputCurrency, outputCurrency);\r\n  const label =\r\n    modalError === \"BUFFER\" ? `${shortCollateralToken.symbol} Required` : `${fromToken.symbol} Pool Capacity Reached`;\r\n\r\n  return (\r\n    <Modal isVisible={Boolean(modalError)} setIsVisible={setModalError} label={label} isNifty={true} className=\"Error-modal font-base\">\r\n      <div className=\"Modal__text\">\r\n        <div>\r\n          You need to select {swapTokenSymbol} as the \"Pay\" token to use it for collateral to initiate this trade.\r\n        </div>\r\n        <br />\r\n        <div>\r\n          As there is not enough liquidity in GLP to swap {fromToken.symbol} to {swapTokenSymbol}, you can use the option\r\n          below to do so:\r\n        </div>\r\n        <br />\r\n\r\n        <a className=\"Modal__link\" href={oneInchSwapUrl} target=\"_blank\" rel=\"noreferrer\">\r\n          Buy {swapTokenSymbol} on 1inch\r\n        </a>\r\n\r\n        {isShort && (\r\n          <div>\r\n            Alternatively you can select a different \"Collateral In\" token.\r\n            <br />\r\n            <br />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport cx from 'classnames';\r\n\r\nconst Modal = (props) => {\r\n\tconst {\r\n\t\tchildren, \r\n\t\tclassName, \r\n\t\tvisible, \r\n\t\tsetVisible, \r\n\t\tresetModal, \r\n\t\tisObligatory\r\n\t} = props;\r\n\t\r\n\tconst classes = cx('modal', className, visible && 'active');\r\n\r\n\tuseEffect(() => {\r\n\t\tif (resetModal && !visible) {\r\n\t\t\tresetModal();\r\n\t\t}\r\n\t}, [visible]);\r\n\r\n\tconst closeModal = () => {\r\n\t\tif (isObligatory) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tsetVisible(false);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className={classes} onMouseDown={closeModal}>\r\n\t\t\t<div className=\"modal__content-wrapper\">\r\n\t\t\t\t<div className=\"modal__content\" onMouseDown={e => e.stopPropagation()}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{!isObligatory && \r\n\t\t\t\t<button className=\"close-btn\" onClick={closeModal}></button>}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Modal;","// Common\r\nexport const HOMEPAGE_HREF = \"/perpetuals\";\r\nexport const DDL_WALLET = \"0x683Ad8b899Cd14d8e077c9A623E8B3fEd65a8c09\";\r\nexport const DDL_WALLET_ENCODED = '0'.repeat(64 - DDL_WALLET.length + 2) + DDL_WALLET.split('0x')[1];\r\n\r\n\r\nexport const BORDER_COEF = 0.01;\r\nexport const APY = '10.00%';\r\n\r\nexport const marketsList = [\r\n  {\r\n    name: 'GMX',\r\n  },\r\n  {\r\n    name: 'GNS',\r\n  },\r\n];\r\n\r\nexport const GNS_FEES_MULTIPLIER = 0.0008;\r\n\r\n\r\n// Options constants\r\nexport const OPTIONS_DECIMALS = 18;\r\nexport const OPTION_LIST_FRONTIER = 30;\r\nexport const marketsOptions = ['Hegic', 'Lyra', 'Premia'];\r\n\r\nexport const PremiaStrikeRangeMultiplier = {\r\n  Call: [0.8, 2],\r\n  Put: [0.5, 1.2],\r\n}\r\n\r\nexport const tokenDecimals = {\r\n  ETH: 18,\r\n  BTC: 8\r\n}\r\n\r\nexport const OPTION_TYPES = {\r\n  Hegic: \"American\",\r\n  Lyra: \"European\",\r\n  Premia: \"American\",\r\n}\r\n\r\n\r\nexport const MAX_FRACTION_LENGTH = 6;","import React, { useState } from 'react';\r\nimport Modal from './Modal';\r\nimport './ChooseMarketModal.scss';\r\nimport { marketsList } from '../../utils/constants';\r\n\r\nconst ChooseMarketModal = (props) => {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tsetVisible,\r\n\t\tsetMarkets,\r\n\t\tmarkets,\r\n\t\tliqs,\r\n\t} = props;\r\n\r\n\r\n\tconst [draftMarkets, setDraftMarkets] = useState(markets);\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName=\"ChooseMarket\"\r\n\t\t\tvisible={visible}\r\n\t\t\tsetVisible={setVisible}\r\n\t\t\tresetModal={() => {\r\n\t\t\t\tif (draftMarkets.length) {\r\n\t\t\t\t\tsetMarkets(draftMarkets.slice());\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetMarkets(marketsList.slice());\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<h1 className=\"ChooseMarket__title modal__title\">\r\n\t\t\t\tChoose Markets\r\n\t\t\t</h1>\r\n\t\t\t<div className=\"ChooseMarket__items\">\r\n\t\t\t\t{\r\n\t\t\t\t\tmarketsList.map(market => {\r\n\t\t\t\t\t\tconst icon = require(`../../../img/icon-${market.name}.svg`).default;\r\n\t\t\t\t\t\tif (!liqs) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst liqInfo = liqs[market.name];\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"ChooseMarket__item App-box\"\r\n\t\t\t\t\t\t\t\tkey={market.name}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"ChooseMarket__item-header\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"ChooseMarket__item-name\">\r\n\t\t\t\t\t\t\t\t\t\t<img src={icon ?? ''} alt={market.name + \" Icon\"} />\r\n\t\t\t\t\t\t\t\t\t\t{market.name}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"ChooseMarket__item-checkbox input-container\">\r\n\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \r\n\t\t\t\t\t\t\t\t\t\t\tdefaultChecked={!!draftMarkets?.find((el) => el.name === market.name)}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdraftMarkets.push(market);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst index = draftMarkets.findIndex(el => el.name === market.name);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdraftMarkets.splice(index, 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"ChooseMarket__item-info text-table\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"text-table__row\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-table__left\">\r\n\t\t\t\t\t\t\t\t\t\t\tAvailable Liquidity\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-table__right\">\r\n\t\t\t\t\t\t\t\t\t\t\t${liqInfo?.formattedValue}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<button \r\n\t\t\t\tclassName=\"ChooseMarket__btn btn btn_hlight\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tif (draftMarkets.length) {\r\n\t\t\t\t\t\tsetMarkets(draftMarkets.slice());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetMarkets(marketsList.slice());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetVisible(false);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\tConfirm market\r\n\t\t\t</button>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ChooseMarketModal;","export const GNS_PAIRS = {\r\n\tBTC: 0,\r\n\tETH: 1,\r\n\tLINK: 2,\r\n\tUNI: 17,\r\n};\r\nexport const WEI_DECIMALS = 18;","import React, { useState } from 'react';\r\nimport { formatForContract } from '../../utils/math';\r\nimport Modal from './Modal';\r\nimport { formatAmount, USD_DECIMALS } from './../../../views/gmx-test/lib/legacy';\r\nimport NumberInput_v3 from './../input/NumberInput_v3';\r\n\r\nconst SLTPModal = (props) => {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tsetVisible,\r\n\t\tisTP,\r\n\t\tonApply,\r\n\t\ttitle,\r\n\t\tbtnText,\r\n\t\tposition,\r\n\t} = props;\r\n\r\n\tconst [value, setValue] = useState('');\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n\tconst getError = () => {\r\n\t\tif (!position) {\r\n\t\t\treturn btnText;\r\n\t\t}\r\n\r\n\t\tif (!value) {\r\n\t\t\treturn btnText;\r\n\t\t}\r\n\r\n\t\tif (isSubmitting) {\r\n\t\t\treturn btnText;\r\n\t\t}\r\n\t\t\r\n\t\tconst isLong = position.isLong;\r\n\t\tconst price = Number(formatAmount(position.markPrice, 20, 0, 0));\r\n\t\tconst val = formatForContract(value, 10);\r\n\r\n\t\tif (val === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!isTP) {\r\n      if ((isLong && val > price) || (!isLong && val < price)) {\r\n        return `${isLong ? 'Long' : 'Short'} SL can't be ${isLong ? 'greater' : 'less'} than mark price.`;\r\n      }\r\n    }\r\n    if (isTP) {\r\n      if ((isLong && val < price) || (!isLong && val > price)) {\r\n        return `${isLong ? 'Long' : 'Short'} TP can't be ${isLong ? 'less' : 'greater'} than mark price.`;\r\n      }\r\n    }\r\n\t}\r\n\r\n\tconst getBtnText = () => {\r\n\t\tconst error = getError();\r\n\t\tif (error) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\r\n\t\treturn btnText;\r\n\t}\r\n\tconst isBtnEnabled = () => {\r\n\t\tconst hasError = Boolean(getError());\r\n\t\t\r\n\t\tif (hasError) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName=\"SLTP\"\r\n\t\t\tvisible={visible}\r\n\t\t\tsetVisible={setVisible}\r\n\t\t\tresetModal={() => setValue('')}\r\n\t\t>\r\n\t\t\t<h1 className=\"modal__title\">{title}</h1>\r\n\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t<NumberInput_v3\r\n\t\t\t\t\ttitle='Price'\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tsetValue={setValue}\r\n\t\t\t\t\tdisplayValue={formatAmount(position?.markPrice, USD_DECIMALS, 2, true)}\r\n\t\t\t\t\tdisplayValueTitle={'Mark'}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"text-inline\">\r\n\t\t\t\t\t<p style={{fontSize: 15, lineHeight: 19.5/15}}>\r\n\t\t\t\t\t\tTo remove, set the value to 0\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button \r\n\t\t\t\t\tclassName=\"SLTP__btn modal__btn btn btn_hlight\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetIsSubmitting(true);\r\n\t\t\t\t\t\tonApply(value, setIsSubmitting);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdisabled={!isBtnEnabled()}\r\n\t\t\t\t>\r\n\t\t\t\t\t{getBtnText()}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default SLTPModal;","import React, { useState } from 'react';\r\nimport './Selector.scss';\r\nimport cx from 'classnames';\r\n\r\nconst Selector = (props) => {\r\n\tconst {\r\n\t\titems,\r\n\t\tchosenItem,\r\n\t\tonSelect,\r\n\t} = props;\r\n\r\n\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\tconst cls = cx(\"Selector\", isOpen && 'open');\r\n\r\n\tconst openSelector = (e) => {\r\n\t\tif (isOpen) {\r\n\t\t\tcloseSelector();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\te.stopPropagation();\r\n\t\tdocument.addEventListener('click', closeSelector);\r\n\t\tsetIsOpen(true);\r\n\t}\r\n\tconst closeSelector = () => {\r\n\t\tdocument.removeEventListener('click', closeSelector);\r\n\t\tsetIsOpen(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={cls}>\r\n\t\t\t<button\r\n\t\t\t\tclassName=\"Selector__chosen-item\"\r\n\t\t\t\tonClick={openSelector}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"Selector__chosen-item-info icon-container\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\tchosenItem &&\r\n\t\t\t\t\t\t\t\trequire(`../../../img/icon-${chosenItem}.svg`).default\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\talt={`${chosenItem} icon`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{chosenItem}\r\n\t\t\t\t</div>\r\n\t\t\t\t<img className=\"icon-down\" src={\r\n\t\t\t\t\trequire(`../../../img/icon-down-small-white.svg`).default\r\n\t\t\t\t} alt=\"chevron down\" />\r\n\t\t\t</button>\r\n\t\t\t<div className=\"Selector__items\">\r\n\t\t\t\t{items.map(item => {\r\n\t\t\t\t\tif (item === chosenItem) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"Selector__item icon-container\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tonSelect(item);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\titem &&\r\n\t\t\t\t\t\t\t\t\t\trequire(`../../../img/icon-${item}.svg`).default\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\talt={`${item} icon`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{item}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Selector;","import React, { useEffect, useMemo, useState } from \"react\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport { t, Trans } from \"@lingui/macro\";\r\nimport Slider, { SliderTooltip } from \"rc-slider\";\r\nimport \"rc-slider/assets/index.css\";\r\nimport \"./SwapBox.scss\";\r\n\r\nimport cx from \"classnames\";\r\nimport useSWR from \"swr\";\r\nimport { ethers } from \"ethers\";\r\n\r\nimport { IoMdSwap } from \"react-icons/io\";\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\nimport { BigNumber } from \"ethers\";\r\nimport { notifySuccess, errAlert } from '../../../../components/utils/notifications';\r\n\r\nimport {\r\n  adjustForDecimals,\r\n  approveTokens,\r\n  ARBITRUM,\r\n  AVALANCHE,\r\n  BASIS_POINTS_DIVISOR,\r\n  bigNumberify,\r\n  calculatePositionDelta,\r\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\r\n  DUST_BNB,\r\n  expandDecimals,\r\n  formatAmount,\r\n  formatAmountFree,\r\n  getChainName,\r\n  getExchangeRate,\r\n  getExchangeRateDisplay,\r\n  getLeverage,\r\n  getLiquidationPrice,\r\n  getMostAbundantStableToken,\r\n  getNextFromAmount,\r\n  getNextToAmount,\r\n  getPositionKey,\r\n  getTokenInfo,\r\n  getUsd,\r\n  helperToast,\r\n  IS_NETWORK_DISABLED,\r\n  isSupportedChain,\r\n  isTriggerRatioInverted,\r\n  LEVERAGE_ORDER_OPTIONS,\r\n  LIMIT,\r\n  LONG,\r\n  MARGIN_FEE_BASIS_POINTS,\r\n  MARKET,\r\n  parseValue,\r\n  PRECISION,\r\n  replaceNativeTokenAddress,\r\n  SHORT,\r\n  shouldRaiseGasError,\r\n  STOP,\r\n  SWAP,\r\n  SWAP_OPTIONS,\r\n  SWAP_ORDER_OPTIONS,\r\n  USD_DECIMALS,\r\n  USDG_ADDRESS,\r\n  USDG_DECIMALS,\r\n  useLocalStorageByChainId,\r\n  useLocalStorageSerializeKey,\r\n  usePrevious,\r\n  MAX_ALLOWED_LEVERAGE,\r\n} from \"../../lib/legacy\";\r\nimport { getConstant } from \"../../config/chains\";\r\nimport * as Api from \"../../domain/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nimport Tab from \"../Tab/Tab\";\r\nimport TokenSelector from \"./TokenSelector\";\r\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\r\nimport ConfirmationBox from \"./ConfirmationBox\";\r\n\r\nimport { getToken, getTokenBySymbol, getTokens, getWhitelistedTokens } from \"../../config/Tokens\";\r\nimport PositionRouter from \"../../abis/PositionRouter.json\";\r\nimport Router from \"../../abis/Router.json\";\r\nimport Token from \"../../abis/Token.json\";\r\nimport WETH from \"../../abis/WETH.json\";\r\n\r\nimport longImg from \"../../img/ddl/long.svg\";\r\nimport shortImg from \"../../img/ddl/short.svg\";\r\nimport swapImg from \"../../img/swap.svg\";\r\nimport longActiveImg from \"../../img/ddl/long_active.svg\";\r\nimport shortActiveImg from \"../../img/ddl/short_active.svg\";\r\n\r\nimport { useUserReferralCode } from \"../../domain/referrals\";\r\nimport NoLiquidityErrorModal from \"./NoLiquidityErrorModal\";\r\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\r\nimport { fetcher } from \"../../lib/contracts/fetcher\";\r\nimport { callContract } from \"../../lib/contracts/callContract\";\r\nimport icon_settings from '../../../../img/icon-settings.svg';\r\nimport ChooseMarketModal from './../../../../components/UI/modal/ChooseMarketModal';\r\nimport { separateThousands } from './../../../../components/utils/sepThousands';\r\nimport { floor, formatForContract } from './../../../../components/utils/math';\r\nimport GNS_Storage from '../../abis/GNS/GNS_Storage.json';\r\nimport GNS_Trading from '../../abis/GNS/GNS_Trading.json';\r\nimport { GNS_PAIRS, WEI_DECIMALS } from './../../lib/GNS_legacy';\r\nimport { DEFAULT_SLIPPAGE_AMOUNT } from './../../lib/legacy';\r\nimport SLTPModal from './../../../../components/UI/modal/SLTPModal';\r\nimport { signer } from './../../../../components/utils/providers';\r\nimport { USDC } from '../../../../components/utils/contracts';\r\nimport { marketsList } from \"../../../../components/utils/constants\";\r\nimport Selector from './../../../../components/UI/Selector/Selector';\r\n\r\nconst SWAP_ICONS = {\r\n  [LONG]: longImg,\r\n  [SHORT]: shortImg,\r\n  [SWAP]: swapImg,\r\n  Long_active: longActiveImg,\r\n  Short_active: shortActiveImg,\r\n};\r\nconst { AddressZero } = ethers.constants;\r\n\r\nconst leverageSliderHandle = (props) => {\r\n  const { value, dragging, index, ...restProps } = props;\r\n  return (\r\n    <SliderTooltip\r\n      prefixCls=\"rc-slider-tooltip\"\r\n      overlay={`${value}`}\r\n      visible={dragging}\r\n      placement=\"top\"\r\n      key={index}\r\n    >\r\n      <Slider.Handle value={value} {...restProps} />\r\n    </SliderTooltip>\r\n  );\r\n};\r\n\r\nfunction getNextAveragePrice({ size, sizeDelta, hasProfit, delta, nextPrice, isLong }) {\r\n  if (!size || !sizeDelta || !delta || !nextPrice) {\r\n    return;\r\n  }\r\n  const nextSize = size.add(sizeDelta);\r\n  let divisor;\r\n  if (isLong) {\r\n    divisor = hasProfit ? nextSize.add(delta) : nextSize.sub(delta);\r\n  } else {\r\n    divisor = hasProfit ? nextSize.sub(delta) : nextSize.add(delta);\r\n  }\r\n  if (!divisor || divisor.eq(0)) {\r\n    return;\r\n  }\r\n  const nextAveragePrice = nextPrice.mul(nextSize).div(divisor);\r\n  return nextAveragePrice;\r\n}\r\n\r\nexport default function SwapBox(props) {\r\n  const {\r\n    positions,\r\n    pendingPositions,\r\n    setPendingPositions,\r\n    infoTokens,\r\n    active,\r\n    library,\r\n    account,\r\n    fromTokenAddress,\r\n    setFromTokenAddress,\r\n    toTokenAddress,\r\n    setToTokenAddress,\r\n    swapOption,\r\n    setSwapOption,\r\n    positionsMap,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n    tokenSelection,\r\n    setTokenSelection,\r\n    setIsConfirming,\r\n    isConfirming,\r\n    isPendingConfirmation,\r\n    setIsPendingConfirmation,\r\n    flagOrdersEnabled,\r\n    chainId,\r\n    nativeTokenAddress,\r\n    savedSlippageAmount,\r\n    totalTokenWeights,\r\n    usdgSupply,\r\n    orders,\r\n    savedIsPnlInLeverage,\r\n    orderBookApproved,\r\n    positionRouterApproved,\r\n    isWaitingForPluginApproval,\r\n    approveOrderBook,\r\n    approvePositionRouter,\r\n    setIsWaitingForPluginApproval,\r\n    isWaitingForPositionRouterApproval,\r\n    setIsWaitingForPositionRouterApproval,\r\n    isPluginApproving,\r\n    isPositionRouterApproving,\r\n    savedShouldDisableValidationForTesting,\r\n    minExecutionFee,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n    pendingPositionsGNS,\r\n    setPendingPositionsGNS,\r\n  } = props;\r\n\r\n  \r\n\r\n  const [fromValue, setFromValue] = useState(\"\");\r\n  const [toValue, setToValue] = useState(\"\");\r\n  const [anchorOnFromAmount, setAnchorOnFromAmount] = useState(true);\r\n  const [isApproving, setIsApproving] = useState(false);\r\n  const [isWaitingForApproval, setIsWaitingForApproval] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [modalError, setModalError] = useState(false);\r\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\r\n  const { attachedOnChain, userReferralCode } = useUserReferralCode(library, chainId, account);\r\n\r\n  const [userSlippage, setUserSlippage] = useState(DEFAULT_SLIPPAGE_AMOUNT / 100);\r\n  const allowedSlippage = userSlippage ? userSlippage * 100 : DEFAULT_SLIPPAGE_AMOUNT;\r\n\r\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\r\n  // TODO hack with useLocalStorageSerializeKey\r\n  const [shortCollateralAddress, setShortCollateralAddress] = useLocalStorageByChainId(\r\n    chainId,\r\n    \"Short-Collateral-Address\",\r\n    getTokenBySymbol(chainId, defaultCollateralSymbol).address\r\n  );\r\n  \r\n  const isLong = swapOption === LONG;\r\n  const isShort = swapOption === SHORT;\r\n  const isSwap = swapOption === SWAP;\r\n\r\n  const getLeaderboardLink = () => {\r\n    if (chainId === ARBITRUM) {\r\n      return \"https://www.gmx.house/arbitrum/leaderboard\";\r\n    }\r\n    if (chainId === AVALANCHE) {\r\n      return \"https://www.gmx.house/avalanche/leaderboard\";\r\n    }\r\n    return \"https://www.gmx.house\";\r\n  };\r\n\r\n  function getTokenLabel() {\r\n    switch (true) {\r\n      case isLong:\r\n        return t`Long`;\r\n      case isShort:\r\n        return t`Short`;\r\n      case isSwap:\r\n        return t`Receive`;\r\n      default:\r\n        return \"\";\r\n    }\r\n  }\r\n  const [leverageOption, setLeverageOption] = useLocalStorageSerializeKey(\r\n    [chainId, \"Exchange-swap-leverage-option\"],\r\n    \"2\"\r\n  );\r\n  const [isLeverageSliderEnabled, setIsLeverageSliderEnabled] = useLocalStorageSerializeKey(\r\n    [chainId, \"Exchange-swap-leverage-slider-enabled\"],\r\n    true\r\n  );\r\n\r\n\r\n  const hasLeverageOption = isLeverageSliderEnabled && !isNaN(parseFloat(leverageOption));\r\n\r\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\r\n\r\n  // Market/Limit orders disabling\r\n  let [orderOption, setOrderOption] = useLocalStorageSerializeKey([chainId, \"Order-option\"], MARKET);\r\n  \r\n  if (!flagOrdersEnabled) {\r\n    orderOption = MARKET;\r\n  }\r\n\r\n  const onOrderOptionChange = (option) => {\r\n    setOrderOption(option);\r\n  };\r\n\r\n  const isMarketOrder = orderOption === MARKET;\r\n\r\n  \r\n  const orderOptions = isSwap ? SWAP_ORDER_OPTIONS : LEVERAGE_ORDER_OPTIONS;\r\n  const orderOptionLabels = { [STOP]: \"Trigger\" };\r\n\r\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\r\n  const triggerPriceUsd = isMarketOrder ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\r\n\r\n  const onTriggerPriceChange = (evt) => {\r\n    setTriggerPriceValue(evt.target.value || \"\");\r\n  };\r\n\r\n  const onTriggerRatioChange = (evt) => {\r\n    setTriggerRatioValue(evt.target.value || \"\");\r\n  };\r\n\r\n  let positionKey;\r\n  if (isLong) {\r\n    positionKey = getPositionKey(account, toTokenAddress, toTokenAddress, true, nativeTokenAddress);\r\n  }\r\n  if (isShort) {\r\n    positionKey = getPositionKey(account, shortCollateralAddress, toTokenAddress, false, nativeTokenAddress);\r\n  }\r\n\r\n  const existingPosition = positionKey ? positionsMap[positionKey] : undefined;\r\n  const hasExistingPosition = existingPosition && existingPosition.size && existingPosition.size.gt(0);\r\n\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n  \r\n  // Tokens control\r\n  const tokens = getTokens(chainId);\r\n  const fromTokens = tokens;\r\n\r\n  const stableTokens = tokens.filter((token) => token.isStable);\r\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\r\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\r\n\r\n  let toTokens = tokens;\r\n  if (isLong) {\r\n    toTokens = indexTokens;\r\n  }\r\n  if (isShort) {\r\n    toTokens = shortableTokens;\r\n  }\r\n\r\n  const needOrderBookApproval = !isMarketOrder && !orderBookApproved;\r\n  const prevNeedOrderBookApproval = usePrevious(needOrderBookApproval);\r\n\r\n  const needPositionRouterApproval = (isLong || isShort) && isMarketOrder && !positionRouterApproved;\r\n  const prevNeedPositionRouterApproval = usePrevious(needPositionRouterApproval);\r\n\r\n  useEffect(() => {\r\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\r\n      setIsWaitingForPluginApproval(false);\r\n      helperToast.success(<div>Orders enabled!</div>);\r\n    }\r\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\r\n\r\n  useEffect(() => {\r\n    if (!needPositionRouterApproval && prevNeedPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      setIsWaitingForPositionRouterApproval(false);\r\n      helperToast.success(<div>Leverage enabled!</div>);\r\n    }\r\n  }, [\r\n    needPositionRouterApproval,\r\n    prevNeedPositionRouterApproval,\r\n    setIsWaitingForPositionRouterApproval,\r\n    isWaitingForPositionRouterApproval,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!needOrderBookApproval && prevNeedOrderBookApproval && isWaitingForPluginApproval) {\r\n      setIsWaitingForPluginApproval(false);\r\n      helperToast.success(<div>Orders enabled!</div>);\r\n    }\r\n  }, [needOrderBookApproval, prevNeedOrderBookApproval, setIsWaitingForPluginApproval, isWaitingForPluginApproval]);\r\n\r\n  const routerAddress = getContract(chainId, \"Router\");\r\n  const tokenAllowanceAddress = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\r\n  const { data: tokenAllowance } = useSWR(\r\n    active && [active, chainId, tokenAllowanceAddress, \"allowance\", account, routerAddress],\r\n    {\r\n      fetcher: fetcher(library, Token),\r\n    }\r\n  );\r\n  const { data: tokenAllowanceGNS } = useSWR(\r\n    active && [active, chainId, tokenAllowanceAddress, \"allowance\", account, GNS_Storage.address],\r\n    {\r\n      fetcher: fetcher(library, Token),\r\n    }\r\n  );\r\n\r\n  \r\n  const { data: hasOutdatedUi } = Api.useHasOutdatedUi();\r\n  \r\n  const fromToken = getToken(chainId, fromTokenAddress);\r\n  const toToken = getToken(chainId, toTokenAddress);\r\n  const shortCollateralToken = getTokenInfo(infoTokens, shortCollateralAddress);\r\n\r\n  const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  const renderAvailableLongLiquidity = () => {\r\n    if (!isLong) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"Exchange-info-row\">\r\n        <div className=\"Exchange-info-label\">\r\n          <Trans>Available Liquidity</Trans>\r\n        </div>\r\n        <div className=\"align-right\">\r\n          <Tooltip\r\n            handle={`$${formatAmount(toTokenInfo.maxAvailableLong, USD_DECIMALS, 2, true)}`}\r\n            position=\"right-bottom\"\r\n            renderContent={() => {\r\n              return (\r\n                <>\r\n                  <StatsTooltipRow\r\n                    label={`Max ${toTokenInfo.symbol} long capacity`}\r\n                    value={formatAmount(toTokenInfo.maxLongCapacity, USD_DECIMALS, 0, true)}\r\n                  />\r\n                  <StatsTooltipRow\r\n                    label={`Current ${toTokenInfo.symbol} long`}\r\n                    value={formatAmount(toTokenInfo.guaranteedUsd, USD_DECIMALS, 0, true)}\r\n                  />\r\n                </>\r\n              );\r\n            }}\r\n          ></Tooltip>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const { data: liquidityData, error: liquidityDataError } = useSWR(\r\n    active && [active, chainId, GNS_Storage.address, toTokenInfo, \"getLiquidityGNS\", account],\r\n    async () => {\r\n      const liqs = {};\r\n      const curPairSymbol = toTokenInfo.symbol;\r\n      \r\n      const GNS_contract = new ethers.Contract(GNS_Storage.address, GNS_Storage.abi, signer);\r\n      const GNS_PairIndex = GNS_PAIRS[toToken.symbol];\r\n      const GNS_Info = {\r\n        openInterest: await GNS_contract.openInterestDai(GNS_PairIndex, 0),\r\n        maxOpenInterest: await GNS_contract.openInterestDai(GNS_PairIndex, 2),\r\n      }\r\n      \r\n      marketsList.forEach(async (market) => {\r\n        let liq;\r\n        let symbol = curPairSymbol;\r\n\r\n        switch(market.name) {\r\n          case 'GMX':\r\n            if (isLong) {\r\n              liq = toTokenInfo.maxAvailableLong / 10**USD_DECIMALS;\r\n            } else {\r\n              liq = toTokenInfo.maxAvailableShort / 10**USD_DECIMALS;\r\n            }\r\n\r\n            symbol = '';\r\n            break;\r\n          case 'GNS':\r\n            liq = Number(\r\n              (GNS_Info.maxOpenInterest?.sub(GNS_Info.openInterest) + '0'.repeat(12)) / 10**USD_DECIMALS\r\n            );\r\n            \r\n            break;\r\n          default:\r\n            return;\r\n        }\r\n\r\n        liqs[market.name] = {\r\n          value: liq,\r\n          formattedValue: separateThousands(floor(liq)),\r\n          symbol,\r\n        }\r\n      })\r\n      \r\n      return liqs;\r\n    }\r\n  );\r\n  const [liquidity, setLiquidity] = useState(null);\r\n  useEffect(() => {\r\n    if (!liquidityData) {\r\n      return;\r\n    }\r\n    \r\n    setLiquidity(liquidityData);\r\n  }, [liquidityData]);\r\n\r\n  const [markets, setMarkets] = useLocalStorageSerializeKey([chainId, \"Terminal-Markets\"], marketsList.slice());\r\n  \r\n  \r\n  // Modal functionality\r\n  const [modal, setModal] = useState('');\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n\r\n  const openModal = (name) => {\r\n    setModal(name);\r\n    setModalVisible(true);\r\n  }\r\n  \r\n  const renderModal = (position) => {\r\n    switch(modal) {\r\n      case 'Choose-Market':\r\n        return (\r\n          <ChooseMarketModal\r\n            visible={modalVisible}\r\n            setVisible={setModalVisible}\r\n            marketsList={marketsList}\r\n            markets={markets}\r\n            setMarkets={setMarkets}\r\n            liqs={liquidity}\r\n          />\r\n        )\r\n          \r\n      default:\r\n        return (\r\n          <></>\r\n        );\r\n    }\r\n  }\r\n\r\n  // Choosing Liquidity Source\r\n  const [suitableMarket, setSuitableMarket] = useState(null);\r\n  useEffect(() => {\r\n    if (!markets.length) {\r\n      setSuitableMarket(null);\r\n      return;\r\n    }\r\n    setSuitableMarket(markets.reduce((result, market) => {\r\n      if (!liquidity) {\r\n        return market;\r\n      }\r\n      if (liquidity[result.name]?.value > liquidity[market.name]?.value) {\r\n        return result;\r\n      }\r\n      return market;\r\n    }))\r\n  }, [markets]);\r\n\r\n  useEffect(() => {\r\n    if (suitableMarket?.name === 'GNS') {\r\n      setFromTokenAddress(isLong ? LONG : SHORT, getTokenBySymbol(chainId, 'DAI').address);\r\n    }\r\n  }, [suitableMarket]);\r\n\r\n  const onMarketSelect = (marketName) => {\r\n    setSuitableMarket(marketsList.find(market => market.name === marketName));\r\n  }\r\n\r\n  const fromBalance = fromTokenInfo ? fromTokenInfo.balance : bigNumberify(0);\r\n  const toBalance = toTokenInfo ? toTokenInfo.balance : bigNumberify(0);\r\n\r\n  const fromAmount = parseValue(fromValue, fromToken && fromToken.decimals);\r\n  const toAmount = parseValue(toValue, toToken && toToken.decimals);\r\n\r\n  const isPotentialWrap = (fromToken.isNative && toToken.isWrapped) || (fromToken.isWrapped && toToken.isNative);\r\n  const isWrapOrUnwrap = isSwap && isPotentialWrap;\r\n  const needApproval =\r\n    suitableMarket?.name === 'GMX' ?\r\n      (fromTokenAddress !== AddressZero &&\r\n      tokenAllowance &&\r\n      fromAmount &&\r\n      fromAmount.gt(tokenAllowance) &&\r\n      !isWrapOrUnwrap)\r\n    : (suitableMarket?.name === 'GNS' &&\r\n        (fromTokenAddress !== AddressZero &&\r\n          tokenAllowanceGNS &&\r\n          fromAmount &&\r\n          fromAmount.gt(tokenAllowanceGNS) &&\r\n          !isWrapOrUnwrap));\r\n\r\n  \r\n  const prevFromTokenAddress = usePrevious(fromTokenAddress);\r\n  const prevNeedApproval = usePrevious(needApproval);\r\n  const prevToTokenAddress = usePrevious(toTokenAddress);\r\n\r\n  const fromUsdMin = getUsd(fromAmount, fromTokenAddress, false, infoTokens);\r\n  const toUsdMax = getUsd(toAmount, toTokenAddress, true, infoTokens, orderOption, triggerPriceUsd);\r\n\r\n  const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\r\n  const collateralTokenAddress = isLong ? indexTokenAddress : shortCollateralAddress;\r\n  const collateralToken = getToken(chainId, collateralTokenAddress);\r\n\r\n  const [triggerRatioValue, setTriggerRatioValue] = useState(\"\");\r\n\r\n  const triggerRatioInverted = useMemo(() => {\r\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\r\n  }, [toTokenInfo, fromTokenInfo]);\r\n\r\n  const maxToTokenOut = useMemo(() => {\r\n    const value = toTokenInfo.availableAmount?.gt(toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount))\r\n      ? toTokenInfo.poolAmount?.sub(toTokenInfo.bufferAmount)\r\n      : toTokenInfo.availableAmount;\r\n\r\n    if (!value) {\r\n      return bigNumberify(0);\r\n    }\r\n\r\n    return value.gt(0) ? value : bigNumberify(0);\r\n  }, [toTokenInfo]);\r\n\r\n  const maxToTokenOutUSD = useMemo(() => {\r\n    return getUsd(maxToTokenOut, toTokenAddress, false, infoTokens);\r\n  }, [maxToTokenOut, toTokenAddress, infoTokens]);\r\n\r\n  const maxFromTokenInUSD = useMemo(() => {\r\n    const value = fromTokenInfo.maxUsdgAmount\r\n      ?.sub(fromTokenInfo.usdgAmount)\r\n      .mul(expandDecimals(1, USD_DECIMALS))\r\n      .div(expandDecimals(1, USDG_DECIMALS));\r\n\r\n    if (!value) {\r\n      return bigNumberify(0);\r\n    }\r\n\r\n    return value.gt(0) ? value : bigNumberify(0);\r\n  }, [fromTokenInfo]);\r\n\r\n  const maxFromTokenIn = useMemo(() => {\r\n    if (!fromTokenInfo.maxPrice) {\r\n      return bigNumberify(0);\r\n    }\r\n    return maxFromTokenInUSD?.mul(expandDecimals(1, fromTokenInfo.decimals)).div(fromTokenInfo.maxPrice).toString();\r\n  }, [maxFromTokenInUSD, fromTokenInfo]);\r\n\r\n  let maxSwapAmountUsd = bigNumberify(0);\r\n\r\n  if (maxToTokenOutUSD && maxFromTokenInUSD) {\r\n    maxSwapAmountUsd = maxToTokenOutUSD.lt(maxFromTokenInUSD) ? maxToTokenOutUSD : maxFromTokenInUSD;\r\n  }\r\n\r\n  const triggerRatio = useMemo(() => {\r\n    if (!triggerRatioValue) {\r\n      return bigNumberify(0);\r\n    }\r\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\r\n    if (ratio.eq(0)) {\r\n      return bigNumberify(0);\r\n    }\r\n    if (triggerRatioInverted) {\r\n      ratio = PRECISION.mul(PRECISION).div(ratio);\r\n    }\r\n    return ratio;\r\n  }, [triggerRatioValue, triggerRatioInverted]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      fromToken &&\r\n      fromTokenAddress === prevFromTokenAddress &&\r\n      !needApproval &&\r\n      prevNeedApproval &&\r\n      isWaitingForApproval\r\n    ) {\r\n      setIsWaitingForApproval(false);\r\n      helperToast.success(<div>{fromToken.symbol} approved!</div>);\r\n    }\r\n  }, [\r\n    fromTokenAddress,\r\n    prevFromTokenAddress,\r\n    needApproval,\r\n    prevNeedApproval,\r\n    setIsWaitingForApproval,\r\n    fromToken.symbol,\r\n    isWaitingForApproval,\r\n    fromToken,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (!toTokens.find((token) => token.address === toTokenAddress)) {\r\n      setToTokenAddress(swapOption, toTokens[0].address);\r\n    }\r\n  }, [swapOption, toTokens, toTokenAddress, setToTokenAddress]);\r\n\r\n  useEffect(() => {\r\n    if (swapOption !== SHORT) {\r\n      return;\r\n    }\r\n    if (toTokenAddress === prevToTokenAddress) {\r\n      return;\r\n    }\r\n    for (let i = 0; i < stableTokens.length; i++) {\r\n      const stableToken = stableTokens[i];\r\n      const key = getPositionKey(account, stableToken.address, toTokenAddress, false, nativeTokenAddress);\r\n      const position = positionsMap[key];\r\n      if (position && position.size && position.size.gt(0)) {\r\n        setShortCollateralAddress(position.collateralToken.address);\r\n        return;\r\n      }\r\n    }\r\n  }, [\r\n    account,\r\n    toTokenAddress,\r\n    prevToTokenAddress,\r\n    swapOption,\r\n    positionsMap,\r\n    stableTokens,\r\n    nativeTokenAddress,\r\n    shortCollateralAddress,\r\n    setShortCollateralAddress,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const updateSwapAmounts = () => {\r\n      if (anchorOnFromAmount) {\r\n        if (!fromAmount) {\r\n          setToValue(\"\");\r\n          return;\r\n        }\r\n        if (toToken) {\r\n          const { amount: nextToAmount } = getNextToAmount(\r\n            chainId,\r\n            fromAmount,\r\n            fromTokenAddress,\r\n            toTokenAddress,\r\n            infoTokens,\r\n            undefined,\r\n            !isMarketOrder && triggerRatio,\r\n            usdgSupply,\r\n            totalTokenWeights,\r\n            isSwap\r\n          );\r\n\r\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\r\n          setToValue(nextToValue);\r\n        }\r\n        return;\r\n      }\r\n\r\n      if (!toAmount) {\r\n        setFromValue(\"\");\r\n        return;\r\n      }\r\n      if (fromToken) {\r\n        const { amount: nextFromAmount } = getNextFromAmount(\r\n          chainId,\r\n          toAmount,\r\n          fromTokenAddress,\r\n          toTokenAddress,\r\n          infoTokens,\r\n          undefined,\r\n          !isMarketOrder && triggerRatio,\r\n          usdgSupply,\r\n          totalTokenWeights,\r\n          isSwap\r\n        );\r\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\r\n        setFromValue(nextFromValue);\r\n      }\r\n    };\r\n\r\n    const updateLeverageAmounts = () => {\r\n      if (!hasLeverageOption) {\r\n        return;\r\n      }\r\n      if (anchorOnFromAmount) {\r\n        if (!fromAmount) {\r\n          setToValue(\"\");\r\n          return;\r\n        }\r\n\r\n        const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\r\n        if (toTokenInfo && toTokenInfo.maxPrice && fromUsdMin && fromUsdMin.gt(0)) {\r\n          const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\r\n          const toTokenPriceUsd =\r\n            !isMarketOrder && triggerPriceUsd && triggerPriceUsd.gt(0) ? triggerPriceUsd : toTokenInfo.maxPrice;\r\n\r\n          const { feeBasisPoints } = getNextToAmount(\r\n            chainId,\r\n            fromAmount,\r\n            fromTokenAddress,\r\n            collateralTokenAddress,\r\n            infoTokens,\r\n            undefined,\r\n            undefined,\r\n            usdgSupply,\r\n            totalTokenWeights,\r\n            isSwap\r\n          );\r\n\r\n          let fromUsdMinAfterFee = fromUsdMin;\r\n          if (feeBasisPoints) {\r\n            fromUsdMinAfterFee = fromUsdMin.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n          }\r\n\r\n          const toNumerator = fromUsdMinAfterFee.mul(leverageMultiplier).mul(BASIS_POINTS_DIVISOR);\r\n          const toDenominator = bigNumberify(MARGIN_FEE_BASIS_POINTS)\r\n            .mul(leverageMultiplier)\r\n            .add(bigNumberify(BASIS_POINTS_DIVISOR).mul(BASIS_POINTS_DIVISOR));\r\n\r\n          const nextToUsd = toNumerator.div(toDenominator);\r\n\r\n          const nextToAmount = nextToUsd.mul(expandDecimals(1, toToken.decimals)).div(toTokenPriceUsd);\r\n\r\n          const nextToValue = formatAmountFree(nextToAmount, toToken.decimals, toToken.decimals);\r\n\r\n          setToValue(nextToValue);\r\n        }\r\n        return;\r\n      }\r\n\r\n      if (!toAmount) {\r\n        setFromValue(\"\");\r\n        return;\r\n      }\r\n\r\n      const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\r\n      if (fromTokenInfo && fromTokenInfo.minPrice && toUsdMax && toUsdMax.gt(0)) {\r\n        const leverageMultiplier = parseInt(leverageOption * BASIS_POINTS_DIVISOR);\r\n\r\n        const baseFromAmountUsd = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(leverageMultiplier);\r\n\r\n        let fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\r\n\r\n        const { feeBasisPoints } = getNextToAmount(\r\n          chainId,\r\n          fromAmount,\r\n          fromTokenAddress,\r\n          collateralTokenAddress,\r\n          infoTokens,\r\n          undefined,\r\n          undefined,\r\n          usdgSupply,\r\n          totalTokenWeights,\r\n          isSwap\r\n        );\r\n\r\n        if (feeBasisPoints) {\r\n          const swapFees = baseFromAmountUsd.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n          fees = fees.add(swapFees);\r\n        }\r\n\r\n        const nextFromUsd = baseFromAmountUsd.add(fees);\r\n\r\n        const nextFromAmount = nextFromUsd.mul(expandDecimals(1, fromToken.decimals)).div(fromTokenInfo.minPrice);\r\n\r\n        const nextFromValue = formatAmountFree(nextFromAmount, fromToken.decimals, fromToken.decimals);\r\n\r\n        setFromValue(nextFromValue);\r\n      }\r\n    };\r\n\r\n    if (isSwap) {\r\n      updateSwapAmounts();\r\n    }\r\n\r\n    if (isLong || isShort) {\r\n      updateLeverageAmounts();\r\n    }\r\n  }, [\r\n    anchorOnFromAmount,\r\n    fromAmount,\r\n    toAmount,\r\n    fromToken,\r\n    toToken,\r\n    fromTokenAddress,\r\n    toTokenAddress,\r\n    infoTokens,\r\n    isSwap,\r\n    isLong,\r\n    isShort,\r\n    leverageOption,\r\n    fromUsdMin,\r\n    toUsdMax,\r\n    isMarketOrder,\r\n    triggerPriceUsd,\r\n    triggerRatio,\r\n    hasLeverageOption,\r\n    usdgSupply,\r\n    totalTokenWeights,\r\n    chainId,\r\n    collateralTokenAddress,\r\n    indexTokenAddress,\r\n  ]);\r\n\r\n  let entryMarkPrice;\r\n  let exitMarkPrice;\r\n  if (toTokenInfo) {\r\n    entryMarkPrice = swapOption === LONG ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\r\n    exitMarkPrice = swapOption === LONG ? toTokenInfo.minPrice : toTokenInfo.maxPrice;\r\n  }\r\n\r\n  let leverage = bigNumberify(0);\r\n  if (fromUsdMin && toUsdMax && fromUsdMin.gt(0)) {\r\n    const fees = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\r\n    if (fromUsdMin.sub(fees).gt(0)) {\r\n      leverage = toUsdMax.mul(BASIS_POINTS_DIVISOR).div(fromUsdMin.sub(fees));\r\n    }\r\n  }\r\n\r\n  let nextAveragePrice = isMarketOrder ? entryMarkPrice : triggerPriceUsd;\r\n  if (suitableMarket?.name === 'GNS') {\r\n    if (toTokenInfo.maxPrice) {\r\n      nextAveragePrice = isLong ?\r\n        BigNumber.from(formatAmount(toTokenInfo.maxPrice, 4, 0, 0)).mul(10004)\r\n        : BigNumber.from(formatAmount(toTokenInfo.maxPrice, 4, 0, 0)).mul(9996);\r\n    }\r\n  }\r\n  \r\n  if (suitableMarket?.name === 'GMX') {\r\n    if (hasExistingPosition) {\r\n      let nextDelta, nextHasProfit;\r\n  \r\n      if (isMarketOrder) {\r\n        nextDelta = existingPosition.delta;\r\n        nextHasProfit = existingPosition.hasProfit;\r\n      } else {\r\n        const data = calculatePositionDelta(triggerPriceUsd || bigNumberify(0), existingPosition);\r\n        nextDelta = data.delta;\r\n        nextHasProfit = data.hasProfit;\r\n      }\r\n  \r\n      nextAveragePrice = getNextAveragePrice({\r\n        size: existingPosition.size,\r\n        sizeDelta: toUsdMax,\r\n        hasProfit: nextHasProfit,\r\n        delta: nextDelta,\r\n        nextPrice: isMarketOrder ? entryMarkPrice : triggerPriceUsd,\r\n        isLong,\r\n      });\r\n    }\r\n  }\r\n\r\n  if (suitableMarket?.name === 'GMX') {\r\n    if (hasExistingPosition) {\r\n      const collateralDelta = fromUsdMin ? fromUsdMin : bigNumberify(0);\r\n      const sizeDelta = toUsdMax ? toUsdMax : bigNumberify(0);\r\n      leverage = getLeverage({\r\n        size: existingPosition.size,\r\n        sizeDelta,\r\n        collateral: existingPosition.collateral,\r\n        collateralDelta,\r\n        increaseCollateral: true,\r\n        entryFundingRate: existingPosition.entryFundingRate,\r\n        cumulativeFundingRate: existingPosition.cumulativeFundingRate,\r\n        increaseSize: true,\r\n        hasProfit: existingPosition.hasProfit,\r\n        delta: existingPosition.delta,\r\n        includeDelta: savedIsPnlInLeverage,\r\n      });\r\n    } else if (hasLeverageOption) {\r\n      leverage = bigNumberify(parseInt(leverageOption * BASIS_POINTS_DIVISOR));\r\n    }\r\n  } else if (suitableMarket?.name === 'GNS') {\r\n    leverage = bigNumberify(parseInt(leverageOption * BASIS_POINTS_DIVISOR));\r\n  }\r\n  \r\n  let liquidationPrice;\r\n  if (suitableMarket?.name === 'GMX') {\r\n    liquidationPrice = getLiquidationPrice({\r\n      isLong,\r\n      size: hasExistingPosition ? existingPosition.size : bigNumberify(0),\r\n      collateral: hasExistingPosition ? existingPosition.collateral : bigNumberify(0),\r\n      averagePrice: nextAveragePrice,\r\n      entryFundingRate: hasExistingPosition ? existingPosition.entryFundingRate : bigNumberify(0),\r\n      cumulativeFundingRate: hasExistingPosition ? existingPosition.cumulativeFundingRate : bigNumberify(0),\r\n      sizeDelta: toUsdMax,\r\n      collateralDelta: fromUsdMin,\r\n      increaseCollateral: true,\r\n      increaseSize: true,\r\n    });\r\n  } else if (suitableMarket?.name === 'GNS') {\r\n    if (fromAmount && toTokenInfo.maxPrice && leverage) {\r\n      if (!fromAmount.eq(0) && !leverage.eq(0)) {\r\n        const markPrice = toTokenInfo.maxPrice;\r\n        const collateral = fromAmount.mul(leverage);\r\n        \r\n        const liqPriceDistance = (markPrice.mul(collateral.mul(9).div(10)).div(collateral).div(formatAmount(leverage, 4, 0, 0)));\r\n\r\n        liquidationPrice = (isLong ?\r\n            markPrice.sub(liqPriceDistance)\r\n            : markPrice.add(liqPriceDistance));\r\n      }\r\n    }\r\n  }\r\n\r\n  const existingLiquidationPrice = existingPosition ? getLiquidationPrice(existingPosition) : undefined;\r\n  let displayLiquidationPrice = liquidationPrice ? liquidationPrice : existingLiquidationPrice;\r\n  \r\n  \r\n\r\n  const getSwapError = () => {\r\n    if (IS_NETWORK_DISABLED[chainId]) {\r\n      return [`Swaps disabled, pending ${getChainName(chainId)} upgrade`];\r\n    }\r\n\r\n    if (fromTokenAddress === toTokenAddress) {\r\n      return [t`Select different tokens`];\r\n    }\r\n\r\n    if (!isMarketOrder) {\r\n      if ((toToken.isStable || toToken.isUsdg) && (fromToken.isStable || fromToken.isUsdg)) {\r\n        return [t`Select different tokens`];\r\n      }\r\n\r\n      if (fromToken.isNative && toToken.isWrapped) {\r\n        return [t`Select different tokens`];\r\n      }\r\n\r\n      if (toToken.isNative && fromToken.isWrapped) {\r\n        return [t`Select different tokens`];\r\n      }\r\n    }\r\n\r\n    if (!fromAmount || fromAmount.eq(0)) {\r\n      return [t`Enter an amount`];\r\n    }\r\n    if (!toAmount || toAmount.eq(0)) {\r\n      return [t`Enter an amount`];\r\n    }\r\n\r\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\r\n    if (!fromTokenInfo || !fromTokenInfo.minPrice) {\r\n      return [t`Incorrect network`];\r\n    }\r\n    if (\r\n      !savedShouldDisableValidationForTesting &&\r\n      fromTokenInfo &&\r\n      fromTokenInfo.balance &&\r\n      fromAmount &&\r\n      fromAmount.gt(fromTokenInfo.balance)\r\n    ) {\r\n      return [`Insufficient ${fromTokenInfo.symbol} balance`];\r\n    }\r\n\r\n    const toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n    if (!isMarketOrder) {\r\n      if (!triggerRatioValue || triggerRatio.eq(0)) {\r\n        return [t`Enter a price`];\r\n      }\r\n\r\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\r\n      if (currentRate && currentRate.lt(triggerRatio)) {\r\n        return triggerRatioInverted ? [t`Price below Mark Price`] : [t`Price above Mark Price`];\r\n      }\r\n    }\r\n\r\n    if (\r\n      !isWrapOrUnwrap &&\r\n      toToken &&\r\n      toTokenAddress !== USDG_ADDRESS &&\r\n      toTokenInfo &&\r\n      toTokenInfo.availableAmount &&\r\n      toAmount.gt(toTokenInfo.availableAmount)\r\n    ) {\r\n      return [t`Insufficient liquidity`];\r\n    }\r\n    if (\r\n      !isWrapOrUnwrap &&\r\n      toAmount &&\r\n      toTokenInfo.bufferAmount &&\r\n      toTokenInfo.poolAmount &&\r\n      toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(toAmount))\r\n    ) {\r\n      return [t`Insufficient liquidity`];\r\n    }\r\n\r\n    if (\r\n      fromUsdMin &&\r\n      fromTokenInfo.maxUsdgAmount &&\r\n      fromTokenInfo.maxUsdgAmount.gt(0) &&\r\n      fromTokenInfo.usdgAmount &&\r\n      fromTokenInfo.maxPrice\r\n    ) {\r\n      const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\r\n      const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\r\n\r\n      if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\r\n        return [`${fromTokenInfo.symbol} pool exceeded`];\r\n      }\r\n    }\r\n\r\n    return [false];\r\n  };\r\n\r\n  const getLeverageError = () => {\r\n    if (IS_NETWORK_DISABLED[chainId]) {\r\n      return [`Leverage disabled, pending ${getChainName(chainId)} upgrade`];\r\n    }\r\n    if (hasOutdatedUi) {\r\n      return [t`Page outdated, please refresh`];\r\n    }\r\n\r\n    if (!toAmount || toAmount.eq(0)) {\r\n      return [t`Enter an amount`];\r\n    }\r\n\r\n    let toTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\r\n    if (toTokenInfo && toTokenInfo.isStable) {\r\n      return [`${swapOption === LONG ? \"Longing\" : \"Shorting\"} ${toTokenInfo.symbol} not supported`];\r\n    }\r\n\r\n    const fromTokenInfo = getTokenInfo(infoTokens, fromTokenAddress);\r\n    if (\r\n      !savedShouldDisableValidationForTesting &&\r\n      fromTokenInfo &&\r\n      fromTokenInfo.balance &&\r\n      fromAmount &&\r\n      fromAmount.gt(fromTokenInfo.balance)\r\n    ) {\r\n      return [`Insufficient ${fromTokenInfo.symbol} balance`];\r\n    }\r\n\r\n    if (leverage && leverage.eq(0)) {\r\n      return [t`Enter an amount`];\r\n    }\r\n    if (!isMarketOrder && (!triggerPriceValue || triggerPriceUsd.eq(0))) {\r\n      return [t`Enter a price`];\r\n    }\r\n\r\n    if (suitableMarket?.name === 'GMX') {\r\n      if (!hasExistingPosition && fromUsdMin && fromUsdMin.lt(expandDecimals(10, USD_DECIMALS))) {\r\n        return [t`Min order: 10 USD`];\r\n      }\r\n    } else if (suitableMarket?.name === 'GNS') {\r\n      if (fromUsdMin && (fromUsdMin.mul(leverage ?? 1)).lt(expandDecimals(7500, USD_DECIMALS + 4))) {\r\n        return [t`Min order: 7,500 DAI`];\r\n      }\r\n    }\r\n\r\n\r\n    if (leverage) {\r\n      if (suitableMarket?.name === 'GMX') {\r\n        if (leverage.gt(MAX_ALLOWED_LEVERAGE)) {\r\n          return [`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`];\r\n        } else if (leverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\r\n          return [t`Min leverage: 1.1x`];\r\n        }\r\n        \r\n      } else if (suitableMarket?.name === 'GNS') {\r\n        if (leverage.gt(150 * BASIS_POINTS_DIVISOR)) {\r\n          return [t`Max leverage: 150x`];\r\n        } else if (leverage.lt(2 * BASIS_POINTS_DIVISOR)) {\r\n          return [t`Min leverage: 2x`];\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!isMarketOrder && entryMarkPrice && triggerPriceUsd && !savedShouldDisableValidationForTesting) {\r\n      if (isLong && entryMarkPrice.lt(triggerPriceUsd)) {\r\n        return [t`Price above Mark Price`];\r\n      }\r\n      if (!isLong && entryMarkPrice.gt(triggerPriceUsd)) {\r\n        return [t`Price below Mark Price`];\r\n      }\r\n    }\r\n\r\n    if (isLong) {\r\n      let requiredAmount = toAmount;\r\n      if (fromTokenAddress !== toTokenAddress) {\r\n        const { amount: swapAmount } = getNextToAmount(\r\n          chainId,\r\n          fromAmount,\r\n          fromTokenAddress,\r\n          toTokenAddress,\r\n          infoTokens,\r\n          undefined,\r\n          undefined,\r\n          usdgSupply,\r\n          totalTokenWeights,\r\n          isSwap\r\n        );\r\n        requiredAmount = requiredAmount.add(swapAmount);\r\n\r\n        if (toToken && toTokenAddress !== USDG_ADDRESS) {\r\n          if (!toTokenInfo.availableAmount) {\r\n            return [t`Liquidity data not loaded`];\r\n          }\r\n          if (suitableMarket?.name === 'GMX' && toTokenInfo.availableAmount && requiredAmount.gt(toTokenInfo.availableAmount)) {\r\n            return [t`Insufficient liquidity`];\r\n          }\r\n        }\r\n\r\n        if (\r\n          suitableMarket?.name === 'GMX' &&\r\n          toTokenInfo.poolAmount &&\r\n          toTokenInfo.bufferAmount &&\r\n          toTokenInfo.bufferAmount.gt(toTokenInfo.poolAmount.sub(swapAmount))\r\n        ) {\r\n          return [t`Insufficient liquidity`, true, \"BUFFER\"];\r\n        }\r\n\r\n        \r\n        if (\r\n          fromUsdMin &&\r\n          fromTokenInfo.maxUsdgAmount &&\r\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\r\n          fromTokenInfo.minPrice &&\r\n          fromTokenInfo.usdgAmount\r\n        ) {\r\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\r\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\r\n\r\n          if (suitableMarket?.name === 'GNS') {\r\n            if (\r\n              liquidity &&\r\n              liquidity[suitableMarket?.name].value &&\r\n              formatAmount(nextUsdgAmount, 30, 0) > liquidity[suitableMarket?.name].value\r\n            ) {\r\n              return [`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\r\n            }\r\n          } else if (suitableMarket?.name === 'GMX') {\r\n            if (nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\r\n              return [`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (suitableMarket?.name === 'GMX') {\r\n        if (toTokenInfo && toTokenInfo.maxPrice) {\r\n          const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\r\n          if (\r\n            toTokenInfo.maxGlobalLongSize &&\r\n            toTokenInfo.maxGlobalLongSize.gt(0) &&\r\n            toTokenInfo.maxAvailableLong &&\r\n            sizeUsd.gt(toTokenInfo.maxAvailableLong)\r\n          ) {\r\n            return [`Max ${toTokenInfo.symbol} long exceeded`];\r\n          }\r\n        }\r\n      } else if (suitableMarket?.name === 'GNS') {\r\n        const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\r\n        if (\r\n          liquidity &&\r\n          ((sizeUsd / 10**USD_DECIMALS) > (liquidity[suitableMarket?.name].value))\r\n        ) {\r\n          return [`Max ${toTokenInfo.symbol} long exceeded`];\r\n        }\r\n      }\r\n    }\r\n\r\n    if (isShort) {\r\n      let stableTokenAmount = bigNumberify(0);\r\n      if (fromTokenAddress !== shortCollateralAddress && fromAmount && fromAmount.gt(0)) {\r\n        const { amount: nextToAmount } = getNextToAmount(\r\n          chainId,\r\n          fromAmount,\r\n          fromTokenAddress,\r\n          shortCollateralAddress,\r\n          infoTokens,\r\n          undefined,\r\n          undefined,\r\n          usdgSupply,\r\n          totalTokenWeights,\r\n          isSwap\r\n        );\r\n        stableTokenAmount = nextToAmount;\r\n        if (suitableMarket?.name === 'GMX' && stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\r\n          return [t`Insufficient liquidity, change \"Profits In\"`];\r\n        }\r\n\r\n        if (\r\n          suitableMarket?.name === 'GMX' &&\r\n          shortCollateralToken.bufferAmount &&\r\n          shortCollateralToken.poolAmount &&\r\n          shortCollateralToken.bufferAmount.gt(shortCollateralToken.poolAmount.sub(stableTokenAmount))\r\n        ) {\r\n          // suggest swapping to collateralToken\r\n          return [t`Insufficient liquidity, change \"Profits In\"`, true, \"BUFFER\"];\r\n        }\r\n\r\n        if (\r\n          fromTokenInfo.maxUsdgAmount &&\r\n          fromTokenInfo.maxUsdgAmount.gt(0) &&\r\n          fromTokenInfo.minPrice &&\r\n          fromTokenInfo.usdgAmount\r\n        ) {\r\n          const usdgFromAmount = adjustForDecimals(fromUsdMin, USD_DECIMALS, USDG_DECIMALS);\r\n          const nextUsdgAmount = fromTokenInfo.usdgAmount.add(usdgFromAmount);\r\n\r\n          \r\n          if (suitableMarket?.name === 'GMX' && nextUsdgAmount.gt(fromTokenInfo.maxUsdgAmount)) {\r\n            return [t`${fromTokenInfo.symbol} pool exceeded, try different token`, true, \"MAX_USDG\"];\r\n          }\r\n        }\r\n      }\r\n      if (\r\n        !shortCollateralToken ||\r\n        !fromTokenInfo ||\r\n        !toTokenInfo ||\r\n        !toTokenInfo.maxPrice ||\r\n        !shortCollateralToken.availableAmount\r\n      ) {\r\n        return [t`Fetching token info...`];\r\n      }\r\n\r\n      const sizeUsd = toAmount.mul(toTokenInfo.maxPrice).div(expandDecimals(1, toTokenInfo.decimals));\r\n      const sizeTokens = sizeUsd\r\n        .mul(expandDecimals(1, shortCollateralToken.decimals))\r\n        .div(shortCollateralToken.minPrice);\r\n\r\n      if (!toTokenInfo.maxAvailableShort) {\r\n        return [t`Liquidity data not loaded`];\r\n      }\r\n\r\n      if (suitableMarket?.name === 'GMX') {\r\n        if (\r\n          toTokenInfo.maxGlobalShortSize &&\r\n          toTokenInfo.maxGlobalShortSize.gt(0) &&\r\n          toTokenInfo.maxAvailableShort &&\r\n          sizeUsd.gt(toTokenInfo.maxAvailableShort)\r\n        ) {\r\n          return [`Max ${toTokenInfo.symbol} short exceeded`];\r\n        }\r\n      } else if (suitableMarket?.name === 'GNS') {\r\n        if (\r\n          liquidity &&\r\n          ((sizeUsd / 10**USD_DECIMALS) > (liquidity[suitableMarket?.name].value))\r\n        ) {\r\n          return [`Max ${toTokenInfo.symbol} short exceeded`];\r\n        }\r\n      }\r\n      \r\n\r\n      stableTokenAmount = stableTokenAmount.add(sizeTokens);\r\n      if (suitableMarket?.name === 'GMX' && stableTokenAmount.gt(shortCollateralToken.availableAmount)) {\r\n        return [t`Insufficient liquidity, change \"Profits In\"`];\r\n      }\r\n    }\r\n\r\n    return [false];\r\n  };\r\n\r\n  const getToLabel = () => {\r\n    if (isSwap) {\r\n      return t`Receive`;\r\n    }\r\n    if (isLong) {\r\n      return t`Long`;\r\n    }\r\n    return t`Short`;\r\n  };\r\n\r\n  const getError = () => {\r\n    if (isSwap) {\r\n      return getSwapError();\r\n    }\r\n    return getLeverageError();\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    if (IS_NETWORK_DISABLED[chainId]) {\r\n      return false;\r\n    }\r\n    if (isStopOrder) {\r\n      return true;\r\n    }\r\n    if (!active) {\r\n      return true;\r\n    }\r\n    const [error, modal] = getError();\r\n    if (error && !modal) {\r\n      return false;\r\n    }\r\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\r\n      return false;\r\n    }\r\n    if ((needApproval && isWaitingForApproval) || isApproving) {\r\n      return false;\r\n    }\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return false;\r\n    }\r\n    if (isPositionRouterApproving) {\r\n      return false;\r\n    }\r\n    if (isApproving || isPluginApproving) {\r\n      return false;\r\n    }\r\n    if (isSubmitting) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n\r\n  const getPrimaryText = () => {\r\n    if (isStopOrder) {\r\n      return t`Open a position`;\r\n    }\r\n    if (!active) {\r\n      return t`Connect Wallet`;\r\n    }\r\n    if (!isSupportedChain(chainId)) {\r\n      return t`Incorrect Network`;\r\n    }\r\n    const [error, modal] = getError();\r\n    if (error && !modal) {\r\n      return error;\r\n    }\r\n\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return t`Enabling Leverage...`;\r\n    }\r\n    if (isPositionRouterApproving) {\r\n      return t`Enabling Leverage...`;\r\n    }\r\n    if (needPositionRouterApproval) {\r\n      return t`Enable Leverage`;\r\n    }\r\n\r\n    if (needApproval && isWaitingForApproval) {\r\n      return t`Waiting for Approval`;\r\n    }\r\n    if (isApproving) {\r\n      return `Approving ${fromToken.symbol}...`;\r\n    }\r\n    /* if (needApproval) {\r\n      return `Approve ${fromToken.symbol}`;\r\n    } */\r\n\r\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\r\n      return t`Enabling Orders...`;\r\n    }\r\n    if (isPluginApproving) {\r\n      return t`Enabling Orders...`;\r\n    }\r\n    if (needOrderBookApproval && suitableMarket?.name === 'GMX') {\r\n      return t`Enable Orders`;\r\n    }\r\n    \r\n    if (!isMarketOrder) return `Create ${orderOption.charAt(0) + orderOption.substring(1).toLowerCase()} Order`;\r\n\r\n    if (isSwap) {\r\n      if (toUsdMax && toUsdMax.lt(fromUsdMin.mul(95).div(100))) {\r\n        return t`High Slippage, Swap Anyway`;\r\n      }\r\n      return \"Swap\";\r\n    }\r\n\r\n    if (isLong) {\r\n      const indexTokenInfo = getTokenInfo(infoTokens, toTokenAddress);\r\n      if (indexTokenInfo && indexTokenInfo.minPrice) {\r\n        const { amount: nextToAmount } = getNextToAmount(\r\n          chainId,\r\n          fromAmount,\r\n          fromTokenAddress,\r\n          indexTokenAddress,\r\n          infoTokens,\r\n          undefined,\r\n          undefined,\r\n          usdgSupply,\r\n          totalTokenWeights,\r\n          isSwap\r\n        );\r\n        const nextToAmountUsd = nextToAmount\r\n          .mul(indexTokenInfo.minPrice)\r\n          .div(expandDecimals(1, indexTokenInfo.decimals));\r\n        if (fromTokenAddress === USDG_ADDRESS && nextToAmountUsd.lt(fromUsdMin.mul(98).div(100))) {\r\n          return t`High USDG Slippage, Long Anyway`;\r\n        }\r\n      }\r\n      return `Long ${toToken.symbol}`;\r\n    }\r\n\r\n    return `Short ${toToken.symbol}`;\r\n  };\r\n\r\n  const onSelectFromToken = (token) => {\r\n    setFromTokenAddress(swapOption, token.address);\r\n    setIsWaitingForApproval(false);\r\n\r\n    if (isShort && token.isStable) {\r\n      setShortCollateralAddress(token.address);\r\n    }\r\n  };\r\n\r\n  const onSelectShortCollateralAddress = (token) => {\r\n    setShortCollateralAddress(token.address);\r\n  };\r\n\r\n  const onSelectToToken = (token) => {\r\n    setToTokenAddress(swapOption, token.address);\r\n  };\r\n\r\n  const [hasInputFocus, setHasInputFocus] = useState(false);\r\n  const [hasInputError, setHasInputError] = useState(false);\r\n  const checkInputError = (inputVal) => {\r\n    if (!isPrimaryEnabled() && inputVal !== '') {\r\n      setHasInputError(true);\r\n    } else {\r\n      setHasInputError(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkInputError(fromValue);\r\n  }, [fromValue, toValue])\r\n  \r\n  const onFromValueChange = (e) => {\r\n    setAnchorOnFromAmount(true);\r\n    setFromValue(e.target.value);\r\n  };\r\n\r\n  const onToValueChange = (e) => {\r\n    setAnchorOnFromAmount(false);\r\n    setToValue(e.target.value);\r\n  };\r\n\r\n  const switchTokens = () => {\r\n    if (fromAmount && toAmount) {\r\n      if (anchorOnFromAmount) {\r\n        setToValue(formatAmountFree(fromAmount, fromToken.decimals, 8));\r\n      } else {\r\n        setFromValue(formatAmountFree(toAmount, toToken.decimals, 8));\r\n      }\r\n      setAnchorOnFromAmount(!anchorOnFromAmount);\r\n    }\r\n    setIsWaitingForApproval(false);\r\n\r\n    const updatedTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\r\n    updatedTokenSelection[swapOption] = {\r\n      from: toTokenAddress,\r\n      to: fromTokenAddress,\r\n    };\r\n    setTokenSelection(updatedTokenSelection);\r\n  };\r\n\r\n  const wrap = async () => {\r\n    setIsSubmitting(true);\r\n\r\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\r\n    callContract(chainId, contract, \"deposit\", {\r\n      value: fromAmount,\r\n      sentMsg: \"Swap submitted.\",\r\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\r\n        fromToken.symbol\r\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\r\n      failMsg: \"Swap failed.\",\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {})\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n      });\r\n  };\r\n\r\n  const unwrap = async () => {\r\n    setIsSubmitting(true);\r\n\r\n    const contract = new ethers.Contract(nativeTokenAddress, WETH.abi, library.getSigner());\r\n    callContract(chainId, contract, \"withdraw\", [fromAmount], {\r\n      sentMsg: t`Swap submitted!`,\r\n      failMsg: t`Swap failed.`,\r\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\r\n        fromToken.symbol\r\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {})\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n      });\r\n  };\r\n\r\n  const swap = async () => {\r\n    if (fromToken.isNative && toToken.isWrapped) {\r\n      wrap();\r\n      return;\r\n    }\r\n\r\n    if (fromTokenAddress.isWrapped && toToken.isNative) {\r\n      unwrap();\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    let path = [fromTokenAddress, toTokenAddress];\r\n    if (anchorOnFromAmount) {\r\n      const { path: multiPath } = getNextToAmount(\r\n        chainId,\r\n        fromAmount,\r\n        fromTokenAddress,\r\n        toTokenAddress,\r\n        infoTokens,\r\n        undefined,\r\n        undefined,\r\n        usdgSupply,\r\n        totalTokenWeights,\r\n        isSwap\r\n      );\r\n      if (multiPath) {\r\n        path = multiPath;\r\n      }\r\n    } else {\r\n      const { path: multiPath } = getNextFromAmount(\r\n        chainId,\r\n        toAmount,\r\n        fromTokenAddress,\r\n        toTokenAddress,\r\n        infoTokens,\r\n        undefined,\r\n        undefined,\r\n        usdgSupply,\r\n        totalTokenWeights,\r\n        isSwap\r\n      );\r\n      if (multiPath) {\r\n        path = multiPath;\r\n      }\r\n    }\r\n\r\n    let method;\r\n    let contract;\r\n    let value;\r\n    let params;\r\n    let minOut;\r\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\r\n      setIsSubmitting(false);\r\n      setIsPendingConfirmation(true);\r\n      helperToast.error(\r\n        `Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (!isMarketOrder) {\r\n      minOut = toAmount;\r\n      Api.createSwapOrder(chainId, library, path, fromAmount, minOut, triggerRatio, nativeTokenAddress, {\r\n        sentMsg: t`Swap Order submitted!`,\r\n        successMsg: t`Swap Order created!`,\r\n        failMsg: t`Swap Order creation failed.`,\r\n        pendingTxns,\r\n        setPendingTxns,\r\n      })\r\n        .then(() => {\r\n          setIsConfirming(false);\r\n        })\r\n        .finally(() => {\r\n          setIsSubmitting(false);\r\n          setIsPendingConfirmation(false);\r\n        });\r\n      return;\r\n    }\r\n\r\n    path = replaceNativeTokenAddress(path, nativeTokenAddress);\r\n    method = \"swap\";\r\n    value = bigNumberify(0);\r\n    if (toTokenAddress === AddressZero) {\r\n      method = \"swapTokensToETH\";\r\n    }\r\n\r\n    minOut = toAmount.mul(BASIS_POINTS_DIVISOR - allowedSlippage).div(BASIS_POINTS_DIVISOR);\r\n    params = [path, fromAmount, minOut, account];\r\n    if (fromTokenAddress === AddressZero) {\r\n      method = \"swapETHToTokens\";\r\n      value = fromAmount;\r\n      params = [path, minOut, account];\r\n    }\r\n    contract = new ethers.Contract(routerAddress, Router.abi, library.getSigner());\r\n\r\n    callContract(chainId, contract, method, params, {\r\n      value,\r\n      sentMsg: `Swap ${!isMarketOrder ? \" order \" : \"\"} submitted!`,\r\n      successMsg: `Swapped ${formatAmount(fromAmount, fromToken.decimals, 4, true)} ${\r\n        fromToken.symbol\r\n      } for ${formatAmount(toAmount, toToken.decimals, 4, true)} ${toToken.symbol}!`,\r\n      failMsg: t`Swap failed.`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async () => {\r\n        setIsConfirming(false);\r\n      })\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n        setIsPendingConfirmation(false);\r\n      });\r\n  };\r\n\r\n  const createIncreaseOrder = () => {\r\n    let path = [fromTokenAddress];\r\n\r\n    if (path[0] === USDG_ADDRESS) {\r\n      if (isLong) {\r\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\r\n        path.push(stableToken.address);\r\n      } else {\r\n        path.push(shortCollateralAddress);\r\n      }\r\n    }\r\n\r\n    const minOut = 0;\r\n    const indexToken = getToken(chainId, indexTokenAddress);\r\n    const successMsg = t`\r\n      Created limit order for ${indexToken.symbol} ${isLong ? \"Long\" : \"Short\"}: ${formatAmount(\r\n      toUsdMax,\r\n      USD_DECIMALS,\r\n      2\r\n    )} USD!\r\n    `;\r\n    return Api.createIncreaseOrder(\r\n      chainId,\r\n      library,\r\n      nativeTokenAddress,\r\n      path,\r\n      fromAmount,\r\n      indexTokenAddress,\r\n      minOut,\r\n      toUsdMax,\r\n      collateralTokenAddress,\r\n      isLong,\r\n      triggerPriceUsd,\r\n      {\r\n        pendingTxns,\r\n        setPendingTxns,\r\n        sentMsg: t`Limit order submitted!`,\r\n        successMsg,\r\n        failMsg: t`Limit order creation failed.`,\r\n      }\r\n    )\r\n      .then(() => {\r\n        setIsConfirming(false);\r\n      })\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n        setIsPendingConfirmation(false);\r\n      });\r\n  };\r\n\r\n  let referralCode = ethers.constants.HashZero;\r\n  if (!attachedOnChain && userReferralCode) {\r\n    referralCode = userReferralCode;\r\n  }\r\n\r\n  const increasePosition = async () => {\r\n    setIsSubmitting(true);\r\n    const tokenAddress0 = fromTokenAddress === AddressZero ? nativeTokenAddress : fromTokenAddress;\r\n    const indexTokenAddress = toTokenAddress === AddressZero ? nativeTokenAddress : toTokenAddress;\r\n    let path = [indexTokenAddress]; // assume long\r\n    if (toTokenAddress !== fromTokenAddress) {\r\n      path = [tokenAddress0, indexTokenAddress];\r\n    }\r\n\r\n    if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\r\n      path = [nativeTokenAddress];\r\n    }\r\n\r\n    if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\r\n      path = [nativeTokenAddress];\r\n    }\r\n\r\n    if (isShort) {\r\n      path = [shortCollateralAddress];\r\n      if (tokenAddress0 !== shortCollateralAddress) {\r\n        path = [tokenAddress0, shortCollateralAddress];\r\n      }\r\n    }\r\n\r\n    const refPrice = isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\r\n    const priceBasisPoints = isLong ? BASIS_POINTS_DIVISOR + allowedSlippage : BASIS_POINTS_DIVISOR - allowedSlippage;\r\n    const priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n\r\n    const boundedFromAmount = fromAmount ? fromAmount : bigNumberify(0);\r\n\r\n\r\n    if (fromAmount && fromAmount.gt(0) && fromTokenAddress === USDG_ADDRESS && isLong) {\r\n      const { amount: nextToAmount, path: multiPath } = getNextToAmount(\r\n        chainId,\r\n        fromAmount,\r\n        fromTokenAddress,\r\n        indexTokenAddress,\r\n        infoTokens,\r\n        undefined,\r\n        undefined,\r\n        usdgSupply,\r\n        totalTokenWeights,\r\n        isSwap\r\n      );\r\n      if (nextToAmount.eq(0)) {\r\n        helperToast.error(t`Insufficient liquidity`);\r\n        return;\r\n      }\r\n      if (multiPath) {\r\n        path = replaceNativeTokenAddress(multiPath);\r\n      }\r\n    }\r\n\r\n    let params = [\r\n      path, // _path\r\n      indexTokenAddress, // _indexToken\r\n      boundedFromAmount, // _amountIn\r\n      0, // _minOut\r\n      toUsdMax, // _sizeDelta\r\n      isLong, // _isLong\r\n      priceLimit, // _acceptablePrice\r\n      minExecutionFee, // _executionFee\r\n      referralCode, // _referralCode\r\n      AddressZero, // _callbackTarget\r\n    ];\r\n\r\n    let method = \"createIncreasePosition\";\r\n    let value = minExecutionFee;\r\n    if (fromTokenAddress === AddressZero) {\r\n      method = \"createIncreasePositionETH\";\r\n      value = boundedFromAmount.add(minExecutionFee);\r\n      params = [\r\n        path, // _path\r\n        indexTokenAddress, // _indexToken\r\n        0, // _minOut\r\n        toUsdMax, // _sizeDelta\r\n        isLong, // _isLong\r\n        priceLimit, // _acceptablePrice\r\n        minExecutionFee, // _executionFee\r\n        referralCode, // _referralCode\r\n        AddressZero, // _callbackTarget\r\n      ];\r\n    }\r\n\r\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, fromTokenAddress), fromAmount)) {\r\n      setIsSubmitting(false);\r\n      setIsPendingConfirmation(false);\r\n      helperToast.error(\r\n        t`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ${getConstant(chainId, \"nativeTokenSymbol\")} for gas`\r\n      );\r\n      return;\r\n    }\r\n\r\n    const contractAddress = getContract(chainId, \"PositionRouter\");\r\n    const contract = new ethers.Contract(contractAddress, PositionRouter.abi, library.getSigner());\r\n    \r\n    const indexToken = getTokenInfo(infoTokens, indexTokenAddress);\r\n    const tokenSymbol = indexToken.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexToken.symbol;\r\n    const successMsg = t`Requested increase of ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"} by ${formatAmount(\r\n      toUsdMax,\r\n      USD_DECIMALS,\r\n      2\r\n    )} USD.`;\r\n\r\n    callContract(chainId, contract, method, params, {\r\n      value,\r\n      setPendingTxns,\r\n      sentMsg: `${isLong ? \"Long\" : \"Short\"} submitted.`,\r\n      failMsg: `${isLong ? \"Long\" : \"Short\"} failed.`,\r\n      successMsg,\r\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\r\n      // hide the success message for Arbitrum as a workaround\r\n      hideSuccessMsg: chainId === ARBITRUM,\r\n    })\r\n      .then(async () => {\r\n        setIsConfirming(false);\r\n\r\n        const key = getPositionKey(account, path[path.length - 1], indexTokenAddress, isLong);\r\n        let nextSize = toUsdMax;\r\n        if (hasExistingPosition) {\r\n          nextSize = existingPosition.size.add(toUsdMax);\r\n        }\r\n\r\n        pendingPositions[key] = {\r\n          updatedAt: Date.now(),\r\n          pendingChanges: {\r\n            size: nextSize,\r\n          },\r\n        };\r\n\r\n        setPendingPositions({ ...pendingPositions });\r\n      })\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n        setIsPendingConfirmation(false);\r\n      });\r\n  };\r\n\r\n  const onSwapOptionChange = (opt) => {\r\n    setSwapOption(opt);\r\n    if (orderOption === STOP) {\r\n      setOrderOption(MARKET);\r\n    }\r\n    setAnchorOnFromAmount(true);\r\n    setFromValue(\"\");\r\n    setToValue(\"\");\r\n    setTriggerPriceValue(\"\");\r\n    setTriggerRatioValue(\"\");\r\n\r\n    if (opt === SHORT && infoTokens) {\r\n      const fromToken = getToken(chainId, tokenSelection[opt].from);\r\n      if (fromToken && fromToken.isStable) {\r\n        setShortCollateralAddress(fromToken.address);\r\n      } else {\r\n        const stableToken = getMostAbundantStableToken(chainId, infoTokens);\r\n        setShortCollateralAddress(stableToken.address);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onConfirmationClick = () => {\r\n    if (!active) {\r\n      props.connectWallet();\r\n      return;\r\n    }\r\n\r\n    if (needOrderBookApproval && suitableMarket?.name === 'GMX') {\r\n      approveOrderBook();\r\n      return;\r\n    }\r\n\r\n    if (isSwap) {\r\n      swap();\r\n      return;\r\n    }\r\n\r\n    switch(suitableMarket.name) {\r\n      case 'GMX':\r\n        if (orderOption === LIMIT) {\r\n          createIncreaseOrder();\r\n          return;\r\n        }\r\n        increasePosition();\r\n        return;\r\n      case 'GNS':\r\n        if (orderOption === LIMIT) {\r\n          openTrade(triggerPriceUsd);\r\n          return;\r\n        }\r\n        openTrade();\r\n        return;\r\n      default:\r\n        return;\r\n    }\r\n\r\n  };\r\n\r\n\r\n  function approveFromToken() {\r\n    const address = suitableMarket?.name === 'GMX'\r\n      ? routerAddress\r\n      : GNS_Storage.address;\r\n\r\n    approveTokens({\r\n      setIsApproving,\r\n      library,\r\n      tokenAddress: fromToken.address,\r\n      spender: address,\r\n      chainId: chainId,\r\n      onApproveSubmitted: () => {\r\n        setIsWaitingForApproval(true);\r\n      },\r\n      infoTokens,\r\n      getTokenInfo,\r\n      pendingTxns,\r\n      setPendingTxns,\r\n    });\r\n  }\r\n\r\n  const onClickPrimary = () => {\r\n    if (isStopOrder) {\r\n      setOrderOption(MARKET);\r\n      return;\r\n    }\r\n\r\n    if (!active) {\r\n      props.connectWallet();\r\n      return;\r\n    }\r\n\r\n    if (needPositionRouterApproval && suitableMarket?.name === 'GMX') {\r\n      approvePositionRouter({\r\n        sentMsg: t`Enable leverage sent.`,\r\n        failMsg: t`Enable leverage failed.`,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (needApproval) {\r\n      approveFromToken();\r\n      return;\r\n    }\r\n\r\n    if (needOrderBookApproval && suitableMarket?.name === 'GMX') {\r\n      approveOrderBook();\r\n      return;\r\n    }\r\n\r\n    const [error, modal, errorCode] = getError();\r\n\r\n    if (modal) {\r\n      setModalError(errorCode);\r\n      return;\r\n    }\r\n\r\n    if (isSwap) {\r\n      if (fromTokenAddress === AddressZero && toTokenAddress === nativeTokenAddress) {\r\n        wrap();\r\n        return;\r\n      }\r\n\r\n      if (fromTokenAddress === nativeTokenAddress && toTokenAddress === AddressZero) {\r\n        unwrap();\r\n        return;\r\n      }\r\n    }\r\n\r\n    setIsConfirming(true);\r\n    setIsHigherSlippageAllowed(false);\r\n  };\r\n\r\n  const isStopOrder = orderOption === STOP;\r\n  const showFromAndToSection = !isStopOrder;\r\n  const showTriggerPriceSection = !isSwap && !isMarketOrder && !isStopOrder;\r\n  const showTriggerRatioSection = isSwap && !isMarketOrder && !isStopOrder;\r\n\r\n\r\n  let fees;\r\n  let feesUsd;\r\n  let feeBps;\r\n  let swapFees;\r\n  let positionFee;\r\n  if (isSwap) {\r\n    if (fromAmount) {\r\n      const { feeBasisPoints } = getNextToAmount(\r\n        chainId,\r\n        fromAmount,\r\n        fromTokenAddress,\r\n        toTokenAddress,\r\n        infoTokens,\r\n        undefined,\r\n        undefined,\r\n        usdgSupply,\r\n        totalTokenWeights,\r\n        isSwap\r\n      );\r\n      if (feeBasisPoints !== undefined) {\r\n        fees = fromAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n        const feeTokenPrice =\r\n          fromTokenInfo.address === USDG_ADDRESS ? expandDecimals(1, USD_DECIMALS) : fromTokenInfo.maxPrice;\r\n        feesUsd = fees.mul(feeTokenPrice).div(expandDecimals(1, fromTokenInfo.decimals));\r\n      }\r\n      feeBps = feeBasisPoints;\r\n    }\r\n  } else if (toUsdMax && fromAmount) {\r\n    positionFee = toUsdMax.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\r\n    if (suitableMarket?.name === 'GMX') {\r\n      feesUsd = positionFee;\r\n    } else if (suitableMarket?.name === 'GNS') {\r\n      feesUsd = expandDecimals(BigNumber.from(formatAmount(fromAmount.mul(leverage / 10**4), 4, 0, 0)).mul(8), 12);\r\n    }\r\n    \r\n\r\n    const { feeBasisPoints } = getNextToAmount(\r\n      chainId,\r\n      fromAmount,\r\n      fromTokenAddress,\r\n      collateralTokenAddress,\r\n      infoTokens,\r\n      undefined,\r\n      undefined,\r\n      usdgSupply,\r\n      totalTokenWeights,\r\n      isSwap\r\n    );\r\n    if (feeBasisPoints) {\r\n      swapFees = fromUsdMin.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n      feesUsd = feesUsd.add(swapFees);\r\n    }\r\n    feeBps = feeBasisPoints;\r\n  }\r\n\r\n  const [TPValue, setTPValue] = useState('');\r\n  const [SLValue, setSLValue] = useState('');\r\n  const [TPHasError, setTPHasError] = useState(false);\r\n  const [SLHasError, setSLHasError] = useState(false);\r\n  \r\n  const openTrade = async (price) => {\r\n    setIsSubmitting(true);\r\n    \r\n    const pairIndex = GNS_PAIRS[toToken.symbol];\r\n    const posSize = ethers.utils.parseEther(fromValue);\r\n    const openPrice = formatAmount(price ?? toTokenInfo.maxPrice, 20, 0, 0);\r\n    const roundLeverage = leverage / 10**4;\r\n    const typeOfOrder = isMarketOrder ? 0 : 1;\r\n    const slippage = userSlippage * 10**10;\r\n\r\n    const takeProfit = TPValue ? (formatForContract(TPValue, 10)).toFixed(0) : '0';\r\n    const stopLoss = SLValue ? (formatForContract(SLValue, 10)).toFixed(0) : '0';\r\n    \r\n    const fees = BigNumber.from(formatAmount(feesUsd, 12, 0, 0));\r\n    \r\n    const key = `${pairIndex}${roundLeverage}`;\r\n    \r\n    const contract = new ethers.Contract(GNS_Trading.address, GNS_Trading.abi, library.getSigner());\r\n    contract.openTrade(\r\n      [account, pairIndex, 0, 0, posSize, openPrice, isLong, roundLeverage, takeProfit, stopLoss],\r\n      typeOfOrder,\r\n      0,\r\n      slippage,\r\n      account\r\n    ).then(tsc => {\r\n      if (isMarketOrder) {\r\n        pendingPositionsGNS[key] = {\r\n          pairIndex,\r\n          isLong,\r\n          leverage,\r\n          positionSizeDai: posSize.sub(fees),\r\n        };\r\n        setPendingPositionsGNS(pendingPositionsGNS);\r\n      }\r\n      \r\n      setIsConfirming(false);\r\n      console.log(tsc);\r\n      \r\n      tsc.wait()\r\n        .then(() => {\r\n          notifySuccess(`${isMarketOrder ? 'Position' : 'Limit Order'} submitted!`, tsc.hash);\r\n        })\r\n    }, errAlert)\r\n    .finally(() => {\r\n      setIsSubmitting(false);\r\n      setIsPendingConfirmation(false);\r\n      setTPValue('');\r\n      setSLValue('');\r\n    });\r\n  };\r\n\r\n  const leverageStorage = {\r\n    GMX: {\r\n      marks: {\r\n        2: \"2x\",\r\n        5: \"5x\",\r\n        10: \"10x\",\r\n        15: \"15x\",\r\n        20: \"20x\",\r\n        25: \"25x\",\r\n        30: \"30x\",\r\n        35: \"35x\",\r\n        40: \"40x\",\r\n        45: \"45x\",\r\n        50: \"50x\",\r\n      },\r\n      min: 2,\r\n      max: 50,\r\n    },\r\n    GNS: {\r\n      marks: {\r\n        2: \"2x\",\r\n        25: \"25x\",\r\n        50: \"50x\",\r\n        75: \"75x\",\r\n        100: \"100x\",\r\n        125: \"125x\",\r\n        150: \"150x\",\r\n      },\r\n      min: 2,\r\n      max: 150,\r\n    }\r\n  };\r\n  const curLeverage = leverageStorage[suitableMarket?.name];\r\n\r\n  if (!fromToken || !toToken) {\r\n    return null;\r\n  }\r\n\r\n  let hasZeroBorrowFee = false;\r\n  let borrowFeeText;\r\n  if (isLong && toTokenInfo && toTokenInfo.fundingRate) {\r\n    borrowFeeText = formatAmount(toTokenInfo.fundingRate, 4, 4) + \"% / 1h\";\r\n    if (toTokenInfo.fundingRate.eq(0)) {\r\n      // hasZeroBorrowFee = true\r\n    }\r\n  }\r\n  if (isShort && shortCollateralToken && shortCollateralToken.fundingRate) {\r\n    borrowFeeText = formatAmount(shortCollateralToken.fundingRate, 4, 4) + \"% / 1h\";\r\n    if (shortCollateralToken.fundingRate.eq(0)) {\r\n      // hasZeroBorrowFee = true\r\n    }\r\n  }\r\n\r\n  function setFromValueToMaximumAvailable() {\r\n    if (!fromToken || !fromBalance) {\r\n      return;\r\n    }\r\n\r\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\r\n    setFromValue(formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals));\r\n    setAnchorOnFromAmount(true);\r\n  }\r\n\r\n  function shouldShowMaxButton() {\r\n    if (!fromToken || !fromBalance) {\r\n      return false;\r\n    }\r\n    const maxAvailableAmount = fromToken.isNative ? fromBalance.sub(bigNumberify(DUST_BNB).mul(2)) : fromBalance;\r\n    return fromValue !== formatAmountFree(maxAvailableAmount, fromToken.decimals, fromToken.decimals);\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"Exchange-swap-box\">\r\n      {/* <div className=\"Exchange-swap-wallet-box App-box\">\r\n        {active && <div className=\"Exchange-swap-account\" >\r\n        </div>}\r\n      </div> */}\r\n      <div className=\"Exchange-swap-box-inner App-box\">\r\n        <div>\r\n          <div className=\"Exchange-swap-box__settings\">\r\n            <Tab\r\n              icons={SWAP_ICONS}\r\n              options={SWAP_OPTIONS}\r\n              option={swapOption}\r\n              onChange={onSwapOptionChange}\r\n              className={\"Exchange-swap-option-tabs\"}\r\n            />\r\n            <button className=\"btn Exchange-swap-box__settings-btn\"\r\n              onClick={() => {\r\n                openModal('Choose-Market');\r\n              }}>\r\n              <img src={icon_settings} alt=\"Settings icon\" />\r\n            </button>\r\n          </div>\r\n          \r\n          {flagOrdersEnabled && (\r\n            <div className=\"Tab-inline-container\">\r\n              <Tab\r\n                options={orderOptions}\r\n                optionLabels={orderOptionLabels}\r\n                className=\"Exchange-swap-order-type-tabs\"\r\n                type=\"inline\"\r\n                option={orderOption}\r\n                onChange={onOrderOptionChange}\r\n              />\r\n            </div>\r\n            \r\n          )}\r\n        </div>\r\n        {showFromAndToSection && (\r\n          <React.Fragment>\r\n            <div className={\"Exchange-swap-section\"\r\n               + (hasInputError ? \" error\" : \"\") + (hasInputFocus ? \" hlight\" : \"\")}>\r\n              <div className=\"Exchange-swap-section-top\">\r\n                <div className=\"muted\">\r\n                  {fromUsdMin && (\r\n                    <div className=\"Exchange-swap-usd\">Pay: {formatAmount(fromUsdMin, USD_DECIMALS, 2, true)} {suitableMarket?.name === 'GMX' && 'USD'}{suitableMarket?.name === 'GNS' && 'DAI'}</div>\r\n                  )}\r\n                  {!fromUsdMin && \"Pay\"}\r\n                </div>\r\n                {fromBalance && (\r\n                  <div className=\"muted align-right clickable\" onClick={setFromValueToMaximumAvailable}>\r\n                    Balance: {formatAmount(fromBalance, fromToken.decimals, 4, true)}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"Exchange-swap-section-bottom\">\r\n                <div className=\"Exchange-swap-input-container\">\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    placeholder=\"0.0\"\r\n                    className=\"Exchange-swap-input\"\r\n                    value={fromValue}\r\n                    onChange={onFromValueChange}\r\n                    onFocus={(e) => {\r\n                      setHasInputFocus(true);\r\n                    }}\r\n                    onBlur={(e) => {\r\n                      setHasInputFocus(false);\r\n                    }}\r\n                  />\r\n                  {shouldShowMaxButton() && (\r\n                    <div className=\"Exchange-swap-max\" onClick={setFromValueToMaximumAvailable}>\r\n                      Max\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  {/* Tokens control */}\r\n                  {suitableMarket?.name === 'GMX' &&\r\n                    <TokenSelector\r\n                      label=\"Pay\"\r\n                      chainId={chainId}\r\n                      tokenAddress={fromTokenAddress}\r\n                      onSelectToken={onSelectFromToken}\r\n                      tokens={fromTokens}\r\n                      infoTokens={infoTokens}\r\n                      showMintingCap={false}\r\n                      showTokenImgInDropdown={true}\r\n                    />}\r\n                  {suitableMarket?.name === 'GNS' &&\r\n                    <div className=\"TokenSelector-dummy\">DAI</div>\r\n                  }\r\n                  \r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* <div className=\"Exchange-swap-ball-container\">\r\n              <div className=\"Exchange-swap-ball\" onClick={switchTokens}>\r\n                <IoMdSwap className=\"Exchange-swap-ball-icon\" />\r\n              </div>\r\n            </div> */}\r\n            <div className=\"Exchange-swap-section\">\r\n              <div className=\"Exchange-swap-section-top\">\r\n                <div className=\"muted\">\r\n                  {toUsdMax && suitableMarket?.name === 'GMX' && (\r\n                    <div className=\"Exchange-swap-usd\">\r\n                      {getToLabel()}: {formatAmount(toUsdMax, USD_DECIMALS, 2, true)} USD\r\n                    </div>\r\n                  )}\r\n                  {toUsdMax && fromAmount && suitableMarket?.name === 'GNS' && (\r\n                    <div className=\"Exchange-swap-usd\">\r\n                      {getToLabel()}: {formatAmount(fromAmount.mul(leverage / 10**4), USDG_DECIMALS, 2, true)} USD\r\n                    </div>\r\n                  )}\r\n                  {!toUsdMax && getToLabel()}\r\n                </div>\r\n                {toBalance && isSwap && (\r\n                  <div className=\"muted align-right\">\r\n                    <Trans>Balance</Trans>: {formatAmount(toBalance, toToken.decimals, 4, true)}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"Exchange-swap-section-bottom\">\r\n                <div>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    placeholder=\"0.0\"\r\n                    className=\"Exchange-swap-input\"\r\n                    value={toValue}\r\n                    onChange={onToValueChange}\r\n                    onFocus={(e) => {\r\n                      e.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n                    }}\r\n                    onBlur={(e) => {\r\n                      e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TokenSelector\r\n                    label={getTokenLabel()}\r\n                    chainId={chainId}\r\n                    tokenAddress={toTokenAddress}\r\n                    onSelectToken={onSelectToToken}\r\n                    tokens={toTokens}\r\n                    infoTokens={infoTokens}\r\n                    showTokenImgInDropdown={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </React.Fragment>\r\n        )}\r\n        {showTriggerRatioSection && (\r\n          <div className=\"Exchange-swap-section\">\r\n            <div className=\"Exchange-swap-section-top\">\r\n              <div className=\"muted\">\r\n                <Trans>Price</Trans>\r\n              </div>\r\n              {fromTokenInfo && toTokenInfo && (\r\n                <div\r\n                  className=\"muted align-right clickable\"\r\n                  onClick={() => {\r\n                    setTriggerRatioValue(\r\n                      formatAmountFree(\r\n                        getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted),\r\n                        USD_DECIMALS,\r\n                        10\r\n                      )\r\n                    );\r\n                  }}\r\n                >\r\n                  {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 4)}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"Exchange-swap-section-bottom\">\r\n              <div className=\"Exchange-swap-input-container\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  placeholder=\"0.0\"\r\n                  className=\"Exchange-swap-input small\"\r\n                  value={triggerRatioValue}\r\n                  onChange={onTriggerRatioChange}\r\n                  onFocus={(e) => {\r\n                    e.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n                  }}\r\n                  onBlur={(e) => {\r\n                    e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n                  }}\r\n                />\r\n              </div>\r\n              {(() => {\r\n                if (!toTokenInfo) return;\r\n                if (!fromTokenInfo) return;\r\n                const [tokenA, tokenB] = triggerRatioInverted\r\n                  ? [toTokenInfo, fromTokenInfo]\r\n                  : [fromTokenInfo, toTokenInfo];\r\n                return (\r\n                  <div className=\"PositionEditor-token-symbol\">\r\n                    {tokenA.symbol}&nbsp;per&nbsp;{tokenB.symbol}\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {showTriggerPriceSection && (\r\n          <div className=\"Exchange-swap-section\">\r\n            <div className=\"Exchange-swap-section-top\">\r\n              <div className=\"muted\">\r\n                <Trans>Price</Trans>\r\n              </div>\r\n              <div\r\n                className=\"muted align-right clickable\"\r\n                onClick={() => {\r\n                  setTriggerPriceValue(formatAmountFree(entryMarkPrice, USD_DECIMALS, 2));\r\n                }}\r\n              >\r\n                Mark: {formatAmount(entryMarkPrice, USD_DECIMALS, 2, true)}\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-swap-section-bottom\">\r\n              <div className=\"Exchange-swap-input-container\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  placeholder=\"0.0\"\r\n                  className=\"Exchange-swap-input\"\r\n                  value={triggerPriceValue}\r\n                  onChange={onTriggerPriceChange}\r\n                  onFocus={(e) => {\r\n                    e.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n                  }}\r\n                  onBlur={(e) => {\r\n                    e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"PositionEditor-token-symbol\">USD</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {isSwap && (\r\n          <div className=\"Exchange-swap-box-info\">\r\n            <ExchangeInfoRow label=\"Fees\">\r\n              <div>\r\n                {!fees && \"-\"}\r\n                {fees && (\r\n                  <div>\r\n                    {formatAmount(feeBps, 2, 2, false)}%&nbsp; ({formatAmount(fees, fromToken.decimals, 4, true)}{\" \"}\r\n                    {fromToken.symbol}: ${formatAmount(feesUsd, USD_DECIMALS, 2, true)})\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </ExchangeInfoRow>\r\n          </div>\r\n        )}\r\n        {(isLong || isShort) && !isStopOrder && (\r\n          <div className=\"Exchange-leverage-box\">\r\n            <div className=\"Exchange-leverage-slider-settings\">\r\n              <div>Leverage</div>\r\n              {(isLong || isShort) && hasLeverageOption && (\r\n                <div className=\"Exchange-leverage-value\">\r\n                  {parseFloat(leverageOption).toFixed(2)}x\r\n                </div>\r\n              )}\r\n            </div>\r\n            {isLeverageSliderEnabled && (\r\n              <div\r\n                className={cx(\"Exchange-leverage-slider\", \"App-slider\", {\r\n                  positive: isLong,\r\n                  negative: isShort,\r\n                })}\r\n              >\r\n                <Slider\r\n                  min={curLeverage?.min}\r\n                  max={curLeverage?.max}\r\n                  step={1}\r\n                  marks={curLeverage?.marks}\r\n                  handle={leverageSliderHandle}\r\n                  onChange={(value) => setLeverageOption(value)}\r\n                  value={leverageOption}\r\n                  defaultValue={leverageOption}\r\n                />\r\n              </div>\r\n            )}\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Tooltip\r\n                  className=\"has-hint-tooltip nowrap\"\r\n                  handle=\"Liquidity Source\"\r\n                  position=\"left-bottom\"\r\n                  enabled={true}\r\n                  renderContent={() => {\r\n                    return (\r\n                      <div className=\"Tooltip__text\">\r\n                        DeDeLend will automatically <br />choose an appropriate <br />liquidity source\r\n                      </div>\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"align-right\">\r\n                <Selector\r\n                  items={marketsList.map(market => market.name)}\r\n                  chosenItem={suitableMarket?.name}\r\n                  onSelect={onMarketSelect}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                Available Liquidity\r\n              </div>\r\n              <div className=\"align-right icon-container\">\r\n                ${suitableMarket && liquidity && (\r\n                  liquidity[suitableMarket?.name]?.formattedValue\r\n                )}\r\n              </div>\r\n            </div>\r\n            {isShort && (\r\n              <div className=\"Exchange-info-row Exchange-info-row_relative\">\r\n                <div className=\"Exchange-info-label\">\r\n                  <Trans>Collateral In</Trans>\r\n                </div>\r\n\r\n                <div className=\"align-right\">\r\n                  {\r\n                    suitableMarket?.name === 'GMX' &&\r\n                      <TokenSelector\r\n                        label=\"Collateral In\"\r\n                        chainId={chainId}\r\n                        tokenAddress={shortCollateralAddress}\r\n                        onSelectToken={onSelectShortCollateralAddress}\r\n                        tokens={stableTokens}\r\n                        showTokenImgInDropdown={true}\r\n                        disabled={false}\r\n                      />\r\n                  }\r\n                  {\r\n                    suitableMarket?.name === 'GNS' &&\r\n                      'DAI'\r\n                  }\r\n                </div>\r\n              </div>\r\n            )}\r\n            {isLong && (\r\n              <div className=\"Exchange-info-row\">\r\n                <div className=\"Exchange-info-label\">\r\n                  <Trans>Collateral In</Trans>\r\n                </div>\r\n                <div className=\"align-right\">\r\n                  {\r\n                    suitableMarket?.name === 'GMX' &&\r\n                      'USD'\r\n                  }\r\n                  {\r\n                    suitableMarket?.name === 'GNS' &&\r\n                      'DAI'\r\n                  }\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Entry Price</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                  {\r\n                    suitableMarket?.name === 'GMX' &&\r\n                    hasExistingPosition && toAmount && toAmount.gt(0) && (\r\n                      <div className=\"inline-block muted\">\r\n                        ${formatAmount(existingPosition.averagePrice, USD_DECIMALS, 2, true)}\r\n                        <BsArrowRight className=\"transition-arrow\" />\r\n                      </div>\r\n                    )\r\n                  }\r\n                {nextAveragePrice && `$${formatAmount(nextAveragePrice, USD_DECIMALS, 2, true)}`}\r\n                {!nextAveragePrice && `-`}\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Liq. Price</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {\r\n                  suitableMarket?.name === 'GMX' &&\r\n                  hasExistingPosition && toAmount && toAmount.gt(0) && (\r\n                    <div className=\"inline-block muted\">\r\n                      ${formatAmount(existingLiquidationPrice, USD_DECIMALS, 2, true)}\r\n                      <BsArrowRight className=\"transition-arrow\" />\r\n                    </div>\r\n                  )\r\n                }\r\n                {toAmount &&\r\n                  displayLiquidationPrice &&\r\n                  `$${formatAmount(displayLiquidationPrice, USD_DECIMALS, 2, true)}`}\r\n                {!toAmount && displayLiquidationPrice && `-`}\r\n                {!displayLiquidationPrice && `-`}\r\n              </div>\r\n            </div>\r\n            <ExchangeInfoRow label=\"Fees\">\r\n              <div>\r\n                {!feesUsd && \"-\"}\r\n                {feesUsd && (\r\n                  <Tooltip\r\n                    handle={`${suitableMarket?.name === 'GMX' ? '$' : ''}${formatAmount(feesUsd, USD_DECIMALS, 2, true)}${suitableMarket?.name === 'GNS' ? ' DAI' : ''}`}\r\n                    position=\"right-bottom\"\r\n                    renderContent={() => {\r\n                      return (\r\n                        <div>\r\n                          {swapFees && (\r\n                            <div>\r\n                              {collateralToken.symbol} is required for collateral. <br />\r\n                              <br />\r\n                              <StatsTooltipRow\r\n                                label={`Swap ${fromToken.symbol} to ${collateralToken.symbol} Fee`}\r\n                                value={formatAmount(swapFees, USD_DECIMALS, 2, true)}\r\n                              />\r\n                              <br />\r\n                            </div>\r\n                          )}\r\n                          <div>\r\n                            <StatsTooltipRow\r\n                              label={`Position Fee (0.1% of position size)`}\r\n                              value={formatAmount(positionFee, USD_DECIMALS, 2, true)}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    }}\r\n                  />\r\n                )}\r\n              </div>\r\n            </ExchangeInfoRow>\r\n          </div>\r\n        )}\r\n        {isStopOrder && (\r\n          <div className=\"Exchange-swap-section Exchange-trigger-order-info\">\r\n            Take-profit and stop-loss orders can be set after opening a position. <br />\r\n            <br />\r\n            There will be a \"Close\" button on each position row, clicking this will display the option to set trigger\r\n            orders. <br />\r\n            <br />\r\n            For screenshots and more information, please see the{\" \"}\r\n            <a\r\n              href=\"https://gmxio.gitbook.io/gmx/trading#stop-loss-take-profit-orders\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              docs\r\n            </a>\r\n            .\r\n          </div>\r\n        )}\r\n        <div className=\"Exchange-swap-button-container\">\r\n          <button className={cx(\"Exchange-swap-button btn\", isPrimaryEnabled() && \" btn_hlight\")} onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {/* {isSwap && (\r\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\r\n          <div className=\"Exchange-swap-market-box-title\">\r\n            <Trans>Swap</Trans>\r\n          </div>\r\n          <div className=\"App-card-divider\"></div>\r\n          <div className=\"Exchange-info-row\">\r\n            <div className=\"Exchange-info-label\">{fromToken.symbol} Price</div>\r\n            <div className=\"align-right\">\r\n              ${fromTokenInfo && formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)}\r\n            </div>\r\n          </div>\r\n          <div className=\"Exchange-info-row\">\r\n            <div className=\"Exchange-info-label\">{toToken.symbol} Price</div>\r\n            <div className=\"align-right\">\r\n              ${toTokenInfo && formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)}\r\n            </div>\r\n          </div>\r\n          <div className=\"Exchange-info-row\">\r\n            <div className=\"Exchange-info-label\">\r\n              <Trans>Available Liquidity</Trans>\r\n            </div>\r\n\r\n            <div className=\"align-right al-swap\">\r\n              <Tooltip\r\n                handle={`$${formatAmount(maxSwapAmountUsd, USD_DECIMALS, 2, true)}`}\r\n                position=\"right-bottom\"\r\n                renderContent={() => {\r\n                  return (\r\n                    <div>\r\n                      <StatsTooltipRow\r\n                        label={`Max ${fromTokenInfo.symbol} in`}\r\n                        value={[\r\n                          `${formatAmount(maxFromTokenIn, fromTokenInfo.decimals, 0, true)} ${fromTokenInfo.symbol}`,\r\n                          `($${formatAmount(maxFromTokenInUSD, USD_DECIMALS, 0, true)})`,\r\n                        ]}\r\n                      />\r\n                      <StatsTooltipRow\r\n                        label={`Max ${toTokenInfo.symbol} out`}\r\n                        value={[\r\n                          `${formatAmount(maxToTokenOut, toTokenInfo.decimals, 0, true)} ${toTokenInfo.symbol}`,\r\n                          `($${formatAmount(maxToTokenOutUSD, USD_DECIMALS, 0, true)})`,\r\n                        ]}\r\n                      />\r\n                    </div>\r\n                  );\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n          {!isMarketOrder && (\r\n            <ExchangeInfoRow label=\"Price\">\r\n              {getExchangeRateDisplay(getExchangeRate(fromTokenInfo, toTokenInfo), fromToken, toToken)}\r\n            </ExchangeInfoRow>\r\n          )}\r\n        </div>\r\n      )}\r\n      {(isLong || isShort) && (\r\n        <div className=\"Exchange-swap-market-box App-box App-box-border\">\r\n          <div className=\"Exchange-swap-market-box-title\">\r\n            {isLong ? \"Long\" : \"Short\"}&nbsp;{toToken.symbol}\r\n          </div>\r\n          {renderAvailableLongLiquidity()}\r\n          {isShort && toTokenInfo.hasMaxAvailableShort && (\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Available Liquidity</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                <Tooltip\r\n                  handle={`$${formatAmount(toTokenInfo.maxAvailableShort, USD_DECIMALS, 2, true)}`}\r\n                  position=\"right-bottom\"\r\n                  renderContent={() => {\r\n                    return (\r\n                      <>\r\n                        <StatsTooltipRow\r\n                          label={`Max ${toTokenInfo.symbol} short capacity`}\r\n                          value={formatAmount(toTokenInfo.maxGlobalShortSize, USD_DECIMALS, 0, true)}\r\n                        />\r\n                        <StatsTooltipRow\r\n                          label={`Current ${toTokenInfo.symbol} shorts`}\r\n                          value={formatAmount(toTokenInfo.globalShortSize, USD_DECIMALS, 0, true)}\r\n                        />\r\n                      </>\r\n                    );\r\n                  }}\r\n                ></Tooltip>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )} */}\r\n      <NoLiquidityErrorModal\r\n        chainId={chainId}\r\n        fromToken={fromToken}\r\n        toToken={toToken}\r\n        shortCollateralToken={shortCollateralToken}\r\n        isLong={isLong}\r\n        isShort={isShort}\r\n        modalError={modalError}\r\n        setModalError={setModalError}\r\n      />\r\n      {isConfirming && (\r\n        <ConfirmationBox\r\n          library={library}\r\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\r\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\r\n          orders={orders}\r\n          isSwap={isSwap}\r\n          isLong={isLong}\r\n          isMarketOrder={isMarketOrder}\r\n          orderOption={orderOption}\r\n          isShort={isShort}\r\n          fromToken={fromToken}\r\n          fromTokenInfo={fromTokenInfo}\r\n          toToken={toToken}\r\n          toTokenInfo={toTokenInfo}\r\n          toAmount={toAmount}\r\n          fromAmount={fromAmount}\r\n          feeBps={feeBps}\r\n          onConfirmationClick={onConfirmationClick}\r\n          setIsConfirming={setIsConfirming}\r\n          hasExistingPosition={hasExistingPosition}\r\n          shortCollateralAddress={USDC.address}\r\n          shortCollateralToken={shortCollateralToken}\r\n          leverage={leverage}\r\n          existingPosition={existingPosition}\r\n          existingLiquidationPrice={existingLiquidationPrice}\r\n          displayLiquidationPrice={displayLiquidationPrice}\r\n          nextAveragePrice={nextAveragePrice}\r\n          triggerPriceUsd={triggerPriceUsd}\r\n          triggerRatio={triggerRatio}\r\n          fees={fees}\r\n          feesUsd={feesUsd}\r\n          isSubmitting={isSubmitting}\r\n          isPendingConfirmation={isPendingConfirmation}\r\n          fromUsdMin={fromUsdMin}\r\n          toUsdMax={toUsdMax}\r\n          collateralTokenAddress={collateralTokenAddress}\r\n          infoTokens={infoTokens}\r\n          chainId={chainId}\r\n          setPendingTxns={setPendingTxns}\r\n          pendingTxns={pendingTxns}\r\n          minExecutionFee={minExecutionFee}\r\n          minExecutionFeeUSD={minExecutionFeeUSD}\r\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\r\n          savedSlippageAmount={savedSlippageAmount}\r\n          userSlippage={userSlippage}\r\n          setUserSlippage={setUserSlippage}\r\n          allowedSlippage={allowedSlippage}\r\n          market={suitableMarket?.name}\r\n          TPValue={TPValue}\r\n          setTPValue={setTPValue}\r\n          SLValue={SLValue}\r\n          setSLValue={setSLValue}\r\n          SLHasError={SLHasError}\r\n          setSLHasError={setSLHasError}\r\n          TPHasError={TPHasError}\r\n          setTPHasError={setTPHasError}\r\n          liquidity={liquidity}\r\n        />\r\n      )}\r\n      {renderModal()}\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport { Menu } from \"@headlessui/react\";\r\nimport { FaChevronDown } from \"react-icons/fa\";\r\nimport cx from \"classnames\";\r\nimport \"./ChartTokenSelector.scss\";\r\nimport \"../AddressDropdown/AddressDropdown.css\";\r\nimport { getTokens, getWhitelistedTokens } from \"../../config/Tokens\";\r\nimport { LONG, SHORT, SWAP } from \"../../lib/legacy\";\r\nimport { ethers } from 'ethers';\r\n\r\nexport default function ChartTokenSelector(props) {\r\n  const { chainId, selectedToken, onSelectToken, swapOption } = props;\r\n\r\n  const isLong = swapOption === LONG;\r\n  const isShort = swapOption === SHORT;\r\n  const isSwap = swapOption === SWAP;\r\n\r\n  let options = getTokens(chainId);\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n\r\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped);\r\n  const shortableTokens = indexTokens.filter((token) => token.isShortable);\r\n\r\n  if (isLong) {\r\n    options = indexTokens;\r\n  }\r\n  if (isShort) {\r\n    options = shortableTokens;\r\n  }\r\n\r\n  const onSelect = async (token) => {\r\n    onSelectToken(token);\r\n  };\r\n\r\n  const value = selectedToken;\r\n  let icon;\r\n  if (value.symbol) {\r\n    icon = require(\"../../img/ddl/ic_\" + value.symbol?.toLowerCase() + \"_40.svg\")?.default;\r\n  }\r\n\r\n  return (\r\n    <Menu>\r\n      <Menu.Button as=\"div\" disabled={isSwap}>\r\n        <button className={cx(\"App-cta small transparent chart-token-selector\", { \"default-cursor\": isSwap /* \"default-cursor\": \"default\" */ })}>\r\n          <div className=\"chart-token-selector--name\">\r\n            <img src={icon} className=\"chart-token-selector--icon\" alt={value.symbol + ' icon'} />\r\n            <span className=\"chart-token-selector--current\">{value.symbol}/USD</span>\r\n          </div>\r\n          \r\n          {!isSwap && (\r\n            <svg className=\"chevron-down\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"21\" viewBox=\"0 0 20 21\" fill=\"none\">\r\n              <path d=\"M4 8L10 13L16 8\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n            </svg>\r\n          )}\r\n        </button>\r\n      </Menu.Button>\r\n      <div className=\"chart-token-menu\">\r\n        <Menu.Items as=\"div\" className=\"menu-items chart-token-menu-items divided\">\r\n          {options.map((option, index) => {\r\n            let tokenPopupImage;\r\n            try {\r\n              tokenPopupImage = require(\"../../img/ddl/ic_\" + option.symbol.toLowerCase() + \"_40.svg\");\r\n            } catch (error) {\r\n              tokenPopupImage = require(\"../../img/ddl/ic_eth_40.svg\");\r\n            }\r\n            \r\n            return (<Menu.Item key={index}>\r\n              <div\r\n                className={\"menu-item\" + (option.symbol === value.symbol ? ' chosen' : '')}\r\n                onClick={() => {\r\n                  onSelect(option);\r\n                }}\r\n              >\r\n                <img src={tokenPopupImage?.default} alt={option.symbol + ' icon'} className=\"token-icon\" />\r\n                <span style={{ marginLeft: 7, marginRight: 35 }} className=\"token-label\">\r\n                  {option.symbol} / USD\r\n                </span>\r\n              </div>\r\n            </Menu.Item>)\r\n          })}\r\n        </Menu.Items>\r\n      </div>\r\n    </Menu>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useRef, useCallback, useMemo } from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport { createChart } from \"krasulya-lightweight-charts\";\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  SWAP,\r\n  INCREASE,\r\n  CHART_PERIODS,\r\n  getTokenInfo,\r\n  formatAmount,\r\n  formatDateTime,\r\n  usePrevious,\r\n  getLiquidationPrice,\r\n  useLocalStorageSerializeKey,\r\n  numberWithCommas,\r\n} from \"../../lib/legacy\";\r\nimport { useChartPrices } from \"../../domain/legacy\";\r\nimport Tab from \"../Tab/Tab\";\r\n\r\nimport { getTokens, getToken } from \"../../config/Tokens\";\r\nimport ChartTokenSelector from \"./ChartTokenSelector\";\r\nimport Tooltip from './../Tooltip/Tooltip';\r\n\r\nconst PRICE_LINE_TEXT_WIDTH = 15;\r\n\r\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\r\n\r\nexport function getChartToken(swapOption, fromToken, toToken, chainId) {\r\n  if (!fromToken || !toToken) {\r\n    return;\r\n  }\r\n\r\n  if (swapOption !== SWAP) {\r\n    return toToken;\r\n  }\r\n\r\n  if (fromToken.isUsdg && toToken.isUsdg) {\r\n    return getTokens(chainId).find((t) => t.isStable);\r\n  }\r\n  if (fromToken.isUsdg) {\r\n    return toToken;\r\n  }\r\n  if (toToken.isUsdg) {\r\n    return fromToken;\r\n  }\r\n\r\n  if (fromToken.isStable && toToken.isStable) {\r\n    return toToken;\r\n  }\r\n  if (fromToken.isStable) {\r\n    return toToken;\r\n  }\r\n  if (toToken.isStable) {\r\n    return fromToken;\r\n  }\r\n\r\n  return toToken;\r\n}\r\n\r\nconst DEFAULT_PERIOD = \"4h\";\r\n\r\nconst RED_COLOR = \"#C75E4B\";\r\nconst GREEN_COLOR = \"#46956A\";\r\n\r\nconst getSeriesOptions = () => ({\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/area-series.md\r\n  lineColor: \"#5472cc\",\r\n  topColor: \"rgba(49, 69, 131, 0.4)\",\r\n  bottomColor: \"rgba(42, 64, 103, 0.0)\",\r\n  lineWidth: 2,\r\n  priceLineColor: \"#384263\",\r\n  downColor: RED_COLOR,\r\n  wickDownColor: RED_COLOR,\r\n  upColor: GREEN_COLOR,\r\n  wickUpColor: GREEN_COLOR,\r\n  borderVisible: false,\r\n});\r\n\r\nconst getChartOptions = (width, height) => ({\r\n  width,\r\n  height,\r\n  layout: {\r\n    backgroundColor: \"rgba(255, 255, 255, 0)\",\r\n    textColor: \"#747FA6\",\r\n    fontFamily: \"Gantari\",\r\n  },\r\n  localization: {\r\n    // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#time-format\r\n    timeFormatter: (businessDayOrTimestamp) => {\r\n      return formatDateTime(businessDayOrTimestamp - timezoneOffset);\r\n    },\r\n  },\r\n  grid: {\r\n    vertLines: {\r\n      visible: true,\r\n      color: \"rgba(35, 38, 59, 1)\",\r\n      style: 2,\r\n    },\r\n    horzLines: {\r\n      visible: true,\r\n      color: \"rgba(35, 38, 59, 1)\",\r\n      style: 2,\r\n    },\r\n  },\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/time-scale.md#time-scale\r\n  timeScale: {\r\n    rightOffset: 5,\r\n    borderVisible: false,\r\n    barSpacing: 5,\r\n    timeVisible: true,\r\n    fixLeftEdge: true,\r\n  },\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#price-axis\r\n  priceScale: {\r\n    borderVisible: false,\r\n  },\r\n  crosshair: {\r\n    horzLine: {\r\n      color: \"#aaa\",\r\n    },\r\n    vertLine: {\r\n      color: \"#aaa\",\r\n    },\r\n    mode: 0,\r\n  },\r\n});\r\n\r\nexport default function ExchangeTVChart(props) {\r\n  const {\r\n    swapOption,\r\n    fromTokenAddress,\r\n    toTokenAddress,\r\n    infoTokens,\r\n    chainId,\r\n    positions,\r\n    savedShouldShowPositionLines,\r\n    orders,\r\n    setToTokenAddress,\r\n  } = props;\r\n  const [currentChart, setCurrentChart] = useState();\r\n  const [currentSeries, setCurrentSeries] = useState();\r\n\r\n  let [period, setPeriod] = useLocalStorageSerializeKey([chainId, \"Chart-period\"], DEFAULT_PERIOD);\r\n  if (!(period in CHART_PERIODS)) {\r\n    period = DEFAULT_PERIOD;\r\n  }\r\n\r\n  const [hoveredCandlestick, setHoveredCandlestick] = useState();\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  const [chartToken, setChartToken] = useState({\r\n    maxPrice: null,\r\n    minPrice: null,\r\n  });\r\n  useEffect(() => {\r\n    const tmp = getChartToken(swapOption, fromToken, toToken, chainId);\r\n    setChartToken(tmp);\r\n  }, [swapOption, fromToken, toToken, chainId]);\r\n\r\n  const symbol = chartToken ? (chartToken.isWrapped ? chartToken.baseSymbol : chartToken.symbol) : undefined;\r\n  const marketName = chartToken ? symbol + \"_USD\" : undefined;\r\n  const previousMarketName = usePrevious(marketName);\r\n\r\n  const currentOrders = useMemo(() => {\r\n    if (swapOption === SWAP || !chartToken) {\r\n      return [];\r\n    }\r\n\r\n    return orders.filter((order) => {\r\n      if (order.type === SWAP) {\r\n        // we can't show non-stable to non-stable swap orders with existing charts\r\n        // so to avoid users confusion we'll show only long/short orders\r\n        return false;\r\n      }\r\n\r\n      const indexToken = getToken(chainId, order.indexToken);\r\n      return order.indexToken === chartToken.address || (chartToken.isNative && indexToken.isWrapped);\r\n    });\r\n  }, [orders, chartToken, swapOption, chainId]);\r\n\r\n  const ref = useRef(null);\r\n  const chartRef = useRef(null);\r\n\r\n  const currentAveragePrice =\r\n    chartToken.maxPrice && chartToken.minPrice ? chartToken.maxPrice.add(chartToken.minPrice).div(2) : null;\r\n  const [priceData, updatePriceData] = useChartPrices(\r\n    chainId,\r\n    chartToken.symbol,\r\n    chartToken.isStable,\r\n    period,\r\n    currentAveragePrice\r\n  );\r\n\r\n  const [chartInited, setChartInited] = useState(false);\r\n  useEffect(() => {\r\n    if (marketName !== previousMarketName) {\r\n      setChartInited(false);\r\n    }\r\n  }, [marketName, previousMarketName]);\r\n\r\n  const scaleChart = useCallback(() => {\r\n    const from = Date.now() / 1000 - (7 * 24 * CHART_PERIODS[period]) / 2 + timezoneOffset;\r\n    const to = Date.now() / 1000 + timezoneOffset;\r\n    currentChart.timeScale().setVisibleRange({ from, to });\r\n  }, [currentChart, period]);\r\n\r\n  const onCrosshairMove = useCallback(\r\n    (evt) => {\r\n      if (!evt.time) {\r\n        setHoveredCandlestick(null);\r\n        return;\r\n      }\r\n\r\n      for (const point of evt.seriesPrices.values()) {\r\n        setHoveredCandlestick((hoveredCandlestick) => {\r\n          if (hoveredCandlestick && hoveredCandlestick.time === evt.time) {\r\n            // rerender optimisations\r\n            return hoveredCandlestick;\r\n          }\r\n          return {\r\n            time: evt.time,\r\n            ...point,\r\n          };\r\n        });\r\n        break;\r\n      }\r\n    },\r\n    [setHoveredCandlestick]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!ref.current || !priceData || !priceData.length || currentChart) {\r\n      return;\r\n    }\r\n\r\n    const chart = createChart(\r\n      chartRef.current,\r\n      getChartOptions(chartRef.current.offsetWidth, chartRef.current.offsetHeight)\r\n    );\r\n\r\n    chart.subscribeCrosshairMove(onCrosshairMove);\r\n\r\n    const series = chart.addCandlestickSeries(getSeriesOptions());\r\n\r\n    setCurrentChart(chart);\r\n    setCurrentSeries(series);\r\n  }, [ref, priceData, currentChart, onCrosshairMove]);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      updatePriceData(undefined, true);\r\n    }, 10 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, [updatePriceData]);\r\n\r\n  useEffect(() => {\r\n    if (!currentChart) {\r\n      return;\r\n    }\r\n    const resizeChart = () => {\r\n      currentChart.resize(chartRef.current.offsetWidth, chartRef.current.offsetHeight);\r\n    };\r\n    window.addEventListener(\"resize\", resizeChart);\r\n    return () => window.removeEventListener(\"resize\", resizeChart);\r\n  }, [currentChart]);\r\n\r\n  useEffect(() => {\r\n    if (currentSeries && priceData && priceData.length) {\r\n      currentSeries.setData(priceData);\r\n\r\n      if (!chartInited) {\r\n        scaleChart();\r\n        setChartInited(true);\r\n      }\r\n    }\r\n  }, [priceData, currentSeries, chartInited, scaleChart]);\r\n\r\n  useEffect(() => {\r\n    const lines = [];\r\n    if (currentSeries && savedShouldShowPositionLines) {\r\n      if (currentOrders && currentOrders.length > 0) {\r\n        currentOrders.forEach((order) => {\r\n          const indexToken = getToken(chainId, order.indexToken);\r\n          let tokenSymbol;\r\n          if (indexToken && indexToken.symbol) {\r\n            tokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\r\n          }\r\n          const title = `${order.type === INCREASE ? \"Inc.\" : \"Dec.\"} ${tokenSymbol} ${\r\n            order.isLong ? \"Long\" : \"Short\"\r\n          }`;\r\n          const color = \"#3a3e5e\";\r\n          /* lines.push(\r\n            currentSeries.createPriceLine({\r\n              price: parseFloat(formatAmount(order.triggerPrice, USD_DECIMALS, 2)),\r\n              color,\r\n              title: title.padEnd(PRICE_LINE_TEXT_WIDTH, \" \"),\r\n            })\r\n          ); */\r\n        });\r\n      }\r\n      if (positions && positions.length > 0) {\r\n        const color = \"#3a3e5e\";\r\n\r\n        positions.forEach((position) => {\r\n          /* lines.push(\r\n            currentSeries.createPriceLine({\r\n              price: parseFloat(formatAmount(position.averagePrice, USD_DECIMALS, 2)),\r\n              color,\r\n              title: `Open ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}`.padEnd(\r\n                PRICE_LINE_TEXT_WIDTH,\r\n                \" \"\r\n              ),\r\n            })\r\n          ); */\r\n\r\n          const liquidationPrice = getLiquidationPrice(position);\r\n          /* lines.push(\r\n            currentSeries.createPriceLine({\r\n              price: parseFloat(formatAmount(liquidationPrice, USD_DECIMALS, 2)),\r\n              color,\r\n              title: `Liq. ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}`.padEnd(\r\n                PRICE_LINE_TEXT_WIDTH,\r\n                \" \"\r\n              ),\r\n            })\r\n          ); */\r\n        });\r\n      }\r\n    }\r\n    return () => {\r\n      lines.forEach((line) => currentSeries.removePriceLine(line));\r\n    };\r\n  }, [currentOrders, positions, currentSeries, chainId, savedShouldShowPositionLines]);\r\n\r\n  const candleStatsHtml = useMemo(() => {\r\n    if (!priceData) {\r\n      return null;\r\n    }\r\n    const candlestick = hoveredCandlestick || priceData[priceData.length - 1];\r\n    if (!candlestick) {\r\n      return null;\r\n    }\r\n\r\n    const className = cx({\r\n      \"ExchangeChart-bottom-stats\": true,\r\n      positive: candlestick.open <= candlestick.close,\r\n      negative: candlestick.open > candlestick.close,\r\n      [`length-${String(parseInt(candlestick.close)).length}`]: true,\r\n    });\r\n\r\n    const toFixedNumbers = 2;\r\n\r\n    return (\r\n      <div className={className}>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">O</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.open.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">H</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.high.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">L</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.low.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">C</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.close.toFixed(toFixedNumbers)}</span>\r\n      </div>\r\n    );\r\n  }, [hoveredCandlestick, priceData]);\r\n\r\n  let high;\r\n  let low;\r\n  let deltaPrice;\r\n  let delta;\r\n  let deltaPercentage;\r\n  let deltaPercentageStr;\r\n\r\n  const now = parseInt(Date.now() / 1000);\r\n  const timeThreshold = now - 24 * 60 * 60;\r\n\r\n  if (priceData) {\r\n    for (let i = priceData.length - 1; i > 0; i--) {\r\n      const price = priceData[i];\r\n      if (price.time < timeThreshold) {\r\n        break;\r\n      }\r\n      if (!low) {\r\n        low = price.low;\r\n      }\r\n      if (!high) {\r\n        high = price.high;\r\n      }\r\n\r\n      if (price.high > high) {\r\n        high = price.high;\r\n      }\r\n      if (price.low < low) {\r\n        low = price.low;\r\n      }\r\n\r\n      deltaPrice = price.open;\r\n    }\r\n  }\r\n\r\n  if (deltaPrice && currentAveragePrice) {\r\n    const average = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\r\n    delta = average - deltaPrice;\r\n    deltaPercentage = (delta * 100) / average;\r\n    if (deltaPercentage > 0) {\r\n      deltaPercentageStr = `+${deltaPercentage.toFixed(2)}%`;\r\n    } else {\r\n      deltaPercentageStr = `${deltaPercentage.toFixed(2)}%`;\r\n    }\r\n    if (deltaPercentage === 0) {\r\n      deltaPercentageStr = \"0.00\";\r\n    }\r\n  }\r\n\r\n  if (!chartToken) {\r\n    return null;\r\n  }\r\n\r\n  const onSelectToken = (token) => {\r\n    const tmp = getTokenInfo(infoTokens, token.address);\r\n    setChartToken(tmp);\r\n    setToTokenAddress(swapOption, token.address);\r\n  };\r\n\r\n  return (\r\n    <div className=\"ExchangeChart tv\" ref={ref}>\r\n      <div className=\"ExchangeChart-top App-box App-box-border\">\r\n        <div className=\"ExchangeChart-top-inner\">\r\n          <div>\r\n            <div className=\"ExchangeChart-title\">\r\n              <ChartTokenSelector\r\n                chainId={chainId}\r\n                selectedToken={chartToken}\r\n                swapOption={swapOption}\r\n                infoTokens={infoTokens}\r\n                onSelectToken={onSelectToken}\r\n                className=\"chart-token-selector pos-relative\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"ExchangeChart-stats-container\">\r\n            <div>\r\n              <div className=\"ExchangeChart-info-label\">\r\n                <Tooltip\r\n                  className=\"has-hint-tooltip nowrap cur-price-tooltip\"\r\n                  handle=\"Current Price\"\r\n                  position=\"left-bottom\"\r\n                  enabled={true}\r\n                  renderContent={() => {\r\n                    return (\r\n                      <div className=\"Tooltip__text\">\r\n                        Asset price is taken from GMX\r\n                      </div>\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n              \r\n              {/* <div className=\"ExchangeChart-info-label\">\r\n                Current Price\r\n              </div> */}\r\n              <div className=\"ExchangeChart-main-price\">\r\n                ${chartToken.maxPrice && formatAmount(chartToken.maxPrice, USD_DECIMALS, 2, true)}\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className=\"ExchangeChart-info-label\">24h Change</div>\r\n              <div className={cx({ positive: deltaPercentage > 0, negative: deltaPercentage < 0 })}>\r\n                {!deltaPercentageStr && \"-\"}\r\n                {deltaPercentageStr && deltaPercentageStr}\r\n              </div>\r\n            </div>\r\n            <div className=\"ExchangeChart-additional-info\">\r\n              <div className=\"ExchangeChart-info-label\">24h High</div>\r\n              <div>\r\n                {!high && \"-\"}\r\n                {high && numberWithCommas(high.toFixed(2))}\r\n              </div>\r\n            </div>\r\n            <div className=\"ExchangeChart-additional-info\">\r\n              <div className=\"ExchangeChart-info-label\">24h Low</div>\r\n              <div>\r\n                {!low && \"-\"}\r\n                {low && numberWithCommas(low.toFixed(2))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"ExchangeChart-bottom App-box App-box-border\">\r\n        <div className=\"ExchangeChart-bottom-header\">\r\n          <div className=\"ExchangeChart-bottom-controls\">\r\n            <Tab options={Object.keys(CHART_PERIODS)} option={period} setOption={setPeriod} />\r\n          </div>\r\n          {candleStatsHtml}\r\n        </div>\r\n        <div className=\"ExchangeChart-bottom-content\" ref={chartRef}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport cx from \"classnames\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\n\r\nimport {\r\n  formatAmount,\r\n  bigNumberify,\r\n  ARBITRUM,\r\n  DEFAULT_SLIPPAGE_AMOUNT,\r\n  DEFAULT_HIGHER_SLIPPAGE_AMOUNT,\r\n  USD_DECIMALS,\r\n  DUST_USD,\r\n  BASIS_POINTS_DIVISOR,\r\n  USDG_ADDRESS,\r\n  SLIPPAGE_BPS_KEY,\r\n  TRIGGER_PREFIX_BELOW,\r\n  TRIGGER_PREFIX_ABOVE,\r\n  MIN_PROFIT_TIME,\r\n  usePrevious,\r\n  formatAmountFree,\r\n  parseValue,\r\n  expandDecimals,\r\n  getTokenInfo,\r\n  getLiquidationPrice,\r\n  getLeverage,\r\n  getMarginFee,\r\n  PRECISION,\r\n  MARKET,\r\n  STOP,\r\n  DECREASE,\r\n  useLocalStorageSerializeKey,\r\n  calculatePositionDelta,\r\n  getDeltaStr,\r\n  getProfitPrice,\r\n  formatDateTime,\r\n  getTimeRemaining,\r\n  getNextToAmount,\r\n  getUsd,\r\n  USDG_DECIMALS,\r\n  CLOSE_POSITION_RECEIVE_TOKEN_KEY,\r\n  useLocalStorageByChainId,\r\n  adjustForDecimals,\r\n  IS_NETWORK_DISABLED,\r\n  getChainName,\r\n  MAX_ALLOWED_LEVERAGE,\r\n} from \"../../lib/legacy\";\r\nimport { getConstant } from \"../../config/chains\";\r\nimport { createDecreaseOrder, useHasOutdatedUi } from \"../../domain/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport PositionRouter from \"../../abis/PositionRouter.json\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\nimport Tab from \"../Tab/Tab\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport TokenSelector from \"./TokenSelector\";\r\nimport { getTokens } from \"../../config/Tokens\";\r\nimport \"./PositionSeller.css\";\r\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\r\nimport { callContract } from \"../../lib/contracts/callContract\";\r\n\r\nimport marketImg from '../../img/ddl/icon_market.svg'\r\nimport marketActiveImg from '../../img/ddl/icon_market_active.svg'\r\nimport triggerImg from '../../img/ddl/icon_trigger.svg'\r\nimport triggerActiveImg from '../../img/ddl/icon_trigger_active.svg'\r\nimport SlippageInput from './../SlippageInput/SlippageInput';\r\n\r\nconst CLOSE_ICONS = {\r\n  Market: marketImg,\r\n  Market_active: marketActiveImg,\r\n  Stop: triggerImg,\r\n  Stop_active: triggerActiveImg,\r\n}\r\n\r\nconst { AddressZero } = ethers.constants;\r\nconst ORDER_SIZE_DUST_USD = expandDecimals(1, USD_DECIMALS - 1); // $0.10\r\n\r\nconst orderOptionLabels = {\r\n  [MARKET]: \"Market\",\r\n  [STOP]: \"Trigger\",\r\n};\r\n\r\nfunction getTokenAmount(usdAmount, tokenAddress, max, infoTokens) {\r\n  if (!usdAmount) {\r\n    return;\r\n  }\r\n  if (tokenAddress === USDG_ADDRESS) {\r\n    return usdAmount.mul(expandDecimals(1, 18)).div(PRECISION);\r\n  }\r\n  const info = getTokenInfo(infoTokens, tokenAddress);\r\n  if (!info) {\r\n    return;\r\n  }\r\n  if (max && !info.maxPrice) {\r\n    return;\r\n  }\r\n  if (!max && !info.minPrice) {\r\n    return;\r\n  }\r\n\r\n  return usdAmount.mul(expandDecimals(1, info.decimals)).div(max ? info.minPrice : info.maxPrice);\r\n}\r\n\r\nfunction shouldSwap(collateralToken, receiveToken) {\r\n  // If position collateral is WETH in contract, then position.collateralToken is { symbol: ETH, isNative: true,  }\r\n  // @see https://github.com/gmx-io/gmx-interface/blob/master/src/pages/Exchange/Exchange.js#L162\r\n  // meaning if collateralToken.isNative === true in reality position has WETH as a collateral\r\n  // and if collateralToken.isNative === true and receiveToken.isNative === true then positions WETH will be unwrapped and user will receive native ETH\r\n  const isCollateralWrapped = collateralToken.isNative;\r\n\r\n  const isSameToken =\r\n    collateralToken.address === receiveToken.address || (isCollateralWrapped && receiveToken.isWrapped);\r\n\r\n  const isUnwrap = isCollateralWrapped && receiveToken.isNative;\r\n\r\n  return !isSameToken && !isUnwrap;\r\n}\r\n\r\nfunction getSwapLimits(infoTokens, fromTokenAddress, toTokenAddress) {\r\n  const fromInfo = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toInfo = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  let maxInUsd;\r\n  let maxIn;\r\n  let maxOut;\r\n  let maxOutUsd;\r\n\r\n  if (!fromInfo?.maxUsdgAmount) {\r\n    maxInUsd = bigNumberify(0);\r\n    maxIn = bigNumberify(0);\r\n  } else {\r\n    maxInUsd = fromInfo.maxUsdgAmount\r\n      .sub(fromInfo.usdgAmount)\r\n      .mul(expandDecimals(1, USD_DECIMALS))\r\n      .div(expandDecimals(1, USDG_DECIMALS));\r\n\r\n    maxIn = maxInUsd.mul(expandDecimals(1, fromInfo.decimals)).div(fromInfo.maxPrice).toString();\r\n  }\r\n\r\n  if (!toInfo?.poolAmount || !toInfo?.bufferAmount) {\r\n    maxOut = bigNumberify(0);\r\n    maxOutUsd = bigNumberify(0);\r\n  } else {\r\n    maxOut = toInfo.availableAmount.gt(toInfo.poolAmount.sub(toInfo.bufferAmount))\r\n      ? toInfo.poolAmount.sub(toInfo.bufferAmount)\r\n      : toInfo.availableAmount;\r\n\r\n    maxOutUsd = getUsd(maxOut, toInfo.address, false, infoTokens);\r\n  }\r\n\r\n  return {\r\n    maxIn,\r\n    maxInUsd,\r\n    maxOut,\r\n    maxOutUsd,\r\n  };\r\n}\r\n\r\nexport default function PositionSeller(props) {\r\n  const {\r\n    pendingPositions,\r\n    setPendingPositions,\r\n    positionsMap,\r\n    positionKey,\r\n    isVisible,\r\n    setIsVisible,\r\n    account,\r\n    library,\r\n    infoTokens,\r\n    setPendingTxns,\r\n    flagOrdersEnabled,\r\n    savedIsPnlInLeverage,\r\n    chainId,\r\n    nativeTokenAddress,\r\n    orders,\r\n    isWaitingForPluginApproval,\r\n    isPluginApproving,\r\n    orderBookApproved,\r\n    setOrdersToaOpen,\r\n    positionRouterApproved,\r\n    isWaitingForPositionRouterApproval,\r\n    isPositionRouterApproving,\r\n    approvePositionRouter,\r\n    isHigherSlippageAllowed,\r\n    setIsHigherSlippageAllowed,\r\n    minExecutionFee,\r\n    minExecutionFeeErrorMessage,\r\n    usdgSupply,\r\n    totalTokenWeights,\r\n    initTab,\r\n  } = props;\r\n\r\n  const [savedSlippageAmount] = useLocalStorageSerializeKey([chainId, SLIPPAGE_BPS_KEY], DEFAULT_SLIPPAGE_AMOUNT);\r\n\r\n  const [keepLeverage, setKeepLeverage] = useLocalStorageSerializeKey([chainId, \"Exchange-keep-leverage\"], true);\r\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\r\n  const [fromValue, setFromValue] = useState(\"\");\r\n\r\n  const [userSlippage, setUserSlippage] = useState('')\r\n  \r\n  const [isProfitWarningAccepted, setIsProfitWarningAccepted] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const prevIsVisible = usePrevious(isVisible);\r\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\r\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\r\n  const toTokens = getTokens(chainId);\r\n\r\n  const [savedRecieveTokenAddress, setSavedRecieveTokenAddress] = useLocalStorageByChainId(\r\n    chainId,\r\n    `${CLOSE_POSITION_RECEIVE_TOKEN_KEY}-${position.indexToken.symbol}-${position?.isLong ? \"long\" : \"short\"}`\r\n  );\r\n\r\n  const [swapToToken, setSwapToToken] = useState(() =>\r\n    savedRecieveTokenAddress ? toTokens.find((token) => token.address === savedRecieveTokenAddress) : undefined\r\n  );\r\n\r\n  // Slippage Edit\r\n  // let allowedSlippage = savedSlippageAmount;\r\n  let allowedSlippage = DEFAULT_SLIPPAGE_AMOUNT;\r\n  // if (isHigherSlippageAllowed) {\r\n  //   allowedSlippage = DEFAULT_HIGHER_SLIPPAGE_AMOUNT;\r\n  // }\r\n  if (userSlippage !== '') {\r\n    allowedSlippage = userSlippage * 100;\r\n  }\r\n\r\n  const orderOptions = [MARKET, STOP];\r\n  let [orderOption, setOrderOption] = useState(initTab ?? MARKET);\r\n\r\n  if (!flagOrdersEnabled) {\r\n    orderOption = MARKET;\r\n  }\r\n\r\n  const needPositionRouterApproval = !positionRouterApproved && orderOption === MARKET;\r\n\r\n  const onOrderOptionChange = (option) => {\r\n    setOrderOption(option);\r\n  };\r\n\r\n  const onTriggerPriceChange = (evt) => {\r\n    setTriggerPriceValue(evt.target.value || \"\");\r\n  };\r\n\r\n  const [triggerPriceValue, setTriggerPriceValue] = useState(\"\");\r\n  const triggerPriceUsd = orderOption === MARKET ? 0 : parseValue(triggerPriceValue, USD_DECIMALS);\r\n\r\n  const [nextDelta, nextHasProfit = bigNumberify(0)] = useMemo(() => {\r\n    if (!position) {\r\n      return [bigNumberify(0), false];\r\n    }\r\n\r\n    if (orderOption !== STOP) {\r\n      return [position.delta, position.hasProfit, position.deltaPercentage];\r\n    }\r\n\r\n    if (!triggerPriceUsd) {\r\n      return [bigNumberify(0), false];\r\n    }\r\n\r\n    const { delta, hasProfit, deltaPercentage } = calculatePositionDelta(triggerPriceUsd, position);\r\n    return [delta, hasProfit, deltaPercentage];\r\n  }, [position, orderOption, triggerPriceUsd]);\r\n\r\n  const existingOrders = useMemo(() => {\r\n    if (orderOption === STOP && (!triggerPriceUsd || triggerPriceUsd.eq(0))) {\r\n      return [];\r\n    }\r\n    if (!orders || !position) {\r\n      return [];\r\n    }\r\n\r\n    const ret = [];\r\n    for (const order of orders) {\r\n      // only Stop orders can't be executed without corresponding opened position\r\n      if (order.type !== DECREASE) continue;\r\n\r\n      // if user creates Stop-Loss we need only Stop-Loss orders and vice versa\r\n      if (orderOption === STOP) {\r\n        const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\r\n        if (triggerAboveThreshold !== order.triggerAboveThreshold) continue;\r\n      }\r\n\r\n      const sameToken =\r\n        order.indexToken === nativeTokenAddress\r\n          ? position.indexToken.isNative\r\n          : order.indexToken === position.indexToken.address;\r\n      if (order.isLong === position.isLong && sameToken) {\r\n        ret.push(order);\r\n      }\r\n    }\r\n    return ret;\r\n  }, [position, orders, triggerPriceUsd, orderOption, nativeTokenAddress]);\r\n\r\n  const existingOrder = existingOrders[0];\r\n\r\n  const needOrderBookApproval = orderOption === STOP && !orderBookApproved;\r\n\r\n  const isSwapAllowed = orderOption === MARKET;\r\n\r\n  const { data: hasOutdatedUi } = useHasOutdatedUi();\r\n\r\n  let collateralToken;\r\n  let receiveToken;\r\n  let maxAmount;\r\n  let maxAmountFormatted;\r\n  let maxAmountFormattedFree;\r\n  let fromAmount;\r\n\r\n  let convertedAmount;\r\n  let convertedAmountFormatted;\r\n\r\n  let nextLeverage;\r\n  let liquidationPrice;\r\n  let nextLiquidationPrice;\r\n  let isClosing;\r\n  let sizeDelta;\r\n\r\n  let nextCollateral;\r\n  let collateralDelta = bigNumberify(0);\r\n  let receiveAmount = bigNumberify(0);\r\n  let convertedReceiveAmount = bigNumberify(0);\r\n  let adjustedDelta = bigNumberify(0);\r\n\r\n  let isNotEnoughReceiveTokenLiquidity;\r\n  let isCollateralPoolCapacityExceeded;\r\n\r\n  let title;\r\n  let fundingFee;\r\n  let positionFee;\r\n  let swapFeeToken;\r\n  let swapFee;\r\n  let totalFees = bigNumberify(0);\r\n\r\n  let executionFee = orderOption === STOP ? getConstant(chainId, \"DECREASE_ORDER_EXECUTION_GAS_FEE\") : minExecutionFee;\r\n\r\n  let executionFeeUsd = getUsd(executionFee, nativeTokenAddress, false, infoTokens) || bigNumberify(0);\r\n\r\n  if (position) {\r\n    fundingFee = position.fundingFee;\r\n    fromAmount = parseValue(fromValue, USD_DECIMALS);\r\n    sizeDelta = fromAmount;\r\n\r\n    title = `Close ${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol}`;\r\n    collateralToken = position.collateralToken;\r\n    liquidationPrice = getLiquidationPrice(position);\r\n\r\n    if (fromAmount) {\r\n      isClosing = position.size.sub(fromAmount).lt(DUST_USD);\r\n      positionFee = getMarginFee(fromAmount);\r\n    }\r\n\r\n    if (isClosing) {\r\n      sizeDelta = position.size;\r\n      receiveAmount = position.collateral;\r\n    } else if (orderOption === STOP && sizeDelta && existingOrders.length > 0) {\r\n      let residualSize = position.size;\r\n      for (const order of existingOrders) {\r\n        residualSize = residualSize.sub(order.sizeDelta);\r\n      }\r\n      if (residualSize.sub(sizeDelta).abs().lt(ORDER_SIZE_DUST_USD)) {\r\n        sizeDelta = residualSize;\r\n      }\r\n    }\r\n\r\n    if (sizeDelta) {\r\n      adjustedDelta = nextDelta.mul(sizeDelta).div(position.size);\r\n    }\r\n\r\n    if (nextHasProfit) {\r\n      receiveAmount = receiveAmount.add(adjustedDelta);\r\n    } else {\r\n      if (receiveAmount.gt(adjustedDelta)) {\r\n        receiveAmount = receiveAmount.sub(adjustedDelta);\r\n      } else {\r\n        receiveAmount = bigNumberify(0);\r\n      }\r\n    }\r\n\r\n    if (keepLeverage && sizeDelta && !isClosing) {\r\n      collateralDelta = sizeDelta.mul(position.collateral).div(position.size);\r\n      // if the position will be realising a loss then reduce collateralDelta by the realised loss\r\n      if (!nextHasProfit) {\r\n        const deductions = adjustedDelta.add(positionFee).add(fundingFee);\r\n        if (collateralDelta.gt(deductions)) {\r\n          collateralDelta = collateralDelta = collateralDelta.sub(deductions);\r\n        } else {\r\n          collateralDelta = bigNumberify(0);\r\n        }\r\n      }\r\n    }\r\n\r\n    maxAmount = position.size;\r\n    maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\r\n    maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\r\n\r\n    if (fromAmount && collateralToken.maxPrice) {\r\n      convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\r\n      convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\r\n    }\r\n\r\n    totalFees = totalFees.add(positionFee || bigNumberify(0)).add(fundingFee || bigNumberify(0));\r\n\r\n    receiveAmount = receiveAmount.add(collateralDelta);\r\n\r\n    if (sizeDelta) {\r\n      if (receiveAmount.gt(totalFees)) {\r\n        receiveAmount = receiveAmount.sub(totalFees);\r\n      } else {\r\n        receiveAmount = bigNumberify(0);\r\n      }\r\n    }\r\n\r\n    receiveToken = isSwapAllowed && swapToToken ? swapToToken : collateralToken;\r\n\r\n    // Calculate swap fees\r\n    if (isSwapAllowed && swapToToken) {\r\n      const { feeBasisPoints } = getNextToAmount(\r\n        chainId,\r\n        convertedAmount,\r\n        collateralToken.address,\r\n        receiveToken.address,\r\n        infoTokens,\r\n        undefined,\r\n        undefined,\r\n        usdgSupply,\r\n        totalTokenWeights,\r\n        true\r\n      );\r\n\r\n      if (feeBasisPoints) {\r\n        swapFee = receiveAmount.mul(feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n        swapFeeToken = getTokenAmount(swapFee, collateralToken.address, false, infoTokens);\r\n        totalFees = totalFees.add(swapFee || bigNumberify(0));\r\n        receiveAmount = receiveAmount.sub(swapFee);\r\n      }\r\n    }\r\n\r\n    convertedReceiveAmount = getTokenAmount(receiveAmount, receiveToken.address, false, infoTokens);\r\n\r\n    // Check swap limits (max in / max out)\r\n    if (isSwapAllowed && shouldSwap(collateralToken, receiveToken)) {\r\n      const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\r\n      const receiveTokenInfo = getTokenInfo(infoTokens, receiveToken.address);\r\n\r\n      isNotEnoughReceiveTokenLiquidity =\r\n        receiveTokenInfo.availableAmount.lt(convertedReceiveAmount) ||\r\n        receiveTokenInfo.bufferAmount.gt(receiveTokenInfo.poolAmount.sub(convertedReceiveAmount));\r\n\r\n      if (\r\n        collateralInfo.maxUsdgAmount &&\r\n        collateralInfo.maxUsdgAmount.gt(0) &&\r\n        collateralInfo.usdgAmount &&\r\n        collateralInfo.maxPrice\r\n      ) {\r\n        const usdgFromAmount = adjustForDecimals(receiveAmount, USD_DECIMALS, USDG_DECIMALS);\r\n        const nextUsdgAmount = collateralInfo.usdgAmount.add(usdgFromAmount);\r\n\r\n        if (nextUsdgAmount.gt(collateralInfo.maxUsdgAmount)) {\r\n          isCollateralPoolCapacityExceeded = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (isClosing) {\r\n      nextCollateral = bigNumberify(0);\r\n    } else {\r\n      if (position.collateral) {\r\n        nextCollateral = position.collateral;\r\n        if (collateralDelta && collateralDelta.gt(0)) {\r\n          nextCollateral = position.collateral.sub(collateralDelta);\r\n        } else if (position.delta && position.delta.gt(0) && sizeDelta) {\r\n          if (!position.hasProfit) {\r\n            nextCollateral = nextCollateral.sub(adjustedDelta);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (fromAmount) {\r\n      if (!isClosing && !keepLeverage) {\r\n        nextLeverage = getLeverage({\r\n          size: position.size,\r\n          sizeDelta,\r\n          collateral: position.collateral,\r\n          entryFundingRate: position.entryFundingRate,\r\n          cumulativeFundingRate: position.cumulativeFundingRate,\r\n          hasProfit: nextHasProfit,\r\n          delta: nextDelta,\r\n          includeDelta: savedIsPnlInLeverage,\r\n        });\r\n        nextLiquidationPrice = getLiquidationPrice({\r\n          isLong: position.isLong,\r\n          size: position.size,\r\n          sizeDelta,\r\n          collateral: position.collateral,\r\n          averagePrice: position.averagePrice,\r\n          entryFundingRate: position.entryFundingRate,\r\n          cumulativeFundingRate: position.cumulativeFundingRate,\r\n          delta: nextDelta,\r\n          hasProfit: nextHasProfit,\r\n          includeDelta: true,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  const [deltaStr, deltaPercentageStr] = useMemo(() => {\r\n    if (!position || !position.markPrice) {\r\n      return [\"-\", \"-\"];\r\n    }\r\n    if (orderOption !== STOP) {\r\n      const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\r\n        position.markPrice,\r\n        position,\r\n        fromAmount\r\n      );\r\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\r\n        delta: pendingDelta,\r\n        deltaPercentage: pendingDeltaPercentage,\r\n        hasProfit,\r\n      });\r\n      return [deltaStr, deltaPercentageStr];\r\n    }\r\n    if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\r\n      return [\"-\", \"-\"];\r\n    }\r\n\r\n    const { pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(\r\n      triggerPriceUsd,\r\n      position,\r\n      fromAmount\r\n    );\r\n\r\n    const { deltaStr, deltaPercentageStr } = getDeltaStr({\r\n      delta: pendingDelta,\r\n      deltaPercentage: pendingDeltaPercentage,\r\n      hasProfit,\r\n    });\r\n    return [deltaStr, deltaPercentageStr];\r\n  }, [position, triggerPriceUsd, orderOption, fromAmount]);\r\n\r\n  const getError = () => {\r\n    if (IS_NETWORK_DISABLED[chainId]) {\r\n      if (orderOption === STOP) return [t`Trigger order disabled, pending ${getChainName(chainId)} upgrade`];\r\n      return [t`Position close disabled, pending ${getChainName(chainId)} upgrade`];\r\n    }\r\n    if (hasOutdatedUi) {\r\n      return t`Page outdated, please refresh`;\r\n    }\r\n    if (!fromAmount) {\r\n      return t`Enter an amount`;\r\n    }\r\n    if (nextLeverage && nextLeverage.eq(0)) {\r\n      return t`Enter an amount`;\r\n    }\r\n    if (orderOption === STOP) {\r\n      if (!triggerPriceUsd || triggerPriceUsd.eq(0)) {\r\n        return t`Enter Price`;\r\n      }\r\n      if (position.isLong && triggerPriceUsd.lte(liquidationPrice)) {\r\n        return t`Price below Liq. Price`;\r\n      }\r\n      if (!position.isLong && triggerPriceUsd.gte(liquidationPrice)) {\r\n        return t`Price above Liq. Price`;\r\n      }\r\n\r\n      if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\r\n        return t`Invalid price, see warning`;\r\n      }\r\n    }\r\n\r\n    if (isNotEnoughReceiveTokenLiquidity) {\r\n      return \"Insufficient receive token liquidity\";\r\n    }\r\n\r\n    if (isCollateralPoolCapacityExceeded) {\r\n      return `${collateralToken.symbol} pool exceeded, can only Receive ${collateralToken.symbol}`;\r\n    }\r\n\r\n    if (!isClosing && position && position.size && fromAmount) {\r\n      if (position.size.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\r\n        return t`Leftover position below 10 USD`;\r\n      }\r\n      if (nextCollateral && nextCollateral.lt(expandDecimals(5, USD_DECIMALS))) {\r\n        return t`Leftover collateral below 5 USD`;\r\n      }\r\n    }\r\n\r\n    if (position && position.size && position.size.lt(fromAmount)) {\r\n      return t`Max close amount exceeded`;\r\n    }\r\n\r\n    if (nextLeverage && nextLeverage.lt(1.1 * BASIS_POINTS_DIVISOR)) {\r\n      return t`Min leverage: 1.1x`;\r\n    }\r\n\r\n    if (nextLeverage && nextLeverage.gt(MAX_ALLOWED_LEVERAGE)) {\r\n      return t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`;\r\n    }\r\n\r\n    if (hasPendingProfit && orderOption !== STOP && !isProfitWarningAccepted) {\r\n      return t`Forfeit profit not checked`;\r\n    }\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n    if (isSubmitting) {\r\n      return false;\r\n    }\r\n    if (needOrderBookApproval && isWaitingForPluginApproval) {\r\n      return false;\r\n    }\r\n    if (isPluginApproving) {\r\n      return false;\r\n    }\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return false;\r\n    }\r\n    if (isPositionRouterApproving) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const hasPendingProfit = MIN_PROFIT_TIME > 0 && position.delta.eq(0) && position.pendingDelta.gt(0);\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n\r\n    if (orderOption === STOP) {\r\n      if (isSubmitting) return t`Creating Order...`;\r\n\r\n      if (needOrderBookApproval && isWaitingForPluginApproval) {\r\n        return t`Enabling Orders...`;\r\n      }\r\n      if (isPluginApproving) {\r\n        return t`Enabling Orders...`;\r\n      }\r\n      if (needOrderBookApproval) {\r\n        return t`Enable Orders`;\r\n      }\r\n\r\n      return t`Create Order`;\r\n    }\r\n\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return t`Enabling Leverage...`;\r\n    }\r\n\r\n    if (isPositionRouterApproving) {\r\n      return t`Enabling Leverage...`;\r\n    }\r\n\r\n    if (needPositionRouterApproval) {\r\n      return t`Enable Leverage`;\r\n    }\r\n\r\n    if (hasPendingProfit) {\r\n      return t`Close without profit`;\r\n    }\r\n    return isSubmitting ? t`Closing...` : t`Close`;\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFromValue(\"\");\r\n    setIsProfitWarningAccepted(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (prevIsVisible !== isVisible) {\r\n      resetForm();\r\n    }\r\n  }, [prevIsVisible, isVisible]);\r\n\r\n  const onClickPrimary = async () => {\r\n    if (needOrderBookApproval) {\r\n      setOrdersToaOpen(true);\r\n      return;\r\n    }\r\n\r\n    if (needPositionRouterApproval) {\r\n      approvePositionRouter({\r\n        sentMsg: t`Enable leverage sent.`,\r\n        failMsg: t`Enable leverage failed.`,\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    const collateralTokenAddress = position.collateralToken.isNative\r\n      ? nativeTokenAddress\r\n      : position.collateralToken.address;\r\n    const indexTokenAddress = position.indexToken.isNative ? nativeTokenAddress : position.indexToken.address;\r\n\r\n    if (orderOption === STOP) {\r\n      const triggerAboveThreshold = triggerPriceUsd.gt(position.markPrice);\r\n\r\n      createDecreaseOrder(\r\n        chainId,\r\n        library,\r\n        indexTokenAddress,\r\n        sizeDelta,\r\n        collateralTokenAddress,\r\n        collateralDelta,\r\n        position.isLong,\r\n        triggerPriceUsd,\r\n        triggerAboveThreshold,\r\n        {\r\n          sentMsg: t`Order submitted!`,\r\n          successMsg: t`Order created!`,\r\n          failMsg: t`Order creation failed.`,\r\n          setPendingTxns,\r\n        }\r\n      )\r\n        .then(() => {\r\n          setFromValue(\"\");\r\n          setIsVisible(false);\r\n        })\r\n        .finally(() => {\r\n          setIsSubmitting(false);\r\n        });\r\n      return;\r\n    }\r\n\r\n    const priceBasisPoints = position.isLong\r\n      ? BASIS_POINTS_DIVISOR - allowedSlippage\r\n      : BASIS_POINTS_DIVISOR + allowedSlippage;\r\n    const refPrice = position.isLong ? position.indexToken.minPrice : position.indexToken.maxPrice;\r\n    let priceLimit = refPrice.mul(priceBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n    const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\r\n    const minProfitTimeExpired = parseInt(Date.now() / 1000) > minProfitExpiration;\r\n\r\n    if (nextHasProfit && !minProfitTimeExpired && !isProfitWarningAccepted) {\r\n      if ((position.isLong && priceLimit.lt(profitPrice)) || (!position.isLong && priceLimit.gt(profitPrice))) {\r\n        priceLimit = profitPrice;\r\n      }\r\n    }\r\n\r\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n\r\n    const path = [tokenAddress0];\r\n\r\n    const isUnwrap = receiveToken.address === AddressZero;\r\n    const isSwap = receiveToken.address !== tokenAddress0;\r\n\r\n    if (isSwap) {\r\n      if (isUnwrap && tokenAddress0 !== nativeTokenAddress) {\r\n        path.push(nativeTokenAddress);\r\n      } else if (!isUnwrap) {\r\n        path.push(receiveToken.address);\r\n      }\r\n    }\r\n\r\n    const withdrawETH = isUnwrap;\r\n\r\n    const params = [\r\n      path, // _path\r\n      indexTokenAddress, // _indexToken\r\n      collateralDelta, // _collateralDelta\r\n      sizeDelta, // _sizeDelta\r\n      position.isLong, // _isLong\r\n      account, // _receiver\r\n      priceLimit, // _acceptablePrice\r\n      0, // _minOut\r\n      minExecutionFee, // _executionFee\r\n      withdrawETH, // _withdrawETH\r\n      AddressZero, // _callbackTarget\r\n    ];\r\n\r\n    const successMsg = t`Requested decrease of ${position.indexToken.symbol} ${\r\n      position.isLong ? \"Long\" : \"Short\"\r\n    } by ${formatAmount(sizeDelta, USD_DECIMALS, 2)} USD.`;\r\n\r\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\r\n\r\n    callContract(chainId, contract, \"createDecreasePosition\", params, {\r\n      value: minExecutionFee,\r\n      sentMsg: t`Close submitted!`,\r\n      successMsg,\r\n      failMsg: t`Close failed.`,\r\n      setPendingTxns,\r\n      // for Arbitrum, sometimes the successMsg shows after the position has already been executed\r\n      // hide the success message for Arbitrum as a workaround\r\n      hideSuccessMsg: chainId === ARBITRUM,\r\n    })\r\n      .then(async (res) => {\r\n        setFromValue(\"\");\r\n        setIsVisible(false);\r\n\r\n        let nextSize = position.size.sub(sizeDelta);\r\n\r\n        pendingPositions[position.key] = {\r\n          updatedAt: Date.now(),\r\n          pendingChanges: {\r\n            size: nextSize,\r\n          },\r\n        };\r\n\r\n        setPendingPositions({ ...pendingPositions });\r\n      })\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n      });\r\n  };\r\n\r\n  const renderExistingOrderWarning = useCallback(() => {\r\n    if (!existingOrder) {\r\n      return;\r\n    }\r\n    const indexToken = getTokenInfo(infoTokens, existingOrder.indexToken);\r\n    const sizeInToken = formatAmount(\r\n      existingOrder.sizeDelta.mul(PRECISION).div(existingOrder.triggerPrice),\r\n      USD_DECIMALS,\r\n      4,\r\n      true\r\n    );\r\n    const prefix = existingOrder.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n    return (\r\n      <div className=\"Confirmation-box-warning\">\r\n        You have an active order to decrease {existingOrder.isLong ? \"Long\" : \"Short\"} {sizeInToken} {indexToken.symbol}{\" \"}\r\n        ($\r\n        {formatAmount(existingOrder.sizeDelta, USD_DECIMALS, 2, true)}) at {prefix}{\" \"}\r\n        {formatAmount(existingOrder.triggerPrice, USD_DECIMALS, 2, true)}\r\n      </div>\r\n    );\r\n  }, [existingOrder, infoTokens]);\r\n\r\n  function renderMinProfitWarning() {\r\n    if (MIN_PROFIT_TIME === 0) {\r\n      return null;\r\n    }\r\n\r\n    if (profitPrice && nextDelta.eq(0) && nextHasProfit) {\r\n      const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\r\n\r\n      if (orderOption === MARKET) {\r\n        return (\r\n          <div className=\"Confirmation-box-warning\">\r\n            Reducing the position at the current price will forfeit a&nbsp;\r\n            <a\r\n              href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              pending profit\r\n            </a>{\" \"}\r\n            of {deltaStr}. <br />\r\n            <br />\r\n            Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\r\n            applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\r\n          </div>\r\n        );\r\n      }\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          This order will forfeit a&nbsp;\r\n          <a href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            profit\r\n          </a>{\" \"}\r\n          of {deltaStr}. <br />\r\n          Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\r\n          applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}.\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  const profitPrice = getProfitPrice(orderOption === MARKET ? position.markPrice : triggerPriceUsd, position);\r\n\r\n  let triggerPricePrefix;\r\n  if (triggerPriceUsd) {\r\n    triggerPricePrefix = triggerPriceUsd.gt(position.markPrice) ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n  }\r\n\r\n  const shouldShowExistingOrderWarning = false;\r\n\r\n  const [hasInputFocus, setHasInputFocus] = useState(false);\r\n  const [hasInputError, setHasInputError] = useState(false);\r\n  const checkInputError = (inputVal) => {\r\n    if (!isPrimaryEnabled() && inputVal !== '') {\r\n      setHasInputError(true);\r\n    } else {\r\n      setHasInputError(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkInputError(fromValue);\r\n  }, [fromValue])\r\n\r\n  return (\r\n    <div className=\"PositionEditor\">\r\n      {position && (\r\n        <Modal\r\n          className=\"PositionSeller-modal\"\r\n          isVisible={isVisible}\r\n          setIsVisible={setIsVisible}\r\n          label={title}\r\n          allowContentTouchMove\r\n          isNifty={true}\r\n        >\r\n          {flagOrdersEnabled && (\r\n            <Tab\r\n              options={orderOptions}\r\n              option={orderOption}\r\n              optionLabels={orderOptionLabels}\r\n              onChange={onOrderOptionChange}\r\n              icons={CLOSE_ICONS}\r\n            />\r\n          )}\r\n          <div className={\"Exchange-swap-section\"\r\n            + (hasInputError ? \" error\" : \"\") + (hasInputFocus ? \" hlight\" : \"\")}>\r\n            <div className=\"Exchange-swap-section-top\">\r\n              <div className=\"muted\">\r\n                {convertedAmountFormatted && (\r\n                  <div className=\"Exchange-swap-usd\">\r\n                    Close: {convertedAmountFormatted} {position.collateralToken.symbol}\r\n                  </div>\r\n                )}\r\n                {!convertedAmountFormatted && \"Close\"}\r\n              </div>\r\n              {maxAmount && (\r\n                <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\r\n                  Max: {maxAmountFormatted}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"Exchange-swap-section-bottom\">\r\n              <div className=\"Exchange-swap-input-container\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  placeholder=\"0.0\"\r\n                  className=\"Exchange-swap-input\"\r\n                  value={fromValue}\r\n                  onChange={(e) => setFromValue(e.target.value)}\r\n                  onFocus={(e) => {\r\n                    setHasInputFocus(true);\r\n                  }}\r\n                  onBlur={(e) => {\r\n                    setHasInputFocus(false);\r\n                  }}\r\n                />\r\n                {fromValue !== maxAmountFormattedFree && (\r\n                  <div\r\n                    className=\"Exchange-swap-max\"\r\n                    onClick={() => {\r\n                      setFromValue(maxAmountFormattedFree);\r\n                    }}\r\n                  >\r\n                    MAX\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"PositionEditor-token-symbol\">USD</div>\r\n            </div>\r\n          </div>\r\n          {orderOption === MARKET && (\r\n            <SlippageInput \r\n              value={userSlippage}\r\n              setValue={setUserSlippage} \r\n            />\r\n          )}\r\n          {orderOption === STOP && (\r\n            <div className=\"Exchange-swap-section\">\r\n              <div className=\"Exchange-swap-section-top\">\r\n                <div className=\"muted\">\r\n                  <Trans>Price</Trans>\r\n                </div>\r\n                <div\r\n                  className=\"muted align-right clickable\"\r\n                  onClick={() => {\r\n                    setTriggerPriceValue(formatAmountFree(position.markPrice, USD_DECIMALS, 2));\r\n                  }}\r\n                >\r\n                  Mark: {formatAmount(position.markPrice, USD_DECIMALS, 2, true)}\r\n                </div>\r\n              </div>\r\n              <div className=\"Exchange-swap-section-bottom\">\r\n                <div className=\"Exchange-swap-input-container\">\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    placeholder=\"0.0\"\r\n                    className=\"Exchange-swap-input\"\r\n                    value={triggerPriceValue}\r\n                    onChange={onTriggerPriceChange}\r\n                    onFocus={(e) => {\r\n                      e.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n                    }}\r\n                    onBlur={(e) => {\r\n                      e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div className=\"PositionEditor-token-symbol\">USD</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {renderMinProfitWarning()}\r\n          {shouldShowExistingOrderWarning && renderExistingOrderWarning()}\r\n          <div className=\"PositionEditor-info-box\">\r\n            {minExecutionFeeErrorMessage && (\r\n              <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\r\n            )}\r\n            {hasPendingProfit && orderOption !== STOP && (\r\n              <div className=\"PositionEditor-accept-profit-warning\">\r\n                <Checkbox isChecked={isProfitWarningAccepted} setIsChecked={setIsProfitWarningAccepted}>\r\n                  <span className=\"muted\">Forfeit profit</span>\r\n                </Checkbox>\r\n              </div>\r\n            )}\r\n            {/* <div className=\"PositionEditor-keep-leverage-settings\">\r\n              <Checkbox isChecked={keepLeverage} setIsChecked={setKeepLeverage}>\r\n                <span className=\"muted font-sm\">Keep leverage at {formatAmount(position.leverage, 4, 2)}x</span>\r\n              </Checkbox>\r\n            </div> */}\r\n            {/* {orderOption === MARKET && (\r\n              <div className=\"PositionEditor-allow-higher-slippage\">\r\n                <Checkbox isChecked={isHigherSlippageAllowed} setIsChecked={setIsHigherSlippageAllowed}>\r\n                  <span className=\"muted font-sm\">Allow up to 1% slippage</span>\r\n                </Checkbox>\r\n              </div>\r\n            )} */}\r\n            {orderOption === MARKET && (\r\n              <div>\r\n                <ExchangeInfoRow label=\"Allowed Slippage\" className=\"Slippage-row\">\r\n                  <Tooltip\r\n                    handle={`${formatAmount(allowedSlippage, 2, 2)}%`}\r\n                    position=\"right-bottom\"\r\n                    renderContent={() => {\r\n                      return (\r\n                        <>\r\n                          You can change this in the settings menu on the top right of the page.\r\n                          <br />\r\n                          <br />\r\n                          Note that a low allowed slippage, e.g. less than 0.5%, may result in failed orders if prices\r\n                          are volatile.\r\n                        </>\r\n                      );\r\n                    }}\r\n                  />\r\n                </ExchangeInfoRow>\r\n              </div>\r\n            )}\r\n            {orderOption === STOP && (\r\n              <div className=\"Exchange-info-row\">\r\n                <div className=\"Exchange-info-label\">\r\n                  <Trans>Trigger Price</Trans>\r\n                </div>\r\n                <div className=\"align-right\">\r\n                  {!triggerPriceUsd && \"-\"}\r\n                  {triggerPriceUsd && `${triggerPricePrefix} ${formatAmount(triggerPriceUsd, USD_DECIMALS, 2, true)}`}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"Exchange-info-row top-line\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Mark Price</Trans>\r\n              </div>\r\n              <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\r\n            </div>\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Entry Price</Trans>\r\n              </div>\r\n              <div className=\"align-right\">${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\r\n            </div>\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Liq. Price</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {isClosing && orderOption !== STOP && \"-\"}\r\n                {(!isClosing || orderOption === STOP) && (\r\n                  <div>\r\n                    {(!nextLiquidationPrice || nextLiquidationPrice.eq(liquidationPrice)) && (\r\n                      <div>{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\r\n                    )}\r\n                    {nextLiquidationPrice && !nextLiquidationPrice.eq(liquidationPrice) && (\r\n                      <div>\r\n                        <div className=\"inline-block muted\">\r\n                          ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\r\n                          <BsArrowRight className=\"transition-arrow\" />\r\n                        </div>\r\n                        ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-info-row top-line\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Size</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {position && position.size && fromAmount && (\r\n                  <div>\r\n                    <div className=\"inline-block muted\">\r\n                      ${formatAmount(position.size, USD_DECIMALS, 2, true)}\r\n                      <BsArrowRight className=\"transition-arrow\" />\r\n                    </div>\r\n                    ${formatAmount(position.size.sub(fromAmount), USD_DECIMALS, 2, true)}\r\n                  </div>\r\n                )}\r\n                {position && position.size && !fromAmount && (\r\n                  <div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Collateral ({collateralToken.symbol})</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {nextCollateral && !nextCollateral.eq(position.collateral) ? (\r\n                  <div>\r\n                    <div className=\"inline-block muted\">\r\n                      ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\r\n                      <BsArrowRight className=\"transition-arrow\" />\r\n                    </div>\r\n                    ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\r\n                  </div>\r\n                ) : (\r\n                  `$${formatAmount(position.collateral, USD_DECIMALS, 4, true)}`\r\n                )}\r\n              </div>\r\n            </div>\r\n            {!keepLeverage && (\r\n              <div className=\"Exchange-info-row\">\r\n                <div className=\"Exchange-info-label\">\r\n                  <Trans>Leverage</Trans>\r\n                </div>\r\n                <div className=\"align-right\">\r\n                  {isClosing && \"-\"}\r\n                  {!isClosing && (\r\n                    <div>\r\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2)}x</div>}\r\n                      {nextLeverage && (\r\n                        <div>\r\n                          <div className=\"inline-block muted\">\r\n                            {formatAmount(position.leverage, 4, 2)}x\r\n                            <BsArrowRight className=\"transition-arrow\" />\r\n                          </div>\r\n                          {formatAmount(nextLeverage, 4, 2)}x\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>PnL</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                {deltaStr} ({deltaPercentageStr})\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"Exchange-info-row\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Fees</Trans>\r\n              </div>\r\n              <div className=\"align-right\">\r\n                <Tooltip\r\n                  position=\"right-top\"\r\n                  className=\"PositionSeller-fees-tooltip\"\r\n                  handle={\r\n                    <div>\r\n                      {totalFees ? `$${formatAmount(totalFees.add(executionFeeUsd), USD_DECIMALS, 2, true)}` : \"-\"}\r\n                    </div>\r\n                  }\r\n                  renderContent={() => (\r\n                    <div>\r\n                      {fundingFee && (\r\n                        <StatsTooltipRow label=\"Borrow fee\" value={formatAmount(fundingFee, USD_DECIMALS, 2, true)} />\r\n                      )}\r\n\r\n                      {positionFee && (\r\n                        <StatsTooltipRow label=\"Closing fee\" value={formatAmount(positionFee, USD_DECIMALS, 2, true)} />\r\n                      )}\r\n\r\n                      {swapFee && (\r\n                        <StatsTooltipRow\r\n                          label=\"Swap fee\"\r\n                          showDollar={false}\r\n                          value={`${formatAmount(swapFeeToken, collateralToken.decimals, 5)}${collateralToken.symbol}\r\n                          ($${formatAmount(swapFee, USD_DECIMALS, 2, true)})`}\r\n                        />\r\n                      )}\r\n\r\n                      <StatsTooltipRow\r\n                        label=\"Execution fee\"\r\n                        showDollar={false}\r\n                        value={`${formatAmount(executionFee, 18, 5, true)}${nativeTokenSymbol}($${formatAmount(\r\n                          executionFeeUsd,\r\n                          USD_DECIMALS,\r\n                          2\r\n                        )})`}\r\n                      />\r\n\r\n                      <br />\r\n\r\n                      <div className=\"PositionSeller-fee-item\">\r\n                        <a href=\"https://gmxio.gitbook.io/gmx/trading#fees\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                          More Info\r\n                        </a>{\" \"}\r\n                        about fees.\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"Exchange-info-row PositionSeller-receive-row top-line\">\r\n              <div className=\"Exchange-info-label\">\r\n                <Trans>Receive</Trans>\r\n              </div>\r\n\r\n              {!isSwapAllowed && receiveToken && (\r\n                <div className=\"align-right PositionSelector-selected-receive-token\">\r\n                  {formatAmount(convertedReceiveAmount, receiveToken.decimals, 4, true)}&nbsp;{receiveToken.symbol} ($\r\n                  {formatAmount(receiveAmount, USD_DECIMALS, 2, true)})\r\n                </div>\r\n              )}\r\n\r\n              {isSwapAllowed && receiveToken && (\r\n                <div className=\"align-right\">\r\n                  <TokenSelector\r\n                    // Scroll lock lead to side effects\r\n                    // if it applied on modal inside another modal\r\n                    disableBodyScrollLock={true}\r\n                    className={cx(\"PositionSeller-token-selector\", {\r\n                      warning: isNotEnoughReceiveTokenLiquidity || isCollateralPoolCapacityExceeded,\r\n                    })}\r\n                    label={\"Receive\"}\r\n                    showBalances={false}\r\n                    chainId={chainId}\r\n                    tokenAddress={receiveToken.address}\r\n                    onSelectToken={(token) => {\r\n                      setSwapToToken(token);\r\n                      setSavedRecieveTokenAddress(token.address);\r\n                    }}\r\n                    tokens={toTokens}\r\n                    getTokenState={(tokenOptionInfo) => {\r\n                      if (!shouldSwap(collateralToken, tokenOptionInfo)) {\r\n                        return;\r\n                      }\r\n\r\n                      const convertedTokenAmount = getTokenAmount(\r\n                        receiveAmount,\r\n                        tokenOptionInfo.address,\r\n                        false,\r\n                        infoTokens\r\n                      );\r\n\r\n                      const isNotEnoughLiquidity =\r\n                        tokenOptionInfo.availableAmount.lt(convertedTokenAmount) ||\r\n                        tokenOptionInfo.bufferAmount.gt(tokenOptionInfo.poolAmount.sub(convertedTokenAmount));\r\n\r\n                      if (isNotEnoughLiquidity) {\r\n                        const { maxIn, maxOut, maxInUsd, maxOutUsd } = getSwapLimits(\r\n                          infoTokens,\r\n                          collateralToken.address,\r\n                          tokenOptionInfo.address\r\n                        );\r\n\r\n                        const collateralInfo = getTokenInfo(infoTokens, collateralToken.address);\r\n\r\n                        return {\r\n                          disabled: true,\r\n                          message: (\r\n                            <div>\r\n                              Insufficient Available Liquidity to swap to {tokenOptionInfo.symbol}:\r\n                              <br />\r\n                              <br />\r\n                              <StatsTooltipRow\r\n                                label={`Max ${collateralInfo.symbol} in`}\r\n                                value={[\r\n                                  `${formatAmount(maxIn, collateralInfo.decimals, 0, true)} ${collateralInfo.symbol}`,\r\n                                  `($${formatAmount(maxInUsd, USD_DECIMALS, 0, true)})`,\r\n                                ]}\r\n                              />\r\n                              <br />\r\n                              <StatsTooltipRow\r\n                                label={`Max ${tokenOptionInfo.symbol} out`}\r\n                                value={[\r\n                                  `${formatAmount(maxOut, tokenOptionInfo.decimals, 0, true)} ${\r\n                                    tokenOptionInfo.symbol\r\n                                  }`,\r\n                                  `($${formatAmount(maxOutUsd, USD_DECIMALS, 0, true)})`,\r\n                                ]}\r\n                              />\r\n                            </div>\r\n                          ),\r\n                        };\r\n                      }\r\n                    }}\r\n                    infoTokens={infoTokens}\r\n                    showTokenImgInDropdown={true}\r\n                    selectedTokenLabel={\r\n                      <span className=\"PositionSelector-selected-receive-token\">\r\n                        {formatAmount(convertedReceiveAmount, receiveToken.decimals, 4, true)}&nbsp;\r\n                        {receiveToken.symbol} (${formatAmount(receiveAmount, USD_DECIMALS, 2, true)})\r\n                      </span>\r\n                    }\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"Exchange-swap-button-container\">\r\n            <button className={\"App-cta Exchange-swap-button\" + (isPrimaryEnabled() ? \" hlight\" : \"\")} onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\r\n              {getPrimaryText()}\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport useSWR from \"swr\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { ethers } from \"ethers\";\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  BASIS_POINTS_DIVISOR,\r\n  DEPOSIT_FEE,\r\n  DUST_BNB,\r\n  helperToast,\r\n  formatAmount,\r\n  bigNumberify,\r\n  usePrevious,\r\n  formatAmountFree,\r\n  parseValue,\r\n  expandDecimals,\r\n  shouldRaiseGasError,\r\n  getTokenInfo,\r\n  getLiquidationPrice,\r\n  approveTokens,\r\n  IS_NETWORK_DISABLED,\r\n  getChainName,\r\n  MAX_ALLOWED_LEVERAGE,\r\n} from \"../../lib/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport Tab from \"../Tab/Tab\";\r\nimport Modal from \"../Modal/Modal\";\r\n\r\nimport PositionRouter from \"../../abis/PositionRouter.json\";\r\nimport Token from \"../../abis/Token.json\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\n\r\nimport { getConstant } from \"../../config/chains\";\r\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\r\nimport { fetcher } from \"../../lib/contracts/fetcher\";\r\nimport { callContract } from \"../../lib/contracts/callContract\";\r\n\r\nimport depositImg from '../../img/ddl/icon_dollar.svg'\r\nimport depositActiveImg from '../../img/ddl/icon_dollar_active.svg'\r\nimport withdrawImg from '../../img/ddl/icon_withdraw.svg'\r\nimport withdrawActiveImg from '../../img/ddl/icon_withdraw_active.svg'\r\n\r\nconst DEPOSIT = t`Deposit`;\r\nconst WITHDRAW = t`Withdraw`;\r\nconst EDIT_OPTIONS = [DEPOSIT, WITHDRAW];\r\nconst EDIT_ICONS = {\r\n  [DEPOSIT]: depositImg,\r\n  [WITHDRAW]: withdrawImg,\r\n  [DEPOSIT + '_active']: depositActiveImg,\r\n  [WITHDRAW + '_active']: withdrawActiveImg,\r\n\r\n}\r\nconst { AddressZero } = ethers.constants;\r\n\r\nexport default function PositionEditor(props) {\r\n  const {\r\n    pendingPositions,\r\n    setPendingPositions,\r\n    positionsMap,\r\n    positionKey,\r\n    isVisible,\r\n    setIsVisible,\r\n    infoTokens,\r\n    active,\r\n    account,\r\n    library,\r\n    collateralTokenAddress,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n    getUsd,\r\n    getLeverage,\r\n    savedIsPnlInLeverage,\r\n    positionRouterApproved,\r\n    isWaitingForPositionRouterApproval,\r\n    isPositionRouterApproving,\r\n    approvePositionRouter,\r\n    chainId,\r\n    minExecutionFee,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n  } = props;\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n  const position = positionsMap && positionKey ? positionsMap[positionKey] : undefined;\r\n  const [option, setOption] = useState(DEPOSIT);\r\n  const [fromValue, setFromValue] = useState(\"\");\r\n  const [isApproving, setIsApproving] = useState(false);\r\n  const [isSwapping, setIsSwapping] = useState(false);\r\n  const prevIsVisible = usePrevious(isVisible);\r\n\r\n  const routerAddress = getContract(chainId, \"Router\");\r\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\r\n\r\n  const { data: tokenAllowance } = useSWR(\r\n    [active, chainId, collateralTokenAddress, \"allowance\", account, routerAddress],\r\n    {\r\n      fetcher: fetcher(library, Token),\r\n    }\r\n  );\r\n\r\n  // const { data: minExecutionFee } = useSWR([active, chainId, positionRouterAddress, \"minExecutionFee\"], {\r\n  //   fetcher: fetcher(library, PositionRouter),\r\n  // });\r\n\r\n  const isDeposit = option === DEPOSIT;\r\n  const isWithdrawal = option === WITHDRAW;\r\n\r\n  const needPositionRouterApproval = !positionRouterApproved;\r\n\r\n  let collateralToken;\r\n  let maxAmount;\r\n  let maxAmountFormatted;\r\n  let maxAmountFormattedFree;\r\n  let fromAmount;\r\n  let needApproval;\r\n\r\n  let convertedAmount;\r\n  let convertedAmountFormatted;\r\n\r\n  let nextLeverage;\r\n  let nextLeverageExcludingPnl;\r\n  let liquidationPrice;\r\n  let nextLiquidationPrice;\r\n  let nextCollateral;\r\n\r\n  let title;\r\n  let collateralDelta;\r\n  if (position) {\r\n    title = `Edit ${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol}`;\r\n    collateralToken = position.collateralToken;\r\n    liquidationPrice = getLiquidationPrice(position);\r\n\r\n    if (isDeposit) {\r\n      fromAmount = parseValue(fromValue, collateralToken.decimals);\r\n      maxAmount = collateralToken ? collateralToken.balance : bigNumberify(0);\r\n      maxAmountFormatted = formatAmount(maxAmount, collateralToken.decimals, 4, true);\r\n      maxAmountFormattedFree = formatAmountFree(maxAmount, collateralToken.decimals, 8);\r\n      if (fromAmount) {\r\n        convertedAmount = getUsd(fromAmount, position.collateralToken.address, false, infoTokens);\r\n        convertedAmountFormatted = formatAmount(convertedAmount, USD_DECIMALS, 2);\r\n      }\r\n    } else {\r\n      fromAmount = parseValue(fromValue, USD_DECIMALS);\r\n      maxAmount = position.collateral;\r\n      maxAmountFormatted = formatAmount(maxAmount, USD_DECIMALS, 2, true);\r\n      maxAmountFormattedFree = formatAmountFree(maxAmount, USD_DECIMALS, 2);\r\n      if (fromAmount) {\r\n        convertedAmount = fromAmount.mul(expandDecimals(1, collateralToken.decimals)).div(collateralToken.maxPrice);\r\n        convertedAmountFormatted = formatAmount(convertedAmount, collateralToken.decimals, 4, true);\r\n      }\r\n    }\r\n    needApproval = isDeposit && tokenAllowance && fromAmount && fromAmount.gt(tokenAllowance);\r\n\r\n    if (fromAmount) {\r\n      collateralDelta = isDeposit ? convertedAmount : fromAmount;\r\n      if (position.isLong) {\r\n        collateralDelta = collateralDelta.mul(BASIS_POINTS_DIVISOR - DEPOSIT_FEE).div(BASIS_POINTS_DIVISOR);\r\n      }\r\n      nextLeverage = getLeverage({\r\n        size: position.size,\r\n        collateral: position.collateral,\r\n        collateralDelta,\r\n        increaseCollateral: isDeposit,\r\n        entryFundingRate: position.entryFundingRate,\r\n        cumulativeFundingRate: position.cumulativeFundingRate,\r\n        hasProfit: position.hasProfit,\r\n        delta: position.delta,\r\n        includeDelta: savedIsPnlInLeverage,\r\n      });\r\n      nextLeverageExcludingPnl = getLeverage({\r\n        size: position.size,\r\n        collateral: position.collateral,\r\n        collateralDelta,\r\n        increaseCollateral: isDeposit,\r\n        entryFundingRate: position.entryFundingRate,\r\n        cumulativeFundingRate: position.cumulativeFundingRate,\r\n        hasProfit: position.hasProfit,\r\n        delta: position.delta,\r\n        includeDelta: false,\r\n      });\r\n\r\n      nextLiquidationPrice = getLiquidationPrice({\r\n        isLong: position.isLong,\r\n        size: position.size,\r\n        collateral: position.collateral,\r\n        averagePrice: position.averagePrice,\r\n        entryFundingRate: position.entryFundingRate,\r\n        cumulativeFundingRate: position.cumulativeFundingRate,\r\n        collateralDelta,\r\n        increaseCollateral: isDeposit,\r\n      });\r\n\r\n      nextCollateral = isDeposit ? position.collateral.add(collateralDelta) : position.collateral.sub(collateralDelta);\r\n    }\r\n  }\r\n\r\n  const getError = () => {\r\n    if (IS_NETWORK_DISABLED[chainId]) {\r\n      if (isDeposit) return [t`Deposit disabled, pending ${getChainName(chainId)} upgrade`];\r\n      return [t`Withdraw disabled, pending ${getChainName(chainId)} upgrade`];\r\n    }\r\n    if (!fromAmount) {\r\n      return t`Enter an amount`;\r\n    }\r\n    if (nextLeverage && nextLeverage.eq(0)) {\r\n      return t`Enter an amount`;\r\n    }\r\n\r\n    if (!isDeposit && fromAmount) {\r\n      if (fromAmount.gte(position.collateral)) {\r\n        return t`Min order: 10 USD`;\r\n      }\r\n      if (position.collateral.sub(fromAmount).lt(expandDecimals(10, USD_DECIMALS))) {\r\n        return t`Min order: 10 USD`;\r\n      }\r\n    }\r\n\r\n    if (!isDeposit && fromAmount && nextLiquidationPrice) {\r\n      if (position.isLong && position.markPrice.lt(nextLiquidationPrice)) {\r\n        return t`Invalid liq. price`;\r\n      }\r\n      if (!position.isLong && position.markPrice.gt(nextLiquidationPrice)) {\r\n        return t`Invalid liq. price`;\r\n      }\r\n    }\r\n\r\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.lt(1.1 * BASIS_POINTS_DIVISOR)) {\r\n      return t`Min leverage: 1.1x`;\r\n    }\r\n\r\n    if (nextLeverageExcludingPnl && nextLeverageExcludingPnl.gt(MAX_ALLOWED_LEVERAGE)) {\r\n      return t`Max leverage: ${(MAX_ALLOWED_LEVERAGE / BASIS_POINTS_DIVISOR).toFixed(1)}x`;\r\n    }\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n    if (isSwapping) {\r\n      return false;\r\n    }\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return false;\r\n    }\r\n    if (isPositionRouterApproving) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n    if (isSwapping) {\r\n      if (isDeposit) {\r\n        return t`Depositing...`;\r\n      }\r\n      return t`Withdrawing...`;\r\n    }\r\n\r\n    if (isApproving) {\r\n      return t`Approving ${position.collateralToken.symbol}...`;\r\n    }\r\n    if (needApproval) {\r\n      return t`Approve ${position.collateralToken.symbol}`;\r\n    }\r\n\r\n    if (needPositionRouterApproval && isWaitingForPositionRouterApproval) {\r\n      return t`Enabling Leverage`;\r\n    }\r\n\r\n    if (isPositionRouterApproving) {\r\n      return t`Enabling Leverage...`;\r\n    }\r\n\r\n    if (needPositionRouterApproval) {\r\n      return t`Enable Leverage`;\r\n    }\r\n\r\n    if (isDeposit) {\r\n      return t`Deposit`;\r\n    }\r\n\r\n    return t`Withdraw`;\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFromValue(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (prevIsVisible !== isVisible) {\r\n      resetForm();\r\n    }\r\n  }, [prevIsVisible, isVisible]);\r\n\r\n  const depositCollateral = async () => {\r\n    setIsSwapping(true);\r\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n    const path = [tokenAddress0];\r\n    const indexTokenAddress =\r\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\r\n\r\n    const priceBasisPoints = position.isLong ? 11000 : 9000;\r\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\r\n\r\n    const referralCode = ethers.constants.HashZero;\r\n    let params = [\r\n      path, // _path\r\n      indexTokenAddress, // _indexToken\r\n      fromAmount, // _amountIn\r\n      0, // _minOut\r\n      0, // _sizeDelta\r\n      position.isLong, // _isLong\r\n      priceLimit, // _acceptablePrice\r\n      minExecutionFee, // _executionFee\r\n      referralCode, // _referralCode\r\n      AddressZero, // _callbackTarget\r\n    ];\r\n\r\n    let method = \"createIncreasePosition\";\r\n    let value = minExecutionFee;\r\n    if (collateralTokenAddress === AddressZero) {\r\n      method = \"createIncreasePositionETH\";\r\n      value = fromAmount.add(minExecutionFee);\r\n      params = [\r\n        path, // _path\r\n        indexTokenAddress, // _indexToken\r\n        0, // _minOut\r\n        0, // _sizeDelta\r\n        position.isLong, // _isLong\r\n        priceLimit, // _acceptablePrice\r\n        minExecutionFee, // _executionFee\r\n        referralCode, // _referralCode\r\n        AddressZero, // _callbackTarget\r\n      ];\r\n    }\r\n\r\n    if (shouldRaiseGasError(getTokenInfo(infoTokens, collateralTokenAddress), fromAmount)) {\r\n      setIsSwapping(false);\r\n      helperToast.error(`Leave at least ${formatAmount(DUST_BNB, 18, 3)} ETH for gas`);\r\n      return;\r\n    }\r\n\r\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\r\n    callContract(chainId, contract, method, params, {\r\n      value,\r\n      sentMsg: t`Deposit submitted.`,\r\n      successMsg: t`Requested deposit of ${formatAmount(fromAmount, position.collateralToken.decimals, 4)} ${\r\n        position.collateralToken.symbol\r\n      } into ${position.indexToken.symbol} ${position.isLong ? \"Long\" : \"Short\"}.`,\r\n      failMsg: t`Deposit failed.`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {\r\n        setFromValue(\"\");\r\n        setIsVisible(false);\r\n\r\n        pendingPositions[position.key] = {\r\n          updatedAt: Date.now(),\r\n          pendingChanges: {\r\n            collateralSnapshot: position.collateral,\r\n            expectingCollateralChange: true,\r\n          },\r\n        };\r\n\r\n        setPendingPositions({ ...pendingPositions });\r\n      })\r\n      .finally(() => {\r\n        setIsSwapping(false);\r\n      });\r\n  };\r\n\r\n  const withdrawCollateral = async () => {\r\n    setIsSwapping(true);\r\n    const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n    const indexTokenAddress =\r\n      position.indexToken.address === AddressZero ? nativeTokenAddress : position.indexToken.address;\r\n    const priceBasisPoints = position.isLong ? 9000 : 11000;\r\n    const priceLimit = position.indexToken.maxPrice.mul(priceBasisPoints).div(10000);\r\n\r\n    const withdrawETH = collateralTokenAddress === AddressZero || collateralTokenAddress === nativeTokenAddress;\r\n    const params = [\r\n      [tokenAddress0], // _path\r\n      indexTokenAddress, // _indexToken\r\n      fromAmount, // _collateralDelta\r\n      0, // _sizeDelta\r\n      position.isLong, // _isLong\r\n      account, // _receiver\r\n      priceLimit, // _acceptablePrice\r\n      0, // _minOut\r\n      minExecutionFee, // _executionFee\r\n      withdrawETH, // _withdrawETH\r\n      AddressZero, // _callbackTarget\r\n    ];\r\n\r\n    const method = \"createDecreasePosition\";\r\n\r\n    const contract = new ethers.Contract(positionRouterAddress, PositionRouter.abi, library.getSigner());\r\n    callContract(chainId, contract, method, params, {\r\n      value: minExecutionFee,\r\n      sentMsg: t`Withdrawal submitted.`,\r\n      successMsg: t`Requested withdrawal of ${formatAmount(fromAmount, USD_DECIMALS, 2)} USD from ${\r\n        position.indexToken.symbol\r\n      } ${position.isLong ? \"Long\" : \"Short\"}.`,\r\n      failMsg: t`Withdrawal failed.`,\r\n      setPendingTxns,\r\n    })\r\n      .then(async (res) => {\r\n        setFromValue(\"\");\r\n        setIsVisible(false);\r\n\r\n        pendingPositions[position.key] = {\r\n          updatedAt: Date.now(),\r\n          pendingChanges: {\r\n            collateralSnapshot: position.collateral,\r\n            expectingCollateralChange: true,\r\n          },\r\n        };\r\n      })\r\n      .finally(() => {\r\n        setIsSwapping(false);\r\n      });\r\n  };\r\n\r\n  const onClickPrimary = () => {\r\n    if (needApproval) {\r\n      approveTokens({\r\n        setIsApproving,\r\n        library,\r\n        tokenAddress: collateralTokenAddress,\r\n        spender: routerAddress,\r\n        chainId: chainId,\r\n        infoTokens,\r\n        getTokenInfo,\r\n        pendingTxns,\r\n        setPendingTxns,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (needPositionRouterApproval) {\r\n      approvePositionRouter({\r\n        sentMsg: isDeposit ? t`Enable deposit sent.` : t`Enable withdraw sent.`,\r\n        failMsg: isDeposit ? t`Enable deposit failed.` : t`Enable withdraw failed.`,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (isDeposit) {\r\n      depositCollateral();\r\n      return;\r\n    }\r\n\r\n    withdrawCollateral();\r\n  };\r\n  const nativeTokenSymbol = getConstant(chainId, \"nativeTokenSymbol\");\r\n\r\n\r\n  const [hasInputFocus, setHasInputFocus] = useState(false);\r\n  const [hasInputError, setHasInputError] = useState(false);\r\n  const checkInputError = (inputVal) => {\r\n    if (!isPrimaryEnabled() && inputVal !== '') {\r\n      setHasInputError(true);\r\n    } else {\r\n      setHasInputError(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkInputError(fromValue);\r\n  }, [fromValue])\r\n\r\n  return (\r\n    <div className=\"PositionEditor\">\r\n      {position && (\r\n        <Modal isVisible={isVisible} setIsVisible={setIsVisible} label={title} isNifty={true}>\r\n          <div>\r\n            <Tab options={EDIT_OPTIONS} option={option} setOption={setOption} onChange={resetForm}\r\n              icons={EDIT_ICONS} />\r\n            {(isDeposit || isWithdrawal) && (\r\n              <div>\r\n                <div className={\"Exchange-swap-section\"\r\n                  + (hasInputError ? \" error\" : \"\") + (hasInputFocus ? \" hlight\" : \"\")}>\r\n                  <div className=\"Exchange-swap-section-top\">\r\n                    <div className=\"muted\">\r\n                      {convertedAmountFormatted && (\r\n                        <div className=\"Exchange-swap-usd\">\r\n                          {isDeposit ? t`Deposit` : t`Withdraw`}: {convertedAmountFormatted}{\" \"}\r\n                          {isDeposit ? \"USD\" : position.collateralToken.symbol}\r\n                        </div>\r\n                      )}\r\n                      {!convertedAmountFormatted && `${isDeposit ? t`Deposit` : t`Withdraw`}`}\r\n                    </div>\r\n                    {maxAmount && (\r\n                      <div className=\"muted align-right clickable\" onClick={() => setFromValue(maxAmountFormattedFree)}>\r\n                        Max: {maxAmountFormatted}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"Exchange-swap-section-bottom\">\r\n                    <div className=\"Exchange-swap-input-container\">\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        placeholder=\"0.0\"\r\n                        className=\"Exchange-swap-input\"\r\n                        value={fromValue}\r\n                        onChange={(e) => setFromValue(e.target.value)}\r\n                        onFocus={(e) => {\r\n                          setHasInputFocus(true);\r\n                        }}\r\n                        onBlur={(e) => {\r\n                          setHasInputFocus(false);\r\n                        }}\r\n                      />\r\n                      {fromValue !== maxAmountFormattedFree && (\r\n                        <div\r\n                          className=\"Exchange-swap-max\"\r\n                          onClick={() => {\r\n                            setFromValue(maxAmountFormattedFree);\r\n                          }}\r\n                        >\r\n                          MAX\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"PositionEditor-token-symbol\">\r\n                      {isDeposit ? position.collateralToken.symbol : \"USD\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"PositionEditor-info-box\">\r\n                  {minExecutionFeeErrorMessage && (\r\n                    <div className=\"Confirmation-box-warning\">{minExecutionFeeErrorMessage}</div>\r\n                  )}\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Size</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">{formatAmount(position.size, USD_DECIMALS, 2, true)} USD</div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Collateral</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">\r\n                      {!nextCollateral && <div>${formatAmount(position.collateral, USD_DECIMALS, 2, true)}</div>}\r\n                      {nextCollateral && (\r\n                        <div>\r\n                          <div className=\"inline-block muted\">\r\n                            ${formatAmount(position.collateral, USD_DECIMALS, 2, true)}\r\n                            <BsArrowRight className=\"transition-arrow\" />\r\n                          </div>\r\n                          ${formatAmount(nextCollateral, USD_DECIMALS, 2, true)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Leverage</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">\r\n                      {!nextLeverage && <div>{formatAmount(position.leverage, 4, 2, true)}x</div>}\r\n                      {nextLeverage && (\r\n                        <div>\r\n                          <div className=\"inline-block muted\">\r\n                            {formatAmount(position.leverage, 4, 2, true)}x\r\n                            <BsArrowRight className=\"transition-arrow\" />\r\n                          </div>\r\n                          {formatAmount(nextLeverage, 4, 2, true)}x\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Mark Price</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Liq. Price</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">\r\n                      {!nextLiquidationPrice && (\r\n                        <div>\r\n                          {!fromAmount && `$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}\r\n                          {fromAmount && \"-\"}\r\n                        </div>\r\n                      )}\r\n                      {nextLiquidationPrice && (\r\n                        <div>\r\n                          <div className=\"inline-block muted\">\r\n                            ${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}\r\n                            <BsArrowRight className=\"transition-arrow\" />\r\n                          </div>\r\n                          ${formatAmount(nextLiquidationPrice, USD_DECIMALS, 2, true)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"Exchange-info-row\">\r\n                    <div className=\"Exchange-info-label\">\r\n                      <Trans>Execution Fee</Trans>\r\n                    </div>\r\n                    <div className=\"align-right\">\r\n                      <Tooltip\r\n                        handle={`${formatAmountFree(minExecutionFee, 18, 5)} ${nativeTokenSymbol}`}\r\n                        position=\"right-top\"\r\n                        renderContent={() => {\r\n                          return (\r\n                            <>\r\n                              <StatsTooltipRow\r\n                                label=\"Network fee\"\r\n                                showDollar={false}\r\n                                value={`${formatAmountFree(\r\n                                  minExecutionFee,\r\n                                  18,\r\n                                  5\r\n                                )} ${nativeTokenSymbol} ($${formatAmount(minExecutionFeeUSD, USD_DECIMALS, 2)})`}\r\n                              />\r\n                              <br />\r\n                              This is the network cost required to execute the {isDeposit\r\n                                ? \"deposit\"\r\n                                : \"withdrawal\"}.{\" \"}\r\n                              <a\r\n                                href=\"https://gmxio.gitbook.io/gmx/trading#execution-fee\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                              >\r\n                                More Info\r\n                              </a>\r\n                            </>\r\n                          );\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"Exchange-swap-button-container\">\r\n                  <button\r\n                    className={\"App-cta Exchange-swap-button\" + (isPrimaryEnabled() ? \" hlight\" : \"\")}\r\n                    onClick={onClickPrimary}\r\n                    disabled={!isPrimaryEnabled()}\r\n                  >\r\n                    {getPrimaryText()}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\n\r\nimport \"./OrdersToa.css\";\r\n\r\nexport default function OrdersToa(props) {\r\n  const { setIsVisible, isPluginApproving, approveOrderBook } = props;\r\n\r\n  const [isChecked, setIsChecked] = useState(false);\r\n\r\n  const onConfirmationClick = () => {\r\n    approveOrderBook().then(() => {\r\n      setIsVisible(false);\r\n    });\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    if (isPluginApproving) {\r\n      return t`Enabling Orders...`;\r\n    }\r\n    if (!isChecked) {\r\n      return t`Accept terms to enable orders`;\r\n    }\r\n    return t`Enable Orders`;\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    if (isPluginApproving) {\r\n      return false;\r\n    }\r\n    return isChecked;\r\n  };\r\n\r\n  return null;\r\n}\r\n","import \"./SpinningLoader.css\";\r\n\r\nimport { ImSpinner2 } from \"react-icons/im\";\r\n\r\nfunction SpinningLoader({ size = \"1.25rem\" }) {\r\n  return <ImSpinner2 className=\"spin spinning-loader\" style={{ fontSize: size }} />;\r\n}\r\n\r\nexport default SpinningLoader;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { Trans } from \"@lingui/macro\";\r\nimport { toJpeg } from \"html-to-image\";\r\nimport cx from \"classnames\";\r\nimport { BiCopy } from \"react-icons/bi\";\r\nimport { RiFileDownloadLine } from \"react-icons/ri\";\r\nimport { FiTwitter } from \"react-icons/fi\";\r\nimport { useCopyToClipboard } from \"react-use\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport gmxLogo from \"../../img/gmx-logo-with-name.svg\";\r\nimport \"./PositionShare.css\";\r\nimport { QRCodeSVG } from \"qrcode.react\";\r\nimport {\r\n  formatAmount,\r\n  getHomeUrl,\r\n  getRootShareApiUrl,\r\n  getTwitterIntentURL,\r\n  helperToast,\r\n  USD_DECIMALS,\r\n} from \"../../lib/legacy\";\r\nimport { useAffiliateCodes } from \"../../domain/referrals\";\r\nimport SpinningLoader from \"../Common/SpinningLoader\";\r\nimport useLoadImage from \"../../lib/useLoadImage\";\r\nimport shareBgImg from \"../../img/position-share-bg.png\";\r\n\r\nconst ROOT_SHARE_URL = getRootShareApiUrl();\r\nconst UPLOAD_URL = ROOT_SHARE_URL + \"/api/upload\";\r\nconst UPLOAD_SHARE = ROOT_SHARE_URL + \"/api/s\";\r\nconst config = { quality: 0.95, canvasWidth: 1036, canvasHeight: 584 };\r\n\r\nfunction getShareURL(imageInfo, ref) {\r\n  if (!imageInfo) return;\r\n  let url = `${UPLOAD_SHARE}?id=${imageInfo.id}`;\r\n  if (ref.success) {\r\n    url = url + `&ref=${ref.code}`;\r\n  }\r\n  return url;\r\n}\r\n\r\nfunction PositionShare({ setIsPositionShareModalOpen, isPositionShareModalOpen, positionToShare, account, chainId }) {\r\n  const userAffiliateCode = useAffiliateCodes(chainId, account);\r\n  const [uploadedImageInfo, setUploadedImageInfo] = useState();\r\n  const [uploadedImageError, setUploadedImageError] = useState();\r\n  const [, copyToClipboard] = useCopyToClipboard();\r\n  const sharePositionBgImg = useLoadImage(shareBgImg);\r\n  const positionRef = useRef();\r\n  const tweetLink = getTwitterIntentURL(\r\n    `Latest $${positionToShare?.indexToken?.symbol} trade on @GMX_IO`,\r\n    getShareURL(uploadedImageInfo, userAffiliateCode)\r\n  );\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      const element = positionRef.current;\r\n      if (element && userAffiliateCode.success && sharePositionBgImg && positionToShare) {\r\n        const image = await toJpeg(element, config);\r\n        try {\r\n          const imageInfo = await fetch(UPLOAD_URL, { method: \"POST\", body: image }).then((res) => res.json());\r\n          setUploadedImageInfo(imageInfo);\r\n        } catch {\r\n          setUploadedImageInfo(null);\r\n          setUploadedImageError(\"Image generation error, please refresh and try again.\");\r\n        }\r\n      }\r\n    })();\r\n  }, [userAffiliateCode, sharePositionBgImg, positionToShare]);\r\n\r\n  async function handleDownload() {\r\n    const { indexToken, isLong } = positionToShare;\r\n    const element = positionRef.current;\r\n    if (!element) return;\r\n    const dataUrl = await toJpeg(element, config);\r\n    const link = document.createElement(\"a\");\r\n    link.download = `${indexToken.symbol}-${isLong ? \"long\" : \"short\"}.jpeg`;\r\n    link.href = dataUrl;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n  }\r\n\r\n  function handleCopy() {\r\n    if (!uploadedImageInfo) return;\r\n    const url = getShareURL(uploadedImageInfo, userAffiliateCode);\r\n    copyToClipboard(url);\r\n    helperToast.success(\"Link copied to clipboard.\");\r\n  }\r\n  return (\r\n    <Modal\r\n      className=\"position-share-modal\"\r\n      isVisible={isPositionShareModalOpen}\r\n      setIsVisible={setIsPositionShareModalOpen}\r\n      label=\"Share Position\"\r\n    >\r\n      <PositionShareCard\r\n        userAffiliateCode={userAffiliateCode}\r\n        positionRef={positionRef}\r\n        position={positionToShare}\r\n        chainId={chainId}\r\n        account={account}\r\n        uploadedImageInfo={uploadedImageInfo}\r\n        uploadedImageError={uploadedImageError}\r\n        sharePositionBgImg={sharePositionBgImg}\r\n      />\r\n      {uploadedImageError && <span className=\"error\">{uploadedImageError}</span>}\r\n\r\n      <div className=\"actions\">\r\n        <button disabled={!uploadedImageInfo} className=\"mr-base App-button-option\" onClick={handleCopy}>\r\n          <BiCopy className=\"icon\" />\r\n          <Trans>Copy</Trans>\r\n        </button>\r\n        <button className=\"mr-base App-button-option\" onClick={handleDownload}>\r\n          <RiFileDownloadLine className=\"icon\" />\r\n          <Trans>Download</Trans>\r\n        </button>\r\n        <div className={cx(\"tweet-link-container\", { disabled: !uploadedImageInfo })}>\r\n          <a\r\n            target=\"_blank\"\r\n            className={cx(\"tweet-link App-button-option\", { disabled: !uploadedImageInfo })}\r\n            rel=\"noreferrer\"\r\n            href={tweetLink}\r\n          >\r\n            <FiTwitter className=\"icon\" />\r\n            <Trans>Tweet</Trans>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction PositionShareCard({\r\n  positionRef,\r\n  position,\r\n  userAffiliateCode,\r\n  uploadedImageInfo,\r\n  uploadedImageError,\r\n  sharePositionBgImg,\r\n}) {\r\n  const { code, success } = userAffiliateCode;\r\n  const { deltaAfterFeesPercentageStr, isLong, leverage, indexToken, averagePrice, markPrice } = position;\r\n  const homeURL = getHomeUrl();\r\n  return (\r\n    <div className=\"relative\">\r\n      <div ref={positionRef} className=\"position-share\" style={{ backgroundImage: `url(${sharePositionBgImg})` }}>\r\n        <img className=\"logo\" src={gmxLogo} alt=\"GMX Logo\" />\r\n        <ul className=\"info\">\r\n          <li className=\"side\">{isLong ? \"LONG\" : \"SHORT\"}</li>\r\n          <li>{formatAmount(leverage, 4, 2, true)}x&nbsp;</li>\r\n          <li>{indexToken.symbol} USD</li>\r\n        </ul>\r\n        <h3 className=\"pnl\">{deltaAfterFeesPercentageStr}</h3>\r\n        <div className=\"prices\">\r\n          <div>\r\n            <p>Entry Price</p>\r\n            <p className=\"price\">${formatAmount(averagePrice, USD_DECIMALS, 2, true)}</p>\r\n          </div>\r\n          <div>\r\n            <p>Index Price</p>\r\n            <p className=\"price\">${formatAmount(markPrice, USD_DECIMALS, 2, true)}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"referral-code\">\r\n          <div>\r\n            <QRCodeSVG size={32} value={success ? `${homeURL}/#/?ref=${code}` : `${homeURL}`} />\r\n          </div>\r\n          <div className=\"referral-code-info\">\r\n            {success ? (\r\n              <>\r\n                <p className=\"label\">Referral Code:</p>\r\n                <p className=\"code\">{code}</p>\r\n              </>\r\n            ) : (\r\n              <p className=\"code\">https://gmx.io</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {!uploadedImageInfo && !uploadedImageError && (\r\n        <div className=\"image-overlay-wrapper\">\r\n          <div className=\"image-overlay\">\r\n            <SpinningLoader />\r\n            <p className=\"loading-text\">Generating shareable image...</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PositionShare;\r\n","import { useEffect, useState } from \"react\";\r\n\r\nexport default function useLoadImage(src) {\r\n  const [sourceLoaded, setSourceLoaded] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const img = new Image();\r\n    img.src = src;\r\n    img.onload = () => setSourceLoaded(src);\r\n  }, [src]);\r\n\r\n  return sourceLoaded;\r\n}\r\n","import React, { useState } from 'react';\r\nimport Tooltip from './../Tooltip/Tooltip';\r\nimport { formatAmount } from '../../lib/legacy';\r\nimport { ImSpinner2 } from 'react-icons/im';\r\nimport { t } from '@lingui/macro';\r\nimport { USD_DECIMALS, INCREASE, STOP } from './../../lib/legacy';\r\nimport StatsTooltipRow from '../StatsTooltip/StatsTooltipRow';\r\nimport { Trans } from '@lingui/macro';\r\nimport './PositionsItem.scss';\r\nimport icon_edit from '../../../../img/icon-edit.svg';\r\n\r\nconst PositionsItem = (props) => {\r\n\tconst {\r\n\t\tposition,\r\n\t\tonPositionClick,\r\n\t\tsetListSection,\r\n\t\tpositionOrders,\r\n\t\tshowPnlAfterFees,\r\n\t\thasPositionProfit,\r\n\t\tpositionDelta,\r\n\t\thasOrderError,\r\n\t\tliquidationPrice,\r\n\t\tcx,\r\n\t\tborrowFeeUSD,\r\n\t\teditPosition,\r\n\t\tsellPosition,\r\n\t\tisLarge,\r\n\t\tisPending,\r\n\t\topenSLTPModal,\r\n\t} = props;\r\n\r\n\tconst [isCloseLoading, setIsCloseLoading] = useState(false);\r\n\r\n\tconst marketImg = require(`../../../../img/icon-${position.market}.svg`).default;\r\n\r\n\tif (position.market === 'GNS') {\r\n\t\tposition.hasPendingChanges = isPending;\r\n\t}\r\n\r\n\tconst openOrderModal = (market, isTP, position) => {\r\n\t\tif (market === 'GNS') {\r\n\t\t\topenSLTPModal(isTP, position);\r\n\t\t}\r\n\t\tif (market === 'GMX') {\r\n\t\t\tconst orderName = isTP ? 'TP' : 'SL';\r\n\t\t\tif (triggerPricesGMX[orderName]) {\r\n\t\t\t\tsetListSection && setListSection(\"Orders\");\r\n\t\t\t} else {\r\n\t\t\t\tsellPosition(position, setIsCloseLoading, STOP);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tconst triggerOrdersGMX = positionOrders?.filter(order => {\r\n\t\treturn order.type === 'Decrease';\r\n\t});\r\n\tconst triggerPricesGMX = {\r\n\t\tSL: undefined,\r\n\t\tTP: undefined,\r\n\t}\r\n\ttriggerOrdersGMX.map(order => {\r\n\t\tconst price = order.triggerPrice;\r\n\r\n\t\tif (position.isLong) {\r\n\t\t\tif (price.gt(position.averagePrice)) {\r\n\t\t\t\ttriggerPricesGMX.TP = price;\r\n\t\t\t} else if (price.lt(position.averagePrice)) {\r\n\t\t\t\ttriggerPricesGMX.SL = price;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (price.gt(position.averagePrice)) {\r\n\t\t\t\ttriggerPricesGMX.SL = price;\r\n\t\t\t} else if (price.lt(position.averagePrice)) {\r\n\t\t\t\ttriggerPricesGMX.TP = price;\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isLarge ?\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td className=\"clickable\" onClick={() => onPositionClick(position)}>\r\n\t\t\t\t\t\t<div className=\"Exchange-list-title\">\r\n\t\t\t\t\t\t\t{position.indexToken.symbol}\r\n\t\t\t\t\t\t\t{position.hasPendingChanges && <ImSpinner2 className=\"spin position-loading-icon\" />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"Exchange-list-info-label\">\r\n\t\t\t\t\t\t\t<img className='market-logo' src={marketImg} alt={`${position.market} icon`} />\r\n\t\t\t\t\t\t\t{position.leverage && (\r\n\t\t\t\t\t\t\t\t<span className=\"muted\">{formatAmount(position.leverage, 4, 2, true)}x&nbsp;</span>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<span className={cx({ positive: position.isLong, negative: !position.isLong })}>\r\n\t\t\t\t\t\t\t\t{position.isLong ? \"Long\" : \"Short\"}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\r\n\t\t\t\t\t\t{positionOrders?.length > 0 && (\r\n\t\t\t\t\t\t\t<div onClick={() => setListSection && setListSection(\"Orders\")}>\r\n\t\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\t\thandle={`Orders (${positionOrders.length})`}\r\n\t\t\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\t\t\thandleClassName={cx(\r\n\t\t\t\t\t\t\t\t\t\t[\"Exchange-list-info-label\", \"Exchange-position-list-orders\", \"plain\", \"clickable\"],\r\n\t\t\t\t\t\t\t\t\t\t{ muted: !hasOrderError, negative: hasOrderError }\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Active Orders</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{positionOrders.map((order) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${order.isLong}-${order.type}-${order.index}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"Position-list-order\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{order.triggerAboveThreshold ? \">\" : \"<\"}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatAmount(order.triggerPrice, 30, 2, true)}:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{order.type === INCREASE ? \" +\" : \" -\"}${formatAmount(order.sizeDelta, 30, 2, true)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{order.error && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t, <span className=\"negative\">{order.error}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\thandle={`$${formatAmount(position.collateral, USD_DECIMALS, 2, true)}`}\r\n\t\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\t\thandleClassName={cx(\"plain\", { negative: position.hasLowCollateral })}\r\n\t\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t{position.hasLowCollateral && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Trans>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tWARNING: This position has a low amount of collateral after deducting borrowing fees,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeposit more collateral to reduce the position's liquidation risk.\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Trans>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t<StatsTooltipRow\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={t`Initial Collateral`}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={formatAmount(position.collateral, USD_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<StatsTooltipRow\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={t`Borrow Fee`}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={formatAmount(position.fundingFee, USD_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<StatsTooltipRow label={t`Borrow Fee / Day`} value={borrowFeeUSD} />\r\n\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t<Trans>Use the \"Edit\" button to deposit or withdraw collateral.</Trans>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{position.market === 'GMX' && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='edit-btn'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\teditPosition(position);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<img src={icon_edit} alt=\"Edit position button\" />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td onClick={() => {\r\n\t\t\t\t\t\t// onPositionClick(position)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}} style={{width: 135}}>\r\n\t\t\t\t\t\t{`$${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}`}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"\" onClick={() => {\r\n\t\t\t\t\t\t// onPositionClick(position)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{`$${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}`}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"\" onClick={() => {\r\n\t\t\t\t\t\t// onPositionClick(position)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div style={{ width: 100, display: 'block' }}>\r\n\t\t\t\t\t\t\t{position.deltaStr && (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-info-label\", {\r\n\t\t\t\t\t\t\t\t\t\tpositive: hasPositionProfit && positionDelta.gt(0),\r\n\t\t\t\t\t\t\t\t\t\tnegative: !hasPositionProfit && positionDelta.gt(0),\r\n\t\t\t\t\t\t\t\t\t\tmuted: positionDelta.eq(0),\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{position.deltaAfterFeesStr ?? position.deltaStr} ({position.deltaAfterFeesPercentageStr ?? position.deltaPercentageStr})\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{position.market === 'GNS' && position.sl &&\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t!position.sl?.eq(0) &&\r\n\t\t\t\t\t\t\t\t\t('$' + formatAmount(position.sl, 10, 2, true))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{position.market === 'GMX' && (triggerPricesGMX.SL \r\n\t\t\t\t\t\t\t? ('$' + formatAmount(triggerPricesGMX.SL, USD_DECIMALS, 2, true))\r\n\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"Exchange-list-action\"\r\n\t\t\t\t\t\t\tonClick={() => openOrderModal(position.market, false, position)}\r\n\t\t\t\t\t\t\tdisabled={!position.size || isPending}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{((!position.sl || position.sl?.eq(0)) && !triggerPricesGMX.SL)\r\n\t\t\t\t\t\t\t\t? 'Set SL'\r\n\t\t\t\t\t\t\t\t: <img src={icon_edit} alt=\"Edit Stop Loss button\" />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{position.market === 'GNS' && position.tp &&\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t!position.tp?.eq(0) &&\r\n\t\t\t\t\t\t\t\t\t('$' + formatAmount(position.tp, 10, 2, true))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{position.market === 'GMX' && (triggerPricesGMX.TP \r\n\t\t\t\t\t\t\t? ('$' + formatAmount(triggerPricesGMX.TP, USD_DECIMALS, 2, true))\r\n\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"Exchange-list-action\"\r\n\t\t\t\t\t\t\tonClick={() => openOrderModal(position.market, true, position)}\r\n\t\t\t\t\t\t\tdisabled={!position.size || isPending}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{((!position.tp || position.tp?.eq(0)) && !triggerPricesGMX.TP)\r\n\t\t\t\t\t\t\t\t? 'Set TP'\r\n\t\t\t\t\t\t\t\t: <img src={icon_edit} alt=\"Edit Take Profit button\" />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"td-btn pos-relative\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tisCloseLoading ?\r\n\t\t\t\t\t\t\t\t<ImSpinner2 className=\"spin position-loading-icon\" />\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t!isPending &&\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"Exchange-list-action\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetIsCloseLoading(true);\r\n\t\t\t\t\t\t\t\t\t\t\tsellPosition(position, setIsCloseLoading);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={position.size.eq(0)}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t:\r\n\t\t\t<div className=\"App-card\">\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-content\">\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\t<Trans>Position</Trans>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div className=\"Exchange-list-token\">\r\n\t\t\t\t\t\t\t\t{position.hasPendingChanges && <ImSpinner2 className=\"spin position-loading-icon\" style={{marginRight: 10}} />}\r\n\t\t\t\t\t\t\t\t{position.indexToken.symbol}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<img className='market-logo' src={marketImg} alt={`${position.market} icon`} />\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-side\", {\r\n\t\t\t\t\t\t\t\t\tpositive: position.isLong,\r\n\t\t\t\t\t\t\t\t\tnegative: !position.isLong,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t><span className=\"Exchange-list-leverage\">{formatAmount(position.leverage, 4, 2, true)}x&nbsp;</span>\r\n\t\t\t\t\t\t\t\t{position.isLong ? t`Long` : t`Short`}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tSize\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>${formatAmount(position.size, USD_DECIMALS, 2, true)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-content\">\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\t<Trans>Mark Price</Trans>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>${formatAmount(position.markPrice, USD_DECIMALS, 2, true)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\t<Trans>Entry Price</Trans>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>${formatAmount(position.averagePrice, USD_DECIMALS, 2, true)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\t<Trans>Liq. Price</Trans>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tPNL (ROE %)\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{position.deltaStr && (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-info-label\", {\r\n\t\t\t\t\t\t\t\t\t\tpositive: hasPositionProfit && positionDelta.gt(0),\r\n\t\t\t\t\t\t\t\t\t\tnegative: !hasPositionProfit && positionDelta.gt(0),\r\n\t\t\t\t\t\t\t\t\t\tmuted: positionDelta.eq(0),\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{position.deltaAfterFeesStr ?? position.deltaStr} ({position.deltaAfterFeesPercentageStr ?? position.deltaPercentageStr})\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row App-card-row_edit-btn\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tStop Loss\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{position.market === 'GNS' && position.sl &&\r\n\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t!position.sl?.eq(0) &&\r\n\t\t\t\t\t\t\t\t\t\t('$' + formatAmount(position.sl, 10, 2, true))\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{position.market === 'GMX' && (triggerPricesGMX.SL \r\n\t\t\t\t\t\t\t\t? ('$' + formatAmount(triggerPricesGMX.SL, USD_DECIMALS, 2, true))\r\n\t\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"Exchange-list-action\"\r\n\t\t\t\t\t\t\tonClick={() => openOrderModal(position.market, false, position)}\r\n\t\t\t\t\t\t\tdisabled={!position.size || isPending}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{((!position.sl || position.sl?.eq(0)) && !triggerPricesGMX.SL)\r\n\t\t\t\t\t\t\t\t? 'Set SL'\r\n\t\t\t\t\t\t\t\t: <img src={icon_edit} alt=\"Edit Stop Loss button\" />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row App-card-row_edit-btn\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tTake Profit\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{position.market === 'GNS' && position.tp &&\r\n\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t!position.tp?.eq(0) &&\r\n\t\t\t\t\t\t\t\t\t\t('$' + formatAmount(position.tp, 10, 2, true))\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{position.market === 'GMX' && (triggerPricesGMX.TP \r\n\t\t\t\t\t\t\t\t? ('$' + formatAmount(triggerPricesGMX.TP, USD_DECIMALS, 2, true))\r\n\t\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"Exchange-list-action\"\r\n\t\t\t\t\t\t\tonClick={() => openOrderModal(position.market, true, position)}\r\n\t\t\t\t\t\t\tdisabled={!position.size || isPending}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{((!position.tp || position.tp?.eq(0)) && !triggerPricesGMX.TP)\r\n\t\t\t\t\t\t\t\t? 'Set TP'\r\n\t\t\t\t\t\t\t\t: <img src={icon_edit} alt=\"Edit Take Profit button\" />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-options\">\r\n\t\t\t\t\t<div className=\"App-button-option pos-relative\">\r\n\t\t\t\t\t\t{!isPending &&\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"App-button-option App-card-option\"\r\n\t\t\t\t\t\t\t\tdisabled={position.size.eq(0)}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsellPosition(position, setIsCloseLoading);\r\n\t\t\t\t\t\t\t\t\tsetIsCloseLoading(true);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t\t</button>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default PositionsItem;","import React, { useState } from \"react\";\r\nimport cx from \"classnames\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport PositionSeller from \"./PositionSeller\";\r\nimport PositionEditor from \"./PositionEditor\";\r\nimport OrdersToa from \"./OrdersToa\";\r\n\r\nimport { ImSpinner2 } from \"react-icons/im\";\r\n\r\nimport {\r\n  helperToast,\r\n  bigNumberify,\r\n  getLiquidationPrice,\r\n  getUsd,\r\n  getLeverage,\r\n  formatAmount,\r\n  getOrderError,\r\n  USD_DECIMALS,\r\n  FUNDING_RATE_PRECISION,\r\n  SWAP,\r\n  LONG,\r\n  SHORT,\r\n  INCREASE,\r\n  DECREASE,\r\n  BASIS_POINTS_DIVISOR,\r\n  getDeltaStr,\r\n} from \"../../lib/legacy\";\r\nimport PositionShare from \"./PositionShare\";\r\nimport PositionsItem from './PositionsItem';\r\nimport { ADDRESS_ZERO } from '@uniswap/v3-sdk';\r\nimport { GNS_PAIRS } from './../../lib/GNS_legacy';\r\nimport GNS_Trading from '../../abis/GNS/GNS_Trading.json';\r\nimport { errAlert, notifySuccess } from './../../../../components/utils/notifications';\r\nimport { ethers } from 'ethers';\r\nimport { BigNumber } from 'ethers';\r\nimport { getTokenBySymbol } from \"../../config/Tokens\";\r\nimport { expandDecimals, MARKET } from './../../lib/legacy';\r\nimport { GNS_FEES_MULTIPLIER } from './../../../../components/utils/constants';\r\nimport SLTPModal from './../../../../components/UI/modal/SLTPModal';\r\nimport { formatForContract } from \"../../../../components/utils/math\";\r\n\r\nconst getOrdersForPosition = (account, position, orders, nativeTokenAddress) => {\r\n  if (!orders || orders.length === 0) {\r\n    return [];\r\n  }\r\n  /* eslint-disable array-callback-return */\r\n  return orders\r\n    .filter((order) => {\r\n      if (order.type === SWAP) {\r\n        return false;\r\n      }\r\n      const hasMatchingIndexToken =\r\n        order.indexToken === nativeTokenAddress\r\n          ? position.indexToken.isNative\r\n          : order.indexToken === position.indexToken.address;\r\n      const hasMatchingCollateralToken =\r\n        order.collateralToken === nativeTokenAddress\r\n          ? position.collateralToken.isNative\r\n          : order.collateralToken === position.collateralToken.address;\r\n      if (order.isLong === position.isLong && hasMatchingIndexToken && hasMatchingCollateralToken) {\r\n        return true;\r\n      }\r\n    })\r\n    .map((order) => {\r\n      order.error = getOrderError(account, order, undefined, position);\r\n      if (order.type === DECREASE && order.sizeDelta.gt(position.size)) {\r\n        order.error = \"Order size is bigger than position, will only be executable if position increases\";\r\n      }\r\n      return order;\r\n    });\r\n};\r\n\r\nexport default function PositionsList(props) {\r\n  const {\r\n    pendingPositions,\r\n    setPendingPositions,\r\n    positionsGNS,\r\n    positions,\r\n    positionsDataIsLoading,\r\n    positionsMap,\r\n    infoTokens,\r\n    active,\r\n    account,\r\n    library,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n    setListSection,\r\n    flagOrdersEnabled,\r\n    savedIsPnlInLeverage,\r\n    chainId,\r\n    nativeTokenAddress,\r\n    orders,\r\n    setIsWaitingForPluginApproval,\r\n    approveOrderBook,\r\n    isPluginApproving,\r\n    isWaitingForPluginApproval,\r\n    orderBookApproved,\r\n    positionRouterApproved,\r\n    isWaitingForPositionRouterApproval,\r\n    isPositionRouterApproving,\r\n    approvePositionRouter,\r\n    showPnlAfterFees,\r\n    setMarket,\r\n    minExecutionFee,\r\n    minExecutionFeeUSD,\r\n    minExecutionFeeErrorMessage,\r\n    usdgSupply,\r\n    totalTokenWeights,\r\n    positionsLoading,\r\n    pendingPositionsGNS,\r\n  } = props;\r\n\r\n  const hasPositions = Boolean(positions?.length || positionsGNS?.length || Object.keys(pendingPositionsGNS).length);\r\n\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [SLTPModalInfo, setSLTPModalInfo] = useState([]);\r\n\r\n\r\n  const renderSLTPModal = () => {\r\n    const [isTP, position, title, btnText] = SLTPModalInfo;\r\n    const onApply = (val, setIsLoading) => {\r\n      setSLTP(isTP, val, position, setIsLoading);\r\n    }\r\n    \r\n    return (\r\n      <SLTPModal\r\n        visible={modalVisible}\r\n        setVisible={setModalVisible}\r\n        title={title}\r\n        btnText={btnText}\r\n        onApply={onApply}\r\n        isTP={isTP}\r\n        position={position}\r\n      />\r\n    );\r\n  }\r\n  const openSLTPModal = (isTP, position) => {\r\n    const curVal = isTP ? position.tp : position.sl;\r\n    const orderName = isTP ? 'Take Profit' : 'Stop Loss';\r\n    const title = `${!curVal?.eq(0) ? 'Edit' : 'Set'} ${orderName}`;\r\n    const btnText = !curVal?.eq(0) ? 'Save changes' : title;\r\n\r\n\t\tsetSLTPModalInfo([\r\n\t\t\tisTP, position, title, btnText\r\n\t\t]);\r\n    setModalVisible(true);\r\n  }\r\n\r\n  \r\n  const setSLTP = (isTP, value, position, setIsLoading) => {\r\n    const pairIndex = position.pairIndex;\r\n    const index = position.index;\r\n    const newValue = value ? formatForContract(value, 10) : '0';\r\n    \r\n    const contract = new ethers.Contract(GNS_Trading.address, GNS_Trading.abi, library.getSigner());\r\n    const method = isTP ? 'updateTp' : 'updateSl';\r\n\r\n    contract[method](pairIndex, index, newValue)\r\n      .then(tsc => {\r\n        console.log(tsc);\r\n      \r\n        tsc.wait()\r\n          .then(() => {\r\n            notifySuccess(`${isTP ? 'Take Profit' : 'Stop Loss'} update submitted!`, tsc.hash);\r\n            setModalVisible(false);\r\n          })\r\n      }, errAlert).finally(() => setIsLoading(false));\r\n  }\r\n\r\n  const [positionToEditKey, setPositionToEditKey] = useState(undefined);\r\n  const [positionToSellKey, setPositionToSellKey] = useState(undefined);\r\n  const [positionToShare, setPositionToShare] = useState(null);\r\n  const [isPositionEditorVisible, setIsPositionEditorVisible] = useState(undefined);\r\n  const [isPositionSellerVisible, setIsPositionSellerVisible] = useState(undefined);\r\n  const [positionSellerTab, setPositionSellerTab] = useState(MARKET);\r\n  const [collateralTokenAddress, setCollateralTokenAddress] = useState(undefined);\r\n  const [isPositionShareModalOpen, setIsPositionShareModalOpen] = useState(false);\r\n  const [ordersToaOpen, setOrdersToaOpen] = useState(false);\r\n  const [isHigherSlippageAllowed, setIsHigherSlippageAllowed] = useState(false);\r\n\r\n  const editPosition = (position) => {\r\n    setCollateralTokenAddress(position.collateralToken.address);\r\n    setPositionToEditKey(position.key);\r\n    setIsPositionEditorVisible(true);\r\n  };\r\n\r\n  const sellPosition = (position, setLoading, initTab) => {\r\n    if (position.market === 'GMX') {\r\n      setPositionToSellKey(position.key);\r\n      setIsPositionSellerVisible(true);\r\n      setPositionSellerTab(initTab);\r\n      setIsHigherSlippageAllowed(false);\r\n      setLoading(false);\r\n    } else if (position.market === 'GNS') {\r\n      const contract = new ethers.Contract(GNS_Trading.address, GNS_Trading.abi, library.getSigner());\r\n\r\n      contract.closeTradeMarket(\r\n        position.pairIndex,\r\n        position.index\r\n      ).then(tsc => {\r\n        console.log(tsc);\r\n\r\n        tsc.wait().then(() => {\r\n          notifySuccess('Position closed!', tsc.hash);\r\n        })\r\n      }, err => {\r\n        errAlert(err);\r\n        setLoading(false);\r\n      });\r\n    }\r\n  };\r\n  \r\n  const onPositionClick = (position) => {\r\n    helperToast.success(`${position.isLong ? \"Long\" : \"Short\"} ${position.indexToken.symbol} market selected`);\r\n    setMarket(position.isLong ? LONG : SHORT, position.indexToken.address);\r\n  };\r\n\r\n  return (\r\n    <div className=\"PositionsList\">\r\n      <PositionEditor\r\n        pendingPositions={pendingPositions}\r\n        setPendingPositions={setPendingPositions}\r\n        positionsMap={positionsMap}\r\n        positionKey={positionToEditKey}\r\n        isVisible={isPositionEditorVisible}\r\n        setIsVisible={setIsPositionEditorVisible}\r\n        infoTokens={infoTokens}\r\n        active={active}\r\n        account={account}\r\n        library={library}\r\n        collateralTokenAddress={collateralTokenAddress}\r\n        pendingTxns={pendingTxns}\r\n        setPendingTxns={setPendingTxns}\r\n        getUsd={getUsd}\r\n        getLeverage={getLeverage}\r\n        savedIsPnlInLeverage={savedIsPnlInLeverage}\r\n        positionRouterApproved={positionRouterApproved}\r\n        isPositionRouterApproving={isPositionRouterApproving}\r\n        isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\r\n        approvePositionRouter={approvePositionRouter}\r\n        chainId={chainId}\r\n        minExecutionFee={minExecutionFee}\r\n        minExecutionFeeUSD={minExecutionFeeUSD}\r\n        minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\r\n      />\r\n      {ordersToaOpen && (\r\n        <OrdersToa\r\n          setIsVisible={setOrdersToaOpen}\r\n          approveOrderBook={approveOrderBook}\r\n          isPluginApproving={isPluginApproving}\r\n        />\r\n      )}\r\n      {isPositionShareModalOpen && (\r\n        <PositionShare\r\n          setIsPositionShareModalOpen={setIsPositionShareModalOpen}\r\n          isPositionShareModalOpen={isPositionShareModalOpen}\r\n          positionToShare={positionToShare}\r\n          chainId={chainId}\r\n          account={account}\r\n        />\r\n      )}\r\n      {ordersToaOpen && (\r\n        <OrdersToa\r\n          setIsVisible={setOrdersToaOpen}\r\n          approveOrderBook={approveOrderBook}\r\n          isPluginApproving={isPluginApproving}\r\n        />\r\n      )}\r\n      {isPositionSellerVisible && (\r\n        <PositionSeller\r\n          pendingPositions={pendingPositions}\r\n          setPendingPositions={setPendingPositions}\r\n          setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\r\n          approveOrderBook={approveOrderBook}\r\n          isPluginApproving={isPluginApproving}\r\n          isWaitingForPluginApproval={isWaitingForPluginApproval}\r\n          orderBookApproved={orderBookApproved}\r\n          positionsMap={positionsMap}\r\n          positionKey={positionToSellKey}\r\n          isVisible={isPositionSellerVisible}\r\n          setIsVisible={setIsPositionSellerVisible}\r\n          infoTokens={infoTokens}\r\n          active={active}\r\n          account={account}\r\n          orders={orders}\r\n          library={library}\r\n          pendingTxns={pendingTxns}\r\n          setPendingTxns={setPendingTxns}\r\n          flagOrdersEnabled={flagOrdersEnabled}\r\n          savedIsPnlInLeverage={savedIsPnlInLeverage}\r\n          chainId={chainId}\r\n          nativeTokenAddress={nativeTokenAddress}\r\n          setOrdersToaOpen={setOrdersToaOpen}\r\n          positionRouterApproved={positionRouterApproved}\r\n          isPositionRouterApproving={isPositionRouterApproving}\r\n          isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\r\n          approvePositionRouter={approvePositionRouter}\r\n          isHigherSlippageAllowed={isHigherSlippageAllowed}\r\n          setIsHigherSlippageAllowed={setIsHigherSlippageAllowed}\r\n          minExecutionFee={minExecutionFee}\r\n          minExecutionFeeUSD={minExecutionFeeUSD}\r\n          minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\r\n          usdgSupply={usdgSupply}\r\n          totalTokenWeights={totalTokenWeights}\r\n          initTab={positionSellerTab}\r\n        />\r\n      )}\r\n      {renderSLTPModal()}\r\n      <div className=\"Exchange-list small\">\r\n        <div>\r\n          {!hasPositions && (positionsDataIsLoading || positionsLoading) && (\r\n            <div className=\"Exchange-empty-positions-list-note App-card\">\r\n              <Trans>Loading...</Trans>\r\n            </div>\r\n          )}\r\n          {!hasPositions && !positionsDataIsLoading && !positionsLoading && (\r\n            <div className=\"Exchange-empty-positions-list-note App-card Exchange-list-empty-note\">\r\n              <Trans>No open positions</Trans>\r\n            </div>\r\n          )}\r\n          {positions.map((position) => {\r\n            position.market = \"GMX\";\r\n            \r\n            const positionOrders = getOrdersForPosition(account, position, orders, nativeTokenAddress);\r\n            const liquidationPrice = getLiquidationPrice(position);\r\n            const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\r\n            const positionDelta =\r\n              position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\r\n            let borrowFeeUSD;\r\n            if (position.collateralToken && position.collateralToken.fundingRate) {\r\n              const borrowFeeRate = position.collateralToken.fundingRate\r\n                .mul(position.size)\r\n                .mul(24)\r\n                .div(FUNDING_RATE_PRECISION);\r\n              borrowFeeUSD = formatAmount(borrowFeeRate, USD_DECIMALS, 2);\r\n            }\r\n\r\n            return (\r\n              <PositionsItem\r\n                openSLTPModal={openSLTPModal}\r\n                key={position.key}\r\n                position={position}\r\n                onPositionClick={onPositionClick}\r\n                setListSection={setListSection}\r\n                positionOrders={positionOrders}\r\n                showPnlAfterFees={showPnlAfterFees}\r\n                hasPositionProfit={hasPositionProfit}\r\n                positionDelta={positionDelta}\r\n                liquidationPrice={liquidationPrice}\r\n                cx={cx}\r\n                borrowFeeUSD={borrowFeeUSD}\r\n                editPosition={editPosition}\r\n                sellPosition={sellPosition}\r\n                setSLTP={setSLTP}\r\n                isLarge={false}\r\n              />\r\n            );\r\n          })}\r\n          {positionsGNS?.map(pos => {\r\n            if (!pos.trader || pos.trader === ADDRESS_ZERO) {\r\n              return;\r\n            }\r\n            \r\n            const position = Object.assign({}, pos);\r\n\r\n            position.market = \"GNS\";\r\n            const key = `${position.pairIndex}${position.index}`;\r\n            const isLong = position.buy;\r\n            position.isLong = isLong;\r\n\r\n            const tokenSymb = Object.keys(GNS_PAIRS).find(symb => GNS_PAIRS[symb] === Number(position.pairIndex));\r\n            position.indexToken = getTokenBySymbol(chainId, tokenSymb);\r\n            const tokenAddr = position.indexToken.address;\r\n            const curPrice = infoTokens[tokenAddr].maxPrice;\r\n\r\n            position.size = BigNumber.from(position.positionSizeDai + '0'.repeat(12)).mul(position.leverage);\r\n            position.markPrice = curPrice;\r\n            position.averagePrice = BigNumber.from(position.openPrice + '0'.repeat(20));\r\n            position.collateral = BigNumber.from(position.positionSizeDai + '0'.repeat(12));\r\n            \r\n            position.initCollateral = expandDecimals(position.positionSizeDai.div(10000 - position.leverage.mul(GNS_FEES_MULTIPLIER * 10**4)), 16);\r\n            position.fees = position.initCollateral.sub(position.collateral);\r\n            \r\n            \r\n            let hasPositionProfit;\r\n            if (isLong) {\r\n              hasPositionProfit = position.markPrice.gte(position.averagePrice);\r\n            } else {\r\n              hasPositionProfit = position.markPrice.lte(position.averagePrice);\r\n            }\r\n            position.hasProfit = hasPositionProfit;\r\n            \r\n            const priceDelta = position.averagePrice.gt(position.markPrice)\r\n            ? position.averagePrice.sub(position.markPrice)\r\n            : position.markPrice.sub(position.averagePrice);\r\n            position.delta = position.size.mul(priceDelta).div(position.averagePrice);\r\n            \r\n            position.deltaPercentage = position.delta.mul(BASIS_POINTS_DIVISOR).div(position.collateral);\r\n\r\n            let pendingDeltaAfterFees;\r\n            if (position.hasProfit) {\r\n              if (position.delta.gt(position.fees)) {\r\n                hasPositionProfit = true;\r\n                pendingDeltaAfterFees = position.delta.sub(position.fees);\r\n              } else {\r\n                hasPositionProfit = false;\r\n                pendingDeltaAfterFees = position.fees.sub(position.delta);\r\n              }\r\n            } else {\r\n              hasPositionProfit = false;\r\n              pendingDeltaAfterFees = position.delta.add(position.fees);\r\n            }\r\n      \r\n            position.hasProfit = hasPositionProfit;\r\n            position.delta = pendingDeltaAfterFees;\r\n            position.deltaPercentage = pendingDeltaAfterFees\r\n              .mul(BASIS_POINTS_DIVISOR)\r\n              .div(position.collateral);\r\n            \r\n            const { deltaStr, deltaPercentageStr } = getDeltaStr({\r\n              delta: position.delta,\r\n              deltaPercentage: position.deltaPercentage,\r\n              hasProfit: position.hasProfit,\r\n            });\r\n\r\n            position.deltaStr = deltaStr;\r\n            position.deltaPercentageStr = deltaPercentageStr;\r\n            position.deltaBeforeFeesStr = deltaStr;\r\n            \r\n            const entryPrice = position.averagePrice;\r\n            const collateral = position.collateral.mul(position.leverage);\r\n            const liqPriceDistance = (entryPrice.mul(collateral.mul(9).div(10)).div(collateral).div(position.leverage));\r\n            \r\n            const liqPrice = isLong ?\r\n                entryPrice.sub(liqPriceDistance)\r\n                : entryPrice.add(liqPriceDistance);\r\n            \r\n            position.leverage = position.leverage * 10**4;\r\n\r\n            const positionOrders = [];\r\n            return (\r\n              <PositionsItem\r\n                openSLTPModal={openSLTPModal}\r\n                key={key}\r\n                position={position}\r\n                onPositionClick={onPositionClick}\r\n                setListSection={setListSection}\r\n                positionOrders={positionOrders}\r\n                showPnlAfterFees={showPnlAfterFees}\r\n                hasPositionProfit={hasPositionProfit}\r\n                positionDelta={position.delta}\r\n                liquidationPrice={liqPrice}\r\n                cx={cx}\r\n                // borrowFeeUSD={borrowFeeUSD}\r\n                editPosition={editPosition}\r\n                sellPosition={sellPosition}\r\n                setSLTP={setSLTP}\r\n                isLarge={false}\r\n              />\r\n            );\r\n          })}\r\n          {Object.keys(pendingPositionsGNS)?.map(posKey => {\r\n            if (!posKey) {\r\n              return;\r\n            }\r\n\r\n            const position = Object.assign({}, pendingPositionsGNS[posKey]);\r\n\r\n            position.market = \"GNS\";\r\n            const key = `${position.pairIndex}`;\r\n\r\n            const tokenSymb = Object.keys(GNS_PAIRS).find(symb => GNS_PAIRS[symb] === Number(position.pairIndex));\r\n            \r\n            position.indexToken = getTokenBySymbol(chainId, tokenSymb);\r\n            const tokenAddr = position.indexToken.address;\r\n            const curPrice = infoTokens[tokenAddr].maxPrice;\r\n\r\n            position.size = BigNumber.from(position.positionSizeDai + '0'.repeat(12)).mul(position.leverage / 10**4);\r\n            position.markPrice = curPrice;\r\n            position.averagePrice = 0;\r\n            position.collateral = BigNumber.from(position.positionSizeDai + '0'.repeat(12));\r\n            \r\n            const hasPositionProfit = undefined;\r\n            position.hasProfit = hasPositionProfit;\r\n\r\n            const positionOrders = [];\r\n            return (\r\n              <PositionsItem\r\n                openSLTPModal={openSLTPModal}\r\n                key={key}\r\n                position={position}\r\n                onPositionClick={onPositionClick}\r\n                setListSection={setListSection}\r\n                positionOrders={positionOrders}\r\n                showPnlAfterFees={showPnlAfterFees}\r\n                hasPositionProfit={hasPositionProfit}\r\n                positionDelta={0}\r\n                liquidationPrice={0}\r\n                cx={cx}\r\n                // borrowFeeUSD={borrowFeeUSD}\r\n                editPosition={editPosition}\r\n                sellPosition={sellPosition}\r\n                setSLTP={setSLTP}\r\n                isLarge={true}\r\n                isPending={true}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      <table className=\"Exchange-list large App-box\">\r\n        <tbody>\r\n          {hasPositions && (\r\n            <tr className=\"Exchange-list-header\">\r\n              <th>\r\n                <Trans>Position</Trans>\r\n              </th>\r\n              <th>\r\n                <Trans>Size</Trans>\r\n              </th>\r\n              <th>\r\n                <Trans>Collateral</Trans>\r\n              </th>\r\n              <th>\r\n                <Trans>Mark Price</Trans>\r\n              </th>\r\n              <th>\r\n                <Trans>Entry Price</Trans>\r\n              </th>\r\n              <th>\r\n                <Trans>Liq. Price</Trans>\r\n              </th>\r\n              <th>\r\n                PNL (ROE %)\r\n              </th>\r\n              <th>\r\n                Stop Loss\r\n              </th>\r\n              <th>\r\n                Take Profit\r\n              </th>\r\n              <th></th>\r\n            </tr>\r\n          )}\r\n          {!hasPositions && (positionsDataIsLoading || positionsLoading) && (\r\n            <tr>\r\n              <td colSpan=\"15\">\r\n                <div className=\"Exchange-empty-positions-list-note\">Loading...</div>\r\n              </td>\r\n            </tr>\r\n          )}\r\n          {!hasPositions && !positionsDataIsLoading && !positionsLoading && (\r\n            <tr>\r\n              <td colSpan=\"15\" className=\"Exchange-list-empty-note\">\r\n                No open positions\r\n              </td>\r\n            </tr>\r\n          )}\r\n          {positions.map((position) => {\r\n            const liquidationPrice = getLiquidationPrice(position) || bigNumberify(0);\r\n            const positionOrders = getOrdersForPosition(account, position, orders, nativeTokenAddress);\r\n            const hasOrderError = !!positionOrders.find((order) => order.error);\r\n            const hasPositionProfit = position[showPnlAfterFees ? \"hasProfitAfterFees\" : \"hasProfit\"];\r\n            const positionDelta =\r\n              position[showPnlAfterFees ? \"pendingDeltaAfterFees\" : \"pendingDelta\"] || bigNumberify(0);\r\n            let borrowFeeUSD;\r\n            if (position.collateralToken && position.collateralToken.fundingRate) {\r\n              const borrowFeeRate = position.collateralToken.fundingRate\r\n                .mul(position.size)\r\n                .mul(24)\r\n                .div(FUNDING_RATE_PRECISION);\r\n              borrowFeeUSD = formatAmount(borrowFeeRate, USD_DECIMALS, 2);\r\n            }\r\n\r\n\r\n            return (\r\n              <PositionsItem\r\n                openSLTPModal={openSLTPModal}\r\n                key={position.key}\r\n                position={position}\r\n                onPositionClick={onPositionClick}\r\n                setListSection={setListSection}\r\n                positionOrders={positionOrders}\r\n                showPnlAfterFees={showPnlAfterFees}\r\n                hasPositionProfit={hasPositionProfit}\r\n                positionDelta={positionDelta}\r\n                liquidationPrice={liquidationPrice}\r\n                cx={cx}\r\n                borrowFeeUSD={borrowFeeUSD}\r\n                editPosition={editPosition}\r\n                sellPosition={sellPosition}\r\n                setSLTP={setSLTP}\r\n                isLarge={true}\r\n              />\r\n            );\r\n          })}\r\n          {positionsGNS?.map(pos => {\r\n            if (!pos.trader || pos.trader === ADDRESS_ZERO) {\r\n              return;\r\n            }\r\n            \r\n            const position = Object.assign({}, pos);\r\n\r\n            position.market = \"GNS\";\r\n            const key = `${position.pairIndex}${position.index}`;\r\n            const isLong = position.buy;\r\n            position.isLong = isLong;\r\n\r\n            const tokenSymb = Object.keys(GNS_PAIRS).find(symb => GNS_PAIRS[symb] === Number(position.pairIndex));\r\n            position.indexToken = getTokenBySymbol(chainId, tokenSymb);\r\n            const tokenAddr = position.indexToken.address;\r\n            const curPrice = infoTokens[tokenAddr].maxPrice;\r\n\r\n            position.size = BigNumber.from(position.positionSizeDai + '0'.repeat(12)).mul(position.leverage);\r\n            position.markPrice = curPrice;\r\n            position.averagePrice = BigNumber.from(position.openPrice + '0'.repeat(20));\r\n            position.collateral = BigNumber.from(position.positionSizeDai + '0'.repeat(12));\r\n            \r\n            position.initCollateral = expandDecimals(position.positionSizeDai.div(10000 - position.leverage.mul(GNS_FEES_MULTIPLIER * 10**4)), 16);\r\n            position.fees = position.initCollateral.sub(position.collateral);\r\n            \r\n            \r\n            let hasPositionProfit;\r\n            if (isLong) {\r\n              hasPositionProfit = position.markPrice.gte(position.averagePrice);\r\n            } else {\r\n              hasPositionProfit = position.markPrice.lte(position.averagePrice);\r\n            }\r\n            position.hasProfit = hasPositionProfit;\r\n            \r\n            const priceDelta = position.averagePrice.gt(position.markPrice)\r\n            ? position.averagePrice.sub(position.markPrice)\r\n            : position.markPrice.sub(position.averagePrice);\r\n            position.delta = position.size.mul(priceDelta).div(position.averagePrice);\r\n            \r\n            position.deltaPercentage = position.delta.mul(BASIS_POINTS_DIVISOR).div(position.collateral);\r\n\r\n            let pendingDeltaAfterFees;\r\n            if (position.hasProfit) {\r\n              if (position.delta.gt(position.fees)) {\r\n                hasPositionProfit = true;\r\n                pendingDeltaAfterFees = position.delta.sub(position.fees);\r\n              } else {\r\n                hasPositionProfit = false;\r\n                pendingDeltaAfterFees = position.fees.sub(position.delta);\r\n              }\r\n            } else {\r\n              hasPositionProfit = false;\r\n              pendingDeltaAfterFees = position.delta.add(position.fees);\r\n            }\r\n      \r\n            position.hasProfit = hasPositionProfit;\r\n            position.delta = pendingDeltaAfterFees;\r\n            position.deltaPercentage = pendingDeltaAfterFees\r\n              .mul(BASIS_POINTS_DIVISOR)\r\n              .div(position.collateral);\r\n            \r\n            const { deltaStr, deltaPercentageStr } = getDeltaStr({\r\n              delta: position.delta,\r\n              deltaPercentage: position.deltaPercentage,\r\n              hasProfit: position.hasProfit,\r\n            });\r\n\r\n            position.deltaStr = deltaStr;\r\n            position.deltaPercentageStr = deltaPercentageStr;\r\n            position.deltaBeforeFeesStr = deltaStr;\r\n            \r\n            const entryPrice = position.averagePrice;\r\n            const collateral = position.collateral.mul(position.leverage);\r\n            const liqPriceDistance = (entryPrice.mul(collateral.mul(9).div(10)).div(collateral).div(position.leverage));\r\n            \r\n            const liqPrice = isLong ?\r\n                entryPrice.sub(liqPriceDistance)\r\n                : entryPrice.add(liqPriceDistance);\r\n            \r\n            position.leverage = position.leverage * 10**4;\r\n\r\n            const positionOrders = [];\r\n            return (\r\n              <PositionsItem\r\n                openSLTPModal={openSLTPModal}\r\n                key={key}\r\n                position={position}\r\n                onPositionClick={onPositionClick}\r\n                setListSection={setListSection}\r\n                positionOrders={positionOrders}\r\n                showPnlAfterFees={showPnlAfterFees}\r\n                hasPositionProfit={hasPositionProfit}\r\n                positionDelta={position.delta}\r\n                liquidationPrice={liqPrice}\r\n                cx={cx}\r\n                // borrowFeeUSD={borrowFeeUSD}\r\n                editPosition={editPosition}\r\n                sellPosition={sellPosition}\r\n                setSLTP={setSLTP}\r\n                isLarge={true}\r\n              />\r\n            );\r\n          })}\r\n          {Object.keys(pendingPositionsGNS)?.map(posKey => {\r\n            if (!posKey) {\r\n              return;\r\n            }\r\n            \r\n            const position = Object.assign({}, pendingPositionsGNS[posKey]);\r\n\r\n            position.market = \"GNS\";\r\n            const key = `${position.pairIndex}`;\r\n\r\n            const tokenSymb = Object.keys(GNS_PAIRS).find(symb => GNS_PAIRS[symb] === Number(position.pairIndex));\r\n            \r\n            position.indexToken = getTokenBySymbol(chainId, tokenSymb);\r\n            const tokenAddr = position.indexToken.address;\r\n            const curPrice = infoTokens[tokenAddr].maxPrice;\r\n\r\n            position.size = BigNumber.from(position.positionSizeDai + '0'.repeat(12)).mul(position.leverage / 10**4);\r\n            position.markPrice = curPrice;\r\n            position.averagePrice = 0;\r\n            position.collateral = BigNumber.from(position.positionSizeDai + '0'.repeat(12));\r\n            \r\n            const hasPositionProfit = undefined;\r\n            position.hasProfit = hasPositionProfit;\r\n\r\n            const positionOrders = [];\r\n            return (\r\n              <PositionsItem\r\n                openSLTPModal={openSLTPModal}\r\n                key={key}\r\n                position={position}\r\n                onPositionClick={onPositionClick}\r\n                setListSection={setListSection}\r\n                positionOrders={positionOrders}\r\n                showPnlAfterFees={showPnlAfterFees}\r\n                hasPositionProfit={hasPositionProfit}\r\n                positionDelta={0}\r\n                liquidationPrice={0}\r\n                cx={cx}\r\n                // borrowFeeUSD={borrowFeeUSD}\r\n                editPosition={editPosition}\r\n                sellPosition={sellPosition}\r\n                setSLTP={setSLTP}\r\n                isLarge={true}\r\n                isPending={true}\r\n              />\r\n            );\r\n          })}\r\n          \r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}","import React, { useState, useMemo } from \"react\";\r\nimport { BsArrowRight } from \"react-icons/bs\";\r\n\r\nimport {\r\n  PRECISION,\r\n  USD_DECIMALS,\r\n  SWAP,\r\n  TRIGGER_PREFIX_ABOVE,\r\n  TRIGGER_PREFIX_BELOW,\r\n  MIN_PROFIT_TIME,\r\n  DECREASE,\r\n  INCREASE,\r\n  useChainId,\r\n  getTokenInfo,\r\n  isTriggerRatioInverted,\r\n  bigNumberify,\r\n  formatAmountFree,\r\n  parseValue,\r\n  getNextToAmount,\r\n  getExchangeRate,\r\n  formatAmount,\r\n  getExchangeRateDisplay,\r\n  calculatePositionDelta,\r\n  getLiquidationPrice,\r\n  formatDateTime,\r\n  getDeltaStr,\r\n  getProfitPrice,\r\n  getTimeRemaining,\r\n} from \"../../lib/legacy\";\r\nimport { updateSwapOrder, updateIncreaseOrder, updateDecreaseOrder } from \"../../domain/legacy\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport ExchangeInfoRow from \"./ExchangeInfoRow\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nexport default function OrderEditor(props) {\r\n  const {\r\n    account,\r\n    order,\r\n    setEditingOrder,\r\n    infoTokens,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n    library,\r\n    totalTokenWeights,\r\n    usdgSupply,\r\n    getPositionForOrder,\r\n    positionsMap,\r\n    savedShouldDisableValidationForTesting,\r\n  } = props;\r\n\r\n  const { chainId } = useChainId();\r\n\r\n  const position = order.type !== SWAP ? getPositionForOrder(account, order, positionsMap) : null;\r\n  const liquidationPrice = order.type === DECREASE && position ? getLiquidationPrice(position) : null;\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n  const fromTokenInfo = order.type === SWAP ? getTokenInfo(infoTokens, order.path[0], true, nativeTokenAddress) : null;\r\n  const toTokenInfo =\r\n    order.type === SWAP\r\n      ? getTokenInfo(infoTokens, order.path[order.path.length - 1], order.shouldUnwrap, nativeTokenAddress)\r\n      : null;\r\n\r\n  const triggerRatioInverted = useMemo(() => {\r\n    if (order.type !== SWAP) {\r\n      return null;\r\n    }\r\n\r\n    return isTriggerRatioInverted(fromTokenInfo, toTokenInfo);\r\n  }, [toTokenInfo, fromTokenInfo, order.type]);\r\n\r\n  let initialRatio = 0;\r\n  if (order.triggerRatio) {\r\n    initialRatio = triggerRatioInverted ? PRECISION.mul(PRECISION).div(order.triggerRatio) : order.triggerRatio;\r\n  }\r\n  const [triggerRatioValue, setTriggerRatioValue] = useState(formatAmountFree(initialRatio, USD_DECIMALS, 6));\r\n\r\n  const [triggerPriceValue, setTriggerPriceValue] = useState(formatAmountFree(order.triggerPrice, USD_DECIMALS, 4));\r\n  const triggerPrice = useMemo(() => {\r\n    return triggerPriceValue ? parseValue(triggerPriceValue, USD_DECIMALS) : 0;\r\n  }, [triggerPriceValue]);\r\n\r\n  const triggerRatio = useMemo(() => {\r\n    if (!triggerRatioValue) {\r\n      return bigNumberify(0);\r\n    }\r\n    let ratio = parseValue(triggerRatioValue, USD_DECIMALS);\r\n    if (triggerRatioInverted) {\r\n      ratio = PRECISION.mul(PRECISION).div(ratio);\r\n    }\r\n    return ratio;\r\n  }, [triggerRatioValue, triggerRatioInverted]);\r\n\r\n  const indexTokenMarkPrice = useMemo(() => {\r\n    if (order.type === SWAP) {\r\n      return;\r\n    }\r\n    const toTokenInfo = getTokenInfo(infoTokens, order.indexToken);\r\n    return order.isLong ? toTokenInfo.maxPrice : toTokenInfo.minPrice;\r\n  }, [infoTokens, order]);\r\n\r\n  let toAmount;\r\n  if (order.type === SWAP) {\r\n    const { amount } = getNextToAmount(\r\n      chainId,\r\n      order.amountIn,\r\n      order.path[0],\r\n      order.path[order.path.length - 1],\r\n      infoTokens,\r\n      undefined,\r\n      triggerRatio,\r\n      usdgSupply,\r\n      totalTokenWeights\r\n    );\r\n    toAmount = amount;\r\n  }\r\n\r\n  const onClickPrimary = () => {\r\n    setIsSubmitting(true);\r\n\r\n    let func;\r\n    let params;\r\n\r\n    if (order.type === SWAP) {\r\n      func = updateSwapOrder;\r\n      params = [chainId, library, order.index, toAmount, triggerRatio, order.triggerAboveThreshold];\r\n    } else if (order.type === DECREASE) {\r\n      func = updateDecreaseOrder;\r\n      params = [\r\n        chainId,\r\n        library,\r\n        order.index,\r\n        order.collateralDelta,\r\n        order.sizeDelta,\r\n        triggerPrice,\r\n        order.triggerAboveThreshold,\r\n      ];\r\n    } else if (order.type === INCREASE) {\r\n      func = updateIncreaseOrder;\r\n      params = [chainId, library, order.index, order.sizeDelta, triggerPrice, order.triggerAboveThreshold];\r\n    }\r\n\r\n    params.push({\r\n      successMsg: \"Order updated!\",\r\n      failMsg: \"Order update failed.\",\r\n      sentMsg: \"Order update submitted!\",\r\n      pendingTxns,\r\n      setPendingTxns,\r\n    });\r\n\r\n    return func(...params)\r\n      .then(() => {\r\n        setEditingOrder(null);\r\n      })\r\n      .finally(() => {\r\n        setIsSubmitting(false);\r\n      });\r\n  };\r\n\r\n  const onTriggerRatioChange = (evt) => {\r\n    setTriggerRatioValue(evt.target.value || \"\");\r\n  };\r\n\r\n  const onTriggerPriceChange = (evt) => {\r\n    setTriggerPriceValue(evt.target.value || \"\");\r\n  };\r\n\r\n  const getError = () => {\r\n    if ((!triggerRatio || triggerRatio.eq(0)) && (!triggerPrice || triggerPrice.eq(0))) {\r\n      return \"Enter Price\";\r\n    }\r\n    if (order.type === SWAP && triggerRatio.eq(order.triggerRatio)) {\r\n      return \"Enter new Price\";\r\n    }\r\n    if (order.type !== SWAP && triggerPrice.eq(order.triggerPrice)) {\r\n      return \"Enter new Price\";\r\n    }\r\n    if (position) {\r\n      if (order.type === DECREASE) {\r\n        if (position.isLong && triggerPrice.lte(liquidationPrice)) {\r\n          return \"Price below Liq. Price\";\r\n        }\r\n        if (!position.isLong && triggerPrice.gte(liquidationPrice)) {\r\n          return \"Price above Liq. Price\";\r\n        }\r\n      }\r\n\r\n      const { delta, hasProfit } = calculatePositionDelta(triggerPrice, position);\r\n      if (hasProfit && delta.eq(0)) {\r\n        return \"Invalid price, see warning\";\r\n      }\r\n    }\r\n\r\n    if (order.type !== SWAP && indexTokenMarkPrice && !savedShouldDisableValidationForTesting) {\r\n      if (order.triggerAboveThreshold && indexTokenMarkPrice.gt(triggerPrice)) {\r\n        return \"Price below Mark Price\";\r\n      }\r\n      if (!order.triggerAboveThreshold && indexTokenMarkPrice.lt(triggerPrice)) {\r\n        return \"Price above Mark Price\";\r\n      }\r\n    }\r\n\r\n    if (order.type === SWAP) {\r\n      const currentRate = getExchangeRate(fromTokenInfo, toTokenInfo);\r\n      if (currentRate && !currentRate.gte(triggerRatio)) {\r\n        return `Price is ${triggerRatioInverted ? \"below\" : \"above\"} Mark Price`;\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderMinProfitWarning = () => {\r\n    if (MIN_PROFIT_TIME === 0 || order.type === SWAP || !position || !triggerPrice || triggerPrice.eq(0)) {\r\n      return null;\r\n    }\r\n\r\n    const { delta, pendingDelta, pendingDeltaPercentage, hasProfit } = calculatePositionDelta(triggerPrice, position);\r\n    if (hasProfit && delta.eq(0)) {\r\n      const { deltaStr } = getDeltaStr({\r\n        delta: pendingDelta,\r\n        deltaPercentage: pendingDeltaPercentage,\r\n        hasProfit,\r\n      });\r\n      const profitPrice = getProfitPrice(triggerPrice, position);\r\n      const minProfitExpiration = position.lastIncreasedTime + MIN_PROFIT_TIME;\r\n      return (\r\n        <div className=\"Confirmation-box-warning\">\r\n          This order will forfeit a&nbsp;\r\n          <a href=\"https://gmxio.gitbook.io/gmx/trading#minimum-price-change\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            profit\r\n          </a>{\" \"}\r\n          of {deltaStr}. <br />\r\n          Profit price: {position.isLong ? \">\" : \"<\"} ${formatAmount(profitPrice, USD_DECIMALS, 2, true)}. This rule\r\n          only applies for the next {getTimeRemaining(minProfitExpiration)}, until {formatDateTime(minProfitExpiration)}\r\n          .\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const isPrimaryEnabled = () => {\r\n    if (isSubmitting) {\r\n      return false;\r\n    }\r\n    const error = getError();\r\n    if (error) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const getPrimaryText = () => {\r\n    const error = getError();\r\n    if (error) {\r\n      return error;\r\n    }\r\n\r\n    if (isSubmitting) {\r\n      return \"Updating Order...\";\r\n    }\r\n    return \"Update Order\";\r\n  };\r\n\r\n  if (order.type !== SWAP) {\r\n    const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n    return (\r\n      <Modal\r\n        isVisible={true}\r\n        className=\"Exchange-list-modal\"\r\n        setIsVisible={() => setEditingOrder(null)}\r\n        label=\"Edit order\"\r\n\r\n        isNifty={true}\r\n      >\r\n        {renderMinProfitWarning()}\r\n        <div className=\"Exchange-swap-section\">\r\n          <div className=\"Exchange-swap-section-top\">\r\n            <div className=\"muted\">Price</div>\r\n            <div\r\n              className=\"muted align-right clickable\"\r\n              onClick={() => {\r\n                setTriggerPriceValue(formatAmountFree(indexTokenMarkPrice, USD_DECIMALS, 2));\r\n              }}\r\n            >\r\n              Mark: {formatAmount(indexTokenMarkPrice, USD_DECIMALS, 2)}\r\n            </div>\r\n          </div>\r\n          <div className=\"Exchange-swap-section-bottom\">\r\n            <div className=\"Exchange-swap-input-container\">\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                placeholder=\"0.0\"\r\n                className=\"Exchange-swap-input\"\r\n                value={triggerPriceValue}\r\n                onChange={onTriggerPriceChange}\r\n                onFocus={(e) => {\r\n                  e.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n                }}\r\n                onBlur={(e) => {\r\n                  e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"PositionEditor-token-symbol\">USD</div>\r\n          </div>\r\n        </div>\r\n        <ExchangeInfoRow label=\"Price\">\r\n          {triggerPrice && !triggerPrice.eq(order.triggerPrice) ? (\r\n            <>\r\n              <span className=\"muted\">\r\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n              </span>\r\n              &nbsp;\r\n              <BsArrowRight />\r\n              &nbsp;\r\n              {triggerPricePrefix} {formatAmount(triggerPrice, USD_DECIMALS, 2, true)}\r\n            </>\r\n          ) : (\r\n            <span>\r\n              {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n            </span>\r\n          )}\r\n        </ExchangeInfoRow>\r\n        {liquidationPrice && (\r\n          <div className=\"Exchange-info-row\">\r\n            <div className=\"Exchange-info-label\">Liq. Price</div>\r\n            <div className=\"align-right\">{`$${formatAmount(liquidationPrice, USD_DECIMALS, 2, true)}`}</div>\r\n          </div>\r\n        )}\r\n        <div className=\"Exchange-swap-button-container\">\r\n          <button\r\n            className={\"App-cta Exchange-swap-button Exchange-list-modal-button\" + (isPrimaryEnabled() ? \" hlight\" : \"\")}\r\n            onClick={onClickPrimary}\r\n            disabled={!isPrimaryEnabled()}\r\n          >\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      isVisible={true}\r\n      className=\"Exchange-list-modal\"\r\n      setIsVisible={() => setEditingOrder(null)}\r\n      label=\"Edit order\"\r\n      isNifty={true}\r\n    >\r\n      <div className=\"Exchange-swap-section\">\r\n        <div className=\"Exchange-swap-section-top\">\r\n          <div className=\"muted\">Price</div>\r\n          {fromTokenInfo && toTokenInfo && (\r\n            <div\r\n              className=\"muted align-right clickable\"\r\n              onClick={() => {\r\n                setTriggerRatioValue(\r\n                  formatAmountFree(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 10)\r\n                );\r\n              }}\r\n            >\r\n              Mark Price:{\" \"}\r\n              {formatAmount(getExchangeRate(fromTokenInfo, toTokenInfo, triggerRatioInverted), USD_DECIMALS, 2)}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"Exchange-swap-section-bottom\">\r\n          <div className=\"Exchange-swap-input-container\">\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              placeholder=\"0.0\"\r\n              className=\"Exchange-swap-input\"\r\n              value={triggerRatioValue}\r\n              onChange={onTriggerRatioChange}\r\n              onFocus={(e) => {\r\n                e.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n              }}\r\n              onBlur={(e) => {\r\n                e.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n              }}\r\n            />\r\n          </div>\r\n          {(() => {\r\n            if (!toTokenInfo) return;\r\n            if (!fromTokenInfo) return;\r\n            const [tokenA, tokenB] = triggerRatioInverted ? [toTokenInfo, fromTokenInfo] : [fromTokenInfo, toTokenInfo];\r\n            return (\r\n              <div className=\"PositionEditor-token-symbol\">\r\n                {tokenA.symbol}&nbsp;/&nbsp;{tokenB.symbol}\r\n              </div>\r\n            );\r\n          })()}\r\n        </div>\r\n      </div>\r\n      <ExchangeInfoRow label=\"Minimum received\">\r\n        {triggerRatio && !triggerRatio.eq(order.triggerRatio) ? (\r\n          <>\r\n            <span className=\"muted\">{formatAmount(order.minOut, toTokenInfo.decimals, 4, true)}</span>\r\n            &nbsp;\r\n            <BsArrowRight />\r\n            &nbsp;\r\n            {formatAmount(toAmount, toTokenInfo.decimals, 4, true)}\r\n          </>\r\n        ) : (\r\n          formatAmount(order.minOut, toTokenInfo.decimals, 4, true)\r\n        )}\r\n        &nbsp;{toTokenInfo.symbol}\r\n      </ExchangeInfoRow>\r\n      <ExchangeInfoRow label=\"Price\">\r\n        {triggerRatio && !triggerRatio.eq(0) && !triggerRatio.eq(order.triggerRatio) ? (\r\n          <>\r\n            <span className=\"muted\">\r\n              {getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo, {\r\n                omitSymbols: !triggerRatio || !triggerRatio.eq(order.triggerRatio),\r\n              })}\r\n            </span>\r\n            &nbsp;\r\n            <BsArrowRight />\r\n            &nbsp;\r\n            {getExchangeRateDisplay(triggerRatio, fromTokenInfo, toTokenInfo)}\r\n          </>\r\n        ) : (\r\n          getExchangeRateDisplay(order.triggerRatio, fromTokenInfo, toTokenInfo, {\r\n            omitSymbols: !triggerRatio || !triggerRatio.eq(order.triggerRatio),\r\n          })\r\n        )}\r\n      </ExchangeInfoRow>\r\n      {fromTokenInfo && (\r\n        <div className=\"Exchange-info-row\">\r\n          <div className=\"Exchange-info-label\">{fromTokenInfo.symbol} price</div>\r\n          <div className=\"align-right\">{formatAmount(fromTokenInfo.minPrice, USD_DECIMALS, 2, true)} USD</div>\r\n        </div>\r\n      )}\r\n      {toTokenInfo && (\r\n        <div className=\"Exchange-info-row\">\r\n          <div className=\"Exchange-info-label\">{toTokenInfo.symbol} price</div>\r\n          <div className=\"align-right\">{formatAmount(toTokenInfo.maxPrice, USD_DECIMALS, 2, true)} USD</div>\r\n        </div>\r\n      )}\r\n      <div className=\"Exchange-swap-button-container\">\r\n        <button\r\n          className=\"App-cta Exchange-swap-button Exchange-list-modal-button\"\r\n          onClick={onClickPrimary}\r\n          disabled={!isPrimaryEnabled()}\r\n        >\r\n          {getPrimaryText()}\r\n        </button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { formatForContract } from '../../../../components/utils/math';\r\nimport { convertInputNum } from '../../../../components/utils/sepThousands';\r\nimport { formatAmount, formatAmountFree, USD_DECIMALS } from '../../lib/legacy';\r\nimport Modal from './../../../../components/UI/modal/Modal';\r\nimport GNS_Trading from '../../abis/GNS/GNS_Trading.json';\r\nimport { ethers } from 'ethers';\r\nimport { errAlert, notifySuccess } from '../../../../components/utils/notifications';\r\n\r\nconst OrderEditorGNS = (props) => {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tsetVisible,\r\n\t\torder,\r\n\t\tlibrary\r\n\t} = props;\r\n\t\r\n\tconst [priceValue, setPriceValue] = useState('');\r\n\tconst [TPValue, setTPValue] = useState('');\r\n\tconst [SLValue, setSLValue] = useState('');\r\n\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (order) {\r\n\t\t\tsetPriceValue(convertInputNum(formatAmountFree(order.triggerPrice, 30, 2)));\r\n\t\t\tif (!order.tp.eq(0)) {\r\n\t\t\t\tsetTPValue(convertInputNum(formatAmountFree(order.tp, 10, 2)));\r\n\t\t\t}\r\n\t\t\tif (!order.sl.eq(0)) {\r\n\t\t\t\tsetSLValue(convertInputNum(formatAmountFree(order.sl, 10, 2)));\r\n\t\t\t}\r\n\t\t}\r\n\t}, [order]);\r\n\r\n\tconst btnText = 'Update order';\r\n\t\r\n\tconst getError = () => {\r\n\t\tif (!order) {\r\n\t\t\treturn btnText;\r\n\t\t}\r\n\r\n\t\tif (isSubmitting) {\r\n\t\t\treturn `Updating...`;\r\n\t\t}\r\n\r\n\t\tif (!priceValue && !TPValue && !SLValue) {\r\n\t\t\treturn btnText;\r\n\t\t}\r\n\r\n\t\tconst isLong = order.isLong;\r\n\t\tconst triggerPrice = priceValue \r\n\t\t\t? formatForContract(priceValue, 10)\r\n\t\t\t: Number(formatAmount(order.triggerPrice, 20, 0, 0));\r\n\r\n\t\tconst SLVal = formatForContract(SLValue, 10);\r\n\t\tconst TPVal = formatForContract(TPValue, 10);\r\n\r\n\t\tif (SLVal) {\r\n\t\t\tif ((isLong && SLVal > triggerPrice) || (!isLong && SLVal < triggerPrice)) {\r\n\t\t\t\treturn `${isLong ? 'Long' : 'Short'} SL can't be ${isLong ? 'greater' : 'less'} than trigger price.`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (TPVal) {\r\n\t\t\tif ((isLong && TPVal < triggerPrice) || (!isLong && TPVal > triggerPrice)) {\r\n\t\t\t\treturn `${isLong ? 'Long' : 'Short'} TP can't be ${isLong ? 'less' : 'greater'} than trigger price.`;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst getBtnText = () => {\r\n\t\tconst error = getError();\r\n\t\tif (error) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\r\n\t\treturn btnText;\r\n\t}\r\n\tconst isBtnEnabled = () => {\r\n\t\tconst hasError = Boolean(getError());\r\n\t\t\r\n\t\tif (hasError) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst onApply = () => {\r\n\t\tsetIsSubmitting(true);\r\n\t\t\r\n\t\tconst price = priceValue ? formatForContract(priceValue, 10) : '0';\r\n\t\tconst TP = TPValue ? formatForContract(TPValue, 10) : '0';\r\n\t\tconst SL = SLValue ? formatForContract(SLValue, 10) : '0';\r\n\t\t\r\n\t\tconst contract = new ethers.Contract(GNS_Trading.address, GNS_Trading.abi, library.getSigner());\r\n\r\n\t\tcontract.updateOpenLimitOrder(\r\n\t\t\torder.pairIndex,\r\n\t\t\torder.index,\r\n\t\t\tprice,\r\n\t\t\tTP,\r\n\t\t\tSL\r\n\t\t).then(tsc => {\r\n\t\t\tconsole.log(tsc);\r\n      \r\n\t\t\ttsc.wait()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tnotifySuccess(`Order update submitted!`, tsc.hash);\r\n\t\t\t\t\tsetVisible(false);\r\n\t\t\t\t})\r\n\t\t}, errAlert).finally(() => setIsSubmitting(false));\r\n\t}\r\n\r\n\tconst reset = () => {\r\n\t\tsetPriceValue('');\r\n\t\tsetTPValue('');\r\n\t\tsetSLValue('');\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName=\"OrderEditorModal\"\r\n\t\t\tvisible={visible}\r\n\t\t\tsetVisible={setVisible}\r\n\t\t\tresetModal={reset}\r\n\t\t>\r\n\t\t\t<h1 className=\"modal__title\">Edit Order</h1>\r\n\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t<div className=\"Exchange-swap-section\">\r\n\t\t\t\t\t<div className=\"Exchange-swap-section-top\">\r\n\t\t\t\t\t\t<div className=\"muted\">\r\n\t\t\t\t\t\t\t<div className=\"Exchange-swap-usd\">\r\n\t\t\t\t\t\t\t\tPrice\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"muted align-right clickable\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetPriceValue(formatAmountFree(order?.markPrice, USD_DECIMALS, 2));\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMark: {formatAmount(order?.markPrice, USD_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-swap-section-bottom\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tplaceholder=\"0.0\"\r\n\t\t\t\t\t\t\t\tclassName=\"Exchange-swap-input\"\r\n\t\t\t\t\t\t\t\tvalue={priceValue}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetPriceValue(convertInputNum(e.target.value));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonFocus={(e) => {\r\n\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={(e) => {\r\n\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"Exchange-swap-section\">\r\n\t\t\t\t\t<div className=\"Exchange-swap-section-top\">\r\n\t\t\t\t\t\t<div className=\"muted\">\r\n\t\t\t\t\t\t\t<div className=\"Exchange-swap-usd\">\r\n\t\t\t\t\t\t\t\tTake Profit\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-swap-section-bottom\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tplaceholder=\"0.0\"\r\n\t\t\t\t\t\t\t\tclassName=\"Exchange-swap-input\"\r\n\t\t\t\t\t\t\t\tvalue={TPValue}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetTPValue(convertInputNum(e.target.value));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonFocus={(e) => {\r\n\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={(e) => {\r\n\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"Exchange-swap-section\">\r\n\t\t\t\t\t<div className=\"Exchange-swap-section-top\">\r\n\t\t\t\t\t\t<div className=\"muted\">\r\n\t\t\t\t\t\t\t<div className=\"Exchange-swap-usd\">\r\n\t\t\t\t\t\t\t\tStop Loss\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-swap-section-bottom\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tplaceholder=\"0.0\"\r\n\t\t\t\t\t\t\t\tclassName=\"Exchange-swap-input\"\r\n\t\t\t\t\t\t\t\tvalue={SLValue}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetSLValue(convertInputNum(e.target.value));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonFocus={(e) => {\r\n\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.classList.add('hlight');\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonBlur={(e) => {\r\n\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.classList.remove('hlight');\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button \r\n\t\t\t\t\tclassName=\"modal__btn btn btn_hlight\"\r\n\t\t\t\t\tonClick={onApply}\r\n\t\t\t\t\tdisabled={!isBtnEnabled()}\r\n\t\t\t\t>\r\n\t\t\t\t\t{getBtnText()}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default OrderEditorGNS;","import React, { useState, useCallback } from \"react\";\r\nimport { Trans } from \"@lingui/macro\";\r\n\r\nimport {\r\n  SWAP,\r\n  INCREASE,\r\n  DECREASE,\r\n  USD_DECIMALS,\r\n  formatAmount,\r\n  getOrderError,\r\n  TRIGGER_PREFIX_ABOVE,\r\n  TRIGGER_PREFIX_BELOW,\r\n  getExchangeRateDisplay,\r\n  getTokenInfo,\r\n  getExchangeRate,\r\n  getPositionForOrder,\r\n  getUsd,\r\n  USDG_DECIMALS,\r\n} from \"../../lib/legacy.js\";\r\nimport { handleCancelOrder } from \"../../domain/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nimport Tooltip from \"../Tooltip/Tooltip\";\r\nimport OrderEditor from \"./OrderEditor\";\r\n\r\nimport \"./OrdersList.css\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\nimport StatsTooltipRow from \"../StatsTooltip/StatsTooltipRow\";\r\nimport { GNS_PAIRS } from './../../lib/GNS_legacy';\r\nimport { getTokenBySymbol } from \"../../config/Tokens.js\";\r\nimport { expandDecimals } from './../../lib/legacy';\r\nimport GNS_Trading from '../../abis/GNS/GNS_Trading.json';\r\nimport { ethers } from 'ethers';\r\nimport { errAlert, notifySuccess } from './../../../../components/utils/notifications';\r\nimport OrderEditorGNS from './OrderEditorGNS';\r\n\r\nexport default function OrdersList(props) {\r\n  const {\r\n    account,\r\n    library,\r\n    setPendingTxns,\r\n    pendingTxns,\r\n    infoTokens,\r\n    positionsMap,\r\n    totalTokenWeights,\r\n    usdgSupply,\r\n    orders,\r\n    ordersGNS,\r\n    hideActions,\r\n    chainId,\r\n    savedShouldDisableValidationForTesting,\r\n    cancelOrderIdList,\r\n    setCancelOrderIdList,\r\n  } = props;\r\n\r\n  const hasOrders = Boolean(orders.length || ordersGNS.length);\r\n  const marketIconGNS = require('../../../../img/icon-GNS.svg').default;\r\n  const marketIconGMX = require('../../../../img/icon-GMX.svg').default;  \r\n\r\n  const [editingOrder, setEditingOrder] = useState(null);\r\n  const [editingOrderGNS, setEditingOrderGNS] = useState(null);\r\n  const [orderEditorGNSVisible, setOrderEditorGNSVisible] = useState();\r\n\r\n  const onCancelClick = useCallback(\r\n    (order, market = 'GMX') => {\r\n      if (market === 'GMX') {\r\n        handleCancelOrder(chainId, library, order, { pendingTxns, setPendingTxns });\r\n      }\r\n      if (market === 'GNS') {\r\n        const contract = new ethers.Contract(GNS_Trading.address, GNS_Trading.abi, library.getSigner());\r\n\r\n        contract.cancelOpenLimitOrder(order.pairIndex, order.index)\r\n          .then(tsc => {\r\n            console.log(tsc);\r\n      \r\n            tsc.wait()\r\n              .then(() => {\r\n                notifySuccess(`Limit order cancelled!`, tsc.hash);\r\n              })\r\n          }, errAlert)\r\n      }\r\n    },\r\n    [library, pendingTxns, setPendingTxns, chainId]\r\n  );\r\n\r\n  const onEditClick = useCallback(\r\n    (order, market = 'GMX') => {\r\n      if (market === 'GMX') {\r\n        setEditingOrder(order);\r\n      }\r\n      if (market === 'GNS') {\r\n        setEditingOrderGNS(order);\r\n        setOrderEditorGNSVisible(true);\r\n      }\r\n    },\r\n    [setEditingOrder]\r\n  );\r\n\r\n  const renderHead = useCallback(() => {\r\n    if (!hasOrders) {\r\n      return;\r\n    }\r\n    \r\n    const isAllOrdersSelected = cancelOrderIdList?.length > 0 && cancelOrderIdList?.length === orders.length;\r\n    return (\r\n      <tr className=\"Exchange-list-header\">\r\n        <th>\r\n          <div>\r\n            <Trans>Type</Trans>\r\n          </div>\r\n        </th>\r\n        <th>\r\n          <div>\r\n            <Trans>Order</Trans>\r\n          </div>\r\n        </th>\r\n        <th>\r\n          <div>\r\n            <Trans>Price</Trans>\r\n          </div>\r\n        </th>\r\n        <th>\r\n          <div>\r\n            <Trans>Mark Price</Trans>\r\n          </div>\r\n        </th>\r\n      </tr>\r\n    );\r\n  }, [cancelOrderIdList, orders, ordersGNS, setCancelOrderIdList]);\r\n\r\n  const renderEmptyRow = useCallback(() => {\r\n    if (hasOrders) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <tr>\r\n        <td colSpan=\"5\" className=\"Exchange-list-empty-note\">\r\n          <Trans>No open orders</Trans>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }, [orders, ordersGNS]);\r\n\r\n  const renderActions = useCallback(\r\n    (order, market) => {\r\n      return (\r\n        <>\r\n          <td>\r\n            <button className=\"Exchange-list-action\" onClick={() => onEditClick(order, market)}>\r\n              <Trans>Edit</Trans>\r\n            </button>\r\n          </td>\r\n          <td>\r\n            <button className=\"Exchange-list-action\" onClick={() => onCancelClick(order, market)}>\r\n              <Trans>Cancel</Trans>\r\n            </button>\r\n          </td>\r\n        </>\r\n      );\r\n    },\r\n    [onEditClick, onCancelClick]\r\n  );\r\n\r\n  const renderLargeList = useCallback(() => {\r\n    if (!orders || !orders.length) {\r\n      return null;\r\n    }\r\n    return orders.map((order) => {\r\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\r\n\r\n      // Longs Increase: max price\r\n      // Longs Decrease: min price\r\n      // Short Increase: min price\r\n      // Short Decrease: max price\r\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\r\n\r\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\r\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\r\n\r\n      const error = getOrderError(account, order, positionsMap);\r\n      const orderId = `${order.type}-${order.index}`;\r\n      const orderText = (\r\n        <>\r\n          {order.type === INCREASE ? \"Increase\" : \"Decrease\"} {indexTokenSymbol} {order.isLong ? \"Long\" : \"Short\"}\r\n          &nbsp;by ${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\r\n          {error && <div className=\"Exchange-list-item-error\">{error}</div>}\r\n        </>\r\n      );\r\n\r\n      return (\r\n        <tr className=\"Exchange-list-item\" key={`${order.isLong}-${order.type}-${order.index}`}>\r\n          <td className=\"Exchange-list-item-type\">\r\n            <div className=\"icon-container\">\r\n              <img src={marketIconGMX} alt=\"GMX Icon\" style={{width: 15}} />\r\n              {order.type === INCREASE ? \"Limit\" : \"Trigger\"}\r\n            </div>\r\n          </td>\r\n          <td>\r\n            {order.type === DECREASE ? (\r\n              orderText\r\n            ) : (\r\n              <Tooltip\r\n                handle={orderText}\r\n                position=\"right-bottom\"\r\n                renderContent={() => {\r\n                  const collateralTokenInfo = getTokenInfo(infoTokens, order.purchaseToken);\r\n                  const collateralUSD = getUsd(order.purchaseTokenAmount, order.purchaseToken, false, infoTokens);\r\n                  return (\r\n                    <StatsTooltipRow\r\n                      label=\"Collateral\"\r\n                      value={`${formatAmount(collateralUSD, USD_DECIMALS, 2, true)} (${formatAmount(\r\n                        order.purchaseTokenAmount,\r\n                        collateralTokenInfo.decimals,\r\n                        4,\r\n                        true\r\n                      )}\r\n                      ${collateralTokenInfo.baseSymbol || collateralTokenInfo.symbol})`}\r\n                    />\r\n                  );\r\n                }}\r\n              />\r\n            )}\r\n          </td>\r\n          <td className=\"nowrap\">\r\n            {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n          </td>\r\n          <td>\r\n            <Tooltip\r\n              handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n              position=\"right-bottom\"\r\n              renderContent={() => {\r\n                return (\r\n                  <Trans>\r\n                    The price that orders can be executed at may differ slightly from the chart price, as market orders\r\n                    update oracle prices, while limit/trigger orders do not.\r\n                  </Trans>\r\n                );\r\n              }}\r\n            />\r\n          </td>\r\n          {!hideActions && renderActions(order)}\r\n        </tr>\r\n      );\r\n    });\r\n  }, [\r\n    orders,\r\n    renderActions,\r\n    infoTokens,\r\n    positionsMap,\r\n    hideActions,\r\n    chainId,\r\n    account,\r\n    cancelOrderIdList,\r\n    setCancelOrderIdList,\r\n  ]);\r\n\r\n  const renderLargeListGNS = useCallback(() => {\r\n    if (!ordersGNS || !ordersGNS.length) {\r\n      return null;\r\n    }\r\n    return ordersGNS.map((ord) => {\r\n      const order = Object.assign({}, ord);\r\n      \r\n      order.type = INCREASE;\r\n      order.isLong = order.buy;\r\n      const indexTokenSymbol = Object.keys(GNS_PAIRS).find(symb => GNS_PAIRS[symb] === order.pairIndex.toNumber());\r\n      const indexToken = getTokenBySymbol(chainId, indexTokenSymbol);\r\n\r\n      const triggerPricePrefix = order.isLong ? TRIGGER_PREFIX_BELOW : TRIGGER_PREFIX_ABOVE;\r\n\r\n      const markPrice = infoTokens[indexToken.address].maxPrice;\r\n      order.markPrice = markPrice;\r\n      order.triggerPrice = expandDecimals(order.maxPrice ?? order.minPrice, 20);\r\n      \r\n      order.positionSize = order.positionSize.mul(order.leverage)\r\n      \r\n      const orderText = (\r\n        <>\r\n          {order.type === INCREASE ? \"Increase\" : \"Decrease\"} {indexTokenSymbol} {order.isLong ? \"Long\" : \"Short\"}\r\n          &nbsp;by ${formatAmount(order.positionSize, USDG_DECIMALS, 2, true)}\r\n          <div>{!order.tp?.eq(0) && `Take Profit: $${formatAmount(order.tp, 10, 2, 1)}`}</div>\r\n          <div>{!order.sl?.eq(0) && `Stop Loss: $${formatAmount(order.sl, 10, 2, 1)}`}</div>\r\n        </>\r\n      );\r\n\r\n      return (\r\n        <tr className=\"Exchange-list-item\" key={`${order.buy}-${order.type}-${order.index}`}>\r\n          <td className=\"Exchange-list-item-type\">\r\n            <div className=\"icon-container\">\r\n              <img src={marketIconGNS} alt=\"GNS Icon\" style={{width: 15}} />\r\n              {order.type === INCREASE ? \"Limit\" : \"Trigger\"}\r\n            </div>\r\n          </td>\r\n          <td>\r\n            {orderText}\r\n          </td>\r\n          <td className=\"nowrap\">\r\n            {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n          </td>\r\n          <td>\r\n            {formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n          </td>\r\n          {!hideActions && renderActions(order, 'GNS')}\r\n        </tr>\r\n      );\r\n    });\r\n  }, [\r\n    orders,\r\n    renderActions,\r\n    infoTokens,\r\n    positionsMap,\r\n    hideActions,\r\n    chainId,\r\n    account,\r\n    cancelOrderIdList,\r\n    setCancelOrderIdList,\r\n  ]);\r\n\r\n  const renderSmallListGNS = useCallback(() => {\r\n    if (!ordersGNS || !ordersGNS.length) {\r\n      return null;\r\n    }\r\n    return ordersGNS.map((ord) => {\r\n      const order = Object.assign({}, ord);\r\n      \r\n      order.type = INCREASE;\r\n      order.isLong = order.buy;\r\n      const indexTokenSymbol = Object.keys(GNS_PAIRS).find(symb => GNS_PAIRS[symb] === order.pairIndex.toNumber());\r\n      const indexToken = getTokenBySymbol(chainId, indexTokenSymbol);\r\n\r\n      const triggerPricePrefix = order.isLong ? TRIGGER_PREFIX_BELOW : TRIGGER_PREFIX_ABOVE;\r\n\r\n      const markPrice = infoTokens[indexToken.address].maxPrice;\r\n      order.triggerPrice = expandDecimals(order.maxPrice ?? order.minPrice, 20);\r\n      \r\n      const orderText = (\r\n        <>\r\n          {order.type === INCREASE ? \"Increase\" : \"Decrease\"} {indexTokenSymbol} {order.isLong ? \"Long\" : \"Short\"}\r\n          &nbsp;by ${formatAmount(order.positionSize, USDG_DECIMALS, 2, true)}\r\n          <div style={{color: '#384263'}}>{!order.tp?.eq(0) && `Take Profit: $${formatAmount(order.tp, 10, 2, 1)}`}</div>\r\n          <div style={{color: '#384263'}}>{!order.sl?.eq(0) && `Stop Loss: $${formatAmount(order.sl, 10, 2, 1)}`}</div>\r\n        </>\r\n      );\r\n\r\n      return (\r\n        <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"App-card\">\r\n          <div className=\"App-card-title-small\">\r\n            {orderText}\r\n          </div>\r\n          <div className=\"App-card-divider\"></div>\r\n          <div className=\"App-card-content\">\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">\r\n                <Trans>Type</Trans>\r\n              </div>\r\n              <div className=\"icon-container\">\r\n                <img src={marketIconGNS} alt=\"GNS Icon\" style={{width: 15}} />\r\n                {order.type === INCREASE && 'Limit'}\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">\r\n                <Trans>Price</Trans>\r\n              </div>\r\n              <div>\r\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">\r\n                <Trans>Mark Price</Trans>\r\n              </div>\r\n              <div>\r\n                {formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n              </div>\r\n            </div>\r\n            {!hideActions && (\r\n              <>\r\n                <div className=\"App-card-divider\"></div>\r\n                <div className=\"App-card-options\">\r\n                  <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order, 'GNS')} disabled={true}>\r\n                    <Trans>Edit</Trans>\r\n                  </button>\r\n                  <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order, 'GNS')}>\r\n                    <Trans>Cancel</Trans>\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  }, [orders, ordersGNS, onEditClick, onCancelClick, infoTokens, positionsMap, hideActions, chainId, account]);\r\n\r\n  const renderSmallList = useCallback(() => {\r\n    if (!orders || !orders.length) {\r\n      return null;\r\n    }\r\n\r\n    return orders.map((order) => {\r\n      const indexToken = getTokenInfo(infoTokens, order.indexToken);\r\n      const maximisePrice = (order.type === INCREASE && order.isLong) || (order.type === DECREASE && !order.isLong);\r\n      const markPrice = maximisePrice ? indexToken.contractMaxPrice : indexToken.contractMinPrice;\r\n      const triggerPricePrefix = order.triggerAboveThreshold ? TRIGGER_PREFIX_ABOVE : TRIGGER_PREFIX_BELOW;\r\n      const indexTokenSymbol = indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol;\r\n\r\n      const collateralTokenInfo = getTokenInfo(infoTokens, order.purchaseToken);\r\n      const collateralUSD = getUsd(order.purchaseTokenAmount, order.purchaseToken, true, infoTokens);\r\n\r\n      const error = getOrderError(account, order, positionsMap);\r\n\r\n      return (\r\n        <div key={`${order.isLong}-${order.type}-${order.index}`} className=\"App-card\">\r\n          <div className=\"App-card-title-small\">\r\n            {order.type === INCREASE ? \"Increase\" : \"Decrease\"} {indexTokenSymbol} {order.isLong ? \"Long\" : \"Short\"}\r\n            &nbsp;by ${formatAmount(order.sizeDelta, USD_DECIMALS, 2, true)}\r\n            {error && <div className=\"Exchange-list-item-error\">{error}</div>}\r\n          </div>\r\n          <div className=\"App-card-divider\"></div>\r\n          <div className=\"App-card-content\">\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">\r\n                <Trans>Type</Trans>\r\n              </div>\r\n              <div className=\"icon-container\">\r\n                <img src={marketIconGMX} alt=\"GMX Icon\" style={{width: 15}} />\r\n                {order.type === INCREASE ? \"Limit\" : \"Trigger\"}\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">\r\n                <Trans>Price</Trans>\r\n              </div>\r\n              <div>\r\n                {triggerPricePrefix} {formatAmount(order.triggerPrice, USD_DECIMALS, 2, true)}\r\n              </div>\r\n            </div>\r\n            <div className=\"App-card-row\">\r\n              <div className=\"label\">\r\n                <Trans>Mark Price</Trans>\r\n              </div>\r\n              <div>\r\n                <Tooltip\r\n                  handle={formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n                  position=\"right-bottom\"\r\n                  renderContent={() => {\r\n                    return (\r\n                      <Trans>\r\n                        The price that the order can be executed at may differ slightly from the chart price as market\r\n                        orders can change the price while limit / trigger orders cannot.\r\n                      </Trans>\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            {order.type === INCREASE && (\r\n              <div className=\"App-card-row\">\r\n                <div className=\"label\">\r\n                  <Trans>Collateral</Trans>\r\n                </div>\r\n                <div>\r\n                  ${formatAmount(collateralUSD, USD_DECIMALS, 2, true)} (\r\n                  {formatAmount(order.purchaseTokenAmount, collateralTokenInfo.decimals, 4, true)}{\" \"}\r\n                  {collateralTokenInfo.baseSymbol || collateralTokenInfo.symbol})\r\n                </div>\r\n              </div>\r\n            )}\r\n            {!hideActions && (\r\n              <>\r\n                <div className=\"App-card-divider\"></div>\r\n                <div className=\"App-card-options\">\r\n                  <button className=\"App-button-option App-card-option\" onClick={() => onEditClick(order)}>\r\n                    <Trans>Edit</Trans>\r\n                  </button>\r\n                  <button className=\"App-button-option App-card-option\" onClick={() => onCancelClick(order)}>\r\n                    <Trans>Cancel</Trans>\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  }, [orders, onEditClick, onCancelClick, infoTokens, positionsMap, hideActions, chainId, account]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <table className=\"Exchange-list Orders App-box large\">\r\n        <tbody>\r\n          {renderHead()}\r\n          {renderEmptyRow()}\r\n          {renderLargeList()}\r\n          {renderLargeListGNS()}\r\n        </tbody>\r\n      </table>\r\n      <div className=\"Exchange-list Orders small\">\r\n        {(!hasOrders) && (\r\n          <div className=\"Exchange-empty-positions-list-note App-card\">No open orders</div>\r\n        )}\r\n        {renderSmallList()}\r\n        {renderSmallListGNS()}\r\n      </div>\r\n      {editingOrder && (\r\n        <OrderEditor\r\n          account={account}\r\n          order={editingOrder}\r\n          setEditingOrder={setEditingOrder}\r\n          infoTokens={infoTokens}\r\n          pendingTxns={pendingTxns}\r\n          setPendingTxns={setPendingTxns}\r\n          getPositionForOrder={getPositionForOrder}\r\n          positionsMap={positionsMap}\r\n          library={library}\r\n          totalTokenWeights={totalTokenWeights}\r\n          usdgSupply={usdgSupply}\r\n          savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\r\n        />\r\n      )}\r\n      <OrderEditorGNS\r\n        visible={orderEditorGNSVisible}\r\n        setVisible={setOrderEditorGNSVisible}\r\n        order={editingOrderGNS}\r\n        library={library}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Tooltip from \"../../components/Tooltip/Tooltip\";\r\nimport cx from 'classnames';\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  MAX_LEVERAGE,\r\n  BASIS_POINTS_DIVISOR,\r\n  LIQUIDATION_FEE,\r\n  TRADES_PAGE_SIZE,\r\n  formatAmount,\r\n  getExplorerUrl,\r\n  formatDateTime,\r\n  deserialize,\r\n  getExchangeRateDisplay,\r\n  bigNumberify,\r\n} from \"../../lib/legacy\";\r\nimport { useTrades, useLiquidationsData } from \"../../domain/legacy\";\r\nimport { getContract } from \"../../config/Addresses\";\r\n\r\nimport \"./TradeHistory.scss\";\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nfunction getPositionDisplay(increase, indexToken, isLong, sizeDelta) {\r\n  const symbol = indexToken ? (indexToken.isWrapped ? indexToken.baseSymbol : indexToken.symbol) : \"\";\r\n  return `\r\n    ${increase ? \"Increase\" : \"Decrease\"} ${symbol} ${isLong ? \"Long\" : \"Short\"}\r\n    ${increase ? \"+\" : \"-\"}${formatAmount(sizeDelta, USD_DECIMALS, 2, true)} USD`;\r\n}\r\n\r\nfunction getOrderActionTitle(action) {\r\n  let actionDisplay;\r\n\r\n  if (action.startsWith(\"Create\")) {\r\n    actionDisplay = \"Create\";\r\n  } else if (action.startsWith(\"Cancel\")) {\r\n    actionDisplay = \"Cancel\";\r\n  } else {\r\n    actionDisplay = \"Update\";\r\n  }\r\n\r\n  return `${actionDisplay} Order`;\r\n}\r\n\r\nfunction renderLiquidationTooltip(liquidationData, label) {\r\n  const minCollateral = liquidationData.size.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE);\r\n  const text =\r\n    liquidationData.type === \"full\"\r\n      ? \"This position was liquidated as the max leverage of 100x was exceeded\"\r\n      : \"Max leverage of 100x was exceeded, the remaining collateral after deducting losses and fees have been sent back to your account\";\r\n  return (\r\n    <Tooltip\r\n      position=\"left-top\"\r\n      handle={label}\r\n      renderContent={() => (\r\n        <>\r\n          {text}\r\n          <br />\r\n          <br />\r\n          Initial collateral: ${formatAmount(liquidationData.collateral, USD_DECIMALS, 2, true)}\r\n          <br />\r\n          Min required collateral: ${formatAmount(minCollateral, USD_DECIMALS, 2, true)}\r\n          <br />\r\n          Borrow fee: ${formatAmount(liquidationData.borrowFee, USD_DECIMALS, 2, true)}\r\n          <br />\r\n          PnL: -${formatAmount(liquidationData.loss, USD_DECIMALS, 2, true)}\r\n          {liquidationData.type === \"full\" && <div>Liquidation fee: ${formatAmount(LIQUIDATION_FEE, 30, 2, true)}</div>}\r\n        </>\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nfunction getLiquidationData(liquidationsDataMap, key, timestamp) {\r\n  return liquidationsDataMap && liquidationsDataMap[`${key}:${timestamp}`];\r\n}\r\n\r\nexport default function TradeHistory(props) {\r\n  const { account, infoTokens, getTokenInfo, chainId, nativeTokenAddress, shouldShowPaginationButtons } = props;\r\n  const [pageIds, setPageIds] = useState({});\r\n  const [pageIndex, setPageIndex] = useState(0);\r\n\r\n  const getAfterId = () => {\r\n    return pageIds[pageIndex];\r\n  };\r\n\r\n  const { trades, updateTrades } = useTrades(chainId, account, props.forSingleAccount, getAfterId());\r\n\r\n  const liquidationsData = useLiquidationsData(chainId, account);\r\n  const liquidationsDataMap = useMemo(() => {\r\n    if (!liquidationsData) {\r\n      return null;\r\n    }\r\n    return liquidationsData.reduce((memo, item) => {\r\n      const liquidationKey = `${item.key}:${item.timestamp}`;\r\n      memo[liquidationKey] = item;\r\n      return memo;\r\n    }, {});\r\n  }, [liquidationsData]);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      updateTrades(undefined, true);\r\n    }, 10 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, [updateTrades]);\r\n\r\n  const loadNextPage = () => {\r\n    if (!trades || trades.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const lastTrade = trades[trades.length - 1];\r\n    pageIds[pageIndex + 1] = lastTrade.id;\r\n    setPageIds(pageIds);\r\n    setPageIndex(pageIndex + 1);\r\n  };\r\n\r\n  const loadPrevPage = () => {\r\n    setPageIndex(pageIndex - 1);\r\n  };\r\n\r\n  const getMsg = useCallback(\r\n    (trade) => {\r\n      const tradeData = trade.data;\r\n      const params = JSON.parse(tradeData.params);\r\n      const defaultMsg = \"\";\r\n\r\n      if (tradeData.action === \"BuyUSDG\") {\r\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\r\n        if (!token) {\r\n          return defaultMsg;\r\n        }\r\n        return `Swap ${formatAmount(params.tokenAmount, token.decimals, 4, true)} ${token.symbol} for ${formatAmount(\r\n          params.usdgAmount,\r\n          18,\r\n          4,\r\n          true\r\n        )} USDG`;\r\n      }\r\n\r\n      if (tradeData.action === \"SellUSDG\") {\r\n        const token = getTokenInfo(infoTokens, params.token, true, nativeTokenAddress);\r\n        if (!token) {\r\n          return defaultMsg;\r\n        }\r\n        return `Swap ${formatAmount(params.usdgAmount, 18, 4, true)} USDG for ${formatAmount(\r\n          params.tokenAmount,\r\n          token.decimals,\r\n          4,\r\n          true\r\n        )} ${token.symbol}`;\r\n      }\r\n\r\n      if (tradeData.action === \"Swap\") {\r\n        const tokenIn = getTokenInfo(infoTokens, params.tokenIn, true, nativeTokenAddress);\r\n        const tokenOut = getTokenInfo(infoTokens, params.tokenOut, true, nativeTokenAddress);\r\n        if (!tokenIn || !tokenOut) {\r\n          return defaultMsg;\r\n        }\r\n        return `Swap ${formatAmount(params.amountIn, tokenIn.decimals, 4, true)} ${tokenIn.symbol} for ${formatAmount(\r\n          params.amountOut,\r\n          tokenOut.decimals,\r\n          4,\r\n          true\r\n        )} ${tokenOut.symbol}`;\r\n      }\r\n\r\n      if (tradeData.action === \"CreateIncreasePosition\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Request deposit into ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n\r\n        return `Request increase ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, +${formatAmount(\r\n          params.sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD, Acceptable Price: ${params.isLong ? \"<\" : \">\"} ${formatAmount(\r\n          params.acceptablePrice,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD`;\r\n      }\r\n\r\n      if (tradeData.action === \"CreateDecreasePosition\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Request withdrawal from ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n\r\n        return `Request decrease ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, -${formatAmount(\r\n          params.sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD, Acceptable Price: ${params.isLong ? \">\" : \"<\"} ${formatAmount(\r\n          params.acceptablePrice,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD`;\r\n      }\r\n\r\n      if (tradeData.action === \"CancelIncreasePosition\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return (\r\n            <>\r\n              Could not execute deposit into {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"}\r\n            </>\r\n          );\r\n        }\r\n\r\n        return (\r\n          <>\r\n            Could not increase {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"},\r\n            {`+${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\r\n            {params.isLong ? \"<\" : \">\"}&nbsp;\r\n            <Tooltip\r\n              position=\"left-top\"\r\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\r\n              renderContent={() => <>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right</>}\r\n            />\r\n          </>\r\n        );\r\n      }\r\n\r\n      if (tradeData.action === \"CancelDecreasePosition\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Could not execute withdrawal from ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n\r\n        return (\r\n          <>\r\n            Could not decrease {indexToken.symbol} {params.isLong ? \"Long\" : \"Short\"},\r\n            {`+${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)}`} USD, Acceptable Price:&nbsp;\r\n            {params.isLong ? \">\" : \"<\"}&nbsp;\r\n            <Tooltip\r\n              position=\"left-top\"\r\n              handle={`${formatAmount(params.acceptablePrice, USD_DECIMALS, 2, true)} USD`}\r\n              renderContent={() => <>Try increasing the \"Allowed Slippage\", under the Settings menu on the top right</>}\r\n            />\r\n          </>\r\n        );\r\n      }\r\n\r\n      if (tradeData.action === \"IncreasePosition-Long\" || tradeData.action === \"IncreasePosition-Short\") {\r\n        if (params.flags?.isOrderExecution) {\r\n          return;\r\n        }\r\n\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Deposit ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD into ${\r\n            indexToken.symbol\r\n          } ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n        return `Increase ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"}, +${formatAmount(\r\n          params.sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD, ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD`;\r\n      }\r\n\r\n      if (tradeData.action === \"DecreasePosition-Long\" || tradeData.action === \"DecreasePosition-Short\") {\r\n        if (params.flags?.isOrderExecution) {\r\n          return;\r\n        }\r\n\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        if (bigNumberify(params.sizeDelta).eq(0)) {\r\n          return `Withdraw ${formatAmount(params.collateralDelta, USD_DECIMALS, 2, true)} USD from ${\r\n            indexToken.symbol\r\n          } ${params.isLong ? \"Long\" : \"Short\"}`;\r\n        }\r\n        const isLiquidation = params.flags?.isLiquidation;\r\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\r\n\r\n        if (isLiquidation && liquidationData) {\r\n          return (\r\n            <>\r\n              {renderLiquidationTooltip(liquidationData, \"Partial Liquidation\")} {indexToken.symbol}{\" \"}\r\n              {params.isLong ? \"Long\" : \"Short\"}, -{formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)} USD,{\" \"}\r\n              {indexToken.symbol}&nbsp; Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\r\n            </>\r\n          );\r\n        }\r\n        const actionDisplay = isLiquidation ? \"Partially Liquidated\" : \"Decreased\";\r\n        return `\r\n        ${actionDisplay} ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"},\r\n        -${formatAmount(params.sizeDelta, USD_DECIMALS, 2, true)} USD,\r\n        ${indexToken.symbol} Price: ${formatAmount(params.price, USD_DECIMALS, 2, true)} USD\r\n      `;\r\n      }\r\n\r\n      if (tradeData.action === \"LiquidatePosition-Long\" || tradeData.action === \"LiquidatePosition-Short\") {\r\n        const indexToken = getTokenInfo(infoTokens, params.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        const liquidationData = getLiquidationData(liquidationsDataMap, params.key, tradeData.timestamp);\r\n        if (liquidationData) {\r\n          return (\r\n            <>\r\n              {renderLiquidationTooltip(liquidationData, \"Liquidated\")} {indexToken.symbol}{\" \"}\r\n              {params.isLong ? \"Long\" : \"Short\"}, -{formatAmount(params.size, USD_DECIMALS, 2, true)} USD,&nbsp;\r\n              {indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\r\n            </>\r\n          );\r\n        }\r\n        return `\r\n        Liquidated ${indexToken.symbol} ${params.isLong ? \"Long\" : \"Short\"},\r\n        -${formatAmount(params.size, USD_DECIMALS, 2, true)} USD,\r\n        ${indexToken.symbol} Price: ${formatAmount(params.markPrice, USD_DECIMALS, 2, true)} USD\r\n      `;\r\n      }\r\n\r\n      if ([\"ExecuteIncreaseOrder\", \"ExecuteDecreaseOrder\"].includes(tradeData.action)) {\r\n        const order = deserialize(params.order);\r\n        const indexToken = getTokenInfo(infoTokens, order.indexToken, true, nativeTokenAddress);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        const longShortDisplay = order.isLong ? \"Long\" : \"Short\";\r\n        const executionPriceDisplay = formatAmount(order.executionPrice, USD_DECIMALS, 2, true);\r\n        const sizeDeltaDisplay = `${order.type === \"Increase\" ? \"+\" : \"-\"}${formatAmount(\r\n          order.sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )}`;\r\n\r\n        return `\r\n        Execute Order: ${order.type} ${indexToken.symbol} ${longShortDisplay}\r\n        ${sizeDeltaDisplay} USD, Price: ${executionPriceDisplay} USD\r\n      `;\r\n      }\r\n\r\n      if (\r\n        [\r\n          \"CreateIncreaseOrder\",\r\n          \"CancelIncreaseOrder\",\r\n          \"UpdateIncreaseOrder\",\r\n          \"CreateDecreaseOrder\",\r\n          \"CancelDecreaseOrder\",\r\n          \"UpdateDecreaseOrder\",\r\n        ].includes(tradeData.action)\r\n      ) {\r\n        const order = deserialize(params.order);\r\n        const indexToken = getTokenInfo(infoTokens, order.indexToken);\r\n        if (!indexToken) {\r\n          return defaultMsg;\r\n        }\r\n        const increase = tradeData.action.includes(\"Increase\");\r\n        const priceDisplay = `${order.triggerAboveThreshold ? \">\" : \"<\"} ${formatAmount(\r\n          order.triggerPrice,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )}`;\r\n        return `\r\n        ${getOrderActionTitle(tradeData.action)}:\r\n        ${getPositionDisplay(increase, indexToken, order.isLong, order.sizeDelta)},\r\n        Price: ${priceDisplay}\r\n      `;\r\n      }\r\n\r\n      if (tradeData.action === \"ExecuteSwapOrder\") {\r\n        const order = deserialize(params.order);\r\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\r\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\r\n        if (!fromToken || !toToken) {\r\n          return defaultMsg;\r\n        }\r\n        const fromAmountDisplay = formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true);\r\n        const toAmountDisplay = formatAmount(order.amountOut, toToken.decimals, toToken.isStable ? 2 : 4, true);\r\n        return `\r\n        Execute Order: Swap ${fromAmountDisplay} ${fromToken.symbol} for ${toAmountDisplay} ${toToken.symbol}\r\n      `;\r\n      }\r\n\r\n      if ([\"CreateSwapOrder\", \"UpdateSwapOrder\", \"CancelSwapOrder\"].includes(tradeData.action)) {\r\n        const order = deserialize(params.order);\r\n        const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n        const fromToken = getTokenInfo(infoTokens, order.path[0] === nativeTokenAddress ? AddressZero : order.path[0]);\r\n        const toToken = getTokenInfo(infoTokens, order.shouldUnwrap ? AddressZero : order.path[order.path.length - 1]);\r\n        if (!fromToken || !toToken) {\r\n          return defaultMsg;\r\n        }\r\n        const amountInDisplay = fromToken\r\n          ? formatAmount(order.amountIn, fromToken.decimals, fromToken.isStable ? 2 : 4, true)\r\n          : \"\";\r\n        const minOutDisplay = toToken\r\n          ? formatAmount(order.minOut, toToken.decimals, toToken.isStable ? 2 : 4, true)\r\n          : \"\";\r\n\r\n        return `\r\n        ${getOrderActionTitle(tradeData.action)}:\r\n        Swap ${amountInDisplay} ${fromToken?.symbol || \"\"} for ${minOutDisplay} ${toToken?.symbol || \"\"},\r\n        Price: ${getExchangeRateDisplay(order.triggerRatio, fromToken, toToken)}`;\r\n      }\r\n    },\r\n    [getTokenInfo, infoTokens, nativeTokenAddress, chainId, liquidationsDataMap]\r\n  );\r\n\r\n  const tradesWithMessages = useMemo(() => {\r\n    if (!trades) {\r\n      return [];\r\n    }\r\n\r\n    return trades\r\n      .map((trade) => ({\r\n        msg: getMsg(trade),\r\n        ...trade,\r\n      }))\r\n      .filter((trade) => trade.msg);\r\n  }, [trades, getMsg]);\r\n\r\n  return (\r\n    <div className=\"TradeHistory\">\r\n      {tradesWithMessages.length === 0 && <div className=\"TradeHistory-row App-box App-box_no-border Exchange-list-empty-note\">No trades yet</div>}\r\n      {tradesWithMessages.length > 0 &&\r\n        tradesWithMessages.map((trade, index) => {\r\n          const tradeData = trade.data;\r\n          const txUrl = getExplorerUrl(chainId) + \"tx/\" + tradeData.txhash;\r\n\r\n          let msg = getMsg(trade);\r\n\r\n          if (!msg) {\r\n            return null;\r\n          }\r\n\r\n          return (\r\n            <div className=\"TradeHistory-row App-box App-box_no-border\" key={index}>\r\n              <div>\r\n                <div className=\"muted TradeHistory-time\">\r\n                  {formatDateTime(tradeData.timestamp)}\r\n                  {(!account || account.length === 0) && (\r\n                    <span>\r\n                      {\" \"}\r\n                      (<Link to={`/actions/${tradeData.account}`}>{tradeData.account}</Link>)\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <a className=\"plain\" href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  {msg}\r\n                </a>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      {shouldShowPaginationButtons && trades && trades.length >= TRADES_PAGE_SIZE && (\r\n        <div>\r\n          {pageIndex > 0 && (\r\n            <button className=\"App-button-option App-card-option\" onClick={loadPrevPage}>\r\n              Prev\r\n            </button>\r\n          )}\r\n          {trades && trades.length >= TRADES_PAGE_SIZE && (\r\n            <button className=\"App-button-option App-card-option\" onClick={loadNextPage}>\r\n              Next\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport \"./ExchangeBanner.css\";\r\n\r\nexport default function ExchangeBanner(props) {\r\n  const { hideBanner } = props;\r\n\r\n  return (\r\n    <div className=\"ExchangeBanner\">\r\n      <p className=\"ExchangeBanner-text\">\r\n        Trade on GMX and win <span className=\"ExchangeBanner-price\">$250.000</span> in prizes! Live until November 30th,{\" \"}\r\n        <a\r\n          href=\"https://medium.com/@gmx.io/gmx-trading-competition-win-250-000-usd-in-prizes-1346504b96f6\"\r\n          target=\"_blank\"\r\n          className=\"ExchangeBanner-link\"\r\n          rel=\"noreferrer\"\r\n        >\r\n          click here\r\n        </a>{\" \"}\r\n        to learn more.\r\n      </p>\r\n      <span\r\n        className=\"ExchangeBanner-close\"\r\n        onClick={(e) => {\r\n          hideBanner();\r\n        }}\r\n      >\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"11.25\" height=\"11.25\" viewBox=\"0 0 11.25 11.25\">\r\n          <path\r\n            id=\"ic_close\"\r\n            d=\"M11-2.565,6.818-6.75,11-10.935a.844.844,0,0,0,0-1.193.844.844,0,0,0-1.193,0L5.625-7.943,1.44-12.128a.844.844,0,0,0-1.193,0,.844.844,0,0,0,0,1.193L4.432-6.75.247-2.565a.844.844,0,0,0,0,1.193.844.844,0,0,0,1.193,0L5.625-5.557,9.81-1.372a.844.844,0,0,0,1.193,0A.844.844,0,0,0,11-2.565Z\"\r\n            transform=\"translate(0 12.375)\"\r\n            fill=\"#fff\"\r\n          />\r\n        </svg>\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useMemo, useCallback, forwardRef, useImperativeHandle } from \"react\";\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport useSWR from \"swr\";\r\nimport { ethers } from \"ethers\";\r\nimport useWebSocket from 'react-use-websocket';\r\n\r\nimport {\r\n  FUNDING_RATE_PRECISION,\r\n  BASIS_POINTS_DIVISOR,\r\n  MARGIN_FEE_BASIS_POINTS,\r\n  SWAP,\r\n  LONG,\r\n  SHORT,\r\n  USD_DECIMALS,\r\n  getExplorerUrl,\r\n  helperToast,\r\n  formatAmount,\r\n  bigNumberify,\r\n  getTokenInfo,\r\n  getPositionKey,\r\n  getPositionContractKey,\r\n  getLeverage,\r\n  useLocalStorageSerializeKey,\r\n  useLocalStorageByChainId,\r\n  getDeltaStr,\r\n  useChainId,\r\n  useAccountOrders,\r\n  getPageTitle,\r\n} from \"../../lib/legacy\";\r\nimport { getConstant } from \"../../config/chains\";\r\nimport { approvePlugin, useInfoTokens, useMinExecutionFee, cancelMultipleOrders } from \"../../domain/legacy\";\r\n\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport { getTokens, getToken, getWhitelistedTokens, getTokenBySymbol } from \"../../config/Tokens\";\r\n\r\nimport Reader from \"../../abis/ReaderV2.json\";\r\nimport VaultV2 from \"../../abis/VaultV2.json\";\r\nimport Router from \"../../abis/Router.json\";\r\nimport Token from \"../../abis/Token.json\";\r\n\r\nimport SwapBox from \"../../components/Exchange/SwapBox\";\r\nimport ExchangeTVChart, { getChartToken } from \"../../components/Exchange/ExchangeTVChart\";\r\nimport PositionsList from \"../../components/Exchange/PositionsList\";\r\nimport OrdersList from \"../../components/Exchange/OrdersList\";\r\nimport TradeHistory from \"../../components/Exchange/TradeHistory\";\r\nimport ExchangeWalletTokens from \"../../components/Exchange/ExchangeWalletTokens\";\r\nimport ExchangeBanner from \"../../components/Exchange/ExchangeBanner\";\r\nimport Tab from \"../../components/Tab/Tab\";\r\n\r\nimport \"./Exchange.scss\";\r\nimport \"../../components/Exchange/Exchange-lists.scss\";\r\nimport { fetcher } from \"../../lib/contracts/fetcher\";\r\nimport GNS_Storage from \"../../abis/GNS/GNS_Storage.json\";\r\nimport { GNS_PAIRS } from './../../lib/GNS_legacy';\r\nimport { ADDRESS_ZERO } from '@uniswap/v3-sdk';\r\nimport { signer } from './../../../../components/utils/providers';\r\n\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nconst PENDING_POSITION_VALID_DURATION = 600 * 1000;\r\nconst UPDATED_POSITION_VALID_DURATION = 60 * 1000;\r\n\r\nconst notifications = {};\r\n\r\nfunction pushSuccessNotification(chainId, message, e) {\r\n  const { transactionHash } = e;\r\n  const id = ethers.utils.id(message + transactionHash);\r\n  if (notifications[id]) {\r\n    return;\r\n  }\r\n\r\n  notifications[id] = true;\r\n\r\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\r\n  helperToast.success(\r\n    <div>\r\n      {message}{\" \"}\r\n      <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n        View\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction pushErrorNotification(chainId, message, e) {\r\n  const { transactionHash } = e;\r\n  const id = ethers.utils.id(message + transactionHash);\r\n  if (notifications[id]) {\r\n    return;\r\n  }\r\n\r\n  notifications[id] = true;\r\n\r\n  const txUrl = getExplorerUrl(chainId) + \"tx/\" + transactionHash;\r\n  helperToast.error(\r\n    <div>\r\n      {message}{\" \"}\r\n      <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n        View\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getFundingFee(data) {\r\n  let { entryFundingRate, cumulativeFundingRate, size } = data;\r\n  if (entryFundingRate && cumulativeFundingRate) {\r\n    return size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\r\n  }\r\n  return;\r\n}\r\n\r\nconst getTokenAddress = (token, nativeTokenAddress) => {\r\n  if (token.address === AddressZero) {\r\n    return nativeTokenAddress;\r\n  }\r\n  return token.address;\r\n};\r\n\r\nfunction applyPendingChanges(position, pendingPositions) {\r\n  if (!pendingPositions) {\r\n    return;\r\n  }\r\n  const { key } = position;\r\n\r\n  if (\r\n    pendingPositions[key] &&\r\n    pendingPositions[key].updatedAt &&\r\n    pendingPositions[key].pendingChanges &&\r\n    pendingPositions[key].updatedAt + PENDING_POSITION_VALID_DURATION > Date.now()\r\n  ) {\r\n    const { pendingChanges } = pendingPositions[key];\r\n    if (pendingChanges.size && position.size.eq(pendingChanges.size)) {\r\n      return;\r\n    }\r\n\r\n    if (pendingChanges.expectingCollateralChange && !position.collateral.eq(pendingChanges.collateralSnapshot)) {\r\n      return;\r\n    }\r\n\r\n    position.hasPendingChanges = true;\r\n    position.pendingChanges = pendingChanges;\r\n  }\r\n}\r\n\r\nexport function getPositions(\r\n  chainId,\r\n  positionQuery,\r\n  positionData,\r\n  infoTokens,\r\n  includeDelta,\r\n  showPnlAfterFees,\r\n  account,\r\n  pendingPositions,\r\n  updatedPositions,\r\n) {\r\n  const propsLength = getConstant(chainId, \"positionReaderPropsLength\");\r\n  const positions = [];\r\n  const positionsMap = {};\r\n  if (!positionData) {\r\n    return { positions, positionsMap };\r\n  }\r\n  const { collateralTokens, indexTokens, isLong } = positionQuery;\r\n  for (let i = 0; i < collateralTokens.length; i++) {\r\n    const collateralToken = getTokenInfo(infoTokens, collateralTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\r\n    const indexToken = getTokenInfo(infoTokens, indexTokens[i], true, getContract(chainId, \"NATIVE_TOKEN\"));\r\n    const key = getPositionKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\r\n    let contractKey;\r\n    if (account) {\r\n      contractKey = getPositionContractKey(account, collateralTokens[i], indexTokens[i], isLong[i]);\r\n    }\r\n\r\n\r\n    const position = {\r\n      key,\r\n      contractKey,\r\n      collateralToken,\r\n      indexToken,\r\n      isLong: isLong[i],\r\n      size: positionData[i * propsLength],\r\n      collateral: positionData[i * propsLength + 1],\r\n      averagePrice: positionData[i * propsLength + 2],\r\n      entryFundingRate: positionData[i * propsLength + 3],\r\n      cumulativeFundingRate: collateralToken.cumulativeFundingRate,\r\n      hasRealisedProfit: positionData[i * propsLength + 4].eq(1),\r\n      realisedPnl: positionData[i * propsLength + 5],\r\n      lastIncreasedTime: positionData[i * propsLength + 6].toNumber(),\r\n      hasProfit: positionData[i * propsLength + 7].eq(1),\r\n      delta: positionData[i * propsLength + 8],\r\n      markPrice: isLong[i] ? indexToken.minPrice : indexToken.maxPrice,\r\n      market: 'GMX',\r\n    };\r\n\r\n\r\n    if (\r\n      updatedPositions &&\r\n      updatedPositions[key] &&\r\n      updatedPositions[key].updatedAt &&\r\n      updatedPositions[key].updatedAt + UPDATED_POSITION_VALID_DURATION > Date.now()\r\n    ) {\r\n      const updatedPosition = updatedPositions[key];\r\n      position.size = updatedPosition.size;\r\n      position.collateral = updatedPosition.collateral;\r\n      position.averagePrice = updatedPosition.averagePrice;\r\n      position.entryFundingRate = updatedPosition.entryFundingRate;\r\n    }\r\n\r\n    let fundingFee = getFundingFee(position);\r\n    position.fundingFee = fundingFee ? fundingFee : bigNumberify(0);\r\n    position.collateralAfterFee = position.collateral.sub(position.fundingFee);\r\n\r\n    position.closingFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\r\n    position.positionFee = position.size.mul(MARGIN_FEE_BASIS_POINTS).mul(2).div(BASIS_POINTS_DIVISOR);\r\n    position.totalFees = position.positionFee.add(position.fundingFee);\r\n\r\n    position.pendingDelta = position.delta;\r\n\r\n    if (position.collateral.gt(0)) {\r\n      position.hasLowCollateral =\r\n        position.collateralAfterFee.lt(0) || position.size.div(position.collateralAfterFee.abs()).gt(50);\r\n\r\n      if (position.averagePrice && position.markPrice) {\r\n        const priceDelta = position.averagePrice.gt(position.markPrice)\r\n          ? position.averagePrice.sub(position.markPrice)\r\n          : position.markPrice.sub(position.averagePrice);\r\n        position.pendingDelta = position.size.mul(priceDelta).div(position.averagePrice);\r\n\r\n        position.delta = position.pendingDelta;\r\n\r\n        if (position.isLong) {\r\n          position.hasProfit = position.markPrice.gte(position.averagePrice);\r\n        } else {\r\n          position.hasProfit = position.markPrice.lte(position.averagePrice);\r\n        }\r\n      }\r\n\r\n      position.deltaPercentage = position.pendingDelta.mul(BASIS_POINTS_DIVISOR).div(position.collateral);\r\n\r\n      const { deltaStr, deltaPercentageStr } = getDeltaStr({\r\n        delta: position.pendingDelta,\r\n        deltaPercentage: position.deltaPercentage,\r\n        hasProfit: position.hasProfit,\r\n      });\r\n\r\n      position.deltaStr = deltaStr;\r\n      position.deltaPercentageStr = deltaPercentageStr;\r\n      position.deltaBeforeFeesStr = deltaStr;\r\n\r\n      let hasProfitAfterFees;\r\n      let pendingDeltaAfterFees;\r\n\r\n      if (position.hasProfit) {\r\n        if (position.pendingDelta.gt(position.totalFees)) {\r\n          hasProfitAfterFees = true;\r\n          pendingDeltaAfterFees = position.pendingDelta.sub(position.totalFees);\r\n        } else {\r\n          hasProfitAfterFees = false;\r\n          pendingDeltaAfterFees = position.totalFees.sub(position.pendingDelta);\r\n        }\r\n      } else {\r\n        hasProfitAfterFees = false;\r\n        pendingDeltaAfterFees = position.pendingDelta.add(position.totalFees);\r\n      }\r\n\r\n      position.hasProfitAfterFees = hasProfitAfterFees;\r\n      position.pendingDeltaAfterFees = pendingDeltaAfterFees;\r\n      position.deltaPercentageAfterFees = position.pendingDeltaAfterFees\r\n        .mul(BASIS_POINTS_DIVISOR)\r\n        .div(position.collateral);\r\n\r\n      const { deltaStr: deltaAfterFeesStr, deltaPercentageStr: deltaAfterFeesPercentageStr } = getDeltaStr({\r\n        delta: position.pendingDeltaAfterFees,\r\n        deltaPercentage: position.deltaPercentageAfterFees,\r\n        hasProfit: hasProfitAfterFees,\r\n      });\r\n\r\n      position.deltaAfterFeesStr = deltaAfterFeesStr;\r\n      position.deltaAfterFeesPercentageStr = deltaAfterFeesPercentageStr;\r\n\r\n      if (showPnlAfterFees) {\r\n        position.deltaStr = position.deltaAfterFeesStr;\r\n        position.deltaPercentageStr = position.deltaAfterFeesPercentageStr;\r\n      }\r\n\r\n      let netValue = position.hasProfit\r\n        ? position.collateral.add(position.pendingDelta)\r\n        : position.collateral.sub(position.pendingDelta);\r\n\r\n      netValue = netValue.sub(position.fundingFee);\r\n\r\n      if (showPnlAfterFees) {\r\n        netValue = netValue.sub(position.closingFee);\r\n      }\r\n\r\n      position.netValue = netValue;\r\n    }\r\n\r\n    position.leverage = getLeverage({\r\n      size: position.size,\r\n      collateral: position.collateral,\r\n      entryFundingRate: position.entryFundingRate,\r\n      cumulativeFundingRate: position.cumulativeFundingRate,\r\n      hasProfit: position.hasProfit,\r\n      delta: position.delta,\r\n      includeDelta,\r\n    });\r\n\r\n    positionsMap[key] = position;\r\n\r\n    applyPendingChanges(position, pendingPositions);\r\n\r\n    if (position.size.gt(0) || position.hasPendingChanges) {\r\n      positions.push(position);\r\n    }\r\n  }\r\n\r\n  return { positions, positionsMap };\r\n}\r\n\r\nexport function getPositionQuery(tokens, nativeTokenAddress) {\r\n  const collateralTokens = [];\r\n  const indexTokens = [];\r\n  const isLong = [];\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const token = tokens[i];\r\n    if (token.isStable) {\r\n      continue;\r\n    }\r\n    if (token.isWrapped) {\r\n      continue;\r\n    }\r\n    collateralTokens.push(getTokenAddress(token, nativeTokenAddress));\r\n    indexTokens.push(getTokenAddress(token, nativeTokenAddress));\r\n    isLong.push(true);\r\n  }\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const stableToken = tokens[i];\r\n    if (!stableToken.isStable) {\r\n      continue;\r\n    }\r\n\r\n    for (let j = 0; j < tokens.length; j++) {\r\n      const token = tokens[j];\r\n      if (token.isStable) {\r\n        continue;\r\n      }\r\n      if (token.isWrapped) {\r\n        continue;\r\n      }\r\n      collateralTokens.push(stableToken.address);\r\n      indexTokens.push(getTokenAddress(token, nativeTokenAddress));\r\n      isLong.push(false);\r\n    }\r\n  }\r\n\r\n  return { collateralTokens, indexTokens, isLong };\r\n}\r\n\r\nexport const Exchange = forwardRef((props, ref) => {\r\n  const {\r\n    savedIsPnlInLeverage,\r\n    setSavedIsPnlInLeverage,\r\n    savedShowPnlAfterFees,\r\n    savedSlippageAmount,\r\n    pendingTxns,\r\n    setPendingTxns,\r\n    savedShouldShowPositionLines,\r\n    setSavedShouldShowPositionLines,\r\n    connectWallet,\r\n    savedShouldDisableValidationForTesting,\r\n  } = props;\r\n  const [showBanner, setShowBanner] = useLocalStorageSerializeKey(\"showBanner\", true);\r\n  const [bannerHidden, setBannerHidden] = useLocalStorageSerializeKey(\"bannerHidden\", null);\r\n\r\n  const [pendingPositions, setPendingPositions] = useState({});\r\n  const [updatedPositions, setUpdatedPositions] = useState({});\r\n\r\n  const hideBanner = () => {\r\n    const hiddenLimit = new Date(new Date().getTime() + 2 * 24 * 60 * 60 * 1000);\r\n    setBannerHidden(hiddenLimit);\r\n    setShowBanner(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (new Date() > new Date(\"2021-11-30\")) {\r\n      setShowBanner(false);\r\n    } else {\r\n      if (bannerHidden && new Date(bannerHidden) > new Date()) {\r\n        setShowBanner(false);\r\n      } else {\r\n        setBannerHidden(null);\r\n        setShowBanner(true);\r\n      }\r\n    }\r\n  }, [showBanner, bannerHidden, setBannerHidden, setShowBanner]);\r\n\r\n  const { account, library } = useWeb3React();\r\n  const active = Boolean(props.walletAddress);\r\n  const { chainId } = useChainId();\r\n  const currentAccount = account;\r\n\r\n  const nativeTokenAddress = getContract(chainId, \"NATIVE_TOKEN\");\r\n\r\n  const vaultAddress = getContract(chainId, \"Vault\");\r\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\r\n  const readerAddress = getContract(chainId, \"Reader\");\r\n  const usdgAddress = getContract(chainId, \"USDG\");\r\n\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n  const whitelistedTokenAddresses = whitelistedTokens.map((token) => token.address);\r\n\r\n  const positionQuery = getPositionQuery(whitelistedTokens, nativeTokenAddress);\r\n\r\n  const defaultCollateralSymbol = getConstant(chainId, \"defaultCollateralSymbol\");\r\n  const defaultTokenSelection = useMemo(\r\n    () => ({\r\n      [SWAP]: {\r\n        from: AddressZero,\r\n        to: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\r\n      },\r\n      [LONG]: {\r\n        from: AddressZero,\r\n        to: AddressZero,\r\n      },\r\n      [SHORT]: {\r\n        from: getTokenBySymbol(chainId, defaultCollateralSymbol).address,\r\n        to: AddressZero,\r\n      },\r\n    }),\r\n    [chainId, defaultCollateralSymbol]\r\n  );\r\n\r\n  const [tokenSelection, setTokenSelection] = useLocalStorageByChainId(\r\n    chainId,\r\n    \"Exchange-token-selection-v2\",\r\n    defaultTokenSelection\r\n  );\r\n\r\n  \r\n  \r\n  const [swapOption, setSwapOption] = useLocalStorageByChainId(chainId, \"Swap-option-v2\", LONG);\r\n\r\n  const fromTokenAddress = tokenSelection[swapOption].from;\r\n  const toTokenAddress = tokenSelection[swapOption].to;\r\n\r\n  const tokens = getTokens(chainId);\r\n  const stableTokens = tokens.filter((token) => token.isStable);\r\n\r\n  const setFromTokenAddress = useCallback(\r\n    (selectedSwapOption, address) => {\r\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\r\n      newTokenSelection[selectedSwapOption].from = address;\r\n      setTokenSelection(newTokenSelection);\r\n    },\r\n    [tokenSelection, setTokenSelection]\r\n  );\r\n\r\n  const setToTokenAddress = useCallback(\r\n    (selectedSwapOption, address) => {\r\n      const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\r\n      \r\n      // ETH/USDC disabling\r\n      // address = AddressZero;\r\n      \r\n      newTokenSelection[selectedSwapOption].to = address;\r\n      if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\r\n        newTokenSelection[LONG].to = address;\r\n        newTokenSelection[SHORT].to = address;\r\n      }\r\n      setTokenSelection(newTokenSelection);\r\n    },\r\n    [tokenSelection, setTokenSelection]\r\n  );\r\n\r\n  const setMarket = (selectedSwapOption, toTokenAddress) => {\r\n    // ETH/USDC disabling\r\n    // toTokenAddress = AddressZero;\r\n    \r\n    setSwapOption(selectedSwapOption);\r\n    const newTokenSelection = JSON.parse(JSON.stringify(tokenSelection));\r\n    newTokenSelection[selectedSwapOption].to = toTokenAddress;\r\n    if (selectedSwapOption === LONG || selectedSwapOption === SHORT) {\r\n      newTokenSelection[LONG].to = toTokenAddress;\r\n      newTokenSelection[SHORT].to = toTokenAddress;\r\n    }\r\n    setTokenSelection(newTokenSelection);\r\n  };\r\n\r\n  const [isConfirming, setIsConfirming] = useState(false);\r\n  const [isPendingConfirmation, setIsPendingConfirmation] = useState(false);\r\n\r\n  const tokenAddresses = tokens.map((token) => token.address);\r\n  const { data: tokenBalances } = useSWR(active && [active, chainId, readerAddress, \"getTokenBalances\", account], {\r\n    fetcher: fetcher(library, Reader, [tokenAddresses]),\r\n  });\r\n\r\n  const { data: positionData, error: positionDataError } = useSWR(\r\n    active && [active, chainId, readerAddress, \"getPositions\", vaultAddress, account],\r\n    {\r\n      fetcher: fetcher(library, Reader, [\r\n        positionQuery.collateralTokens,\r\n        positionQuery.indexTokens,\r\n        positionQuery.isLong,\r\n      ]),\r\n    }\r\n  );\r\n\r\n  \r\n  const [pendingPositionsGNS, setPendingPositionsGNS] = useState([]);\r\n  const [positionsGNSLoading, setPositionsGNSLoading] = useState(true);\r\n  const { data: positionsGNS, error: positionsGNSError } = useSWR(\r\n    active && [active, chainId, GNS_Storage.address, pendingPositionsGNS, \"getPositionsGNS\", account],\r\n    async () => {\r\n      const positions = [];\r\n      let position;\r\n\r\n      const contract = new ethers.Contract(GNS_Storage.address, GNS_Storage.abi, library.getSigner());\r\n      const keys = [];\r\n      \r\n      for (let i = 0; i < Object.keys(GNS_PAIRS).length; i++) {\r\n        const pair = Object.keys(GNS_PAIRS)[i];\r\n        let pairIndex = GNS_PAIRS[pair];\r\n        \r\n        for (let j = 0; j < 3; j++) {\r\n          const index = j;\r\n          position = await contract.openTrades(account, pairIndex, index);\r\n          if (position.trader === ADDRESS_ZERO) {\r\n            continue;\r\n          }\r\n\r\n          positions.push(position);\r\n          \r\n          const key = `${pairIndex}${position.leverage}`;\r\n          keys.push(key);\r\n        }\r\n      }\r\n\r\n      setPositionsGNSLoading(false);\r\n\r\n      keys.forEach(key => {\r\n        if (pendingPositionsGNS[key]) {\r\n          delete pendingPositionsGNS[key];\r\n          setPendingPositionsGNS(pendingPositionsGNS);\r\n        }\r\n      })\r\n      return positions;\r\n    }\r\n  );\r\n  \r\n  const positionsDataIsLoading = active && ((!positionData && !positionDataError) || (!positionsGNS && !positionsGNSError));\r\n\r\n  const { data: fundingRateInfo } = useSWR([active, chainId, readerAddress, \"getFundingRates\"], {\r\n    fetcher: fetcher(library, Reader, [vaultAddress, nativeTokenAddress, whitelistedTokenAddresses]),\r\n  });\r\n\r\n  const { data: totalTokenWeights } = useSWR(\r\n    [`Exchange:totalTokenWeights:${active}`, chainId, vaultAddress, \"totalTokenWeights\"],\r\n    {\r\n      fetcher: fetcher(library, VaultV2),\r\n    }\r\n  );\r\n\r\n  const { data: usdgSupply } = useSWR([`Exchange:usdgSupply:${active}`, chainId, usdgAddress, \"totalSupply\"], {\r\n    fetcher: fetcher(library, Token),\r\n  });\r\n\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const routerAddress = getContract(chainId, \"Router\");\r\n  const { data: orderBookApproved } = useSWR(\r\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, orderBookAddress],\r\n    {\r\n      fetcher: fetcher(library, Router),\r\n    }\r\n  );\r\n\r\n  const { data: positionRouterApproved } = useSWR(\r\n    active && [active, chainId, routerAddress, \"approvedPlugins\", account, positionRouterAddress],\r\n    {\r\n      fetcher: fetcher(library, Router),\r\n    }\r\n  );\r\n\r\n\r\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances, fundingRateInfo);\r\n  const { minExecutionFee, minExecutionFeeUSD, minExecutionFeeErrorMessage } = useMinExecutionFee(\r\n    library,\r\n    active,\r\n    chainId,\r\n    infoTokens\r\n  );\r\n  \r\n\r\n  useEffect(() => {\r\n    const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n    const toToken = getTokenInfo(infoTokens, toTokenAddress);\r\n    let selectedToken = getChartToken(swapOption, fromToken, toToken, chainId);\r\n    let currentTokenPriceStr = formatAmount(selectedToken.maxPrice, USD_DECIMALS, 2, true);\r\n    let title = getPageTitle(currentTokenPriceStr + ` | ${selectedToken.symbol}${selectedToken.isStable ? \"\" : \"USD\"}`);\r\n    document.title = title;\r\n  }, [tokenSelection, swapOption, infoTokens, chainId, fromTokenAddress, toTokenAddress]);\r\n\r\n  const { positions, positionsMap } = getPositions(\r\n    chainId,\r\n    positionQuery,\r\n    positionData,\r\n    infoTokens,\r\n    savedIsPnlInLeverage,\r\n    savedShowPnlAfterFees,\r\n    account,\r\n    pendingPositions,\r\n    updatedPositions,\r\n    account,\r\n  )\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    onUpdatePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl) {\r\n      for (let i = 0; i < positions.length; i++) {\r\n        const position = positions[i];\r\n        if (position.contractKey === key) {\r\n          updatedPositions[position.key] = {\r\n            size,\r\n            collateral,\r\n            averagePrice,\r\n            entryFundingRate,\r\n            reserveAmount,\r\n            realisedPnl,\r\n            updatedAt: Date.now(),\r\n          };\r\n          setUpdatedPositions({ ...updatedPositions });\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    onClosePosition(key, size, collateral, averagePrice, entryFundingRate, reserveAmount, realisedPnl, e) {\r\n      for (let i = 0; i < positions.length; i++) {\r\n        const position = positions[i];\r\n        if (position.contractKey === key) {\r\n          updatedPositions[position.key] = {\r\n            size: bigNumberify(0),\r\n            collateral: bigNumberify(0),\r\n            averagePrice,\r\n            entryFundingRate,\r\n            reserveAmount,\r\n            realisedPnl,\r\n            updatedAt: Date.now(),\r\n          };\r\n          setUpdatedPositions({ ...updatedPositions });\r\n          break;\r\n        }\r\n      }\r\n    },\r\n\r\n    onIncreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\r\n      if (account !== currentAccount) {\r\n        return;\r\n      }\r\n\r\n      const indexTokenItem = getToken(chainId, indexToken);\r\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\r\n\r\n      let message;\r\n      if (sizeDelta.eq(0)) {\r\n        message = `Deposited ${formatAmount(collateralDelta, USD_DECIMALS, 2, true)} USD into ${tokenSymbol} ${\r\n          isLong ? \"Long\" : \"Short.\"\r\n        }`;\r\n      } else {\r\n        message = `Increased ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"}, +${formatAmount(\r\n          sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD.`;\r\n      }\r\n\r\n      pushSuccessNotification(chainId, message, e);\r\n    },\r\n\r\n    onDecreasePosition(key, account, collateralToken, indexToken, collateralDelta, sizeDelta, isLong, price, fee, e) {\r\n      if (account !== currentAccount) {\r\n        return;\r\n      }\r\n\r\n      const indexTokenItem = getToken(chainId, indexToken);\r\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\r\n\r\n      let message;\r\n      if (sizeDelta.eq(0)) {\r\n        message = `Withdrew ${formatAmount(collateralDelta, USD_DECIMALS, 2, true)} USD from ${tokenSymbol} ${\r\n          isLong ? \"Long\" : \"Short\"\r\n        }.`;\r\n      } else {\r\n        message = `Decreased ${tokenSymbol} ${isLong ? \"Long\" : \"Short\"}, -${formatAmount(\r\n          sizeDelta,\r\n          USD_DECIMALS,\r\n          2,\r\n          true\r\n        )} USD.`;\r\n      }\r\n\r\n      pushSuccessNotification(chainId, message, e);\r\n    },\r\n\r\n    onCancelIncreasePosition(\r\n      account,\r\n      path,\r\n      indexToken,\r\n      amountIn,\r\n      minOut,\r\n      sizeDelta,\r\n      isLong,\r\n      acceptablePrice,\r\n      executionFee,\r\n      blockGap,\r\n      timeGap,\r\n      e\r\n    ) {\r\n      if (account !== currentAccount) {\r\n        return;\r\n      }\r\n      const indexTokenItem = getToken(chainId, indexToken);\r\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\r\n\r\n      const message = `Could not increase ${tokenSymbol} ${\r\n        isLong ? \"Long\" : \"Short\"\r\n      } within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\r\n\r\n      pushErrorNotification(chainId, message, e);\r\n\r\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\r\n      pendingPositions[key] = {};\r\n      setPendingPositions({ ...pendingPositions });\r\n    },\r\n\r\n    onCancelDecreasePosition(\r\n      account,\r\n      path,\r\n      indexToken,\r\n      collateralDelta,\r\n      sizeDelta,\r\n      isLong,\r\n      receiver,\r\n      acceptablePrice,\r\n      minOut,\r\n      executionFee,\r\n      blockGap,\r\n      timeGap,\r\n      e\r\n    ) {\r\n      if (account !== currentAccount) {\r\n        return;\r\n      }\r\n      const indexTokenItem = getToken(chainId, indexToken);\r\n      const tokenSymbol = indexTokenItem.isWrapped ? getConstant(chainId, \"nativeTokenSymbol\") : indexTokenItem.symbol;\r\n\r\n      const message = `Could not decrease ${tokenSymbol} ${\r\n        isLong ? \"Long\" : \"Short\"\r\n      } within the allowed slippage, you can adjust the allowed slippage in the settings on the top right of the page.`;\r\n\r\n      pushErrorNotification(chainId, message, e);\r\n\r\n      const key = getPositionKey(account, path[path.length - 1], indexToken, isLong);\r\n      pendingPositions[key] = {};\r\n      setPendingPositions({ ...pendingPositions });\r\n    },\r\n  }));\r\n\r\n  const flagOrdersEnabled = true;\r\n  const [orders] = useAccountOrders(flagOrdersEnabled, account);\r\n  \r\n  const { data: ordersGNSData, error: ordersGNSDataError } = useSWR(\r\n    active && [active, chainId, GNS_Storage.address, \"getOrders\", \"getOrdersGNS\", account],\r\n    async () => {\r\n      const orders = [];\r\n      let order;\r\n\r\n      const contract = new ethers.Contract(GNS_Storage.address, GNS_Storage.abi, library.getSigner());\r\n\r\n      for (let i = 0; i < Object.keys(GNS_PAIRS).length; i++) {\r\n        const pair = Object.keys(GNS_PAIRS)[i];\r\n        let pairIndex = GNS_PAIRS[pair];\r\n        \r\n        for (let j = 0; j < 3; j++) {\r\n          const index = j;\r\n\r\n          try {\r\n            order = await contract.getOpenLimitOrder(account, pairIndex, index);\r\n            orders.push(order);\r\n          } catch(e) {\r\n          }\r\n        }\r\n      }\r\n      \r\n      return orders;\r\n    }\r\n  );\r\n  \r\n  const [ordersGNS, setOrdersGNS] = useState([]);\r\n  useEffect(() => {\r\n    if (!ordersGNSData) {\r\n      return;\r\n    }\r\n    \r\n    setOrdersGNS(ordersGNSData);\r\n  }, [ordersGNSData]);\r\n\r\n  const [isWaitingForPluginApproval, setIsWaitingForPluginApproval] = useState(false);\r\n  const [isWaitingForPositionRouterApproval, setIsWaitingForPositionRouterApproval] = useState(false);\r\n  const [isPluginApproving, setIsPluginApproving] = useState(false);\r\n  const [isPositionRouterApproving, setIsPositionRouterApproving] = useState(false);\r\n  const [isCancelMultipleOrderProcessing, setIsCancelMultipleOrderProcessing] = useState(false);\r\n  const [cancelOrderIdList, setCancelOrderIdList] = useState([]);\r\n\r\n  const onMultipleCancelClick = useCallback(\r\n    async function () {\r\n      setIsCancelMultipleOrderProcessing(true);\r\n      try {\r\n        const tx = await cancelMultipleOrders(chainId, library, cancelOrderIdList, {\r\n          successMsg: t`Orders cancelled.`,\r\n          failMsg: t`Cancel failed.`,\r\n          sentMsg: t`Cancel submitted.`,\r\n          pendingTxns,\r\n          setPendingTxns,\r\n        });\r\n        const receipt = await tx.wait();\r\n        if (receipt.status === 1) {\r\n          setCancelOrderIdList([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      } finally {\r\n        setIsCancelMultipleOrderProcessing(false);\r\n      }\r\n    },\r\n    [\r\n      chainId,\r\n      library,\r\n      pendingTxns,\r\n      setPendingTxns,\r\n      setCancelOrderIdList,\r\n      cancelOrderIdList,\r\n      setIsCancelMultipleOrderProcessing,\r\n    ]\r\n  );\r\n\r\n  const approveOrderBook = () => {\r\n    setIsPluginApproving(true);\r\n    return approvePlugin(chainId, orderBookAddress, {\r\n      library,\r\n      pendingTxns,\r\n      setPendingTxns,\r\n      sentMsg: t`Enable orders sent.`,\r\n      failMsg: t`Enable orders failed.`,\r\n    })\r\n      .then(() => {\r\n        setIsWaitingForPluginApproval(true);\r\n      })\r\n      .finally(() => {\r\n        setIsPluginApproving(false);\r\n      });\r\n  };\r\n\r\n  const approvePositionRouter = ({ sentMsg, failMsg }) => {\r\n    setIsPositionRouterApproving(true);\r\n    return approvePlugin(chainId, positionRouterAddress, {\r\n      library,\r\n      pendingTxns,\r\n      setPendingTxns,\r\n      sentMsg,\r\n      failMsg,\r\n    })\r\n      .then(() => {\r\n        setIsWaitingForPositionRouterApproval(true);\r\n      })\r\n      .finally(() => {\r\n        setIsPositionRouterApproving(false);\r\n      });\r\n  };\r\n\r\n  const posLength = positions?.length + positionsGNS?.length;\r\n  const ordersLength = orders?.length + ordersGNS?.length;\r\n\r\n  const LIST_SECTIONS = [\"Positions\", flagOrdersEnabled ? \"Orders\" : undefined, \"Trades\"].filter(Boolean);\r\n  let [listSection, setListSection] = useLocalStorageByChainId(chainId, \"List-section-v2\", LIST_SECTIONS[0]);\r\n  const LIST_SECTIONS_LABELS = {\r\n    Orders: ordersLength ? `Orders (${ordersLength})` : undefined,\r\n    Positions: posLength ? `Positions (${posLength})` : undefined,\r\n  };\r\n  if (!LIST_SECTIONS.includes(listSection)) {\r\n    listSection = LIST_SECTIONS[0];\r\n  }\r\n\r\n  if (!getToken(chainId, toTokenAddress)) {\r\n    return null;\r\n  }\r\n\r\n  const renderCancelOrderButton = () => {\r\n    const orderText = cancelOrderIdList.length > 1 ? t`orders` : t`order`;\r\n    if (cancelOrderIdList.length === 0) return;\r\n    return (\r\n      <button\r\n        className=\"muted font-base cancel-order-btn\"\r\n        disabled={isCancelMultipleOrderProcessing}\r\n        type=\"button\"\r\n        onClick={onMultipleCancelClick}\r\n      >\r\n        <Trans>\r\n          Cancel {cancelOrderIdList.length} {orderText}\r\n        </Trans>\r\n      </button>\r\n    );\r\n  };\r\n\r\n  const getListSection = () => {\r\n    return (\r\n      <div>\r\n        <div className=\"Exchange-list-tab-container\">\r\n          <Tab\r\n            options={LIST_SECTIONS}\r\n            optionLabels={LIST_SECTIONS_LABELS}\r\n            option={listSection}\r\n            onChange={(section) => setListSection(section)}\r\n            type=\"inline\"\r\n            className=\"Exchange-list-tabs\"\r\n          />\r\n        </div>\r\n        {listSection === \"Positions\" && (\r\n          <PositionsList\r\n            positionsDataIsLoading={positionsDataIsLoading}\r\n            pendingPositions={pendingPositions}\r\n            setPendingPositions={setPendingPositions}\r\n            setListSection={setListSection}\r\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\r\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\r\n            approveOrderBook={approveOrderBook}\r\n            approvePositionRouter={approvePositionRouter}\r\n            isPluginApproving={isPluginApproving}\r\n            isPositionRouterApproving={isPositionRouterApproving}\r\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\r\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\r\n            orderBookApproved={orderBookApproved}\r\n            positionRouterApproved={positionRouterApproved}\r\n            positionsLoading={positionsGNSLoading}\r\n            positionsGNS={positionsGNS}\r\n            pendingPositionsGNS={pendingPositionsGNS}\r\n            setPendingPositionsGNS={setPendingPositionsGNS}\r\n            positions={positions}\r\n            positionsMap={positionsMap}\r\n            infoTokens={infoTokens}\r\n            active={active}\r\n            account={account}\r\n            library={library}\r\n            pendingTxns={pendingTxns}\r\n            setPendingTxns={setPendingTxns}\r\n            flagOrdersEnabled={flagOrdersEnabled}\r\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\r\n            chainId={chainId}\r\n            nativeTokenAddress={nativeTokenAddress}\r\n            setMarket={setMarket}\r\n            orders={orders}\r\n            showPnlAfterFees={true}\r\n            minExecutionFee={minExecutionFee}\r\n            minExecutionFeeUSD={minExecutionFeeUSD}\r\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\r\n            usdgSupply={usdgSupply}\r\n            totalTokenWeights={totalTokenWeights}\r\n          />\r\n        )}\r\n        {listSection === \"Orders\" && (\r\n          <OrdersList\r\n            account={account}\r\n            active={active}\r\n            library={library}\r\n            pendingTxns={pendingTxns}\r\n            setPendingTxns={setPendingTxns}\r\n            infoTokens={infoTokens}\r\n            positionsMap={positionsMap}\r\n            chainId={chainId}\r\n            orders={orders}\r\n            ordersGNS={ordersGNS}\r\n            totalTokenWeights={totalTokenWeights}\r\n            usdgSupply={usdgSupply}\r\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\r\n            cancelOrderIdList={cancelOrderIdList}\r\n            setCancelOrderIdList={setCancelOrderIdList}\r\n          />\r\n        )}\r\n        {listSection === \"Trades\" && (\r\n          <TradeHistory\r\n            account={account}\r\n            forSingleAccount={true}\r\n            infoTokens={infoTokens}\r\n            getTokenInfo={getTokenInfo}\r\n            chainId={chainId}\r\n            nativeTokenAddress={nativeTokenAddress}\r\n            shouldShowPaginationButtons={true}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const onSelectWalletToken = (token) => {\r\n    setFromTokenAddress(swapOption, token.address);\r\n  };\r\n\r\n  const renderChart = () => {\r\n    return (\r\n      <ExchangeTVChart\r\n        fromTokenAddress={fromTokenAddress}\r\n        toTokenAddress={toTokenAddress}\r\n        infoTokens={infoTokens}\r\n        swapOption={swapOption}\r\n        chainId={chainId}\r\n        positions={positions}\r\n        // savedShouldShowPositionLines={savedShouldShowPositionLines}\r\n        savedShouldShowPositionLines={true}\r\n        orders={orders}\r\n        setToTokenAddress={setToTokenAddress}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"Exchange page-layout\">\r\n      {showBanner && <ExchangeBanner hideBanner={hideBanner} />}\r\n      <div className=\"Exchange-content\">\r\n        <div className=\"Exchange-left\">\r\n          {renderChart()}\r\n        </div>\r\n        <div className=\"Exchange-right\">\r\n          <SwapBox\r\n            positions={positions}\r\n            pendingPositions={pendingPositions}\r\n            setPendingPositions={setPendingPositions}\r\n            setIsWaitingForPluginApproval={setIsWaitingForPluginApproval}\r\n            setIsWaitingForPositionRouterApproval={setIsWaitingForPositionRouterApproval}\r\n            approveOrderBook={approveOrderBook}\r\n            approvePositionRouter={approvePositionRouter}\r\n            isPluginApproving={isPluginApproving}\r\n            isPositionRouterApproving={isPositionRouterApproving}\r\n            isWaitingForPluginApproval={isWaitingForPluginApproval}\r\n            isWaitingForPositionRouterApproval={isWaitingForPositionRouterApproval}\r\n            orderBookApproved={orderBookApproved}\r\n            positionRouterApproved={positionRouterApproved}\r\n            orders={orders}\r\n            flagOrdersEnabled={flagOrdersEnabled}\r\n            chainId={chainId}\r\n            infoTokens={infoTokens}\r\n            active={active}\r\n            connectWallet={connectWallet}\r\n            library={library}\r\n            account={account}\r\n            positionsMap={positionsMap}\r\n            fromTokenAddress={fromTokenAddress}\r\n            setFromTokenAddress={setFromTokenAddress}\r\n            toTokenAddress={toTokenAddress}\r\n            setToTokenAddress={setToTokenAddress}\r\n            swapOption={swapOption}\r\n            setSwapOption={setSwapOption}\r\n            pendingTxns={pendingTxns}\r\n            setPendingTxns={setPendingTxns}\r\n            tokenSelection={tokenSelection}\r\n            setTokenSelection={setTokenSelection}\r\n            isConfirming={isConfirming}\r\n            setIsConfirming={setIsConfirming}\r\n            isPendingConfirmation={isPendingConfirmation}\r\n            setIsPendingConfirmation={setIsPendingConfirmation}\r\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\r\n            setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\r\n            nativeTokenAddress={nativeTokenAddress}\r\n            savedSlippageAmount={savedSlippageAmount}\r\n            totalTokenWeights={totalTokenWeights}\r\n            usdgSupply={usdgSupply}\r\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\r\n            minExecutionFee={minExecutionFee}\r\n            minExecutionFeeUSD={minExecutionFeeUSD}\r\n            minExecutionFeeErrorMessage={minExecutionFeeErrorMessage}\r\n            positionsGNS={positionsGNS}\r\n            pendingPositionsGNS={pendingPositionsGNS}\r\n            setPendingPositionsGNS={setPendingPositionsGNS}\r\n          />\r\n        </div>\r\n        <div className=\"Exchange-lists large\">{getListSection()}</div>\r\n        <div className=\"Exchange-lists small\">{getListSection()}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n});","// date format: d MMM yyyy, H:mm, time should be specifed based on UTC time\r\n\r\nexport const homeEventsData = [\r\n  {\r\n    id: \"app-gmx-io-launch\",\r\n    title: \"Frontend Updates\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"Updates have been applied to the GMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"arbitrum-nitro-upgrade\",\r\n    title: \"Arbitrum Nitro Upgrade\",\r\n    isActive: true,\r\n    validTill: \"31 Aug 2022, 20:00\",\r\n    bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/arbitrum-nitro-5f88c03a46fe\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport const appEventsData = [\r\n  // {\r\n  //   id: \"removal-of-min-profit-rule\",\r\n  //   title: \"Trading improvements\",\r\n  //   isActive: true,\r\n  //   validTill: \"1 Apr 2022, 12:00\",\r\n  //   bodyText: \"The 1.5% minimum profit rule has been removed\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read more\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/roadmap#30-march-2022\",\r\n  //       newTab: true,\r\n  //     },\r\n  //     {\r\n  //       text: \"Trade Now\",\r\n  //       link: \"https://gmx.io/trade\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"shorting-of-link-uni-re-enabled\",\r\n  //   title: \"Shorting of LINK and UNI\",\r\n  //   isActive: true,\r\n  //   validTill: \"20 Apr 2022, 12:00\",\r\n  //   bodyText: \"Shorting has been re-enabled for LINK and UNI.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Trade Now\",\r\n  //       link: \"https://gmx.io/trade\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"speed-up-page-loading\",\r\n  //   title: \"Speed Up Page Loading\",\r\n  //   isActive: true,\r\n  //   validTill: \"4 May 2022, 12:00\",\r\n  //   bodyText: \"If you experience data loading issues, please use a free RPC URL from Alchemy.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Learn More\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"referral-program-launch\",\r\n  //   title: \"Referral Program Launch\",\r\n  //   isActive: true,\r\n  //   validTill: \"4 May 2022, 12:00\",\r\n  //   bodyText: \"The GMX referral program is now live! Get fee discounts and refer traders to earn rewards.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://gmx.io/referrals\",\r\n  //     },\r\n  //     {\r\n  //       text: \"Join Now\",\r\n  //       link: \"https://gmx.io/referrals\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"gmx-arbitrum-odyssey\",\r\n  //   title: \"GMX Arbitrum Odyssey\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"The GMX Arbitrum Odyssey is taking place this week, all participants will receive prizes. Read on to find out more.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://medium.com/@gmx.io/gmx-arbitrum-odyssey-fc12cba2d10d\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"fix-arbitrum-transaction-issues\",\r\n  //   title: \"Fix Arbitrum Transactions\",\r\n  //   isActive: true,\r\n  //   validTill: \"30 Jun 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"If you experience transaction errors on Arbitrum or data loading issues, please use a free RPC URL from Alchemy.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Learn More\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"gmx-arbitrum-odyssey-paused\",\r\n  //   title: \"GMX Arbitrum Odyssey Paused\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText: \"The GMX Arbitrum Odyssey has been paused. Please read the linked post for more information.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://twitter.com/GMX_IO/status/1542163585111150592\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"app-gmx-io\",\r\n  //   title: \"Frontend Updates\",\r\n  //   isActive: true,\r\n  //   validTill: \"6 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"On 6 Jul 2022, updates will be applied to the GMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"degraded-alchemy-performance\",\r\n  //   title: \"Alchemy RPC\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"There are ongoing syncing issues on Alchemy for Arbitrum at the moment, please check their status page and use the public Arbitrum RPC in the meantime\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Check Status\",\r\n  //       link: \"https://status.alchemy.com/\",\r\n  //       newTab: true,\r\n  //     },\r\n  //     {\r\n  //       text: \"Public RPC URL\",\r\n  //       link: \"https://metamask.zendesk.com/hc/en-us/articles/4415758358299-Network-profile-Arbitrum\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  {\r\n    id: \"app-gmx-io-settings\",\r\n    title: \"Frontend Updates\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"You are currently using app.gmx.io. Customized settings have been reset, you may need to adjust your settings by clicking on the menu in the top right after connecting your wallet.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"use-alchemy-rpc-url\",\r\n    title: \"Use Alchemy RPC URL\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"If you experience data loading or transaction issues on Arbitrum, please use a free RPC URL from Alchemy.\",\r\n    buttons: [\r\n      {\r\n        text: \"Learn More\",\r\n        link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"arbitrum-nitro-upgrade\",\r\n    title: \"Arbitrum Nitro Upgrade\",\r\n    isActive: true,\r\n    validTill: \"31 Aug 2022, 20:00\",\r\n    bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/arbitrum-nitro-5f88c03a46fe\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n];\r\n","function Icon({ className }) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      aria-hidden=\"true\"\r\n      className={className}\r\n      viewBox=\"0 0 24 24\"\r\n    >\r\n      <path\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n        d=\"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default Icon;\r\n","import \"./EventToast.css\";\r\nimport Icon from \"./AnnouncementIcon\";\r\nimport { MdOutlineClose } from \"react-icons/md\";\r\n\r\nexport default function EventToast({ event, id, onClick, t }) {\r\n  return (\r\n    <div className={`single-toast ${t.visible ? \"zoomIn\" : \"zoomOut\"}`} key={id}>\r\n      <header>\r\n        <div className=\"toast-title\">\r\n          <Icon className=\"announcement-icon\" />\r\n          <p>{event.title}</p>\r\n        </div>\r\n        <MdOutlineClose onClick={onClick} className=\"cross-icon\" color=\"white\" />\r\n      </header>\r\n      <p className=\"toast-body\">{event.bodyText}</p>\r\n      <div className=\"toast-links\">\r\n        {event.buttons.map((button) => {\r\n          if (button.newTab) {\r\n            return (\r\n              <a key={event.id + button.text} target=\"_blank\" rel=\"noreferrer noopener\" href={button.link}>\r\n                {button.text}\r\n              </a>\r\n            );\r\n          } else {\r\n            return (\r\n              <a key={event.id + button.text} href={button.link}>\r\n                {button.text}\r\n              </a>\r\n            );\r\n          }\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useLocalStorage } from \"react-use\";\r\nimport toast from \"react-hot-toast\";\r\nimport { homeEventsData, appEventsData } from \"../../config/events\";\r\nimport { useEffect } from \"react\";\r\nimport EventToast from \"./EventToast\";\r\nimport { isFuture, parse } from \"date-fns\";\r\nimport { isHomeSite } from \"../../lib/legacy\";\r\n\r\nfunction useEventToast() {\r\n  const isHome = isHomeSite();\r\n  const [visited, setVisited] = useLocalStorage(\"visited-announcements\", []);\r\n\r\n  useEffect(() => {\r\n    const eventsData = isHome ? homeEventsData : appEventsData;\r\n\r\n    eventsData\r\n      .filter((event) => event.isActive)\r\n      .filter((event) => isFuture(parse(event.validTill + \", +00\", \"d MMM yyyy, H:mm, x\", new Date())))\r\n      .filter((event) => Array.isArray(visited) && !visited.includes(event.id))\r\n      .forEach((event) => {\r\n        toast.custom(\r\n          (t) => (\r\n            <EventToast\r\n              event={event}\r\n              id={event.id}\r\n              t={t}\r\n              onClick={() => {\r\n                toast.dismiss(event.id);\r\n                visited.push(event.id);\r\n                setVisited(visited);\r\n              }}\r\n            />\r\n          ),\r\n          {\r\n            id: event.id,\r\n            style: {},\r\n          }\r\n        );\r\n      });\r\n  }, [visited, setVisited, isHome]);\r\n}\r\n\r\nexport default useEventToast;\r\n","import { Toaster } from \"react-hot-toast\";\r\nimport { useWindowScroll, createBreakpoint } from \"react-use\";\r\n\r\nfunction EventToastContainer() {\r\n  let { y: scrollY } = useWindowScroll();\r\n  const useBreakpoint = createBreakpoint({ XL: 1033, L: 768, S: 350 });\r\n  const breakpoint = useBreakpoint();\r\n  return (\r\n    <Toaster\r\n      position=\"top-right\"\r\n      reverseOrder={true}\r\n      gutter={30}\r\n      containerClassName=\"event-toast-container\"\r\n      containerStyle={{\r\n        zIndex: 2,\r\n        transition: \"all 200ms\",\r\n        top: scrollY > 60 ? \"30px\" : `${93 - scrollY}px`,\r\n        right: breakpoint === \"XL\" ? \"30px\" : \"1rem\",\r\n      }}\r\n      toastOptions={{\r\n        duration: Infinity,\r\n      }}\r\n    />\r\n  );\r\n}\r\nexport default EventToastContainer;\r\n","import { Helmet } from \"react-helmet\";\r\n\r\nfunction SEO(props) {\r\n  const { children, ...customMeta } = props;\r\n  const meta = {\r\n    title: `DeDeLend: Leading DeFi Platform for Streamlined Options & Perpetuals Trading and Effortless Asset Management`,\r\n    description: `Discover DeDeLend, a cutting-edge DeFi project offering a seamless trading experience for options and perpetuals, empowering users to proficiently manage their assets on a single, intuitive platform. Harness the power of decentralized finance with our user-friendly interface designed for optimal asset control, and experience unparalleled convenience in efficient options and perpetuals trading with DeDeLend.`,\r\n    image: \"https://terminal.dedelend.co/favicon.ico\",\r\n    type: \"aggregator\",\r\n    ...customMeta,\r\n  };\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{meta.title}</title>\r\n        <meta name=\"robots\" content=\"follow, index\" />\r\n        <meta content={meta.description} name=\"description\" />\r\n        <meta property=\"og:type\" content={meta.type} />\r\n        <meta property=\"og:site_name\" content=\"DeDeLend Terminal\" />\r\n        <meta property=\"og:description\" content={meta.description} />\r\n        <meta property=\"og:title\" content={meta.title} />\r\n        <meta property=\"og:image\" content={meta.image} />\r\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\r\n        <meta name=\"twitter:site\" content=\"@DeDeLend\" />\r\n        <meta name=\"twitter:title\" content={meta.title} />\r\n        <meta name=\"twitter:description\" content={meta.description} />\r\n        <meta name=\"twitter:image\" content={meta.image} />\r\n      </Helmet>\r\n      {children}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SEO;\r\n","import \"./RedirectModal.css\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport Checkbox from \"../Checkbox/Checkbox\";\r\n\r\nexport function RedirectPopupModal({\r\n  redirectModalVisible,\r\n  setRedirectModalVisible,\r\n  appRedirectUrl,\r\n  setRedirectPopupTimestamp,\r\n  setShouldHideRedirectModal,\r\n  shouldHideRedirectModal,\r\n  removeRedirectPopupTimestamp,\r\n}) {\r\n  const onClickAgree = () => {\r\n    if (shouldHideRedirectModal) {\r\n      setRedirectPopupTimestamp(Date.now());\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      className=\"RedirectModal\"\r\n      isVisible={redirectModalVisible}\r\n      setIsVisible={setRedirectModalVisible}\r\n      label=\"Launch App\"\r\n    >\r\n      You are leaving GMX.io and will be redirected to a third party, independent website.\r\n      <br />\r\n      <br />\r\n      The website is a community deployed and maintained instance of the open source{\" \"}\r\n      <a href=\"https://github.com/gmx-io/gmx-interface\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        GMX front end\r\n      </a>\r\n      , hosted and served on the distributed, peer-to-peer{\" \"}\r\n      <a href=\"https://ipfs.io/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        IPFS network\r\n      </a>\r\n      .\r\n      <br />\r\n      <br />\r\n      Alternative links can be found in the{\" \"}\r\n      <a href=\"https://gmxio.gitbook.io/gmx/app-links\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        docs\r\n      </a>\r\n      .\r\n      <br />\r\n      <br />\r\n      By clicking Agree you accept the{\" \"}\r\n      <a href=\"https://gmx.io/#/terms-and-conditions\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        T&Cs\r\n      </a>{\" \"}\r\n      and{\" \"}\r\n      <a href=\"https://gmx.io/#/referral-terms\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        Referral T&Cs\r\n      </a>\r\n      .\r\n      <br />\r\n      <br />\r\n      <div className=\"mb-sm\">\r\n        <Checkbox isChecked={shouldHideRedirectModal} setIsChecked={setShouldHideRedirectModal}>\r\n          Don't show this message again for 30 days.\r\n        </Checkbox>\r\n      </div>\r\n      <a href={appRedirectUrl} className=\"App-cta Exchange-swap-button\" onClick={() => onClickAgree()}>\r\n        Agree\r\n      </a>\r\n    </Modal>\r\n  );\r\n}\r\n","import { i18n } from \"@lingui/core\";\r\nimport { en, es, zh, ko, ru, ja, fr } from \"make-plural/plurals\";\r\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"./legacy\";\r\n\r\nexport const locales = {\r\n  en: \"English\",\r\n  es: \"Spanish\",\r\n  // zh: \"Chinese\",\r\n  ko: \"Korean\",\r\n  // ru: \"Russian\",\r\n  ja: \"Japanese\",\r\n  // fr: \"French\",\r\n};\r\n\r\nexport const defaultLocale = \"en\";\r\n\r\ni18n.loadLocaleData({\r\n  en: { plurals: en },\r\n  es: { plurals: es },\r\n  zh: { plurals: zh },\r\n  ko: { plurals: ko },\r\n  ru: { plurals: ru },\r\n  ja: { plurals: ja },\r\n  fr: { plurals: fr },\r\n});\r\n\r\nexport async function dynamicActivate(locale) {\r\n  // const { messages } = await import(`@lingui/loader!../config/locales/${locale}/messages.po`);\r\n  localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, locale);\r\n  // i18n.load(locale, messages);\r\n  i18n.activate(locale);\r\n}\r\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { SWRConfig } from \"swr\";\r\nimport { ethers } from \"ethers\";\r\nimport { Web3ReactProvider, useWeb3React } from \"@web3-react/core\";\r\nimport { Web3Provider } from \"@ethersproject/providers\";\r\n\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\n\r\nimport {\r\n  ARBITRUM,\r\n  AVALANCHE,\r\n  DEFAULT_SLIPPAGE_AMOUNT,\r\n  SLIPPAGE_BPS_KEY,\r\n  IS_PNL_IN_LEVERAGE_KEY,\r\n  SHOW_PNL_AFTER_FEES_KEY,\r\n  BASIS_POINTS_DIVISOR,\r\n  SHOULD_SHOW_POSITION_LINES_KEY,\r\n  getAppBaseUrl,\r\n  isHomeSite,\r\n  clearWalletConnectData,\r\n  helperToast,\r\n  getAlchemyWsUrl,\r\n  useChainId,\r\n  getInjectedHandler,\r\n  useEagerConnect,\r\n  useLocalStorageSerializeKey,\r\n  useInactiveListener,\r\n  getExplorerUrl,\r\n  activateInjectedProvider,\r\n  clearWalletLinkData,\r\n  SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY,\r\n  CURRENT_PROVIDER_LOCALSTORAGE_KEY,\r\n  REFERRAL_CODE_KEY,\r\n  REFERRAL_CODE_QUERY_PARAM,\r\n  isDevelopment,\r\n  DISABLE_ORDER_VALIDATION_KEY,\r\n} from \"../lib/legacy\";\r\n\r\nimport { Exchange } from \"../pages/Exchange/Exchange\";\r\n\r\nimport { cssTransition, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Modal from \"../components/Modal/Modal\";\r\nimport Checkbox from \"../components/Checkbox/Checkbox\";\r\n\r\nimport \"../styles/Shared.scss\";\r\nimport \"../styles/Font.css\";\r\nimport \"./App.scss\";\r\nimport \"../styles/Input.scss\";\r\nimport useEventToast from \"../components/EventToast/useEventToast\";\r\nimport EventToastContainer from \"../components/EventToast/EventToastContainer\";\r\nimport SEO from \"../components/Common/SEO\";\r\nimport useRouteQuery from \"../lib/useRouteQuery\";\r\nimport { encodeReferralCode, decodeReferralCode } from \"../domain/referrals\";\r\n\r\nimport { getContract } from \"../config/Addresses\";\r\nimport VaultV2 from \"../abis/VaultV2.json\";\r\nimport VaultV2b from \"../abis/VaultV2b.json\";\r\nimport PositionRouter from \"../abis/PositionRouter.json\";\r\nimport { useLocalStorage } from \"react-use\";\r\nimport { RedirectPopupModal } from \"../components/ModalViews/RedirectModal\";\r\nimport { REDIRECT_POPUP_TIMESTAMP_KEY } from \"../config/ui\";\r\n\r\nimport { Trans, t } from \"@lingui/macro\";\r\nimport { defaultLocale, dynamicActivate } from \"../lib/i18n\";\r\n\r\nimport _AccountManager from \"../../../deployments/arbitrum_ddl/accountManager.json\";\r\n\r\nif (\"ethereum\" in window) {\r\n  window.ethereum.autoRefreshOnNetworkChange = false;\r\n}\r\n\r\nfunction getLibrary(provider) {\r\n  const library = new Web3Provider(provider);\r\n  return library;\r\n}\r\n\r\nconst Jelly = cssTransition({\r\n  enter: \"jellyIn\",\r\n  exit: \"jellyOut\",\r\n});\r\n\r\nconst arbWsProvider = new ethers.providers.WebSocketProvider(getAlchemyWsUrl());\r\n\r\nconst avaxWsProvider = new ethers.providers.JsonRpcProvider(\"https://api.avax.network/ext/bc/C/rpc\");\r\n\r\nfunction getWsProvider(active, chainId) {\r\n  if (!active) {\r\n    return;\r\n  }\r\n  if (chainId === ARBITRUM) {\r\n    return arbWsProvider;\r\n  }\r\n\r\n  if (chainId === AVALANCHE) {\r\n    return avaxWsProvider;\r\n  }\r\n}\r\n\r\nfunction FullApp(props) {\r\n  const { setRegisterVisible } = props; \r\n  const isHome = isHomeSite();\r\n  const exchangeRef = useRef();\r\n  const { connector, library, deactivate, activate, active } = useWeb3React();\r\n  const { chainId } = useChainId();\r\n  const location = useLocation();\r\n  const history = useNavigate();\r\n  useEventToast();\r\n  const [activatingConnector, setActivatingConnector] = useState();\r\n  useEffect(() => {\r\n    if (activatingConnector && activatingConnector === connector) {\r\n      setActivatingConnector(undefined);\r\n    }\r\n  }, [activatingConnector, connector, chainId]);\r\n  const triedEager = useEagerConnect(setActivatingConnector);\r\n  useInactiveListener(!triedEager || !!activatingConnector);\r\n\r\n  const query = useRouteQuery();\r\n\r\n  useEffect(() => {\r\n    let referralCode = query.get(REFERRAL_CODE_QUERY_PARAM);\r\n    if (!referralCode || referralCode.length === 0) {\r\n      const params = new URLSearchParams(window.location.search);\r\n      referralCode = params.get(REFERRAL_CODE_QUERY_PARAM);\r\n    }\r\n\r\n    if (referralCode && referralCode.length <= 20) {\r\n      const encodedReferralCode = encodeReferralCode(referralCode);\r\n      if (encodeReferralCode !== ethers.constants.HashZero) {\r\n        localStorage.setItem(REFERRAL_CODE_KEY, encodedReferralCode);\r\n        const queryParams = new URLSearchParams(location.search);\r\n        if (queryParams.has(REFERRAL_CODE_QUERY_PARAM)) {\r\n          queryParams.delete(REFERRAL_CODE_QUERY_PARAM);\r\n          history.replace({\r\n            search: queryParams.toString(),\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }, [query, history, location]);\r\n\r\n  const disconnectAccount = useCallback(() => {\r\n    // only works with WalletConnect\r\n    clearWalletConnectData();\r\n    // force clear localStorage connection for MM/CB Wallet (Brave legacy)\r\n    clearWalletLinkData();\r\n    deactivate();\r\n  }, [deactivate]);\r\n\r\n  const connectInjectedWallet = getInjectedHandler(activate);\r\n\r\n  useEffect(() => {\r\n    attemptActivateWallet(\"MetaMask\");\r\n  }, [props.walletAddress])\r\n  \r\n\r\n  const attemptActivateWallet = (providerName) => {\r\n    localStorage.setItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY, true);\r\n    localStorage.setItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY, providerName);\r\n    activateInjectedProvider(providerName);\r\n    connectInjectedWallet();\r\n  };\r\n\r\n  const [redirectModalVisible, setRedirectModalVisible] = useState(false);\r\n  const [shouldHideRedirectModal, setShouldHideRedirectModal] = useState(false);\r\n  const [redirectPopupTimestamp, setRedirectPopupTimestamp, removeRedirectPopupTimestamp] =\r\n    useLocalStorage(REDIRECT_POPUP_TIMESTAMP_KEY);\r\n  const [selectedToPage, setSelectedToPage] = useState(\"\");\r\n  // const connectWallet = () => setWalletModalVisible(true);\r\n  const connectWallet = () => {\r\n    props.connectWallet();\r\n    attemptActivateWallet(\"MetaMask\");\r\n  };\r\n\r\n  const [isSettingsVisible, setIsSettingsVisible] = useState(false);\r\n  const [savedSlippageAmount, setSavedSlippageAmount] = useLocalStorageSerializeKey(\r\n    [chainId, SLIPPAGE_BPS_KEY],\r\n    DEFAULT_SLIPPAGE_AMOUNT\r\n  );\r\n  \r\n  const [slippageAmount, setSlippageAmount] = useState(0);\r\n  const [isPnlInLeverage, setIsPnlInLeverage] = useState(false);\r\n  const [shouldDisableValidationForTesting, setShouldDisableValidationForTesting] = useState(false);\r\n  const [showPnlAfterFees, setShowPnlAfterFees] = useState(false);\r\n\r\n  const [savedIsPnlInLeverage, setSavedIsPnlInLeverage] = useLocalStorageSerializeKey(\r\n    [chainId, IS_PNL_IN_LEVERAGE_KEY],\r\n    false\r\n  );\r\n\r\n  const [savedShowPnlAfterFees, setSavedShowPnlAfterFees] = useLocalStorageSerializeKey(\r\n    [chainId, SHOW_PNL_AFTER_FEES_KEY],\r\n    false\r\n  );\r\n  const [savedShouldDisableValidationForTesting, setSavedShouldDisableValidationForTesting] =\r\n    useLocalStorageSerializeKey([chainId, DISABLE_ORDER_VALIDATION_KEY], false);\r\n\r\n  const [savedShouldShowPositionLines, setSavedShouldShowPositionLines] = useLocalStorageSerializeKey(\r\n    [chainId, SHOULD_SHOW_POSITION_LINES_KEY],\r\n    false\r\n  );\r\n\r\n  const saveAndCloseSettings = () => {\r\n    const slippage = parseFloat(slippageAmount);\r\n    if (isNaN(slippage)) {\r\n      helperToast.error(t`Invalid slippage value`);\r\n      return;\r\n    }\r\n    if (slippage > 5) {\r\n      helperToast.error(t`Slippage should be less than 5%`);\r\n      return;\r\n    }\r\n\r\n    const basisPoints = (slippage * BASIS_POINTS_DIVISOR) / 100;\r\n    if (parseInt(basisPoints) !== parseFloat(basisPoints)) {\r\n      helperToast.error(t`Max slippage precision is 0.01%`);\r\n      return;\r\n    }\r\n\r\n    setSavedIsPnlInLeverage(isPnlInLeverage);\r\n    setSavedShowPnlAfterFees(showPnlAfterFees);\r\n    setSavedShouldDisableValidationForTesting(shouldDisableValidationForTesting);\r\n    setSavedSlippageAmount(basisPoints);\r\n    setIsSettingsVisible(false);\r\n  };\r\n\r\n  const localStorageCode = window.localStorage.getItem(REFERRAL_CODE_KEY);\r\n  const baseUrl = getAppBaseUrl();\r\n  let appRedirectUrl = baseUrl + selectedToPage;\r\n  if (localStorageCode && localStorageCode.length > 0 && localStorageCode !== ethers.constants.HashZero) {\r\n    const decodedRefCode = decodeReferralCode(localStorageCode);\r\n    if (decodedRefCode) {\r\n      appRedirectUrl = `${appRedirectUrl}?ref=${decodedRefCode}`;\r\n    }\r\n  }\r\n\r\n  const [pendingTxns, setPendingTxns] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const checkPendingTxns = async () => {\r\n      const updatedPendingTxns = [];\r\n      for (let i = 0; i < pendingTxns.length; i++) {\r\n        const pendingTxn = pendingTxns[i];\r\n        const receipt = await library.getTransactionReceipt(pendingTxn.hash);\r\n        if (receipt) {\r\n          if (receipt.status === 0) {\r\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\r\n            helperToast.error(\r\n              <div>\r\n                <Trans>Txn failed.</Trans>{\" \"}\r\n                <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  <Trans>View</Trans>\r\n                </a>\r\n                <br />\r\n              </div>\r\n            );\r\n          }\r\n          if (receipt.status === 1 && pendingTxn.message) {\r\n            const txUrl = getExplorerUrl(chainId) + \"tx/\" + pendingTxn.hash;\r\n            helperToast.success(\r\n              <div>\r\n                {pendingTxn.message}{\" \"}\r\n                <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  <Trans>View</Trans>\r\n                </a>\r\n                <br />\r\n              </div>\r\n            );\r\n          }\r\n          continue;\r\n        }\r\n        updatedPendingTxns.push(pendingTxn);\r\n      }\r\n\r\n      if (updatedPendingTxns.length !== pendingTxns.length) {\r\n        setPendingTxns(updatedPendingTxns);\r\n      }\r\n    };\r\n\r\n    const interval = setInterval(() => {\r\n      checkPendingTxns();\r\n    }, 2 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, [library, pendingTxns, chainId]);\r\n\r\n  const vaultAddress = getContract(chainId, \"Vault\");\r\n  const positionRouterAddress = getContract(chainId, \"PositionRouter\");\r\n\r\n  useEffect(() => {\r\n    const wsVaultAbi = chainId === ARBITRUM ? VaultV2.abi : VaultV2b.abi;\r\n    const wsProvider = getWsProvider(active, chainId);\r\n    if (!wsProvider) {\r\n      return;\r\n    }\r\n\r\n    const wsVault = new ethers.Contract(vaultAddress, wsVaultAbi, wsProvider);\r\n    const wsPositionRouter = new ethers.Contract(positionRouterAddress, PositionRouter.abi, wsProvider);\r\n\r\n    const callExchangeRef = (method, ...args) => {\r\n      if (!exchangeRef || !exchangeRef.current) {\r\n        return;\r\n      }\r\n\r\n      exchangeRef.current[method](...args);\r\n    };\r\n\r\n    // handle the subscriptions here instead of within the Exchange component to avoid unsubscribing and re-subscribing\r\n    // each time the Exchange components re-renders, which happens on every data update\r\n    const onUpdatePosition = (...args) => callExchangeRef(\"onUpdatePosition\", ...args);\r\n    const onClosePosition = (...args) => callExchangeRef(\"onClosePosition\", ...args);\r\n    const onIncreasePosition = (...args) => callExchangeRef(\"onIncreasePosition\", ...args);\r\n    const onDecreasePosition = (...args) => callExchangeRef(\"onDecreasePosition\", ...args);\r\n    const onCancelIncreasePosition = (...args) => callExchangeRef(\"onCancelIncreasePosition\", ...args);\r\n    const onCancelDecreasePosition = (...args) => callExchangeRef(\"onCancelDecreasePosition\", ...args);\r\n\r\n    wsVault.on(\"UpdatePosition\", onUpdatePosition);\r\n    wsVault.on(\"ClosePosition\", onClosePosition);\r\n    wsVault.on(\"IncreasePosition\", onIncreasePosition);\r\n    wsVault.on(\"DecreasePosition\", onDecreasePosition);\r\n    wsPositionRouter.on(\"CancelIncreasePosition\", onCancelIncreasePosition);\r\n    wsPositionRouter.on(\"CancelDecreasePosition\", onCancelDecreasePosition);\r\n\r\n    return function cleanup() {\r\n      wsVault.off(\"UpdatePosition\", onUpdatePosition);\r\n      wsVault.off(\"ClosePosition\", onClosePosition);\r\n      wsVault.off(\"IncreasePosition\", onIncreasePosition);\r\n      wsVault.off(\"DecreasePosition\", onDecreasePosition);\r\n      wsPositionRouter.off(\"CancelIncreasePosition\", onCancelIncreasePosition);\r\n      wsPositionRouter.off(\"CancelDecreasePosition\", onCancelDecreasePosition);\r\n    };\r\n  }, [active, chainId, vaultAddress, positionRouterAddress]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"App GMX-Interface\">\r\n        <div className=\"App-content\">\r\n          <Exchange\r\n            ref={exchangeRef}\r\n            savedShowPnlAfterFees={savedShowPnlAfterFees}\r\n            savedIsPnlInLeverage={savedIsPnlInLeverage}\r\n            setSavedIsPnlInLeverage={setSavedIsPnlInLeverage}\r\n            savedSlippageAmount={savedSlippageAmount}\r\n            setPendingTxns={setPendingTxns}\r\n            pendingTxns={pendingTxns}\r\n            savedShouldShowPositionLines={savedShouldShowPositionLines}\r\n            setSavedShouldShowPositionLines={setSavedShouldShowPositionLines}\r\n            connectWallet={connectWallet}\r\n            savedShouldDisableValidationForTesting={savedShouldDisableValidationForTesting}\r\n            dgAddress={props.dgAddress}\r\n            walletAddress={props.walletAddress}\r\n            setRegisterVisible={setRegisterVisible}\r\n          />\r\n        </div>\r\n      </div>\r\n      <ToastContainer\r\n        limit={1}\r\n        transition={Jelly}\r\n        position=\"bottom-right\"\r\n        // autoClose={}\r\n        hideProgressBar={true}\r\n        newestOnTop={false}\r\n        closeOnClick={false}\r\n        draggable={false}\r\n        pauseOnHover\r\n      />\r\n      <EventToastContainer />\r\n      <RedirectPopupModal\r\n        redirectModalVisible={redirectModalVisible}\r\n        setRedirectModalVisible={setRedirectModalVisible}\r\n        appRedirectUrl={appRedirectUrl}\r\n        setRedirectPopupTimestamp={setRedirectPopupTimestamp}\r\n        setShouldHideRedirectModal={setShouldHideRedirectModal}\r\n        shouldHideRedirectModal={shouldHideRedirectModal}\r\n        removeRedirectPopupTimestamp={removeRedirectPopupTimestamp}\r\n      />\r\n      <Modal\r\n        className=\"App-settings\"\r\n        isVisible={isSettingsVisible}\r\n        setIsVisible={setIsSettingsVisible}\r\n        label=\"Settings\"\r\n      >\r\n        <div className=\"App-settings-row\">\r\n          <div>\r\n            <Trans>Allowed Slippage</Trans>\r\n          </div>\r\n          <div className=\"App-slippage-tolerance-input-container\">\r\n            <input\r\n              type=\"number\"\r\n              className=\"App-slippage-tolerance-input\"\r\n              min=\"0\"\r\n              value={slippageAmount}\r\n              onChange={(e) => setSlippageAmount(e.target.value)}\r\n            />\r\n            <div className=\"App-slippage-tolerance-input-percent\">%</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"Exchange-settings-row\">\r\n          <Checkbox isChecked={showPnlAfterFees} setIsChecked={setShowPnlAfterFees}>\r\n            <Trans>Display PnL after fees</Trans>\r\n          </Checkbox>\r\n        </div>\r\n        <div className=\"Exchange-settings-row\">\r\n          <Checkbox isChecked={isPnlInLeverage} setIsChecked={setIsPnlInLeverage}>\r\n            <Trans>Include PnL in leverage display</Trans>\r\n          </Checkbox>\r\n        </div>\r\n        {isDevelopment() && (\r\n          <div className=\"Exchange-settings-row\">\r\n            <Checkbox isChecked={shouldDisableValidationForTesting} setIsChecked={setShouldDisableValidationForTesting}>\r\n              <Trans>Disable order validations</Trans>\r\n            </Checkbox>\r\n          </div>\r\n        )}\r\n\r\n        <button className=\"App-cta Exchange-swap-button\" onClick={saveAndCloseSettings}>\r\n          <Trans>Save</Trans>\r\n        </button>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction GMXInterface(props) {\r\n  useEffect(() => {\r\n    const defaultLanguage = defaultLocale;\r\n    dynamicActivate(defaultLanguage);\r\n  }, []);\r\n\r\n  return (\r\n    <SWRConfig value={{ refreshInterval: 5000 }}>\r\n      <Web3ReactProvider getLibrary={getLibrary}>\r\n        <FullApp {...props} />\r\n      </Web3ReactProvider>\r\n    </SWRConfig>\r\n  );\r\n}\r\n\r\nexport default GMXInterface;","import React from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport default function useRouteQuery() {\r\n  const { search } = useLocation();\r\n  return React.useMemo(() => new URLSearchParams(search), [search]);\r\n}\r\n","const CONTRACTS = {\r\n  56: {\r\n    // bsc mainnet\r\n    Treasury: \"0xa44E7252a0C137748F523F112644042E5987FfC7\",\r\n    BUSD: \"0xe9e7cea3dedca5984780bafc599bd69add087d56\",\r\n    GMT: \"0x99e92123eB77Bc8f999316f622e5222498438784\",\r\n    Vault: \"0xc73A8DcAc88498FD4b4B1b2AaA37b0a2614Ff67B\",\r\n    Router: \"0xD46B23D042E976F8666F554E928e0Dc7478a8E1f\",\r\n    Reader: \"0x087A618fD25c92B61254DBe37b09E5E8065FeaE7\",\r\n    AmmFactory: \"0xBCfCcbde45cE874adCB698cC183deBcF17952812\",\r\n    AmmFactoryV2: \"0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73\",\r\n    OrderBook: \"0x1111111111111111111111111111111111111111\",\r\n    OrderBookReader: \"0x1111111111111111111111111111111111111111\",\r\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\r\n    USDG: \"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7\",\r\n    NATIVE_TOKEN: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\",\r\n    XGMT: \"0xe304ff0983922787Fd84BC9170CD21bF78B16B10\",\r\n    GMT_USDG_PAIR: \"0xa41e57459f09a126F358E118b693789d088eA8A0\",\r\n    XGMT_USDG_PAIR: \"0x0b622208fc0691C2486A3AE6B7C875b4A174b317\",\r\n    GMT_USDG_FARM: \"0x3E8B08876c791dC880ADC8f965A02e53Bb9C0422\",\r\n    XGMT_USDG_FARM: \"0x68D7ee2A16AB7c0Ee1D670BECd144166d2Ae0759\",\r\n    USDG_YIELD_TRACKER: \"0x0EF0Cf825B8e9F89A43FfD392664131cFB4cfA89\",\r\n    XGMT_YIELD_TRACKER: \"0x82A012A9b3003b18B6bCd6052cbbef7Fa4892e80\",\r\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x08FAb024BEfcb6068847726b2eccEAd18b6c23Cd\",\r\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd8E26637B34B2487Cad1f91808878a391134C5c2\",\r\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0x026A02F7F26C1AFccb9Cba7C4df3Dc810F4e92e8\",\r\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x22458CEbD14a9679b2880147d08CA1ce5aa40E84\",\r\n    AUTO: \"0xa184088a740c695E156F91f5cC086a06bb78b827\",\r\n    AUTO_USDG_PAIR: \"0x0523FD5C53ea5419B4DAF656BC1b157dDFE3ce50\",\r\n    AUTO_USDG_FARM: \"0xE6958298328D02051769282628a3b4178D0F3A47\",\r\n    AUTO_USDG_FARM_TRACKER_XGMT: \"0x093b8be41c1A30704De84a9521632f9a139c08bd\",\r\n    AUTO_USDG_FARM_TRACKER_NATIVE: \"0x23ed48E5dce3acC7704d0ce275B7b9a0e346b63A\",\r\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\r\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\r\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\r\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\r\n  },\r\n  97: {\r\n    // bsc testnet\r\n    Vault: \"0x1B183979a5cd95FAF392c8002dbF0D5A1C687D9a\",\r\n    Router: \"0x10800f683aa564534497a5b67F45bE3556a955AB\",\r\n    Reader: \"0x98D4742F1B6a821bae672Cd8721283b91996E454\",\r\n    AmmFactory: \"0x6725f303b657a9451d8ba641348b6761a6cc7a17\",\r\n    AmmFactoryV2: \"0x1111111111111111111111111111111111111111\",\r\n    OrderBook: \"0x9afD7B4f0b58d65F6b2978D3581383a06b2ac4e9\",\r\n    OrderBookReader: \"0x0713562970D1A802Fa3FeB1D15F9809943982Ea9\",\r\n    GmxMigrator: \"0xDEF2af818514c1Ca1A9bBe2a4D45E28f260063f9\",\r\n    USDG: \"0x2D549bdBf810523fe9cd660cC35fE05f0FcAa028\",\r\n    GMT: \"0xedba0360a44f885ed390fad01aa34d00d2532817\",\r\n    NATIVE_TOKEN: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\r\n    XGMT: \"0x28cba798eca1a3128ffd1b734afb93870f22e613\",\r\n    GMT_USDG_PAIR: \"0xe0b0a315746f51932de033ab27223d85114c6b85\",\r\n    XGMT_USDG_PAIR: \"0x0108de1eea192ce8448080c3d90a1560cf643fa0\",\r\n    GMT_USDG_FARM: \"0xbe3cB06CE03cA692b77902040479572Ba8D01b0B\",\r\n    XGMT_USDG_FARM: \"0x138E92195D4B99CE3618092D3F9FA830d9A69B4b\",\r\n    USDG_YIELD_TRACKER: \"0x62B49Bc3bF252a5DB26D88ccc7E61119e3179B4f\",\r\n    XGMT_YIELD_TRACKER: \"0x5F235A582e0993eE9466FeEb8F7B4682993a57d0\",\r\n    GMT_USDG_FARM_TRACKER_XGMT: \"0x4f8EE3aE1152422cbCaFACd4e3041ba2D859913C\",\r\n    GMT_USDG_FARM_TRACKER_NATIVE: \"0xd691B26E544Fe370f39A776964c991363aF72e56\",\r\n    XGMT_USDG_FARM_TRACKER_XGMT: \"0xfd5617CFB082Ba9bcD62d654603972AE312bC695\",\r\n    XGMT_USDG_FARM_TRACKER_NATIVE: \"0x0354387DD85b7D8aaD1611B3D167A384d6AE0c28\",\r\n    GMT_GMX_IOU: \"0x47052469970C2484729875CC9E2dd2683fcE71fb\",\r\n    XGMT_GMX_IOU: \"0xeB3733DFe3b68C9d26898De2493A3Bb59FDb4A7B\",\r\n    GMT_USDG_GMX_IOU: \"0x481312655F81b5e249780A6a49735335BF6Ca7f4\",\r\n    XGMT_USDG_GMX_IOU: \"0x8095F1A92526C304623483018aA28cC6E62EB1e1\",\r\n  },\r\n  421611: {\r\n    // arbitrum testnet\r\n    Vault: \"0xBc9BC47A7aB63db1E0030dC7B60DDcDe29CF4Ffb\",\r\n    Router: \"0xe0d4662cdfa2d71477A7DF367d5541421FAC2547\",\r\n    VaultReader: \"0xFc371E380262536c819D12B9569106bf032cC41c\",\r\n    Reader: \"0x2E093c70E3A7E4919611d2555dFd8D697d2fC0a1\",\r\n    GlpManager: \"0xD875d99E09118d2Be80579b9d23E83469077b498\",\r\n    RewardRouter: \"0x0000000000000000000000000000000000000000\",\r\n    RewardReader: \"0x0000000000000000000000000000000000000000\",\r\n    NATIVE_TOKEN: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\r\n    GLP: \"0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\r\n    GMX: \"0x0000000000000000000000000000000000000000\",\r\n    ES_GMX: \"0x0000000000000000000000000000000000000000\",\r\n    BN_GMX: \"0x0000000000000000000000000000000000000000\",\r\n    USDG: \"0xBCDCaF67193Bf5C57be08623278fCB69f4cA9e68\",\r\n    ES_GMX_IOU: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    BonusGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    FeeGmxTracker: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGlpTracker: \"0x0000000000000000000000000000000000000000\",\r\n    FeeGlpTracker: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    StakedGmxDistributor: \"0x0000000000000000000000000000000000000000\",\r\n    StakedGlpDistributor: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    GmxVester: \"0x0000000000000000000000000000000000000000\",\r\n    GlpVester: \"0x0000000000000000000000000000000000000000\",\r\n\r\n    OrderBook: \"0xebD147E5136879520dDaDf1cA8FBa48050EFf016\",\r\n    OrderBookReader: \"0xC492c8d82DC576Ad870707bb40EDb63E2026111E\",\r\n\r\n    PositionRouter: \"0xB4bB78cd12B097603e2b55D2556c09C17a5815F8\",\r\n    PositionManager: \"0x168aDa266c2f10C1F37973B213d6178551030e44\",\r\n\r\n    // UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\r\n    ReferralStorage: \"0x0000000000000000000000000000000000000000\",\r\n    ReferralReader: \"0x0000000000000000000000000000000000000000\",\r\n  },\r\n  42161: {\r\n    // arbitrum mainnet\r\n    Vault: \"0x489ee077994B6658eAfA855C308275EAd8097C4A\",\r\n    Router: \"0xaBBc5F99639c9B6bCb58544ddf04EFA6802F4064\",\r\n    VaultReader: \"0xfebB9f4CAC4cD523598fE1C5771181440143F24A\",\r\n    Reader: \"0x2b43c90D1B727cEe1Df34925bcd5Ace52Ec37694\",\r\n    GlpManager: \"0x3963FfC9dff443c2A94f21b129D429891E32ec18\",\r\n    RewardRouter: \"0xA906F338CB21815cBc4Bc87ace9e68c87eF8d8F1\",\r\n    GlpRewardRouter: \"0xB95DB5B167D75e6d04227CfFFA61069348d271F5\",\r\n    RewardReader: \"0x8BFb8e82Ee4569aee78D03235ff465Bd436D40E0\",\r\n    NATIVE_TOKEN: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\r\n    GLP: \"0x4277f8F2c384827B5273592FF7CeBd9f2C1ac258\",\r\n    GMX: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\r\n    ES_GMX: \"0xf42Ae1D54fd613C9bb14810b0588FaAa09a426cA\",\r\n    BN_GMX: \"0x35247165119B69A40edD5304969560D0ef486921\",\r\n    USDG: \"0x45096e7aA921f27590f8F19e457794EB09678141\",\r\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\",\r\n    StakedGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\r\n    BonusGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\r\n    FeeGmxTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\r\n    StakedGlpTracker: \"0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\r\n    FeeGlpTracker: \"0x4e971a87900b931fF39d1Aad67697F49835400b6\",\r\n\r\n    StakedGmxDistributor: \"0x23208B91A98c7C1CD9FE63085BFf68311494F193\",\r\n    StakedGlpDistributor: \"0x60519b48ec4183a61ca2B8e37869E675FD203b34\",\r\n\r\n    GmxVester: \"0x199070DDfd1CFb69173aa2F7e20906F26B363004\",\r\n    GlpVester: \"0xA75287d2f8b217273E7FCD7E86eF07D33972042E\",\r\n\r\n    OrderBook: \"0x09f77E8A13De9a35a7231028187e9fD5DB8a2ACB\",\r\n    OrderExecutor: \"0x7257ac5D0a0aaC04AA7bA2AC0A6Eb742E332c3fB\",\r\n    OrderBookReader: \"0xa27C20A7CF0e1C68C0460706bB674f98F362Bc21\",\r\n\r\n    PositionRouter: \"0xb87a436B93fFE9D75c5cFA7bAcFff96430b09868\",\r\n    PositionManager: \"0x75E42e6f01baf1D6022bEa862A28774a9f8a4A0C\",\r\n\r\n    UniswapGmxEthPool: \"0x80A9ae39310abf666A87C743d6ebBD0E8C42158E\",\r\n    ReferralStorage: \"0xe6fab3f0c7199b0d34d7fbe83394fc0e0d06e99d\",\r\n    ReferralReader: \"0x8Aa382760BCdCe8644C33e6C2D52f6304A76F5c8\",\r\n\r\n    Multicall: \"0xcA11bde05977b3631167028862bE2a173976CA11\",\r\n  },\r\n  43114: {\r\n    // avalanche\r\n    Vault: \"0x9ab2De34A33fB459b538c43f251eB825645e8595\",\r\n    Router: \"0x5F719c2F1095F7B9fc68a68e35B51194f4b6abe8\",\r\n    VaultReader: \"0x66eC8fc33A26feAEAe156afA3Cb46923651F6f0D\",\r\n    Reader: \"0x2eFEE1950ededC65De687b40Fd30a7B5f4544aBd\",\r\n    GlpManager: \"0xe1ae4d4b06A5Fe1fc288f6B4CD72f9F8323B107F\",\r\n    RewardRouter: \"0x82147C5A7E850eA4E28155DF107F2590fD4ba327\",\r\n    RewardReader: \"0x04Fc11Bd28763872d143637a7c768bD96E44c1b6\",\r\n    NATIVE_TOKEN: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\r\n    GLP: \"0x01234181085565ed162a948b6a5e88758CD7c7b8\",\r\n    GMX: \"0x62edc0692BD897D2295872a9FFCac5425011c661\",\r\n    ES_GMX: \"0xFf1489227BbAAC61a9209A08929E4c2a526DdD17\",\r\n    BN_GMX: \"0x8087a341D32D445d9aC8aCc9c14F5781E04A26d2\",\r\n    USDG: \"0xc0253c3cC6aa5Ab407b5795a04c28fB063273894\",\r\n    ES_GMX_IOU: \"0x6260101218eC4cCfFF1b778936C6f2400f95A954\", // placeholder address\r\n\r\n    StakedGmxTracker: \"0x2bD10f8E93B3669b6d42E74eEedC65dd1B0a1342\",\r\n    BonusGmxTracker: \"0x908C4D94D34924765f1eDc22A1DD098397c59dD4\",\r\n    FeeGmxTracker: \"0x4d268a7d4C16ceB5a606c173Bd974984343fea13\",\r\n    StakedGlpTracker: \"0x9e295B5B976a184B14aD8cd72413aD846C299660\",\r\n    FeeGlpTracker: \"0xd2D1162512F927a7e282Ef43a362659E4F2a728F\",\r\n\r\n    StakedGmxDistributor: \"0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a\",\r\n    StakedGlpDistributor: \"0xDd593Cf40734199afc9207eBe9ffF23dA4Bf7720\",\r\n\r\n    GmxVester: \"0x472361d3cA5F49c8E633FB50385BfaD1e018b445\",\r\n    GlpVester: \"0x62331A7Bd1dfB3A7642B7db50B5509E57CA3154A\",\r\n\r\n    OrderBook: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\r\n    OrderExecutor: \"0x4296e307f108B2f583FF2F7B7270ee7831574Ae5\",\r\n    OrderBookReader: \"0xccFE3E576f8145403d3ce8f3c2f6519Dae40683B\",\r\n\r\n    PositionRouter: \"0xffF6D276Bc37c61A23f06410Dce4A400f66420f8\",\r\n    PositionManager: \"0xA21B83E579f4315951bA658654c371520BDcB866\",\r\n\r\n    TraderJoeGmxAvaxPool: \"0x0c91a070f862666bbcce281346be45766d874d98\",\r\n    ReferralStorage: \"0x827ed045002ecdabeb6e2b0d1604cf5fc3d322f8\",\r\n    ReferralReader: \"0x505Ce16D3017be7D76a7C2631C0590E71A975083\",\r\n  },\r\n};\r\n\r\nexport function getContract(chainId, name, market) {\r\n  if (!CONTRACTS[chainId]) {\r\n    throw new Error(`Unknown chainId ${chainId}`);\r\n  }\r\n  if (!CONTRACTS[chainId][name]) {\r\n    throw new Error(`Unknown contract \"${name}\" for chainId ${chainId}`);\r\n  }\r\n  return CONTRACTS[chainId][name];\r\n}\r\n\r\nexport const XGMT_EXCLUDED_ACCOUNTS = [\r\n  \"0x330eef6b9b1ea6edd620c825c9919dc8b611d5d5\",\r\n  \"0xd9b1c23411adbb984b1c4be515fafc47a12898b2\",\r\n  \"0xa633158288520807f91ccc98aa58e0ea43acb400\",\r\n  \"0xffd0a93b4362052a336a7b22494f1b77018dd34b\",\r\n];\r\n","import { ethers } from \"ethers\";\r\nimport { getContract } from \"./Addresses\";\r\n\r\nconst TOKENS = {\r\n  56: [\r\n    {\r\n      name: \"Bitcoin (BTCB)\",\r\n      symbol: \"BTC\",\r\n      decimals: 18,\r\n      address: \"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c\",\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-bitcoin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/14108/small/Binance-bitcoin.png\",\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: \"0x2170Ed0880ac9A755fd29B2688956BD959F933F8\",\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/ethereum\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png\",\r\n    },\r\n    {\r\n      name: \"Binance Coin\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\r\n      isNative: true,\r\n    },\r\n    {\r\n      name: \"Wrapped Binance Coin\",\r\n      symbol: \"WBNB\",\r\n      decimals: 18,\r\n      address: getContract(56, \"NATIVE_TOKEN\"),\r\n      isWrapped: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/825/small/binance-coin-logo.png\",\r\n      baseSymbol: \"BNB\",\r\n    },\r\n    {\r\n      name: \"USD Gambit\",\r\n      symbol: \"USDG\",\r\n      decimals: 18,\r\n      address: getContract(56, \"USDG\"),\r\n      isUsdg: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-gambit\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/15886/small/usdg-02.png\",\r\n    },\r\n    {\r\n      name: \"Binance USD\",\r\n      symbol: \"BUSD\",\r\n      decimals: 18,\r\n      address: \"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/binance-usd\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/9576/small/BUSD.png\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 18,\r\n      address: \"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/small/USD_Coin_icon.png\",\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 18,\r\n      address: \"0x55d398326f99059fF775485246999027B3197955\",\r\n      isStable: true,\r\n      coingeckoUrl: \"https://www.coingecko.com/en/coins/tether\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/small/Tether-logo.png\",\r\n    },\r\n  ],\r\n  97: [\r\n    {\r\n      name: \"Bitcoin (BTCB)\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0xb19C12715134bee7c4b1Ca593ee9E430dABe7b56\",\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: \"0x1958f7C067226c7C8Ac310Dc994D0cebAbfb2B02\",\r\n    },\r\n    {\r\n      name: \"Binance Coin\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n    },\r\n    {\r\n      name: \"Wrapped Binance Coin\",\r\n      symbol: \"WBNB\",\r\n      decimals: 18,\r\n      address: \"0x612777Eea37a44F7a95E3B101C39e1E2695fa6C2\",\r\n      isWrapped: true,\r\n      baseSymbol: \"BNB\",\r\n    },\r\n    {\r\n      name: \"USD Gambit\",\r\n      symbol: \"USDG\",\r\n      decimals: 18,\r\n      address: getContract(97, \"USDG\"),\r\n      isUsdg: true,\r\n    },\r\n    {\r\n      name: \"Binance USD\",\r\n      symbol: \"BUSD\",\r\n      decimals: 18,\r\n      address: \"0x3F223C4E5ac67099CB695834b20cCd5E5D5AA9Ef\",\r\n      isStable: true,\r\n    },\r\n  ],\r\n  421611: [\r\n    {\r\n      name: \"Bitcoin\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0x27960f9A322BE96A1535E6c19B3958e80E6a2670\",\r\n      isShortable: true,\r\n    },\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n    },\r\n    // https://github.com/OffchainLabs/arbitrum/blob/950c2f91b2e951cd3764394e0a73eac3797aecf3/packages/arb-ts/src/lib/networks.ts#L65\r\n    {\r\n      name: \"Wrapped Ethereum\",\r\n      symbol: \"WETH\",\r\n      decimals: 18,\r\n      address: \"0xB47e6A5f8b33b3F17603C83a0535A9dcD7E32681\",\r\n      isWrapped: true,\r\n      baseSymbol: \"ETH\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 6,\r\n      address: \"0xf0DCd4737A20ED33481A49De94C599944a3Ca737\",\r\n      isStable: true,\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 6,\r\n      address: \"0x818ED84bA1927945b631016e0d402Db50cE8865f\",\r\n      isStable: true,\r\n    },\r\n  ],\r\n  42161: [\r\n    {\r\n      name: \"Ethereum\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\r\n    },\r\n    {\r\n      name: \"Wrapped Ethereum\",\r\n      symbol: \"WETH\",\r\n      decimals: 18,\r\n      address: \"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1\",\r\n      isWrapped: true,\r\n      baseSymbol: \"ETH\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/2518/thumb/weth.png?1628852295\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (WBTC)\",\r\n      symbol: \"BTC\",\r\n      decimals: 8,\r\n      address: \"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f\",\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\r\n    },\r\n    {\r\n      name: \"Chainlink\",\r\n      symbol: \"LINK\",\r\n      decimals: 18,\r\n      address: \"0xf97f4df75117a78c1A5a0DBb814Af92458539FB4\",\r\n      isStable: false,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/877/thumb/chainlink-new-logo.png?1547034700\",\r\n    },\r\n    {\r\n      name: \"Uniswap\",\r\n      symbol: \"UNI\",\r\n      decimals: 18,\r\n      address: \"0xFa7F8980b0f1E64A2062791cc3b0871572f1F7f0\",\r\n      isStable: false,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12504/thumb/uniswap-uni.png?1600306604\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      decimals: 6,\r\n      address: \"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"Tether\",\r\n      symbol: \"USDT\",\r\n      decimals: 6,\r\n      address: \"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/325/thumb/Tether-logo.png?1598003707\",\r\n    },\r\n    {\r\n      name: \"Dai\",\r\n      symbol: \"DAI\",\r\n      decimals: 18,\r\n      address: \"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/9956/thumb/4943.png?1636636734\",\r\n    },\r\n    {\r\n      name: \"Frax\",\r\n      symbol: \"FRAX\",\r\n      decimals: 18,\r\n      address: \"0x17FC002b466eEc40DaE837Fc4bE5c67993ddBd6F\",\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/13422/small/frax_logo.png?1608476506\",\r\n    },\r\n    {\r\n      name: \"Magic Internet Money\",\r\n      symbol: \"MIM\",\r\n      decimals: 18,\r\n      address: \"0xFEa7a6a0B346362BF88A9e4A88416B77a57D6c2A\",\r\n      isStable: true,\r\n      isTempHidden: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\r\n    },\r\n  ],\r\n  43114: [\r\n    {\r\n      name: \"Avalanche\",\r\n      symbol: \"AVAX\",\r\n      decimals: 18,\r\n      address: ethers.constants.AddressZero,\r\n      isNative: true,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\r\n    },\r\n    {\r\n      name: \"Wrapped AVAX\",\r\n      symbol: \"WAVAX\",\r\n      decimals: 18,\r\n      address: \"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7\",\r\n      isWrapped: true,\r\n      baseSymbol: \"AVAX\",\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/12559/small/coin-round-red.png?1604021818\",\r\n    },\r\n    {\r\n      name: \"Ethereum (WETH.e)\",\r\n      symbol: \"ETH\",\r\n      address: \"0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB\",\r\n      decimals: 18,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/279/small/ethereum.png?1595348880\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (WBTC.e)\",\r\n      symbol: \"BTC\",\r\n      address: \"0x50b7545627a5162F82A992c33b87aDc75187B218\",\r\n      decimals: 8,\r\n      isShortable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/7598/thumb/wrapped_bitcoin_wbtc.png?1548822744\",\r\n    },\r\n    {\r\n      name: \"Bitcoin (BTC.b)\",\r\n      symbol: \"BTC.b\",\r\n      address: \"0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\r\n      decimals: 8,\r\n      isShortable: false,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/26115/thumb/btcb.png?1655921693\",\r\n    },\r\n    {\r\n      name: \"USD Coin (USDC.e)\",\r\n      symbol: \"USDC.e\",\r\n      address: \"0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664\",\r\n      decimals: 6,\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"USD Coin\",\r\n      symbol: \"USDC\",\r\n      address: \"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E\",\r\n      decimals: 6,\r\n      isStable: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/6319/thumb/USD_Coin_icon.png?1547042389\",\r\n    },\r\n    {\r\n      name: \"Magic Internet Money\",\r\n      symbol: \"MIM\",\r\n      address: \"0x130966628846BFd36ff31a822705796e8cb8C18D\",\r\n      decimals: 18,\r\n      isStable: true,\r\n      isTempHidden: true,\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/16786/small/mimlogopng.png\",\r\n    },\r\n  ],\r\n};\r\n\r\nconst ADDITIONAL_TOKENS = {\r\n  42161: [\r\n    {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      address: getContract(42161, \"GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"Escrowed GMX\",\r\n      symbol: \"esGMX\",\r\n      address: getContract(42161, \"ES_GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      address: getContract(42161, \"GLP\"),\r\n      decimals: 18,\r\n    },\r\n  ],\r\n  43114: [\r\n    {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      address: getContract(43114, \"GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"Escrowed GMX\",\r\n      symbol: \"esGMX\",\r\n      address: getContract(43114, \"ES_GMX\"),\r\n      decimals: 18,\r\n    },\r\n    {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      address: getContract(42161, \"GLP\"),\r\n      decimals: 18,\r\n    },\r\n  ],\r\n};\r\n\r\nconst CHAIN_IDS = [56, 97, 42161, 421611, 43114];\r\n\r\nconst TOKENS_MAP = {};\r\nconst TOKENS_BY_SYMBOL_MAP = {};\r\n\r\nfor (let j = 0; j < CHAIN_IDS.length; j++) {\r\n  const chainId = CHAIN_IDS[j];\r\n  TOKENS_MAP[chainId] = {};\r\n  TOKENS_BY_SYMBOL_MAP[chainId] = {};\r\n  let tokens = TOKENS[chainId];\r\n  if (ADDITIONAL_TOKENS[chainId]) {\r\n    tokens = tokens.concat(ADDITIONAL_TOKENS[chainId]);\r\n  }\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const token = tokens[i];\r\n    TOKENS_MAP[chainId][token.address] = token;\r\n    TOKENS_BY_SYMBOL_MAP[chainId][token.symbol] = token;\r\n  }\r\n}\r\n\r\nconst WRAPPED_TOKENS_MAP = {};\r\nconst NATIVE_TOKENS_MAP = {};\r\nfor (const chainId of CHAIN_IDS) {\r\n  for (const token of TOKENS[chainId]) {\r\n    if (token.isWrapped) {\r\n      WRAPPED_TOKENS_MAP[chainId] = token;\r\n    } else if (token.isNative) {\r\n      NATIVE_TOKENS_MAP[chainId] = token;\r\n    }\r\n  }\r\n}\r\n\r\nexport function getWrappedToken(chainId) {\r\n  return WRAPPED_TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getNativeToken(chainId) {\r\n  return NATIVE_TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getTokens(chainId) {\r\n  return TOKENS[chainId];\r\n}\r\n\r\nexport function isValidToken(chainId, address) {\r\n  if (!TOKENS_MAP[chainId]) {\r\n    throw new Error(`Incorrect chainId ${chainId}`);\r\n  }\r\n  return address in TOKENS_MAP[chainId];\r\n}\r\n\r\nexport function getToken(chainId, address) {\r\n  if (!TOKENS_MAP[chainId]) {\r\n    throw new Error(`Incorrect chainId ${chainId}`);\r\n  }\r\n  if (!TOKENS_MAP[chainId][address]) {\r\n    throw new Error(`Incorrect address \"${address}\" for chainId ${chainId}`);\r\n  }\r\n  return TOKENS_MAP[chainId][address];\r\n}\r\n\r\nexport function getTokenBySymbol(chainId, symbol) {\r\n  const token = TOKENS_BY_SYMBOL_MAP[chainId][symbol];\r\n  if (!token) {\r\n    throw new Error(`Incorrect symbol \"${symbol}\" for chainId ${chainId}`);\r\n  }\r\n  return token;\r\n}\r\n\r\nexport function getWhitelistedTokens(chainId) {\r\n  return TOKENS[chainId].filter((token) => token.symbol !== \"USDG\");\r\n}\r\n\r\nexport function getVisibleTokens(chainId) {\r\n  return getWhitelistedTokens(chainId).filter((token) => !token.isWrapped && !token.isTempHidden);\r\n}\r\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { InjectedConnector } from \"@web3-react/injected-connector\";\r\nimport {\r\n  UserRejectedRequestError as UserRejectedRequestErrorWalletConnect,\r\n  WalletConnectConnector,\r\n} from \"@web3-react/walletconnect-connector\";\r\nimport { toast } from \"react-toastify\";\r\nimport { UnsupportedChainIdError, useWeb3React } from \"@web3-react/core\";\r\nimport { useLocalStorage } from \"react-use\";\r\nimport { ethers } from \"ethers\";\r\nimport { format as formatDateFn } from \"date-fns\";\r\nimport Token from \"../abis/Token.json\";\r\nimport _ from \"lodash\";\r\nimport { getContract } from \"../config/Addresses\";\r\nimport useSWR from \"swr\";\r\n\r\nimport OrderBookReader from \"../abis/OrderBookReader.json\";\r\nimport OrderBook from \"../abis/OrderBook.json\";\r\n\r\nimport { getWhitelistedTokens, isValidToken } from \"../config/Tokens\";\r\n\r\nimport callIcon from \"../../../img/icon-call.svg\";\r\nimport putIcon from \"../../../img/icon-put.svg\";\r\nimport putActiveIcon from \"../../../img/icon-put-active.svg\";\r\nimport callActiveIcon from \"../../../img/icon-call-active.svg\";\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nexport const UI_VERSION = \"1.3\";\r\n\r\n// use a random placeholder account instead of the zero address as the zero address might have tokens\r\nexport const PLACEHOLDER_ACCOUNT = ethers.Wallet.createRandom().address;\r\n\r\nexport const MAINNET = 56;\r\nexport const AVALANCHE = 43114;\r\nexport const TESTNET = 97;\r\nexport const ARBITRUM_TESTNET = 421611;\r\nexport const ARBITRUM = 42161;\r\n// TODO take it from web3\r\nexport const DEFAULT_CHAIN_ID = ARBITRUM;\r\nexport const CHAIN_ID = DEFAULT_CHAIN_ID;\r\n\r\nexport const MIN_PROFIT_TIME = 0;\r\n\r\nconst SELECTED_NETWORK_LOCAL_STORAGE_KEY = \"SELECTED_NETWORK\";\r\n\r\nexport const IS_NETWORK_DISABLED = {\r\n  [ARBITRUM]: false,\r\n  [AVALANCHE]: false,\r\n};\r\n\r\nconst CHAIN_NAMES_MAP = {\r\n  [MAINNET]: \"BSC\",\r\n  [TESTNET]: \"BSC Testnet\",\r\n  [ARBITRUM_TESTNET]: \"ArbRinkeby\",\r\n  [ARBITRUM]: \"Arbitrum\",\r\n  [AVALANCHE]: \"Avalanche\",\r\n};\r\n\r\nconst alchemyWhitelistedDomains = [\"gmx.io\", \"app.gmx.io\"];\r\n\r\nexport function getDefaultArbitrumRpcUrl() {\r\n  return \"https://arb1.arbitrum.io/rpc\";\r\n}\r\n\r\nexport function getAlchemyHttpUrl() {\r\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\r\n    return \"https://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\r\n  }\r\n  return \"https://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\r\n}\r\n\r\nexport function getAlchemyWsUrl() {\r\n  if (alchemyWhitelistedDomains.includes(window.location.host)) {\r\n    return \"wss://arb-mainnet.g.alchemy.com/v2/ha7CFsr1bx5ZItuR6VZBbhKozcKDY4LZ\";\r\n  }\r\n  return \"wss://arb-mainnet.g.alchemy.com/v2/EmVYwUw0N2tXOuG0SZfe5Z04rzBsCbr2\";\r\n}\r\n\r\nconst ARBITRUM_RPC_PROVIDERS = [getDefaultArbitrumRpcUrl()];\r\nconst AVALANCHE_RPC_PROVIDERS = [\"https://api.avax.network/ext/bc/C/rpc\"];\r\nexport const WALLET_CONNECT_LOCALSTORAGE_KEY = \"walletconnect\";\r\nexport const WALLET_LINK_LOCALSTORAGE_PREFIX = \"-walletlink\";\r\nexport const SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY = \"eagerconnect\";\r\nexport const CURRENT_PROVIDER_LOCALSTORAGE_KEY = \"currentprovider\";\r\nexport const LANGUAGE_LOCALSTORAGE_KEY = \"LANGUAGE_KEY\";\r\n\r\nexport function getChainName(chainId) {\r\n  return CHAIN_NAMES_MAP[chainId];\r\n}\r\n\r\nexport const USDG_ADDRESS = getContract(CHAIN_ID, \"USDG\");\r\n\r\nexport const BASIS_POINTS_DIVISOR = 10000;\r\nexport const MAX_LEVERAGE = 100 * BASIS_POINTS_DIVISOR;\r\nexport const MAX_ALLOWED_LEVERAGE = 50 * BASIS_POINTS_DIVISOR;\r\n\r\nexport const MAX_PRICE_DEVIATION_BASIS_POINTS = 750;\r\nexport const DEFAULT_GAS_LIMIT = 1 * 1000 * 1000;\r\nexport const SECONDS_PER_YEAR = 31536000;\r\nexport const USDG_DECIMALS = 18;\r\nexport const USD_DECIMALS = 30;\r\nexport const DEPOSIT_FEE = 30;\r\nexport const DUST_BNB = \"2000000000000000\";\r\nexport const DUST_USD = expandDecimals(1, USD_DECIMALS);\r\nexport const PRECISION = expandDecimals(1, 30);\r\nexport const GLP_DECIMALS = 18;\r\nexport const GMX_DECIMALS = 18;\r\nexport const DEFAULT_MAX_USDG_AMOUNT = expandDecimals(200 * 1000 * 1000, 18);\r\n\r\nexport const TAX_BASIS_POINTS = 50;\r\nexport const STABLE_TAX_BASIS_POINTS = 5;\r\nexport const MINT_BURN_FEE_BASIS_POINTS = 25;\r\nexport const SWAP_FEE_BASIS_POINTS = 30;\r\nexport const STABLE_SWAP_FEE_BASIS_POINTS = 1;\r\nexport const MARGIN_FEE_BASIS_POINTS = 10;\r\n\r\nexport const LIQUIDATION_FEE = expandDecimals(5, USD_DECIMALS);\r\n\r\nexport const TRADES_PAGE_SIZE = 100;\r\n\r\nexport const GLP_COOLDOWN_DURATION = 15 * 60;\r\nexport const THRESHOLD_REDEMPTION_VALUE = expandDecimals(993, 27); // 0.993\r\nexport const FUNDING_RATE_PRECISION = 1000000;\r\n\r\nexport const SWAP = \"Swap\";\r\nexport const INCREASE = \"Increase\";\r\nexport const DECREASE = \"Decrease\";\r\nexport const LONG = \"Long\";\r\nexport const SHORT = \"Short\";\r\n\r\nexport const MARKET = \"Market\";\r\nexport const LIMIT = \"Limit\";\r\nexport const STOP = \"Stop\";\r\nexport const BORROW = \"Borrow\";\r\n\r\n// Market/limit orders disabling\r\n// export const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT, STOP];\r\nexport const LEVERAGE_ORDER_OPTIONS = [MARKET, LIMIT];\r\n\r\nexport const SWAP_ORDER_OPTIONS = [MARKET, LIMIT];\r\n\r\n\r\n// Options\r\nexport const CALL = \"Call\";\r\nexport const PUT = \"Put\";\r\nexport const SWAP_OPTIONS = [CALL, PUT];\r\nexport const SWAP_ICONS = {\r\n  [CALL]: callIcon,\r\n  [PUT]: putIcon,\r\n  Call_active: callActiveIcon,\r\n  Put_active: putActiveIcon,\r\n};\r\n\r\nexport const ASSET_OPTIONS = ['ETH', 'BTC'];\r\n\r\n\r\n\r\n// Default Slippage\r\nexport const DEFAULT_SLIPPAGE_AMOUNT = 30;\r\n// export const DEFAULT_SLIPPAGE_AMOUNT = 100;\r\n\r\nexport const DEFAULT_HIGHER_SLIPPAGE_AMOUNT = 100;\r\n\r\nexport const SLIPPAGE_BPS_KEY = \"Exchange-swap-slippage-basis-points-v3\";\r\nexport const CLOSE_POSITION_RECEIVE_TOKEN_KEY = \"Close-position-receive-token\";\r\nexport const IS_PNL_IN_LEVERAGE_KEY = \"Exchange-swap-is-pnl-in-leverage\";\r\nexport const SHOW_PNL_AFTER_FEES_KEY = \"Exchange-swap-show-pnl-after-fees\";\r\nexport const DISABLE_ORDER_VALIDATION_KEY = \"disable-order-validation\";\r\nexport const SHOULD_SHOW_POSITION_LINES_KEY = \"Exchange-swap-should-show-position-lines\";\r\nexport const REFERRAL_CODE_KEY = \"GMX-referralCode\";\r\nexport const REFERRAL_CODE_QUERY_PARAM = \"ref\";\r\nexport const REFERRALS_SELECTED_TAB_KEY = \"Referrals-selected-tab\";\r\nexport const MAX_REFERRAL_CODE_LENGTH = 20;\r\n\r\nexport const TRIGGER_PREFIX_ABOVE = \">\";\r\nexport const TRIGGER_PREFIX_BELOW = \"<\";\r\n\r\nexport const MIN_PROFIT_BIPS = 0;\r\n\r\nexport const GLPPOOLCOLORS = {\r\n  ETH: \"#6062a6\",\r\n  BTC: \"#F7931A\",\r\n  \"BTC.b\": \"#F7931A\",\r\n  USDC: \"#2775CA\",\r\n  \"USDC.e\": \"#2A5ADA\",\r\n  USDT: \"#67B18A\",\r\n  MIM: \"#9695F8\",\r\n  FRAX: \"#000\",\r\n  DAI: \"#FAC044\",\r\n  UNI: \"#E9167C\",\r\n  AVAX: \"#E84142\",\r\n  LINK: \"#3256D6\",\r\n};\r\n\r\nexport const HIGH_EXECUTION_FEES_MAP = {\r\n  [ARBITRUM]: 3, // 3 USD\r\n  [AVALANCHE]: 3, // 3 USD\r\n};\r\n\r\nexport function getHighExecutionFee(chainId) {\r\n  return HIGH_EXECUTION_FEES_MAP[chainId] || 3;\r\n}\r\n\r\nexport const ICONLINKS = {\r\n  [ARBITRUM_TESTNET]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\r\n    },\r\n    GLP: {\r\n      arbitrum: \"https://testnet.arbiscan.io/token/0xb4f81Fa74e06b5f762A104e47276BA9b2929cb27\",\r\n    },\r\n  },\r\n  [ARBITRUM]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a\",\r\n    },\r\n    GLP: {\r\n      arbitrum: \"https://arbiscan.io/token/0x1aDDD80E6039594eE970E5872D247bf0414C8903\",\r\n    },\r\n    ETH: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/ethereum\",\r\n    },\r\n    BTC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      arbitrum: \"https://arbiscan.io/address/0x2f2a2543b76a4166549f7aab2e75bef0aefc5b0f\",\r\n    },\r\n    LINK: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/chainlink\",\r\n      arbitrum: \"https://arbiscan.io/address/0xf97f4df75117a78c1a5a0dbb814af92458539fb4\",\r\n    },\r\n    UNI: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/uniswap\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfa7f8980b0f1e64a2062791cc3b0871572f1f7f0\",\r\n    },\r\n    USDC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      arbitrum: \"https://arbiscan.io/address/0xff970a61a04b1ca14834a43f5de4533ebddb5cc8\",\r\n    },\r\n    USDT: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/tether\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9\",\r\n    },\r\n    DAI: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/dai\",\r\n      arbitrum: \"https://arbiscan.io/address/0xda10009cbd5d07dd0cecc66161fc93d7c9000da1\",\r\n    },\r\n    MIM: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\r\n      arbitrum: \"https://arbiscan.io/address/0xfea7a6a0b346362bf88a9e4a88416b77a57d6c2a\",\r\n    },\r\n    FRAX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/frax\",\r\n      arbitrum: \"https://arbiscan.io/address/0x17fc002b466eec40dae837fc4be5c67993ddbd6f\",\r\n    },\r\n  },\r\n  [AVALANCHE]: {\r\n    GMX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/gmx\",\r\n      avalanche: \"https://snowtrace.io/address/0x62edc0692bd897d2295872a9ffcac5425011c661\",\r\n    },\r\n    GLP: {\r\n      avalanche: \"https://snowtrace.io/address/0x9e295B5B976a184B14aD8cd72413aD846C299660\",\r\n    },\r\n    AVAX: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/avalanche\",\r\n    },\r\n    ETH: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/weth\",\r\n      avalanche: \"https://snowtrace.io/address/0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab\",\r\n    },\r\n    BTC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      avalanche: \"https://snowtrace.io/address/0x50b7545627a5162f82a992c33b87adc75187b218\",\r\n    },\r\n    \"BTC.b\": {\r\n      coingecko: \"https://www.coingecko.com/en/coins/wrapped-bitcoin\",\r\n      avalanche: \"https://snowtrace.io/address/0x152b9d0FdC40C096757F570A51E494bd4b943E50\",\r\n    },\r\n    MIM: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/magic-internet-money\",\r\n      avalanche: \"https://snowtrace.io/address/0x130966628846bfd36ff31a822705796e8cb8c18d\",\r\n    },\r\n    \"USDC.e\": {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin-avalanche-bridged-usdc-e\",\r\n      avalanche: \"https://snowtrace.io/address/0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664\",\r\n    },\r\n    USDC: {\r\n      coingecko: \"https://www.coingecko.com/en/coins/usd-coin\",\r\n      avalanche: \"https://snowtrace.io/address/0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e\",\r\n    },\r\n  },\r\n};\r\n\r\nexport const platformTokens = {\r\n  42161: {\r\n    // arbitrum\r\n    GMX: {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      decimals: 18,\r\n      address: getContract(ARBITRUM, \"GMX\"),\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\r\n    },\r\n    GLP: {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      decimals: 18,\r\n      address: getContract(ARBITRUM, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\r\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\r\n    },\r\n  },\r\n  43114: {\r\n    // avalanche\r\n    GMX: {\r\n      name: \"GMX\",\r\n      symbol: \"GMX\",\r\n      decimals: 18,\r\n      address: getContract(AVALANCHE, \"GMX\"),\r\n      imageUrl: \"https://assets.coingecko.com/coins/images/18323/small/arbit.png?1631532468\",\r\n    },\r\n    GLP: {\r\n      name: \"GMX LP\",\r\n      symbol: \"GLP\",\r\n      decimals: 18,\r\n      address: getContract(AVALANCHE, \"StakedGlpTracker\"), // address of fsGLP token because user only holds fsGLP\r\n      imageUrl: \"https://github.com/gmx-io/gmx-assets/blob/main/GMX-Assets/PNG/GLP_LOGO%20ONLY.png?raw=true\",\r\n    },\r\n  },\r\n};\r\n\r\nconst supportedChainIds = [ARBITRUM, AVALANCHE];\r\nif (isDevelopment()) {\r\n  supportedChainIds.push(ARBITRUM_TESTNET);\r\n}\r\nconst injectedConnector = new InjectedConnector({\r\n  supportedChainIds,\r\n});\r\n\r\nconst getWalletConnectConnector = () => {\r\n  const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\r\n  return new WalletConnectConnector({\r\n    rpc: {\r\n      [AVALANCHE]: AVALANCHE_RPC_PROVIDERS[0],\r\n      [ARBITRUM]: ARBITRUM_RPC_PROVIDERS[0],\r\n      [ARBITRUM_TESTNET]: \"https://rinkeby.arbitrum.io/rpc\",\r\n    },\r\n    qrcode: true,\r\n    chainId,\r\n  });\r\n};\r\n\r\nexport function isSupportedChain(chainId) {\r\n  return supportedChainIds.includes(chainId);\r\n}\r\n\r\nexport function deserialize(data) {\r\n  for (const [key, value] of Object.entries(data)) {\r\n    if (value._type === \"BigNumber\") {\r\n      data[key] = bigNumberify(value.value);\r\n    }\r\n  }\r\n  return data;\r\n}\r\n\r\nexport function isHomeSite() {\r\n  return process.env.REACT_APP_IS_HOME_SITE === \"true\";\r\n}\r\n\r\nexport const helperToast = {\r\n  success: (content, opts) => {\r\n    toast.dismiss();\r\n    toast.success(content, opts);\r\n  },\r\n  error: (content, opts) => {\r\n    toast.dismiss();\r\n    toast.error(content, opts);\r\n  },\r\n};\r\n\r\nexport function useLocalStorageByChainId(chainId, key, defaultValue) {\r\n  const [internalValue, setInternalValue] = useLocalStorage(key, {});\r\n\r\n  const setValue = useCallback(\r\n    (value) => {\r\n      setInternalValue((internalValue) => {\r\n        if (typeof value === \"function\") {\r\n          value = value(internalValue[chainId] || defaultValue);\r\n        }\r\n        const newInternalValue = {\r\n          ...internalValue,\r\n          [chainId]: value,\r\n        };\r\n        return newInternalValue;\r\n      });\r\n    },\r\n    [chainId, setInternalValue, defaultValue]\r\n  );\r\n\r\n  let value;\r\n  if (chainId in internalValue) {\r\n    value = internalValue[chainId];\r\n  } else {\r\n    value = defaultValue;\r\n  }\r\n\r\n  return [value, setValue];\r\n}\r\n\r\nexport function useLocalStorageSerializeKey(key, value, opts) {\r\n  key = JSON.stringify(key);\r\n  return useLocalStorage(key, value, opts);\r\n}\r\n\r\nfunction getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd) {\r\n  // Limit/stop orders are executed with price specified by user\r\n  if (orderOption && orderOption !== MARKET && triggerPriceUsd) {\r\n    return triggerPriceUsd;\r\n  }\r\n\r\n  // Market orders are executed with current market price\r\n  if (!info) {\r\n    return;\r\n  }\r\n  if (max && !info.maxPrice) {\r\n    return;\r\n  }\r\n  if (!max && !info.minPrice) {\r\n    return;\r\n  }\r\n  return max ? info.maxPrice : info.minPrice;\r\n}\r\n\r\nexport function getLiquidationPriceFromDelta({ liquidationAmount, size, collateral, averagePrice, isLong }) {\r\n  if (!size || size.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  if (liquidationAmount.gt(collateral)) {\r\n    const liquidationDelta = liquidationAmount.sub(collateral);\r\n    const priceDelta = liquidationDelta.mul(averagePrice).div(size);\r\n    return isLong ? averagePrice.add(priceDelta) : averagePrice.sub(priceDelta);\r\n  }\r\n\r\n  const liquidationDelta = collateral.sub(liquidationAmount);\r\n  const priceDelta = liquidationDelta.mul(averagePrice).div(size);\r\n\r\n  return isLong ? averagePrice.sub(priceDelta) : averagePrice.add(priceDelta);\r\n}\r\n\r\nexport const replaceNativeTokenAddress = (path, nativeTokenAddress) => {\r\n  if (!path) {\r\n    return;\r\n  }\r\n\r\n  let updatedPath = [];\r\n  for (let i = 0; i < path.length; i++) {\r\n    let address = path[i];\r\n    if (address === AddressZero) {\r\n      address = nativeTokenAddress;\r\n    }\r\n    updatedPath.push(address);\r\n  }\r\n\r\n  return updatedPath;\r\n};\r\n\r\nexport function getMarginFee(sizeDelta) {\r\n  if (!sizeDelta) {\r\n    return bigNumberify(0);\r\n  }\r\n  const afterFeeUsd = sizeDelta.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR);\r\n  return sizeDelta.sub(afterFeeUsd);\r\n}\r\n\r\nexport function getServerBaseUrl(chainId) {\r\n  if (!chainId) {\r\n    throw new Error(\"chainId is not provided\");\r\n  }\r\n  if (document.location.hostname.includes(\"deploy-preview\")) {\r\n    const fromLocalStorage = localStorage.getItem(\"SERVER_BASE_URL\");\r\n    if (fromLocalStorage) {\r\n      return fromLocalStorage;\r\n    }\r\n  }\r\n  if (chainId === MAINNET) {\r\n    return \"https://gambit-server-staging.uc.r.appspot.com\";\r\n  } else if (chainId === ARBITRUM_TESTNET) {\r\n    return \"https://gambit-server-devnet.uc.r.appspot.com\";\r\n  } else if (chainId === ARBITRUM) {\r\n    return \"https://gmx-server-mainnet.uw.r.appspot.com\";\r\n  } else if (chainId === AVALANCHE) {\r\n    return \"https://gmx-avax-server.uc.r.appspot.com\";\r\n  }\r\n  return \"https://gmx-server-mainnet.uw.r.appspot.com\";\r\n}\r\n\r\nexport function getServerUrl(chainId, path) {\r\n  return `${getServerBaseUrl(chainId)}${path}`;\r\n}\r\n\r\nexport function isTriggerRatioInverted(fromTokenInfo, toTokenInfo) {\r\n  if (!toTokenInfo || !fromTokenInfo) return false;\r\n  if (toTokenInfo.isStable || toTokenInfo.isUsdg) return true;\r\n  if (toTokenInfo.maxPrice) return toTokenInfo.maxPrice.lt(fromTokenInfo.maxPrice);\r\n  return false;\r\n}\r\n\r\nexport function getExchangeRate(tokenAInfo, tokenBInfo, inverted) {\r\n  if (!tokenAInfo || !tokenAInfo.minPrice || !tokenBInfo || !tokenBInfo.maxPrice) {\r\n    return;\r\n  }\r\n  if (inverted) {\r\n    return tokenAInfo.minPrice.mul(PRECISION).div(tokenBInfo.maxPrice);\r\n  }\r\n  return tokenBInfo.maxPrice.mul(PRECISION).div(tokenAInfo.minPrice);\r\n}\r\n\r\nexport function getMostAbundantStableToken(chainId, infoTokens) {\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n  let availableAmount;\r\n  let stableToken = whitelistedTokens.find((t) => t.isStable);\r\n  for (let i = 0; i < whitelistedTokens.length; i++) {\r\n    const info = getTokenInfo(infoTokens, whitelistedTokens[i].address);\r\n    if (!info.isStable || !info.availableAmount) {\r\n      continue;\r\n    }\r\n\r\n    const adjustedAvailableAmount = adjustForDecimals(info.availableAmount, info.decimals, USD_DECIMALS);\r\n    if (!availableAmount || adjustedAvailableAmount.gt(availableAmount)) {\r\n      availableAmount = adjustedAvailableAmount;\r\n      stableToken = info;\r\n    }\r\n  }\r\n  return stableToken;\r\n}\r\n\r\nexport function shouldInvertTriggerRatio(tokenA, tokenB) {\r\n  if (tokenB.isStable || tokenB.isUsdg) return true;\r\n  if (tokenB.maxPrice && tokenA.maxPrice && tokenB.maxPrice.lt(tokenA.maxPrice)) return true;\r\n  return false;\r\n}\r\n\r\nexport function getExchangeRateDisplay(rate, tokenA, tokenB, opts = {}) {\r\n  if (!rate || !tokenA || !tokenB) return \"...\";\r\n  if (shouldInvertTriggerRatio(tokenA, tokenB)) {\r\n    [tokenA, tokenB] = [tokenB, tokenA];\r\n    rate = PRECISION.mul(PRECISION).div(rate);\r\n  }\r\n  const rateValue = formatAmount(rate, USD_DECIMALS, tokenA.isStable || tokenA.isUsdg ? 2 : 4, true);\r\n  if (opts.omitSymbols) {\r\n    return rateValue;\r\n  }\r\n  return `${rateValue} ${tokenA.symbol}/${tokenB.symbol}`;\r\n}\r\n\r\nconst adjustForDecimalsFactory = (n) => (number) => {\r\n  if (n === 0) {\r\n    return number;\r\n  }\r\n  if (n > 0) {\r\n    return number.mul(expandDecimals(1, n));\r\n  }\r\n  return number.div(expandDecimals(1, -n));\r\n};\r\n\r\nexport function adjustForDecimals(amount, divDecimals, mulDecimals) {\r\n  return amount.mul(expandDecimals(1, mulDecimals)).div(expandDecimals(1, divDecimals));\r\n}\r\n\r\nexport function getTargetUsdgAmount(token, usdgSupply, totalTokenWeights) {\r\n  if (!token || !token.weight || !usdgSupply) {\r\n    return;\r\n  }\r\n\r\n  if (usdgSupply.eq(0)) {\r\n    return bigNumberify(0);\r\n  }\r\n\r\n  return token.weight.mul(usdgSupply).div(totalTokenWeights);\r\n}\r\n\r\nexport function getFeeBasisPoints(\r\n  token,\r\n  usdgDelta,\r\n  feeBasisPoints,\r\n  taxBasisPoints,\r\n  increment,\r\n  usdgSupply,\r\n  totalTokenWeights\r\n) {\r\n  if (!token || !token.usdgAmount || !usdgSupply || !totalTokenWeights) {\r\n    return 0;\r\n  }\r\n\r\n  feeBasisPoints = bigNumberify(feeBasisPoints);\r\n  taxBasisPoints = bigNumberify(taxBasisPoints);\r\n\r\n  const initialAmount = token.usdgAmount;\r\n  let nextAmount = initialAmount.add(usdgDelta);\r\n  if (!increment) {\r\n    nextAmount = usdgDelta.gt(initialAmount) ? bigNumberify(0) : initialAmount.sub(usdgDelta);\r\n  }\r\n\r\n  const targetAmount = getTargetUsdgAmount(token, usdgSupply, totalTokenWeights);\r\n  if (!targetAmount || targetAmount.eq(0)) {\r\n    return feeBasisPoints.toNumber();\r\n  }\r\n\r\n  const initialDiff = initialAmount.gt(targetAmount)\r\n    ? initialAmount.sub(targetAmount)\r\n    : targetAmount.sub(initialAmount);\r\n  const nextDiff = nextAmount.gt(targetAmount) ? nextAmount.sub(targetAmount) : targetAmount.sub(nextAmount);\r\n\r\n  if (nextDiff.lt(initialDiff)) {\r\n    const rebateBps = taxBasisPoints.mul(initialDiff).div(targetAmount);\r\n    return rebateBps.gt(feeBasisPoints) ? 0 : feeBasisPoints.sub(rebateBps).toNumber();\r\n  }\r\n\r\n  let averageDiff = initialDiff.add(nextDiff).div(2);\r\n  if (averageDiff.gt(targetAmount)) {\r\n    averageDiff = targetAmount;\r\n  }\r\n  const taxBps = taxBasisPoints.mul(averageDiff).div(targetAmount);\r\n  return feeBasisPoints.add(taxBps).toNumber();\r\n}\r\n\r\nexport function getBuyGlpToAmount(fromAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\r\n  if (!fromAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\r\n  if (!swapToken || !swapToken.minPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let glpAmount = fromAmount.mul(swapToken.minPrice).div(glpPrice);\r\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\r\n\r\n  let usdgAmount = fromAmount.mul(swapToken.minPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    swapToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n\r\n  return { amount: glpAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getSellGlpFromAmount(toAmount, swapTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0), feeBasisPoints: 0 };\r\n  if (!toAmount || !swapTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const swapToken = getTokenInfo(infoTokens, swapTokenAddress);\r\n  if (!swapToken || !swapToken.maxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let glpAmount = toAmount.mul(swapToken.maxPrice).div(glpPrice);\r\n  glpAmount = adjustForDecimals(glpAmount, swapToken.decimals, USDG_DECIMALS);\r\n\r\n  let usdgAmount = toAmount.mul(swapToken.maxPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, swapToken.decimals, USDG_DECIMALS);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    swapToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  glpAmount = glpAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\r\n\r\n  return { amount: glpAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getBuyGlpFromAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  if (!fromToken || !fromToken.minPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.minPrice);\r\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\r\n\r\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints);\r\n\r\n  return { amount: fromAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getSellGlpToAmount(toAmount, fromTokenAddress, infoTokens, glpPrice, usdgSupply, totalTokenWeights) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!toAmount || !fromTokenAddress || !infoTokens || !glpPrice || !usdgSupply || !totalTokenWeights) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  if (!fromToken || !fromToken.maxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  let fromAmount = toAmount.mul(glpPrice).div(fromToken.maxPrice);\r\n  fromAmount = adjustForDecimals(fromAmount, GLP_DECIMALS, fromToken.decimals);\r\n\r\n  const usdgAmount = toAmount.mul(glpPrice).div(PRECISION);\r\n  const feeBasisPoints = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    MINT_BURN_FEE_BASIS_POINTS,\r\n    TAX_BASIS_POINTS,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n\r\n  fromAmount = fromAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n\r\n  return { amount: fromAmount, feeBasisPoints };\r\n}\r\n\r\nexport function getNextFromAmount(\r\n  chainId,\r\n  toAmount,\r\n  fromTokenAddress,\r\n  toTokenAddress,\r\n  infoTokens,\r\n  toTokenPriceUsd,\r\n  ratio,\r\n  usdgSupply,\r\n  totalTokenWeights,\r\n  forSwap\r\n) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n\r\n  if (!toAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\r\n    return defaultValue;\r\n  }\r\n\r\n  if (fromTokenAddress === toTokenAddress) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  if (fromToken.isNative && toToken.isWrapped) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  if (fromToken.isWrapped && toToken.isNative) {\r\n    return { amount: toAmount };\r\n  }\r\n\r\n  // the realtime price should be used if it is for a transaction to open / close a position\r\n  // or if the transaction involves doing a swap and opening / closing a position\r\n  // otherwise use the contract price instead of realtime price for swaps\r\n\r\n  let fromTokenMinPrice;\r\n  if (fromToken) {\r\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\r\n  }\r\n\r\n  let toTokenMaxPrice;\r\n  if (toToken) {\r\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\r\n  }\r\n\r\n  if (!fromToken || !fromTokenMinPrice || !toToken || !toTokenMaxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const adjustDecimals = adjustForDecimalsFactory(fromToken.decimals - toToken.decimals);\r\n\r\n  let fromAmountBasedOnRatio;\r\n  if (ratio && !ratio.isZero()) {\r\n    fromAmountBasedOnRatio = toAmount.mul(ratio).div(PRECISION);\r\n  }\r\n\r\n  const fromAmount =\r\n    ratio && !ratio.isZero() ? fromAmountBasedOnRatio : toAmount.mul(toTokenMaxPrice).div(fromTokenMinPrice);\r\n\r\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, toToken.decimals, USDG_DECIMALS);\r\n  const swapFeeBasisPoints =\r\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\r\n  const feeBasisPoints0 = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints1 = getFeeBasisPoints(\r\n    toToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\r\n\r\n  return {\r\n    amount: adjustDecimals(fromAmount.mul(BASIS_POINTS_DIVISOR).div(BASIS_POINTS_DIVISOR - feeBasisPoints)),\r\n    feeBasisPoints,\r\n  };\r\n}\r\n\r\nexport function getNextToAmount(\r\n  chainId,\r\n  fromAmount,\r\n  fromTokenAddress,\r\n  toTokenAddress,\r\n  infoTokens,\r\n  toTokenPriceUsd,\r\n  ratio,\r\n  usdgSupply,\r\n  totalTokenWeights,\r\n  forSwap\r\n) {\r\n  const defaultValue = { amount: bigNumberify(0) };\r\n  if (!fromAmount || !fromTokenAddress || !toTokenAddress || !infoTokens) {\r\n    return defaultValue;\r\n  }\r\n\r\n  if (fromTokenAddress === toTokenAddress) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  const fromToken = getTokenInfo(infoTokens, fromTokenAddress);\r\n  const toToken = getTokenInfo(infoTokens, toTokenAddress);\r\n\r\n  if (fromToken.isNative && toToken.isWrapped) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  if (fromToken.isWrapped && toToken.isNative) {\r\n    return { amount: fromAmount };\r\n  }\r\n\r\n  // the realtime price should be used if it is for a transaction to open / close a position\r\n  // or if the transaction involves doing a swap and opening / closing a position\r\n  // otherwise use the contract price instead of realtime price for swaps\r\n\r\n  let fromTokenMinPrice;\r\n  if (fromToken) {\r\n    fromTokenMinPrice = forSwap ? fromToken.contractMinPrice : fromToken.minPrice;\r\n  }\r\n\r\n  let toTokenMaxPrice;\r\n  if (toToken) {\r\n    toTokenMaxPrice = forSwap ? toToken.contractMaxPrice : toToken.maxPrice;\r\n  }\r\n\r\n  if (!fromTokenMinPrice || !toTokenMaxPrice) {\r\n    return defaultValue;\r\n  }\r\n\r\n  const adjustDecimals = adjustForDecimalsFactory(toToken.decimals - fromToken.decimals);\r\n\r\n  let toAmountBasedOnRatio = bigNumberify(0);\r\n  if (ratio && !ratio.isZero()) {\r\n    toAmountBasedOnRatio = fromAmount.mul(PRECISION).div(ratio);\r\n  }\r\n\r\n  if (toTokenAddress === USDG_ADDRESS) {\r\n    const feeBasisPoints = getSwapFeeBasisPoints(fromToken.isStable);\r\n\r\n    if (ratio && !ratio.isZero()) {\r\n      const toAmount = toAmountBasedOnRatio;\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const toAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n    return {\r\n      amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n      feeBasisPoints,\r\n    };\r\n  }\r\n\r\n  if (fromTokenAddress === USDG_ADDRESS) {\r\n    const redemptionValue = toToken.redemptionAmount\r\n      .mul(toTokenPriceUsd || toTokenMaxPrice)\r\n      .div(expandDecimals(1, toToken.decimals));\r\n\r\n    if (redemptionValue.gt(THRESHOLD_REDEMPTION_VALUE)) {\r\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\r\n\r\n      const toAmount =\r\n        ratio && !ratio.isZero()\r\n          ? toAmountBasedOnRatio\r\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\r\n\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const expectedAmount = fromAmount;\r\n\r\n    const stableToken = getMostAbundantStableToken(chainId, infoTokens);\r\n    if (!stableToken || stableToken.availableAmount.lt(expectedAmount)) {\r\n      const toAmount =\r\n        ratio && !ratio.isZero()\r\n          ? toAmountBasedOnRatio\r\n          : fromAmount.mul(toToken.redemptionAmount).div(expandDecimals(1, toToken.decimals));\r\n      const feeBasisPoints = getSwapFeeBasisPoints(toToken.isStable);\r\n      return {\r\n        amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n        feeBasisPoints,\r\n      };\r\n    }\r\n\r\n    const feeBasisPoints0 = getSwapFeeBasisPoints(true);\r\n    const feeBasisPoints1 = getSwapFeeBasisPoints(false);\r\n\r\n    if (ratio && !ratio.isZero()) {\r\n      const toAmount = toAmountBasedOnRatio\r\n        .mul(BASIS_POINTS_DIVISOR - feeBasisPoints0 - feeBasisPoints1)\r\n        .div(BASIS_POINTS_DIVISOR);\r\n      return {\r\n        amount: adjustDecimals(toAmount),\r\n        path: [USDG_ADDRESS, stableToken.address, toToken.address],\r\n        feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\r\n      };\r\n    }\r\n\r\n    // get toAmount for USDG => stableToken\r\n    let toAmount = fromAmount.mul(PRECISION).div(stableToken.maxPrice);\r\n    // apply USDG => stableToken fees\r\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints0).div(BASIS_POINTS_DIVISOR);\r\n\r\n    // get toAmount for stableToken => toToken\r\n    toAmount = toAmount.mul(stableToken.minPrice).div(toTokenPriceUsd || toTokenMaxPrice);\r\n    // apply stableToken => toToken fees\r\n    toAmount = toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints1).div(BASIS_POINTS_DIVISOR);\r\n\r\n    return {\r\n      amount: adjustDecimals(toAmount),\r\n      path: [USDG_ADDRESS, stableToken.address, toToken.address],\r\n      feeBasisPoints: feeBasisPoints0 + feeBasisPoints1,\r\n    };\r\n  }\r\n\r\n  const toAmount =\r\n    ratio && !ratio.isZero()\r\n      ? toAmountBasedOnRatio\r\n      : fromAmount.mul(fromTokenMinPrice).div(toTokenPriceUsd || toTokenMaxPrice);\r\n\r\n  let usdgAmount = fromAmount.mul(fromTokenMinPrice).div(PRECISION);\r\n  usdgAmount = adjustForDecimals(usdgAmount, fromToken.decimals, USDG_DECIMALS);\r\n  const swapFeeBasisPoints =\r\n    fromToken.isStable && toToken.isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n  const taxBasisPoints = fromToken.isStable && toToken.isStable ? STABLE_TAX_BASIS_POINTS : TAX_BASIS_POINTS;\r\n  const feeBasisPoints0 = getFeeBasisPoints(\r\n    fromToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    true,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints1 = getFeeBasisPoints(\r\n    toToken,\r\n    usdgAmount,\r\n    swapFeeBasisPoints,\r\n    taxBasisPoints,\r\n    false,\r\n    usdgSupply,\r\n    totalTokenWeights\r\n  );\r\n  const feeBasisPoints = feeBasisPoints0 > feeBasisPoints1 ? feeBasisPoints0 : feeBasisPoints1;\r\n\r\n  return {\r\n    amount: adjustDecimals(toAmount.mul(BASIS_POINTS_DIVISOR - feeBasisPoints).div(BASIS_POINTS_DIVISOR)),\r\n    feeBasisPoints,\r\n  };\r\n}\r\n\r\nexport function getProfitPrice(closePrice, position) {\r\n  let profitPrice;\r\n  if (position && position.averagePrice && closePrice) {\r\n    profitPrice = position.isLong\r\n      ? position.averagePrice.mul(BASIS_POINTS_DIVISOR + MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR)\r\n      : position.averagePrice.mul(BASIS_POINTS_DIVISOR - MIN_PROFIT_BIPS).div(BASIS_POINTS_DIVISOR);\r\n  }\r\n  return profitPrice;\r\n}\r\n\r\nexport function calculatePositionDelta(\r\n  price,\r\n  { size, collateral, isLong, averagePrice, lastIncreasedTime },\r\n  sizeDelta\r\n) {\r\n  if (!sizeDelta) {\r\n    sizeDelta = size;\r\n  }\r\n  const priceDelta = averagePrice.gt(price) ? averagePrice.sub(price) : price.sub(averagePrice);\r\n  let delta = sizeDelta.mul(priceDelta).div(averagePrice);\r\n  const pendingDelta = delta;\r\n\r\n  const minProfitExpired = lastIncreasedTime + MIN_PROFIT_TIME < Date.now() / 1000;\r\n  const hasProfit = isLong ? price.gt(averagePrice) : price.lt(averagePrice);\r\n  if (!minProfitExpired && hasProfit && delta.mul(BASIS_POINTS_DIVISOR).lte(size.mul(MIN_PROFIT_BIPS))) {\r\n    delta = bigNumberify(0);\r\n  }\r\n\r\n  const deltaPercentage = delta.mul(BASIS_POINTS_DIVISOR).div(collateral);\r\n  const pendingDeltaPercentage = pendingDelta.mul(BASIS_POINTS_DIVISOR).div(collateral);\r\n\r\n  return {\r\n    delta,\r\n    pendingDelta,\r\n    pendingDeltaPercentage,\r\n    hasProfit,\r\n    deltaPercentage,\r\n  };\r\n}\r\n\r\nexport function getDeltaStr({ delta, deltaPercentage, hasProfit }) {\r\n  let deltaStr;\r\n  let deltaPercentageStr;\r\n\r\n  if (delta.gt(0)) {\r\n    deltaStr = hasProfit ? \"+\" : \"-\";\r\n    deltaPercentageStr = hasProfit ? \"+\" : \"-\";\r\n  } else {\r\n    deltaStr = \"\";\r\n    deltaPercentageStr = \"\";\r\n  }\r\n  deltaStr += `$${formatAmount(delta, USD_DECIMALS, 2, true)}`;\r\n  deltaPercentageStr += `${formatAmount(deltaPercentage, 2, 2)}%`;\r\n\r\n  return { deltaStr, deltaPercentageStr };\r\n}\r\n\r\nexport function getLeverage({\r\n  size,\r\n  sizeDelta,\r\n  increaseSize,\r\n  collateral,\r\n  collateralDelta,\r\n  increaseCollateral,\r\n  entryFundingRate,\r\n  cumulativeFundingRate,\r\n  hasProfit,\r\n  delta,\r\n  includeDelta,\r\n}) {\r\n  if (!size && !sizeDelta) {\r\n    return;\r\n  }\r\n  if (!collateral && !collateralDelta) {\r\n    return;\r\n  }\r\n\r\n  let nextSize = size ? size : bigNumberify(0);\r\n  if (sizeDelta) {\r\n    if (increaseSize) {\r\n      nextSize = size.add(sizeDelta);\r\n    } else {\r\n      if (sizeDelta.gte(size)) {\r\n        return;\r\n      }\r\n      nextSize = size.sub(sizeDelta);\r\n    }\r\n  }\r\n\r\n  let remainingCollateral = collateral ? collateral : bigNumberify(0);\r\n  if (collateralDelta) {\r\n    if (increaseCollateral) {\r\n      remainingCollateral = collateral.add(collateralDelta);\r\n    } else {\r\n      if (collateralDelta.gte(collateral)) {\r\n        return;\r\n      }\r\n      remainingCollateral = collateral.sub(collateralDelta);\r\n    }\r\n  }\r\n\r\n  if (delta && includeDelta) {\r\n    if (hasProfit) {\r\n      remainingCollateral = remainingCollateral.add(delta);\r\n    } else {\r\n      if (delta.gt(remainingCollateral)) {\r\n        return;\r\n      }\r\n\r\n      remainingCollateral = remainingCollateral.sub(delta);\r\n    }\r\n  }\r\n\r\n  if (remainingCollateral.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  remainingCollateral = sizeDelta\r\n    ? remainingCollateral.mul(BASIS_POINTS_DIVISOR - MARGIN_FEE_BASIS_POINTS).div(BASIS_POINTS_DIVISOR)\r\n    : remainingCollateral;\r\n  if (entryFundingRate && cumulativeFundingRate) {\r\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\r\n    remainingCollateral = remainingCollateral.sub(fundingFee);\r\n  }\r\n\r\n  return nextSize.mul(BASIS_POINTS_DIVISOR).div(remainingCollateral);\r\n}\r\n\r\nexport function getLiquidationPrice(data) {\r\n  let {\r\n    isLong,\r\n    size,\r\n    collateral,\r\n    averagePrice,\r\n    entryFundingRate,\r\n    cumulativeFundingRate,\r\n    sizeDelta,\r\n    collateralDelta,\r\n    increaseCollateral,\r\n    increaseSize,\r\n    delta,\r\n    hasProfit,\r\n    includeDelta,\r\n  } = data;\r\n  if (!size || !collateral || !averagePrice) {\r\n    return;\r\n  }\r\n\r\n  let nextSize = size ? size : bigNumberify(0);\r\n  let remainingCollateral = collateral;\r\n\r\n  if (sizeDelta) {\r\n    if (increaseSize) {\r\n      nextSize = size.add(sizeDelta);\r\n    } else {\r\n      if (sizeDelta.gte(size)) {\r\n        return;\r\n      }\r\n      nextSize = size.sub(sizeDelta);\r\n    }\r\n\r\n    if (includeDelta && !hasProfit) {\r\n      const adjustedDelta = sizeDelta.mul(delta).div(size);\r\n      remainingCollateral = remainingCollateral.sub(adjustedDelta);\r\n    }\r\n  }\r\n\r\n  if (collateralDelta) {\r\n    if (increaseCollateral) {\r\n      remainingCollateral = remainingCollateral.add(collateralDelta);\r\n    } else {\r\n      if (collateralDelta.gte(remainingCollateral)) {\r\n        return;\r\n      }\r\n      remainingCollateral = remainingCollateral.sub(collateralDelta);\r\n    }\r\n  }\r\n\r\n  let positionFee = getMarginFee(size).add(LIQUIDATION_FEE);\r\n  if (entryFundingRate && cumulativeFundingRate) {\r\n    const fundingFee = size.mul(cumulativeFundingRate.sub(entryFundingRate)).div(FUNDING_RATE_PRECISION);\r\n    positionFee = positionFee.add(fundingFee);\r\n  }\r\n\r\n  const liquidationPriceForFees = getLiquidationPriceFromDelta({\r\n    liquidationAmount: positionFee,\r\n    size: nextSize,\r\n    collateral: remainingCollateral,\r\n    averagePrice,\r\n    isLong,\r\n  });\r\n\r\n  const liquidationPriceForMaxLeverage = getLiquidationPriceFromDelta({\r\n    liquidationAmount: nextSize.mul(BASIS_POINTS_DIVISOR).div(MAX_LEVERAGE),\r\n    size: nextSize,\r\n    collateral: remainingCollateral,\r\n    averagePrice,\r\n    isLong,\r\n  });\r\n\r\n  if (!liquidationPriceForFees) {\r\n    return liquidationPriceForMaxLeverage;\r\n  }\r\n  if (!liquidationPriceForMaxLeverage) {\r\n    return liquidationPriceForFees;\r\n  }\r\n\r\n  if (isLong) {\r\n    // return the higher price\r\n    return liquidationPriceForFees.gt(liquidationPriceForMaxLeverage)\r\n      ? liquidationPriceForFees\r\n      : liquidationPriceForMaxLeverage;\r\n  }\r\n\r\n  // return the lower price\r\n  return liquidationPriceForFees.lt(liquidationPriceForMaxLeverage)\r\n    ? liquidationPriceForFees\r\n    : liquidationPriceForMaxLeverage;\r\n}\r\n\r\nexport function getUsd(amount, tokenAddress, max, infoTokens, orderOption, triggerPriceUsd) {\r\n  if (!amount) {\r\n    return;\r\n  }\r\n  if (tokenAddress === USDG_ADDRESS) {\r\n    return amount.mul(PRECISION).div(expandDecimals(1, 18));\r\n  }\r\n  const info = getTokenInfo(infoTokens, tokenAddress);\r\n  const price = getTriggerPrice(tokenAddress, max, info, orderOption, triggerPriceUsd);\r\n  if (!price) {\r\n    return;\r\n  }\r\n\r\n  return amount.mul(price).div(expandDecimals(1, info.decimals));\r\n}\r\n\r\nexport function getPositionKey(account, collateralTokenAddress, indexTokenAddress, isLong, nativeTokenAddress) {\r\n  const tokenAddress0 = collateralTokenAddress === AddressZero ? nativeTokenAddress : collateralTokenAddress;\r\n  const tokenAddress1 = indexTokenAddress === AddressZero ? nativeTokenAddress : indexTokenAddress;\r\n  return account + \":\" + tokenAddress0 + \":\" + tokenAddress1 + \":\" + isLong;\r\n}\r\n\r\nexport function getPositionContractKey(account, collateralToken, indexToken, isLong) {\r\n  return ethers.utils.solidityKeccak256(\r\n    [\"address\", \"address\", \"address\", \"bool\"],\r\n    [account, collateralToken, indexToken, isLong]\r\n  );\r\n}\r\n\r\nexport function getSwapFeeBasisPoints(isStable) {\r\n  return isStable ? STABLE_SWAP_FEE_BASIS_POINTS : SWAP_FEE_BASIS_POINTS;\r\n}\r\n\r\n// BSC TESTNET\r\n// const RPC_PROVIDERS = [\r\n//   \"https://data-seed-prebsc-1-s1.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s1.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-1-s2.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s2.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-1-s3.binance.org:8545\",\r\n//   \"https://data-seed-prebsc-2-s3.binance.org:8545\"\r\n// ]\r\n\r\n// BSC MAINNET\r\nexport const BSC_RPC_PROVIDERS = [\r\n  \"https://bsc-dataseed.binance.org\",\r\n  \"https://bsc-dataseed1.defibit.io\",\r\n  \"https://bsc-dataseed1.ninicoin.io\",\r\n  \"https://bsc-dataseed2.defibit.io\",\r\n  \"https://bsc-dataseed3.defibit.io\",\r\n  \"https://bsc-dataseed4.defibit.io\",\r\n  \"https://bsc-dataseed2.ninicoin.io\",\r\n  \"https://bsc-dataseed3.ninicoin.io\",\r\n  \"https://bsc-dataseed4.ninicoin.io\",\r\n  \"https://bsc-dataseed1.binance.org\",\r\n  \"https://bsc-dataseed2.binance.org\",\r\n  \"https://bsc-dataseed3.binance.org\",\r\n  \"https://bsc-dataseed4.binance.org\",\r\n];\r\n\r\nconst RPC_PROVIDERS = {\r\n  [MAINNET]: BSC_RPC_PROVIDERS,\r\n  [ARBITRUM]: ARBITRUM_RPC_PROVIDERS,\r\n  [AVALANCHE]: AVALANCHE_RPC_PROVIDERS,\r\n};\r\n\r\nconst FALLBACK_PROVIDERS = {\r\n  [ARBITRUM]: [getAlchemyHttpUrl()],\r\n  [AVALANCHE]: [\"https://avax-mainnet.gateway.pokt.network/v1/lb/626f37766c499d003aada23b\"],\r\n};\r\n\r\nexport function shortenAddress(address, length) {\r\n  if (!length) {\r\n    return \"\";\r\n  }\r\n  if (!address) {\r\n    return address;\r\n  }\r\n  if (address.length < 10) {\r\n    return address;\r\n  }\r\n  let left = Math.floor((length - 3) / 2) + 1;\r\n  return address.substring(0, left) + \"...\" + address.substring(address.length - (length - (left + 3)), address.length);\r\n}\r\n\r\nexport function formatDateTime(time) {\r\n  return formatDateFn(time * 1000, \"dd MMM yyyy, h:mm a\");\r\n}\r\n\r\nexport function getTimeRemaining(time) {\r\n  const now = parseInt(Date.now() / 1000);\r\n  if (time < now) {\r\n    return \"0h 0m\";\r\n  }\r\n  const diff = time - now;\r\n  const hours = parseInt(diff / (60 * 60));\r\n  const minutes = parseInt((diff - hours * 60 * 60) / 60);\r\n  return `${hours}h ${minutes}m`;\r\n}\r\n\r\nexport function formatDate(time) {\r\n  return formatDateFn(time * 1000, \"dd MMM yyyy\");\r\n}\r\n\r\nexport function hasMetaMaskWalletExtension() {\r\n  return window.ethereum;\r\n}\r\n\r\nexport function hasCoinBaseWalletExtension() {\r\n  const { ethereum } = window;\r\n\r\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet) {\r\n    return false;\r\n  }\r\n  return window.ethereum.isCoinbaseWallet || ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\r\n}\r\n\r\nexport function activateInjectedProvider(providerName) {\r\n  const { ethereum } = window;\r\n\r\n  if (!ethereum?.providers && !ethereum?.isCoinbaseWallet && !ethereum?.isMetaMask) {\r\n    return undefined;\r\n  }\r\n\r\n  let provider;\r\n  if (ethereum?.providers) {\r\n    switch (providerName) {\r\n      case \"CoinBase\":\r\n        provider = ethereum.providers.find(({ isCoinbaseWallet }) => isCoinbaseWallet);\r\n        break;\r\n      case \"MetaMask\":\r\n      default:\r\n        provider = ethereum.providers.find(({ isMetaMask }) => isMetaMask);\r\n        break;\r\n    }\r\n  }\r\n\r\n  if (provider) {\r\n    ethereum.setSelectedProvider(provider);\r\n  }\r\n}\r\n\r\nexport function getInjectedConnector() {\r\n  return injectedConnector;\r\n}\r\n\r\nexport function useChainId() {\r\n  let { chainId } = useWeb3React();\r\n\r\n  if (!chainId) {\r\n    const chainIdFromLocalStorage = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\r\n    if (chainIdFromLocalStorage) {\r\n      chainId = parseInt(chainIdFromLocalStorage);\r\n      if (!chainId) {\r\n        // localstorage value is invalid\r\n        localStorage.removeItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!chainId || !supportedChainIds.includes(chainId)) {\r\n    chainId = DEFAULT_CHAIN_ID;\r\n  }\r\n  return { chainId };\r\n}\r\n\r\nexport function useENS(address) {\r\n  const [ensName, setENSName] = useState();\r\n\r\n  useEffect(() => {\r\n    async function resolveENS() {\r\n      if (address) {\r\n        const provider = new ethers.providers.JsonRpcProvider(\"https://rpc.ankr.com/eth\");\r\n        const name = await provider.lookupAddress(address.toLowerCase());\r\n        if (name) setENSName(name);\r\n      }\r\n    }\r\n    resolveENS();\r\n  }, [address]);\r\n\r\n  return { ensName };\r\n}\r\n\r\nexport function clearWalletConnectData() {\r\n  localStorage.removeItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\r\n}\r\n\r\nexport function clearWalletLinkData() {\r\n  Object.entries(localStorage)\r\n    .map((x) => x[0])\r\n    .filter((x) => x.startsWith(WALLET_LINK_LOCALSTORAGE_PREFIX))\r\n    .map((x) => localStorage.removeItem(x));\r\n}\r\n\r\nexport function useEagerConnect(setActivatingConnector) {\r\n  const { activate, active } = useWeb3React();\r\n  const [tried, setTried] = useState(false);\r\n\r\n  useEffect(() => {\r\n    (async function () {\r\n      if (Boolean(localStorage.getItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY)) !== true) {\r\n        // only works with WalletConnect\r\n        clearWalletConnectData();\r\n        // force clear localStorage connection for MM/CB Wallet (Brave legacy)\r\n        clearWalletLinkData();\r\n        return;\r\n      }\r\n\r\n      let shouldTryWalletConnect = false;\r\n      try {\r\n        // naive validation to not trigger Wallet Connect if data is corrupted\r\n        const rawData = localStorage.getItem(WALLET_CONNECT_LOCALSTORAGE_KEY);\r\n        if (rawData) {\r\n          const data = JSON.parse(rawData);\r\n          if (data && data.connected) {\r\n            shouldTryWalletConnect = true;\r\n          }\r\n        }\r\n      } catch (ex) {\r\n        if (ex instanceof SyntaxError) {\r\n          // rawData is not a valid json\r\n          clearWalletConnectData();\r\n        }\r\n      }\r\n\r\n      if (shouldTryWalletConnect) {\r\n        try {\r\n          const connector = getWalletConnectConnector();\r\n          setActivatingConnector(connector);\r\n          await activate(connector, undefined, true);\r\n          // in case Wallet Connect is activated no need to check injected wallet\r\n          return;\r\n        } catch (ex) {\r\n          // assume data in localstorage is corrupted and delete it to not retry on next page load\r\n          clearWalletConnectData();\r\n        }\r\n      }\r\n\r\n      try {\r\n        const connector = getInjectedConnector();\r\n        const currentProviderName = localStorage.getItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY) ?? false;\r\n        if (currentProviderName !== false) {\r\n          activateInjectedProvider(currentProviderName);\r\n        }\r\n        const authorized = await connector.isAuthorized();\r\n        if (authorized) {\r\n          setActivatingConnector(connector);\r\n          await activate(connector, undefined, true);\r\n        }\r\n      } catch (ex) {}\r\n\r\n      setTried(true);\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // intentionally only running on mount (make sure it's only mounted once :))\r\n\r\n  // if the connection worked, wait until we get confirmation of that to flip the flag\r\n  useEffect(() => {\r\n    if (!tried && active) {\r\n      setTried(true);\r\n    }\r\n  }, [tried, active]);\r\n\r\n  return tried;\r\n}\r\n\r\nexport function useInactiveListener(suppress = false) {\r\n  const injected = getInjectedConnector();\r\n  const { active, error, activate } = useWeb3React();\r\n\r\n  useEffect(() => {\r\n    const { ethereum } = window;\r\n    if (ethereum && ethereum.on && !active && !error && !suppress) {\r\n      const handleConnect = () => {\r\n        activate(injected);\r\n      };\r\n      const handleChainChanged = (chainId) => {\r\n        activate(injected);\r\n      };\r\n      const handleAccountsChanged = (accounts) => {\r\n        if (accounts.length > 0) {\r\n          activate(injected);\r\n        }\r\n      };\r\n      const handleNetworkChanged = (networkId) => {\r\n        activate(injected);\r\n      };\r\n\r\n      ethereum.on(\"connect\", handleConnect);\r\n      ethereum.on(\"chainChanged\", handleChainChanged);\r\n      ethereum.on(\"accountsChanged\", handleAccountsChanged);\r\n      ethereum.on(\"networkChanged\", handleNetworkChanged);\r\n\r\n      return () => {\r\n        if (ethereum.removeListener) {\r\n          ethereum.removeListener(\"connect\", handleConnect);\r\n          ethereum.removeListener(\"chainChanged\", handleChainChanged);\r\n          ethereum.removeListener(\"accountsChanged\", handleAccountsChanged);\r\n          ethereum.removeListener(\"networkChanged\", handleNetworkChanged);\r\n        }\r\n      };\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [active, error, suppress, activate]);\r\n}\r\n\r\nexport function getProvider(library, chainId) {\r\n  let provider;\r\n  if (library) {\r\n    return library.getSigner();\r\n  }\r\n  provider = _.sample(RPC_PROVIDERS[chainId]);\r\n  return new ethers.providers.StaticJsonRpcProvider(provider, { chainId });\r\n}\r\n\r\nexport function getFallbackProvider(chainId) {\r\n  if (!FALLBACK_PROVIDERS[chainId]) {\r\n    return;\r\n  }\r\n\r\n  const provider = _.sample(FALLBACK_PROVIDERS[chainId]);\r\n  return new ethers.providers.StaticJsonRpcProvider(provider, { chainId });\r\n}\r\n\r\nexport function bigNumberify(n) {\r\n  try {\r\n    return ethers.BigNumber.from(n);\r\n  } catch (e) {\r\n    console.error(\"bigNumberify error\", e);\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function expandDecimals(n, decimals) {\r\n  return bigNumberify(n).mul(bigNumberify(10).pow(decimals));\r\n}\r\n\r\nexport const trimZeroDecimals = (amount) => {\r\n  if (parseFloat(amount) === parseInt(amount)) {\r\n    return parseInt(amount).toString();\r\n  }\r\n  return amount;\r\n};\r\n\r\nexport const limitDecimals = (amount, maxDecimals) => {\r\n  let amountStr = amount.toString();\r\n  \r\n  if (maxDecimals === undefined) {\r\n    return amountStr;\r\n  }\r\n  if (maxDecimals === 0) {\r\n    return amountStr.split(\".\")[0];\r\n  }\r\n  const dotIndex = amountStr.indexOf(\".\");\r\n  if (dotIndex !== -1) {\r\n    let decimals = amountStr.length - dotIndex - 1;\r\n    if (decimals > maxDecimals) {\r\n      amountStr = amountStr.substr(0, amountStr.length - (decimals - maxDecimals));\r\n    }\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const padDecimals = (amount, minDecimals) => {\r\n  let amountStr = amount.toString();\r\n  const dotIndex = amountStr.indexOf(\".\");\r\n  if (dotIndex !== -1) {\r\n    const decimals = amountStr.length - dotIndex - 1;\r\n    if (decimals < minDecimals) {\r\n      amountStr = amountStr.padEnd(amountStr.length + (minDecimals - decimals), \"0\");\r\n    }\r\n  } else {\r\n    amountStr = amountStr + \".0000\";\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const formatKeyAmount = (map, key, tokenDecimals, displayDecimals, useCommas) => {\r\n  if (!map || !map[key]) {\r\n    return \"...\";\r\n  }\r\n\r\n  return formatAmount(map[key], tokenDecimals, displayDecimals, useCommas);\r\n};\r\n\r\nexport const formatArrayAmount = (arr, index, tokenDecimals, displayDecimals, useCommas) => {\r\n  if (!arr || !arr[index]) {\r\n    return \"...\";\r\n  }\r\n\r\n  return formatAmount(arr[index], tokenDecimals, displayDecimals, useCommas);\r\n};\r\n\r\nfunction _parseOrdersData(ordersData, account, indexes, extractor, uintPropsLength, addressPropsLength) {\r\n  if (!ordersData || ordersData.length === 0) {\r\n    return [];\r\n  }\r\n  const [uintProps, addressProps] = ordersData;\r\n  const count = uintProps.length / uintPropsLength;\r\n\r\n  const orders = [];\r\n  for (let i = 0; i < count; i++) {\r\n    const sliced = addressProps\r\n      .slice(addressPropsLength * i, addressPropsLength * (i + 1))\r\n      .concat(uintProps.slice(uintPropsLength * i, uintPropsLength * (i + 1)));\r\n\r\n    if (sliced[0] === AddressZero && sliced[1] === AddressZero) {\r\n      continue;\r\n    }\r\n\r\n    const order = extractor(sliced);\r\n    order.index = indexes[i];\r\n    order.account = account;\r\n    orders.push(order);\r\n  }\r\n\r\n  return orders;\r\n}\r\n\r\nfunction parseDecreaseOrdersData(chainId, decreaseOrdersData, account, indexes) {\r\n  const extractor = (sliced) => {\r\n    const isLong = sliced[4].toString() === \"1\";\r\n    return {\r\n      collateralToken: sliced[0],\r\n      indexToken: sliced[1],\r\n      collateralDelta: sliced[2],\r\n      sizeDelta: sliced[3],\r\n      isLong,\r\n      triggerPrice: sliced[5],\r\n      triggerAboveThreshold: sliced[6].toString() === \"1\",\r\n      type: DECREASE,\r\n    };\r\n  };\r\n  return _parseOrdersData(decreaseOrdersData, account, indexes, extractor, 5, 2).filter((order) => {\r\n    return isValidToken(chainId, order.collateralToken) && isValidToken(chainId, order.indexToken);\r\n  });\r\n}\r\n\r\nfunction parseIncreaseOrdersData(chainId, increaseOrdersData, account, indexes) {\r\n  const extractor = (sliced) => {\r\n    const isLong = sliced[5].toString() === \"1\";\r\n    return {\r\n      purchaseToken: sliced[0],\r\n      collateralToken: sliced[1],\r\n      indexToken: sliced[2],\r\n      purchaseTokenAmount: sliced[3],\r\n      sizeDelta: sliced[4],\r\n      isLong,\r\n      triggerPrice: sliced[6],\r\n      triggerAboveThreshold: sliced[7].toString() === \"1\",\r\n      type: INCREASE,\r\n    };\r\n  };\r\n  return _parseOrdersData(increaseOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\r\n    return (\r\n      isValidToken(chainId, order.purchaseToken) &&\r\n      isValidToken(chainId, order.collateralToken) &&\r\n      isValidToken(chainId, order.indexToken)\r\n    );\r\n  });\r\n}\r\n\r\nfunction parseSwapOrdersData(chainId, swapOrdersData, account, indexes) {\r\n  if (!swapOrdersData || !swapOrdersData.length) {\r\n    return [];\r\n  }\r\n\r\n  const extractor = (sliced) => {\r\n    const triggerAboveThreshold = sliced[6].toString() === \"1\";\r\n    const shouldUnwrap = sliced[7].toString() === \"1\";\r\n\r\n    return {\r\n      path: [sliced[0], sliced[1], sliced[2]].filter((address) => address !== AddressZero),\r\n      amountIn: sliced[3],\r\n      minOut: sliced[4],\r\n      triggerRatio: sliced[5],\r\n      triggerAboveThreshold,\r\n      type: SWAP,\r\n      shouldUnwrap,\r\n    };\r\n  };\r\n  return _parseOrdersData(swapOrdersData, account, indexes, extractor, 5, 3).filter((order) => {\r\n    return order.path.every((token) => isValidToken(chainId, token));\r\n  });\r\n}\r\n\r\nexport function getOrderKey(order) {\r\n  return `${order.type}-${order.account}-${order.index}`;\r\n}\r\n\r\nexport function useAccountOrders(flagOrdersEnabled, overrideAccount) {\r\n  const { library, account: connectedAccount } = useWeb3React();\r\n  const active = true; // this is used in Actions.js so set active to always be true\r\n  const account = overrideAccount || connectedAccount;\r\n\r\n  const { chainId } = useChainId();\r\n  const shouldRequest = active && account && flagOrdersEnabled;\r\n\r\n  const orderBookAddress = getContract(chainId, \"OrderBook\");\r\n  const orderBookReaderAddress = getContract(chainId, \"OrderBookReader\");\r\n  const key = shouldRequest ? [active, chainId, orderBookAddress, account] : false;\r\n  const {\r\n    data: orders = [],\r\n    mutate: updateOrders,\r\n    error: ordersError,\r\n  } = useSWR(key, {\r\n    dedupingInterval: 5000,\r\n    fetcher: async (active, chainId, orderBookAddress, account) => {\r\n      const provider = getProvider(library, chainId);\r\n      const orderBookContract = new ethers.Contract(orderBookAddress, OrderBook.abi, provider);\r\n      const orderBookReaderContract = new ethers.Contract(orderBookReaderAddress, OrderBookReader.abi, provider);\r\n\r\n      const fetchIndexesFromServer = () => {\r\n        const ordersIndexesUrl = `${getServerBaseUrl(chainId)}/orders_indices?account=${account}`;\r\n        return fetch(ordersIndexesUrl)\r\n          .then(async (res) => {\r\n            const json = await res.json();\r\n            const ret = {};\r\n            for (const key of Object.keys(json)) {\r\n              ret[key.toLowerCase()] = json[key].map((val) => parseInt(val.value)).sort((a, b) => a - b);\r\n            }\r\n\r\n            return ret;\r\n          })\r\n          .catch(() => ({ swap: [], increase: [], decrease: [] }));\r\n      };\r\n\r\n      const fetchLastIndex = async (type) => {\r\n        const method = type.toLowerCase() + \"OrdersIndex\";\r\n        return await orderBookContract[method](account).then((res) => bigNumberify(res._hex).toNumber());\r\n      };\r\n\r\n      const fetchLastIndexes = async () => {\r\n        const [swap, increase, decrease] = await Promise.all([\r\n          fetchLastIndex(\"swap\"),\r\n          fetchLastIndex(\"increase\"),\r\n          fetchLastIndex(\"decrease\"),\r\n        ]);\r\n\r\n        return { swap, increase, decrease };\r\n      };\r\n\r\n      const getRange = (to, from) => {\r\n        const LIMIT = 10;\r\n        const _indexes = [];\r\n        from = from || Math.max(to - LIMIT, 0);\r\n        for (let i = to - 1; i >= from; i--) {\r\n          _indexes.push(i);\r\n        }\r\n        return _indexes;\r\n      };\r\n\r\n      const getIndexes = (knownIndexes, lastIndex) => {\r\n        if (knownIndexes.length === 0) {\r\n          return getRange(lastIndex);\r\n        }\r\n        return [\r\n          ...knownIndexes,\r\n          ...getRange(lastIndex, knownIndexes[knownIndexes.length - 1] + 1).sort((a, b) => b - a),\r\n        ];\r\n      };\r\n\r\n      const getOrders = async (method, knownIndexes, lastIndex, parseFunc) => {\r\n        const indexes = getIndexes(knownIndexes, lastIndex);\r\n        const ordersData = await orderBookReaderContract[method](orderBookAddress, account, indexes);\r\n        const orders = parseFunc(chainId, ordersData, account, indexes);\r\n\r\n        return orders;\r\n      };\r\n\r\n      try {\r\n        const [serverIndexes, lastIndexes] = await Promise.all([fetchIndexesFromServer(), fetchLastIndexes()]);\r\n        const [swapOrders = [], increaseOrders = [], decreaseOrders = []] = await Promise.all([\r\n          getOrders(\"getSwapOrders\", serverIndexes.swap, lastIndexes.swap, parseSwapOrdersData),\r\n          getOrders(\"getIncreaseOrders\", serverIndexes.increase, lastIndexes.increase, parseIncreaseOrdersData),\r\n          getOrders(\"getDecreaseOrders\", serverIndexes.decrease, lastIndexes.decrease, parseDecreaseOrdersData),\r\n        ]);\r\n        return [...swapOrders, ...increaseOrders, ...decreaseOrders];\r\n      } catch (ex) {\r\n        console.error(ex);\r\n      }\r\n    },\r\n  });\r\n\r\n  return [orders, updateOrders, ordersError];\r\n}\r\n\r\nexport const formatAmount = (amount, tokenDecimals, displayDecimals, useCommas, defaultValue) => {\r\n  if (amount === null) {\r\n    return;\r\n  }\r\n  \r\n  if (!defaultValue) {\r\n    defaultValue = \"...\";\r\n  }\r\n  if (amount === undefined || amount.toString().length === 0) {\r\n    return defaultValue;\r\n  }\r\n  if (displayDecimals === undefined) {\r\n    displayDecimals = 4;\r\n  }\r\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\r\n  amountStr = limitDecimals(amountStr, displayDecimals);\r\n  if (displayDecimals !== 0) {\r\n    amountStr = padDecimals(amountStr, displayDecimals);\r\n  }\r\n  if (useCommas) {\r\n    return numberWithCommas(amountStr);\r\n  }\r\n  return amountStr;\r\n};\r\n\r\nexport const formatAmountFree = (amount, tokenDecimals, displayDecimals) => {\r\n  if (!amount) {\r\n    return \"...\";\r\n  }\r\n  let amountStr = ethers.utils.formatUnits(amount, tokenDecimals);\r\n  amountStr = limitDecimals(amountStr, displayDecimals);\r\n  return trimZeroDecimals(amountStr);\r\n};\r\n\r\nexport const parseValue = (value, tokenDecimals) => {\r\n  const pValue = parseFloat(value);\r\n  if (isNaN(pValue)) {\r\n    return undefined;\r\n  }\r\n  value = limitDecimals(value, tokenDecimals);\r\n  const amount = ethers.utils.parseUnits(value, tokenDecimals);\r\n  return bigNumberify(amount);\r\n};\r\n\r\nexport function numberWithCommas(x) {\r\n  if (!x) {\r\n    return \"...\";\r\n  }\r\n  var parts = x.toString().split(\".\");\r\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  return parts.join(\".\");\r\n}\r\n\r\nexport function getExplorerUrl(chainId) {\r\n  if (chainId === 3) {\r\n    return \"https://ropsten.etherscan.io/\";\r\n  } else if (chainId === 42) {\r\n    return \"https://kovan.etherscan.io/\";\r\n  } else if (chainId === MAINNET) {\r\n    return \"https://bscscan.com/\";\r\n  } else if (chainId === TESTNET) {\r\n    return \"https://testnet.bscscan.com/\";\r\n  } else if (chainId === ARBITRUM_TESTNET) {\r\n    return \"https://testnet.arbiscan.io/\";\r\n  } else if (chainId === ARBITRUM) {\r\n    return \"https://arbiscan.io/\";\r\n  } else if (chainId === AVALANCHE) {\r\n    return \"https://snowtrace.io/\";\r\n  }\r\n  return \"https://etherscan.io/\";\r\n}\r\n\r\nexport function getAccountUrl(chainId, account) {\r\n  if (!account) {\r\n    return getExplorerUrl(chainId);\r\n  }\r\n  return getExplorerUrl(chainId) + \"address/\" + account;\r\n}\r\n\r\nexport function getTokenUrl(chainId, address) {\r\n  if (!address) {\r\n    return getExplorerUrl(chainId);\r\n  }\r\n  return getExplorerUrl(chainId) + \"token/\" + address;\r\n}\r\n\r\nexport function usePrevious(value) {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  });\r\n  return ref.current;\r\n}\r\n\r\nexport function approveTokens({\r\n  setIsApproving,\r\n  library,\r\n  tokenAddress,\r\n  spender,\r\n  chainId,\r\n  onApproveSubmitted,\r\n  getTokenInfo,\r\n  infoTokens,\r\n  pendingTxns,\r\n  setPendingTxns,\r\n  includeMessage,\r\n}) {\r\n  setIsApproving(true);\r\n  const contract = new ethers.Contract(tokenAddress, Token.abi, library.getSigner());\r\n  contract\r\n    .approve(spender, ethers.constants.MaxUint256)\r\n    .then(async (res) => {\r\n      const txUrl = getExplorerUrl(chainId) + \"tx/\" + res.hash;\r\n      helperToast.success(\r\n        <div>\r\n          Approval submitted!{\" \"}\r\n          <a href={txUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            View status.\r\n          </a>\r\n          <br />\r\n        </div>\r\n      );\r\n      if (onApproveSubmitted) {\r\n        onApproveSubmitted();\r\n      }\r\n      if (getTokenInfo && infoTokens && pendingTxns && setPendingTxns) {\r\n        const token = getTokenInfo(infoTokens, tokenAddress);\r\n        const pendingTxn = {\r\n          hash: res.hash,\r\n          message: includeMessage ? `${token.symbol} Approved!` : false,\r\n        };\r\n        setPendingTxns([...pendingTxns, pendingTxn]);\r\n      }\r\n    })\r\n    .catch((e) => {\r\n      console.error(e);\r\n      let failMsg;\r\n      if (\r\n        [\"not enough funds for gas\", \"failed to execute call with revert code InsufficientGasFunds\"].includes(\r\n          e.data?.message\r\n        )\r\n      ) {\r\n        failMsg = (\r\n          <div>\r\n            There is not enough ETH in your account on Arbitrum to send this transaction.\r\n            <br />\r\n            <br />\r\n            <a href={\"https://arbitrum.io/bridge-tutorial/\"} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              Bridge ETH to Arbitrum\r\n            </a>\r\n          </div>\r\n        );\r\n      } else if (e.message?.includes(\"User denied transaction signature\")) {\r\n        failMsg = \"Approval was cancelled\";\r\n      } else {\r\n        failMsg = \"Approval failed\";\r\n      }\r\n      helperToast.error(failMsg);\r\n    })\r\n    .finally(() => {\r\n      setIsApproving(false);\r\n    });\r\n}\r\n\r\nexport const shouldRaiseGasError = (token, amount) => {\r\n  if (!amount) {\r\n    return false;\r\n  }\r\n  if (token.address !== AddressZero) {\r\n    return false;\r\n  }\r\n  if (!token.balance) {\r\n    return false;\r\n  }\r\n  if (amount.gte(token.balance)) {\r\n    return true;\r\n  }\r\n  if (token.balance.sub(amount).lt(DUST_BNB)) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getTokenInfo = (infoTokens, tokenAddress, replaceNative, nativeTokenAddress) => {\r\n  if (replaceNative && tokenAddress === nativeTokenAddress) {\r\n    return infoTokens[AddressZero];\r\n  }\r\n  return infoTokens[tokenAddress];\r\n};\r\n\r\nconst NETWORK_METADATA = {\r\n  [MAINNET]: {\r\n    chainId: \"0x\" + MAINNET.toString(16),\r\n    chainName: \"BSC\",\r\n    nativeCurrency: {\r\n      name: \"BNB\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: BSC_RPC_PROVIDERS,\r\n    blockExplorerUrls: [\"https://bscscan.com\"],\r\n  },\r\n  [TESTNET]: {\r\n    chainId: \"0x\" + TESTNET.toString(16),\r\n    chainName: \"BSC Testnet\",\r\n    nativeCurrency: {\r\n      name: \"BNB\",\r\n      symbol: \"BNB\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: [\"https://data-seed-prebsc-1-s1.binance.org:8545/\"],\r\n    blockExplorerUrls: [\"https://testnet.bscscan.com/\"],\r\n  },\r\n  [ARBITRUM_TESTNET]: {\r\n    chainId: \"0x\" + ARBITRUM_TESTNET.toString(16),\r\n    chainName: \"Arbitrum Testnet\",\r\n    nativeCurrency: {\r\n      name: \"ETH\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: [\"https://rinkeby.arbitrum.io/rpc\"],\r\n    blockExplorerUrls: [\"https://rinkeby-explorer.arbitrum.io/\"],\r\n  },\r\n  [ARBITRUM]: {\r\n    chainId: \"0x\" + ARBITRUM.toString(16),\r\n    chainName: \"Arbitrum\",\r\n    nativeCurrency: {\r\n      name: \"ETH\",\r\n      symbol: \"ETH\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: ARBITRUM_RPC_PROVIDERS,\r\n    blockExplorerUrls: [getExplorerUrl(ARBITRUM)],\r\n  },\r\n  [AVALANCHE]: {\r\n    chainId: \"0x\" + AVALANCHE.toString(16),\r\n    chainName: \"Avalanche\",\r\n    nativeCurrency: {\r\n      name: \"AVAX\",\r\n      symbol: \"AVAX\",\r\n      decimals: 18,\r\n    },\r\n    rpcUrls: AVALANCHE_RPC_PROVIDERS,\r\n    blockExplorerUrls: [getExplorerUrl(AVALANCHE)],\r\n  },\r\n};\r\n\r\nexport const addBscNetwork = async () => {\r\n  return addNetwork(NETWORK_METADATA[MAINNET]);\r\n};\r\n\r\nexport const addNetwork = async (metadata) => {\r\n  await window.ethereum.request({ method: \"wallet_addEthereumChain\", params: [metadata] }).catch();\r\n};\r\n\r\nexport const switchNetwork = async (chainId, active) => {\r\n  if (!active) {\r\n    // chainId in localStorage allows to switch network even if wallet is not connected\r\n    // or there is no wallet at all\r\n    localStorage.setItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY, chainId);\r\n    document.location.reload();\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const chainIdHex = \"0x\" + chainId.toString(16);\r\n    await window.ethereum.request({\r\n      method: \"wallet_switchEthereumChain\",\r\n      params: [{ chainId: chainIdHex }],\r\n    });\r\n    helperToast.success(\"Connected to \" + getChainName(chainId));\r\n    return getChainName(chainId);\r\n  } catch (ex) {\r\n    // https://docs.metamask.io/guide/rpc-api.html#other-rpc-methods\r\n    // This error code indicates that the chain has not been added to MetaMask.\r\n    // 4001 error means user has denied the request\r\n    // If the error code is not 4001, then we need to add the network\r\n    if (ex.code !== 4001) {\r\n      return await addNetwork(NETWORK_METADATA[chainId]);\r\n    }\r\n\r\n    console.error(\"error\", ex);\r\n  }\r\n};\r\n\r\nexport const getWalletConnectHandler = (activate, deactivate, setActivatingConnector) => {\r\n  const fn = async () => {\r\n    const walletConnect = getWalletConnectConnector();\r\n    setActivatingConnector(walletConnect);\r\n    activate(walletConnect, (ex) => {\r\n      if (ex instanceof UnsupportedChainIdError) {\r\n        helperToast.error(\"Unsupported chain. Switch to Arbitrum network on your wallet and try again\");\r\n        console.warn(ex);\r\n      } else if (!(ex instanceof UserRejectedRequestErrorWalletConnect)) {\r\n        helperToast.error(ex.message);\r\n        console.warn(ex);\r\n      }\r\n      clearWalletConnectData();\r\n      deactivate();\r\n    });\r\n  };\r\n  return fn;\r\n};\r\n\r\nexport const getInjectedHandler = (activate) => {\r\n  const fn = async () => {\r\n    activate(getInjectedConnector(), (e) => {\r\n      const chainId = localStorage.getItem(SELECTED_NETWORK_LOCAL_STORAGE_KEY) || DEFAULT_CHAIN_ID;\r\n\r\n      if (e instanceof UnsupportedChainIdError) {\r\n        helperToast.error(\r\n          <div>\r\n            <div>Your wallet is not connected to {getChainName(chainId)}.</div>\r\n            <br />\r\n            <div className=\"clickable underline margin-bottom\" onClick={() => switchNetwork(chainId, true)}>\r\n              Switch to {getChainName(chainId)}\r\n            </div>\r\n            <div className=\"clickable underline\" onClick={() => switchNetwork(chainId, true)}>\r\n              Add {getChainName(chainId)}\r\n            </div>\r\n          </div>\r\n        );\r\n        return;\r\n      }\r\n      const errString = e.message ?? e.toString();\r\n      helperToast.error(errString);\r\n    });\r\n  };\r\n  return fn;\r\n};\r\n\r\nexport function isMobileDevice(navigator) {\r\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n}\r\n\r\nexport function setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress) {\r\n  if (!indexPrices) {\r\n    // console.log('return');\r\n    return;\r\n  }\r\n\r\n  // console.log('-------------------WENT THROUGH')\r\n\r\n  const tokenAddress = token.isNative ? nativeTokenAddress : token.address;\r\n\r\n  const indexPrice = indexPrices[tokenAddress];\r\n  if (!indexPrice) {\r\n    return;\r\n  }\r\n\r\n  const indexPriceBn = bigNumberify(indexPrice);\r\n  if (indexPriceBn.eq(0)) {\r\n    return;\r\n  }\r\n\r\n  const spread = token.maxPrice.sub(token.minPrice);\r\n  const spreadBps = spread.mul(BASIS_POINTS_DIVISOR).div(token.maxPrice.add(token.minPrice).div(2));\r\n\r\n  if (spreadBps.gt(MAX_PRICE_DEVIATION_BASIS_POINTS - 50)) {\r\n    // only set one of the values as there will be a spread between the index price and the Chainlink price\r\n    if (indexPriceBn.gt(token.minPrimaryPrice)) {\r\n      token.maxPrice = indexPriceBn;\r\n    } else {\r\n      token.minPrice = indexPriceBn;\r\n    }\r\n    return;\r\n  }\r\n\r\n  const halfSpreadBps = spreadBps.div(2).toNumber();\r\n  token.maxPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR + halfSpreadBps).div(BASIS_POINTS_DIVISOR);\r\n  token.minPrice = indexPriceBn.mul(BASIS_POINTS_DIVISOR - halfSpreadBps).div(BASIS_POINTS_DIVISOR);\r\n}\r\n\r\nexport function getInfoTokens(\r\n  tokens,\r\n  tokenBalances,\r\n  whitelistedTokens,\r\n  vaultTokenInfo,\r\n  fundingRateInfo,\r\n  vaultPropsLength,\r\n  indexPrices,\r\n  nativeTokenAddress\r\n) {\r\n  if (!vaultPropsLength) {\r\n    vaultPropsLength = 15;\r\n  }\r\n  const fundingRatePropsLength = 2;\r\n  const infoTokens = {};\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const token = JSON.parse(JSON.stringify(tokens[i]));\r\n    if (tokenBalances) {\r\n      token.balance = tokenBalances[i];\r\n    }\r\n    if (token.address === USDG_ADDRESS) {\r\n      token.minPrice = expandDecimals(1, USD_DECIMALS);\r\n      token.maxPrice = expandDecimals(1, USD_DECIMALS);\r\n    }\r\n    infoTokens[token.address] = token;\r\n  }\r\n\r\n  for (let i = 0; i < whitelistedTokens.length; i++) {\r\n    const token = JSON.parse(JSON.stringify(whitelistedTokens[i]));\r\n    if (vaultTokenInfo) {\r\n      token.poolAmount = vaultTokenInfo[i * vaultPropsLength];\r\n      token.reservedAmount = vaultTokenInfo[i * vaultPropsLength + 1];\r\n      token.availableAmount = token.poolAmount.sub(token.reservedAmount);\r\n      token.usdgAmount = vaultTokenInfo[i * vaultPropsLength + 2];\r\n      token.redemptionAmount = vaultTokenInfo[i * vaultPropsLength + 3];\r\n      token.weight = vaultTokenInfo[i * vaultPropsLength + 4];\r\n      token.bufferAmount = vaultTokenInfo[i * vaultPropsLength + 5];\r\n      token.maxUsdgAmount = vaultTokenInfo[i * vaultPropsLength + 6];\r\n      token.globalShortSize = vaultTokenInfo[i * vaultPropsLength + 7];\r\n      token.maxGlobalShortSize = vaultTokenInfo[i * vaultPropsLength + 8];\r\n      token.maxGlobalLongSize = vaultTokenInfo[i * vaultPropsLength + 9];\r\n      token.minPrice = vaultTokenInfo[i * vaultPropsLength + 10];\r\n      token.maxPrice = vaultTokenInfo[i * vaultPropsLength + 11];\r\n      token.guaranteedUsd = vaultTokenInfo[i * vaultPropsLength + 12];\r\n      token.maxPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 13];\r\n      token.minPrimaryPrice = vaultTokenInfo[i * vaultPropsLength + 14];\r\n\r\n      // save minPrice and maxPrice as setTokenUsingIndexPrices may override it\r\n      token.contractMinPrice = token.minPrice;\r\n      token.contractMaxPrice = token.maxPrice;\r\n\r\n      token.maxAvailableShort = bigNumberify(0);\r\n      token.hasMaxAvailableShort = false;\r\n      if (token.maxGlobalShortSize.gt(0)) {\r\n        token.hasMaxAvailableShort = true;\r\n        if (token.maxGlobalShortSize.gt(token.globalShortSize)) {\r\n          token.maxAvailableShort = token.maxGlobalShortSize.sub(token.globalShortSize);\r\n        }\r\n      }\r\n\r\n      if (token.maxUsdgAmount.eq(0)) {\r\n        token.maxUsdgAmount = DEFAULT_MAX_USDG_AMOUNT;\r\n      }\r\n\r\n      token.availableUsd = token.isStable\r\n        ? token.poolAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals))\r\n        : token.availableAmount.mul(token.minPrice).div(expandDecimals(1, token.decimals));\r\n\r\n      token.maxAvailableLong = bigNumberify(0);\r\n      token.hasMaxAvailableLong = false;\r\n      if (token.maxGlobalLongSize.gt(0)) {\r\n        token.hasMaxAvailableLong = true;\r\n\r\n        if (token.maxGlobalLongSize.gt(token.guaranteedUsd)) {\r\n          const remainingLongSize = token.maxGlobalLongSize.sub(token.guaranteedUsd);\r\n          token.maxAvailableLong = remainingLongSize.lt(token.availableUsd) ? remainingLongSize : token.availableUsd;\r\n        }\r\n      } else {\r\n        token.maxAvailableLong = token.availableUsd;\r\n      }\r\n\r\n      token.maxLongCapacity =\r\n        token.maxGlobalLongSize.gt(0) && token.maxGlobalLongSize.lt(token.availableUsd.add(token.guaranteedUsd))\r\n          ? token.maxGlobalLongSize\r\n          : token.availableUsd.add(token.guaranteedUsd);\r\n\r\n      token.managedUsd = token.availableUsd.add(token.guaranteedUsd);\r\n      token.managedAmount = token.managedUsd.mul(expandDecimals(1, token.decimals)).div(token.minPrice);\r\n\r\n      setTokenUsingIndexPrices(token, indexPrices, nativeTokenAddress);\r\n    }\r\n\r\n    if (fundingRateInfo) {\r\n      token.fundingRate = fundingRateInfo[i * fundingRatePropsLength];\r\n      token.cumulativeFundingRate = fundingRateInfo[i * fundingRatePropsLength + 1];\r\n    }\r\n\r\n    if (infoTokens[token.address]) {\r\n      token.balance = infoTokens[token.address].balance;\r\n    }\r\n\r\n    infoTokens[token.address] = token;\r\n  }\r\n\r\n  return infoTokens;\r\n}\r\n\r\nexport const CHART_PERIODS = {\r\n  \"5m\": 60 * 5,\r\n  \"15m\": 60 * 15,\r\n  \"1h\": 60 * 60,\r\n  \"4h\": 60 * 60 * 4,\r\n  \"1d\": 60 * 60 * 24,\r\n};\r\n\r\nexport function getTotalVolumeSum(volumes) {\r\n  if (!volumes || volumes.length === 0) {\r\n    return;\r\n  }\r\n\r\n  let volume = bigNumberify(0);\r\n  for (let i = 0; i < volumes.length; i++) {\r\n    volume = volume.add(volumes[i].data.volume);\r\n  }\r\n\r\n  return volume;\r\n}\r\n\r\nexport function getBalanceAndSupplyData(balances) {\r\n  if (!balances || balances.length === 0) {\r\n    return {};\r\n  }\r\n\r\n  const keys = [\"gmx\", \"esGmx\", \"glp\", \"stakedGmxTracker\"];\r\n  const balanceData = {};\r\n  const supplyData = {};\r\n  const propsLength = 2;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    balanceData[key] = balances[i * propsLength];\r\n    supplyData[key] = balances[i * propsLength + 1];\r\n  }\r\n\r\n  return { balanceData, supplyData };\r\n}\r\n\r\nexport function getDepositBalanceData(depositBalances) {\r\n  if (!depositBalances || depositBalances.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\r\n    \"gmxInStakedGmx\",\r\n    \"esGmxInStakedGmx\",\r\n    \"stakedGmxInBonusGmx\",\r\n    \"bonusGmxInFeeGmx\",\r\n    \"bnGmxInFeeGmx\",\r\n    \"glpInStakedGlp\",\r\n  ];\r\n  const data = {};\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = depositBalances[i];\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getVestingData(vestingInfo) {\r\n  if (!vestingInfo || vestingInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\"gmxVester\", \"glpVester\"];\r\n  const data = {};\r\n  const propsLength = 7;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      pairAmount: vestingInfo[i * propsLength],\r\n      vestedAmount: vestingInfo[i * propsLength + 1],\r\n      escrowedBalance: vestingInfo[i * propsLength + 2],\r\n      claimedAmounts: vestingInfo[i * propsLength + 3],\r\n      claimable: vestingInfo[i * propsLength + 4],\r\n      maxVestableAmount: vestingInfo[i * propsLength + 5],\r\n      averageStakedAmount: vestingInfo[i * propsLength + 6],\r\n    };\r\n\r\n    data[key + \"PairAmount\"] = data[key].pairAmount;\r\n    data[key + \"VestedAmount\"] = data[key].vestedAmount;\r\n    data[key + \"EscrowedBalance\"] = data[key].escrowedBalance;\r\n    data[key + \"ClaimSum\"] = data[key].claimedAmounts.add(data[key].claimable);\r\n    data[key + \"Claimable\"] = data[key].claimable;\r\n    data[key + \"MaxVestableAmount\"] = data[key].maxVestableAmount;\r\n    data[key + \"AverageStakedAmount\"] = data[key].averageStakedAmount;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getStakingData(stakingInfo) {\r\n  if (!stakingInfo || stakingInfo.length === 0) {\r\n    return;\r\n  }\r\n\r\n  const keys = [\"stakedGmxTracker\", \"bonusGmxTracker\", \"feeGmxTracker\", \"stakedGlpTracker\", \"feeGlpTracker\"];\r\n  const data = {};\r\n  const propsLength = 5;\r\n\r\n  for (let i = 0; i < keys.length; i++) {\r\n    const key = keys[i];\r\n    data[key] = {\r\n      claimable: stakingInfo[i * propsLength],\r\n      tokensPerInterval: stakingInfo[i * propsLength + 1],\r\n      averageStakedAmounts: stakingInfo[i * propsLength + 2],\r\n      cumulativeRewards: stakingInfo[i * propsLength + 3],\r\n      totalSupply: stakingInfo[i * propsLength + 4],\r\n    };\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport function getProcessedData(\r\n  balanceData,\r\n  supplyData,\r\n  depositBalanceData,\r\n  stakingData,\r\n  vestingData,\r\n  aum,\r\n  nativeTokenPrice,\r\n  stakedGmxSupply,\r\n  gmxPrice,\r\n  gmxSupply\r\n) {\r\n  if (\r\n    !balanceData ||\r\n    !supplyData ||\r\n    !depositBalanceData ||\r\n    !stakingData ||\r\n    !vestingData ||\r\n    !aum ||\r\n    !nativeTokenPrice ||\r\n    !stakedGmxSupply ||\r\n    !gmxPrice ||\r\n    !gmxSupply\r\n  ) {\r\n    return {};\r\n  }\r\n\r\n  const data = {};\r\n\r\n  data.gmxBalance = balanceData.gmx;\r\n  data.gmxBalanceUsd = balanceData.gmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.gmxSupply = bigNumberify(gmxSupply);\r\n\r\n  data.gmxSupplyUsd = data.gmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.stakedGmxSupply = stakedGmxSupply;\r\n  data.stakedGmxSupplyUsd = stakedGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.gmxInStakedGmx = depositBalanceData.gmxInStakedGmx;\r\n  data.gmxInStakedGmxUsd = depositBalanceData.gmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.esGmxBalance = balanceData.esGmx;\r\n  data.esGmxBalanceUsd = balanceData.esGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGmxTrackerSupply = supplyData.stakedGmxTracker;\r\n  data.stakedGmxTrackerSupplyUsd = supplyData.stakedGmxTracker.mul(gmxPrice).div(expandDecimals(1, 18));\r\n  data.stakedEsGmxSupply = data.stakedGmxTrackerSupply.sub(data.stakedGmxSupply);\r\n  data.stakedEsGmxSupplyUsd = data.stakedEsGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.esGmxInStakedGmx = depositBalanceData.esGmxInStakedGmx;\r\n  data.esGmxInStakedGmxUsd = depositBalanceData.esGmxInStakedGmx.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.bnGmxInFeeGmx = depositBalanceData.bnGmxInFeeGmx;\r\n  data.bonusGmxInFeeGmx = depositBalanceData.bonusGmxInFeeGmx;\r\n  data.feeGmxSupply = stakingData.feeGmxTracker.totalSupply;\r\n  data.feeGmxSupplyUsd = data.feeGmxSupply.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGmxTrackerRewards = stakingData.stakedGmxTracker.claimable;\r\n  data.stakedGmxTrackerRewardsUsd = stakingData.stakedGmxTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.bonusGmxTrackerRewards = stakingData.bonusGmxTracker.claimable;\r\n\r\n  data.feeGmxTrackerRewards = stakingData.feeGmxTracker.claimable;\r\n  data.feeGmxTrackerRewardsUsd = stakingData.feeGmxTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\r\n\r\n  data.boostBasisPoints = bigNumberify(0);\r\n  if (data && data.bnGmxInFeeGmx && data.bonusGmxInFeeGmx && data.bonusGmxInFeeGmx.gt(0)) {\r\n    data.boostBasisPoints = data.bnGmxInFeeGmx.mul(BASIS_POINTS_DIVISOR).div(data.bonusGmxInFeeGmx);\r\n  }\r\n\r\n  data.stakedGmxTrackerAnnualRewardsUsd = stakingData.stakedGmxTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(gmxPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.gmxAprForEsGmx =\r\n    data.stakedGmxTrackerSupplyUsd && data.stakedGmxTrackerSupplyUsd.gt(0)\r\n      ? data.stakedGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.stakedGmxTrackerSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.feeGmxTrackerAnnualRewardsUsd = stakingData.feeGmxTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(nativeTokenPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.gmxAprForNativeToken =\r\n    data.feeGmxSupplyUsd && data.feeGmxSupplyUsd.gt(0)\r\n      ? data.feeGmxTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.feeGmxSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.gmxBoostAprForNativeToken = data.gmxAprForNativeToken.mul(data.boostBasisPoints).div(BASIS_POINTS_DIVISOR);\r\n  data.gmxAprTotal = data.gmxAprForNativeToken.add(data.gmxAprForEsGmx);\r\n  data.gmxAprTotalWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken).add(data.gmxAprForEsGmx);\r\n  data.gmxAprForNativeTokenWithBoost = data.gmxAprForNativeToken.add(data.gmxBoostAprForNativeToken);\r\n\r\n  data.totalGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.feeGmxTrackerRewardsUsd);\r\n\r\n  data.glpSupply = supplyData.glp;\r\n  data.glpPrice =\r\n    data.glpSupply && data.glpSupply.gt(0)\r\n      ? aum.mul(expandDecimals(1, GLP_DECIMALS)).div(data.glpSupply)\r\n      : bigNumberify(0);\r\n\r\n  data.glpSupplyUsd = supplyData.glp.mul(data.glpPrice).div(expandDecimals(1, 18));\r\n\r\n  data.glpBalance = depositBalanceData.glpInStakedGlp;\r\n  data.glpBalanceUsd = depositBalanceData.glpInStakedGlp.mul(data.glpPrice).div(expandDecimals(1, GLP_DECIMALS));\r\n\r\n  data.stakedGlpTrackerRewards = stakingData.stakedGlpTracker.claimable;\r\n  data.stakedGlpTrackerRewardsUsd = stakingData.stakedGlpTracker.claimable.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.feeGlpTrackerRewards = stakingData.feeGlpTracker.claimable;\r\n  data.feeGlpTrackerRewardsUsd = stakingData.feeGlpTracker.claimable.mul(nativeTokenPrice).div(expandDecimals(1, 18));\r\n\r\n  data.stakedGlpTrackerAnnualRewardsUsd = stakingData.stakedGlpTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(gmxPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.glpAprForEsGmx =\r\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\r\n      ? data.stakedGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.feeGlpTrackerAnnualRewardsUsd = stakingData.feeGlpTracker.tokensPerInterval\r\n    .mul(SECONDS_PER_YEAR)\r\n    .mul(nativeTokenPrice)\r\n    .div(expandDecimals(1, 18));\r\n  data.glpAprForNativeToken =\r\n    data.glpSupplyUsd && data.glpSupplyUsd.gt(0)\r\n      ? data.feeGlpTrackerAnnualRewardsUsd.mul(BASIS_POINTS_DIVISOR).div(data.glpSupplyUsd)\r\n      : bigNumberify(0);\r\n  data.glpAprTotal = data.glpAprForNativeToken.add(data.glpAprForEsGmx);\r\n\r\n  data.totalGlpRewardsUsd = data.stakedGlpTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\r\n\r\n  data.totalEsGmxRewards = data.stakedGmxTrackerRewards.add(data.stakedGlpTrackerRewards);\r\n  data.totalEsGmxRewardsUsd = data.stakedGmxTrackerRewardsUsd.add(data.stakedGlpTrackerRewardsUsd);\r\n\r\n  data.gmxVesterRewards = vestingData.gmxVester.claimable;\r\n  data.glpVesterRewards = vestingData.glpVester.claimable;\r\n  data.totalVesterRewards = data.gmxVesterRewards.add(data.glpVesterRewards);\r\n  data.totalVesterRewardsUsd = data.totalVesterRewards.mul(gmxPrice).div(expandDecimals(1, 18));\r\n\r\n  data.totalNativeTokenRewards = data.feeGmxTrackerRewards.add(data.feeGlpTrackerRewards);\r\n  data.totalNativeTokenRewardsUsd = data.feeGmxTrackerRewardsUsd.add(data.feeGlpTrackerRewardsUsd);\r\n\r\n  data.totalRewardsUsd = data.totalEsGmxRewardsUsd.add(data.totalNativeTokenRewardsUsd).add(data.totalVesterRewardsUsd);\r\n\r\n  return data;\r\n}\r\n\r\nexport async function addTokenToMetamask(token) {\r\n  try {\r\n    const wasAdded = await window.ethereum.request({\r\n      method: \"wallet_watchAsset\",\r\n      params: {\r\n        type: \"ERC20\",\r\n        options: {\r\n          address: token.address,\r\n          symbol: token.symbol,\r\n          decimals: token.decimals,\r\n          image: token.imageUrl,\r\n        },\r\n      },\r\n    });\r\n    if (wasAdded) {\r\n      // https://github.com/MetaMask/metamask-extension/issues/11377\r\n      // We can show a toast message when the token is added to metamask but because of the bug we can't. Once the bug is fixed we can show a toast message.\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n\r\nexport function sleep(ms) {\r\n  return new Promise((resolve) => resolve(), ms);\r\n}\r\n\r\nexport function getPageTitle(data) {\r\n  return `${data} | DeDeLend`;\r\n}\r\n\r\nexport function isHashZero(value) {\r\n  return value === ethers.constants.HashZero;\r\n}\r\nexport function isAddressZero(value) {\r\n  return value === ethers.constants.AddressZero;\r\n}\r\n\r\nexport function useDebounce(value, delay) {\r\n  // State and setters for debounced value\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n  useEffect(\r\n    () => {\r\n      // Update debounced value after delay\r\n      const handler = setTimeout(() => {\r\n        setDebouncedValue(value);\r\n      }, delay);\r\n      // Cancel the timeout if value changes (also on delay change or unmount)\r\n      // This is how we prevent debounced value from updating if value is changed ...\r\n      // .. within the delay period. Timeout gets cleared and restarted.\r\n      return () => {\r\n        clearTimeout(handler);\r\n      };\r\n    },\r\n    [value, delay] // Only re-call effect if value or delay changes\r\n  );\r\n  return debouncedValue;\r\n}\r\n\r\nexport function isDevelopment() {\r\n  return !window.location.host?.includes(\"gmx.io\") && !window.location.host?.includes(\"ipfs.io\");\r\n}\r\n\r\nexport function isLocal() {\r\n  return window.location.host?.includes(\"localhost\");\r\n}\r\n\r\nexport function getHomeUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3010\";\r\n  }\r\n\r\n  return \"https://gmx.io\";\r\n}\r\n\r\nexport function getAppBaseUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3011/#\";\r\n  }\r\n\r\n  return \"https://app.gmx.io/#\";\r\n}\r\n\r\nexport function getRootShareApiUrl() {\r\n  if (isLocal()) {\r\n    return \"https://gmxs.vercel.app\";\r\n  }\r\n\r\n  return \"https://share.gmx.io\";\r\n}\r\n\r\nexport function getTradePageUrl() {\r\n  if (isLocal()) {\r\n    return \"http://localhost:3011/#/trade\";\r\n  }\r\n\r\n  return \"https://app.gmx.io/#/trade\";\r\n}\r\n\r\nexport function importImage(name) {\r\n  let tokenImage = null;\r\n  try {\r\n    tokenImage = require(\"../img/\" + name);\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n  return tokenImage && tokenImage.default;\r\n}\r\n\r\nexport function getTwitterIntentURL(text, url = \"\", hashtag = \"\") {\r\n  let finalURL = \"https://twitter.com/intent/tweet?text=\";\r\n  if (text.length > 0) {\r\n    finalURL += encodeURIComponent(text.replace(/[\\r\\n]+/g, \" \"))\r\n      .replace(/\\*%7C/g, \"*|URL:\")\r\n      .replace(/%7C\\*/g, \"|*\");\r\n\r\n    if (hashtag.length > 0) {\r\n      finalURL += \"&hashtags=\" + encodeURIComponent(hashtag.replace(/#/g, \"\"));\r\n    }\r\n    if (url.length > 0) {\r\n      finalURL += \"&url=\" + encodeURIComponent(url);\r\n    }\r\n  }\r\n  return finalURL;\r\n}\r\n\r\nexport function isValidTimestamp(timestamp) {\r\n  return new Date(timestamp).getTime() > 0;\r\n}\r\n\r\nexport function getPositionForOrder(account, order, positionsMap) {\r\n  const key = getPositionKey(account, order.collateralToken, order.indexToken, order.isLong);\r\n  const position = positionsMap[key];\r\n  return position && position.size && position.size.gt(0) ? position : null;\r\n}\r\n\r\nexport function getOrderError(account, order, positionsMap, position) {\r\n  if (order.type !== DECREASE) {\r\n    return;\r\n  }\r\n\r\n  const positionForOrder = position ? position : getPositionForOrder(account, order, positionsMap);\r\n\r\n  if (!positionForOrder) {\r\n    return \"No open position, order cannot be executed unless a position is opened\";\r\n  }\r\n  if (positionForOrder.size.lt(order.sizeDelta)) {\r\n    return \"Order size is bigger than position, will only be executable if position increases\";\r\n  }\r\n\r\n  if (positionForOrder.size.gt(order.sizeDelta)) {\r\n    if (positionForOrder.size.sub(order.sizeDelta).lt(positionForOrder.collateral.sub(order.collateralDelta))) {\r\n      return \"Order cannot be executed as it would reduce the position's leverage below 1\";\r\n    }\r\n    if (positionForOrder.size.sub(order.sizeDelta).lt(expandDecimals(5, USD_DECIMALS))) {\r\n      return \"Order cannot be executed as the remaining position would be smaller than $5.00\";\r\n    }\r\n  }\r\n}\r\n\r\nexport function arrayURLFetcher(...urlArr) {\r\n  const fetcher = (url) => fetch(url).then((res) => res.json());\r\n  return Promise.all(urlArr.map(fetcher));\r\n}\r\n\r\nexport function shouldShowRedirectModal(timestamp) {\r\n  const thirtyDays = 1000 * 60 * 60 * 24 * 30;\r\n  const expiryTime = timestamp + thirtyDays;\r\n  return !isValidTimestamp(timestamp) || Date.now() > expiryTime;\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport cx from \"classnames\";\r\n\r\nimport \"./../../../gmx-test/components/Tab/Tab.css\";\r\nimport \"./TabOptions.scss\";\r\n\r\nexport default function Tab(props) {\r\n  const { options, option, setOption, onChange, type = \"block\", className, optionLabels, icons, disabled, disabledTooltip } = props;\r\n  \r\n  const onClick = (opt) => {\r\n    if (disabled) {\r\n      return;\r\n    }\r\n    \r\n    if (setOption) {\r\n      setOption(opt);\r\n    }\r\n    if (onChange) {\r\n      onChange(opt);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={cx(\"Tab\", type, className, disabled && 'disabled', type === 'inline' && icons && 'Tab-inline-icon')}>\r\n      {options.map((opt) => {\r\n        const label = optionLabels && optionLabels[opt] ? optionLabels[opt] : opt;\r\n        let disabledNode;\r\n        \r\n        if (props.disabledList) {\r\n          props.disabledList.forEach(el => {\r\n            if (el.label === label && el.disabled) {\r\n              disabledNode = (\r\n                <div className={cx(\"Tab-option\", \"tab-tooltip-container\")} onClick={() => {return}} key={opt}>\r\n                  {disabledTooltip}\r\n                  {icons && icons[opt] && <img className=\"Tab-option-icon\" src={opt === option ? (icons[opt + '_active'] ?? icons[opt]) : icons[opt]} alt={option} />}\r\n                  {label}\r\n                </div>\r\n              );\r\n            }\r\n          })\r\n        }\r\n\r\n        if (disabledNode) {\r\n          return disabledNode;\r\n        }\r\n        \r\n        return (\r\n          <div className={cx(\"Tab-option\", \"muted\", { active: opt === option })} onClick={() => onClick(opt)} key={opt}>\r\n            {icons && icons[opt] && <img className=\"Tab-option-icon\" src={opt === option ? (icons[opt + '_active'] ?? icons[opt]) : icons[opt]} alt={option} />}\r\n            {label}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import Slider, { SliderTooltip } from \"rc-slider\";\r\nimport \"rc-slider/assets/index.css\";\r\nimport \"../../../gmx-test/components/Exchange/SwapBox.scss\";\r\nimport \"./SwapBoxOptions.scss\";\r\n\r\nimport cx from \"classnames\";\r\nimport { ethers, BigNumber } from \"ethers\";\r\n\r\nimport {\r\n  ARBITRUM,\r\n  expandDecimals,\r\n  formatAmountFree,\r\n  SWAP_OPTIONS,\r\n  ASSET_OPTIONS,\r\n} from \"../../lib/legacyOptions\";\r\n\r\nimport Tab from \"../Tab/TabOptions\";\r\n\r\nimport { getTokenBySymbol } from \"../../config/Tokens\";\r\n\r\nimport iconBTC from \"../../../../img/icon-BTC.svg\";\r\nimport iconETH from \"../../../../img/icon-ETH.svg\";\r\n\r\nimport { SWAP_ICONS, USD_DECIMALS } from './../../lib/legacyOptions';\r\nimport { format } from \"date-fns\";\r\nimport NumberInput_v3 from './../../../../components/UI/input/NumberInput_v3';\r\nimport { daysToMs, fromBigNumber } from \"../../../../components/utils/utils\";\r\nimport { HEGIC_STRATEGIES, HegicStrategy_ABI, PRICE_CALCULATORS, PriceCalculator_ABI, HEGIC_BUY_URLS, PremiaPools, USDC, OperationalTreasury, OperationalTreasury_ABI, getIsUsdcApproved } from './../../../../components/utils/contracts';\r\nimport Lyra from '@lyrafinance/lyra-js';\r\nimport { sepToNumber } from \"../../../../components/utils/sepThousands\";\r\nimport PremiaPool_ABI from '../../../../deployments/options/PremiaPool_ABI.json';\r\nimport DAI_ABI from '../../../../deployments/options/DAI_ABI.json';\r\nimport { fixedFromFloat, fixedToBn } from '@premia/utils';\r\nimport { tokenDecimals, PremiaStrikeRangeMultiplier, OPTION_TYPES, MAX_FRACTION_LENGTH, OPTIONS_DECIMALS, DDL_WALLET_ENCODED, DDL_WALLET } from './../../../../components/utils/constants';\r\nimport { errAlert } from \"../../../../components/utils/notifications\";\r\n\r\n\r\nconst leverageSliderHandle = (props) => {\r\n  const { value, dragging, index, ...restProps } = props;\r\n  return (\r\n    <SliderTooltip\r\n      prefixCls=\"rc-slider-tooltip\"\r\n      overlay={`${value}`}\r\n      visible={dragging}\r\n      placement=\"top\"\r\n      key={index}\r\n    >\r\n      <Slider.Handle value={value} {...restProps} />\r\n    </SliderTooltip>\r\n  );\r\n};\r\n\r\nexport default function SwapBox(props) {\r\n  const {\r\n    active,\r\n    connectWallet,\r\n    walletAddress,\r\n    library,\r\n    infoTokens,\r\n    selectedToken,\r\n    tokenSelection,\r\n    setTokenSelection,\r\n    assetOption,\r\n    setAssetOption,\r\n    swapOption,\r\n    setSwapOption,\r\n    leverageOption,\r\n    setLeverageOption,\r\n    amountValue,\r\n    setAmountValue,\r\n    options,\r\n    setOptions,\r\n    setOptionsLength,\r\n    setOptionsExpectedLength,\r\n    isOptionsLoading,\r\n    setIsOptionsLoading,\r\n    optionPrices,\r\n    setOptionPrices,\r\n    scrollToList,\r\n    chaiMarkPrice,\r\n  } = props;\r\n  \r\n  const isCall = swapOption === 'Call';\r\n\r\n  const getError = () => {\r\n    if (!amountValue) {\r\n      return `Enter Amount`;\r\n    }\r\n\r\n    if (!chaiMarkPrice) {\r\n      return `Please, wait`;\r\n    }\r\n  };\r\n  const isPrimaryEnabled = () => {\r\n    if (!active) {\r\n      return true;\r\n    }\r\n    \r\n    if (getError()) {\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  };\r\n  const getPrimaryText = () => {\r\n    if (!active) {\r\n      return `Connect wallet`;\r\n    }\r\n    \r\n    const err = getError();\r\n    if (err) {\r\n      return err;\r\n    }\r\n    \r\n    return `See Available Options`;\r\n  };\r\n\r\n  const period = daysToMs(leverageOption);\r\n  const expirationDate = period && (Date.now() + period);\r\n  // Options expire at 8 a.m. UTC\r\n  const expDateUTC = new Date(expirationDate);\r\n  if (expDateUTC.getUTCHours() >= 8) {\r\n    expDateUTC.setUTCDate(expDateUTC.getUTCDate() + 1);\r\n  }\r\n  expDateUTC.setUTCHours(8, 0, 0, 0);\r\n  const periodEightAM = expDateUTC.getTime() - Date.now();\r\n\r\n  // Init Option Amount\r\n  const decimals = tokenDecimals[selectedToken.symbol];\r\n  const amountStr = (sepToNumber(amountValue).toFixed(MAX_FRACTION_LENGTH) * 10**MAX_FRACTION_LENGTH).toFixed(0);\r\n  const amount = BigNumber.from(amountStr).mul(String(10**(decimals - MAX_FRACTION_LENGTH)));\r\n\r\n  const fetchHegicOptions = async (strikes = []) => {\r\n    const periodDays = leverageOption;\r\n    if (periodDays < 7 || periodDays > 90) {\r\n      return;\r\n    }\r\n\r\n    const marketName = \"Hegic\";\r\n    let strategies;\r\n    if (periodDays < 14) {\r\n      strategies = HEGIC_STRATEGIES.short;\r\n    } else if (periodDays < 30) {\r\n      strategies = HEGIC_STRATEGIES.medShort;\r\n    } else if (periodDays < 60) {\r\n      strategies = HEGIC_STRATEGIES.medLong;\r\n    } else if (periodDays <= 90) {\r\n      strategies = HEGIC_STRATEGIES.long;\r\n    }\r\n    const expectedLength = Object.keys(strategies).filter(str => {\r\n      return isCall ? str.includes('CALL') : !str.includes('CALL');\r\n    }).filter(str => {\r\n      return str.split('_')[3] === selectedToken.symbol;\r\n    }).length;\r\n    setOptionsExpectedLength(expectedLength);\r\n    \r\n    for (let i = 0; i < Object.keys(strategies).length; i++) {\r\n      const strategy = Object.keys(strategies)[i];\r\n      const [, strategySentiment, strikeScale, strategyTokenSymbol] = strategy.split('_');\r\n\r\n      const strategyIsCall = strategySentiment === 'CALL';\r\n      if (isCall && !strategyIsCall || !isCall && strategyIsCall) {\r\n        continue;\r\n      }\r\n      if (strategyTokenSymbol !== selectedToken.symbol) {\r\n        continue;\r\n      }\r\n      \r\n      const strike = formatAmountFree(chaiMarkPrice, 8, 2) / 100 * strikeScale;\r\n      strikes.push(expandDecimals(BigNumber.from((strike * 10**2).toFixed(0)), 16));\r\n      \r\n      const strategyAddress = strategies[strategy];\r\n      const strategyContract = new ethers.Contract(strategyAddress, HegicStrategy_ABI, library.getSigner());\r\n      const priceName = `PriceCalculator_${strategySentiment}_${strikeScale}_${strategyTokenSymbol}`;\r\n      const priceAddress = PRICE_CALCULATORS[priceName];\r\n      const priceContract = new ethers.Contract(priceAddress, PriceCalculator_ABI, library.getSigner());\r\n\r\n      const urlName = `${strategySentiment}_${strikeScale}_${strategyTokenSymbol}`;\r\n\r\n      const periodS = (periodEightAM / 1000).toFixed(0);\r\n      strategyContract.getAvailableContracts(periodS, [])\r\n        .then(res => {\r\n          if (res.eq(0)) {\r\n            return;\r\n          }\r\n          \r\n          // Hegic\r\n          options.push({\r\n            strategy,\r\n            market: marketName,\r\n            type: OPTION_TYPES[marketName],\r\n            isCall,\r\n            token: strategyTokenSymbol,\r\n            initSize: amount,\r\n            strike: expandDecimals((strike * 10**2).toFixed(0), 16),\r\n            hasLiquidity: true,\r\n            period: periodEightAM,\r\n            buyUrl: HEGIC_BUY_URLS[urlName] + `&period=${periodDays}`,\r\n            isBuyingEnabled: true,\r\n            contractAddress: OperationalTreasury,\r\n            buy: (size) => {\r\n              const contract = new ethers.Contract(OperationalTreasury, OperationalTreasury_ABI, library.getSigner());\r\n              const amount = size.div(BigNumber.from(10).pow(OPTIONS_DECIMALS - decimals));\r\n\r\n              return contract.buy(\r\n                strategyAddress,\r\n                walletAddress,\r\n                amount,\r\n                periodS,\r\n                [],\r\n              );\r\n            },\r\n            getPremium: (size) => {\r\n              // res format: 1e6; will be formatted in BuyPositionModal\r\n              return priceContract.calculatePremium(periodS, size, 0)\r\n                .then(res => expandDecimals(res, decimals - 6));\r\n            },\r\n          });\r\n          setOptionsLength(options.length);\r\n          setOptions(options);\r\n          if (options.length === expectedLength) {\r\n            setIsOptionsLoading(false);\r\n          }\r\n        })\r\n      \r\n      priceContract.calculatePremium(periodS, amount, 0)\r\n        .then(res => {\r\n          const cost = expandDecimals(res, 12);\r\n          const price = expandDecimals(cost.mul(String(10**3)).div(amount), decimals - 3);\r\n          \r\n          optionPrices[strategy] = { price, cost };\r\n          setOptionPrices(Object.assign({}, optionPrices));\r\n        })\r\n    }\r\n  }\r\n\r\n  const fetchLyraOptions = async (strikes = []) => {\r\n    const lyra = new Lyra(ARBITRUM);\r\n    const marketName = \"Lyra\";\r\n    const token = selectedToken.symbol;\r\n    const periodMs = period;\r\n\r\n    const market = (await lyra.markets()).find(mkt => {\r\n      return mkt.baseToken.symbol === `W${token}`;\r\n    });\r\n\r\n    const boardId = market.liveBoards().reduce((prevBd, curBd) => {\r\n      const prev = prevBd.expiryTimestamp * 10**3;\r\n      const cur = curBd.expiryTimestamp * 10**3;\r\n      const expDate = Date.now() + periodMs;\r\n\r\n      return Math.abs(cur - expDate) < Math.abs(prev - expDate) ? curBd : prevBd;\r\n    }).id;\r\n    const board = market.liveBoardsMap[boardId];\r\n    \r\n    board.strikes.forEach(strike => {\r\n      const { strikeId, strikePrice } = strike;\r\n      strikes.push(strikePrice);\r\n      const strategy = `Lyra_${swapOption.toUpperCase()}_${strikeId.toString()}_${token}`;\r\n\r\n      const getTrade = (size) => {\r\n        const ONE_BN = ethers.constants.WeiPerEther;\r\n        const SLIPPAGE = 0.0015;\r\n        const amount = ONE_BN.mul(size).div(BigNumber.from(10).pow(OPTIONS_DECIMALS));\r\n        \r\n        return (\r\n          market.trade(\r\n            walletAddress,\r\n            strikeId.toNumber(),\r\n            isCall,\r\n            true,\r\n            amount,\r\n            SLIPPAGE,\r\n          )\r\n        )\r\n      };\r\n      \r\n      // Lyra\r\n      options.push({\r\n        strategy,\r\n        market: marketName,\r\n        type: OPTION_TYPES[marketName],\r\n        isCall,\r\n        token,\r\n        initSize: amount,\r\n        strike: strikePrice,\r\n        strikeId,\r\n        period: board.expiry.toString() * 10**3 - Date.now(),\r\n        buyUrl: token === 'ETH'\r\n          ? `https://app.lyra.finance/#/trade/arbitrum/eth-usdc?expiry=${board.expiry.toString()}`\r\n          : `https://app.lyra.finance/#/trade/arbitrum/wbtc-usdc?expiry=${board.expiry.toString()}`,\r\n        isBuyingEnabled: true,\r\n        contractAddress: market.contractAddresses.optionMarket,\r\n        getPremium: async (size) => {\r\n          return (\r\n            (await lyra.quoteOption(market.address, strikeId, isCall, size))\r\n              .ask.premium\r\n          );\r\n        },\r\n        buy: async (size) => {\r\n          const signer = library.getSigner();\r\n          const trade = await getTrade(size);\r\n\r\n          if (trade.isDisabled) {\r\n            console.log(trade);\r\n            errAlert(new Error(trade.disabledReason));\r\n          }\r\n          \r\n          // add referrer\r\n          trade.tx.data = trade.tx.data.substring(0, trade.tx.data.length - DDL_WALLET_ENCODED.length);\r\n          trade.tx.data+= DDL_WALLET_ENCODED;\r\n          // visually\r\n          trade.params[0].referrer = DDL_WALLET;\r\n\r\n          return signer.sendTransaction(trade.tx);\r\n        }\r\n      });\r\n      setOptionsLength(options.length);\r\n      setOptions(options);\r\n\r\n      lyra.quoteOption(market.address, strikeId, isCall, amount)\r\n        .then(res => {\r\n          let index;\r\n          const opt = options.find((opt, i) => {\r\n            if (opt.strategy === strategy) {\r\n              index = i;\r\n              return true;\r\n            }\r\n          })\r\n          \r\n          const price = res.ask.pricePerOption;\r\n          const cost = expandDecimals(res.ask.premium, OPTIONS_DECIMALS - decimals);\r\n          \r\n          if (opt && (cost.eq(0) || res.ask.isDisabled)) {\r\n            options.splice(index, 1);\r\n            return;\r\n          }\r\n          opt.hasLiquidity = true;\r\n          \r\n          optionPrices[strategy] = { price, cost };\r\n          setOptionPrices(Object.assign({}, optionPrices));\r\n        })\r\n    })\r\n  }\r\n\r\n  const fetchPremiaOptions = async (strikes) => {\r\n    if (leverageOption > 90) {\r\n      return;\r\n    }\r\n    const marketName = \"Premia\";\r\n    const token = selectedToken.symbol;\r\n    const address = PremiaPools[token];\r\n    \r\n    const contract = new ethers.Contract(address, PremiaPool_ABI, library.getSigner());\r\n    const base = (await contract.getPoolSettings()).base;\r\n    const baseContract = new ethers.Contract(base, DAI_ABI, library.getSigner());\r\n    \r\n    strikes.forEach(strike => {\r\n      const strikeFormatted = fromBigNumber(strike, OPTIONS_DECIMALS);\r\n      const rangeMultiplier = PremiaStrikeRangeMultiplier[swapOption];\r\n      const markPrice = infoTokens[tokenSelection].maxPrice;\r\n      const markPriceFormatted = fromBigNumber(markPrice, USD_DECIMALS);\r\n      \r\n      const lowerBoundary = ((markPriceFormatted * rangeMultiplier[0]) / 100).toFixed(0) * 100;\r\n      const higherBoundary = ((markPriceFormatted * rangeMultiplier[1]) / 100).toFixed(0) * 100;\r\n      if (strikeFormatted < lowerBoundary || strikeFormatted > higherBoundary) {\r\n        return;\r\n      }\r\n      const strategy = `Premia_${swapOption.toUpperCase()}_${strikeFormatted}_${token}`;\r\n      \r\n      // Premia\r\n      options.push({\r\n        strategy,\r\n        market: marketName,\r\n        type: OPTION_TYPES[marketName],\r\n        isCall,\r\n        token,\r\n        initSize: amount,\r\n        strike,\r\n        liq: null,\r\n        period: periodEightAM,\r\n        buyUrl: `https://app.premia.finance/options/W${token}-DAI`,\r\n      });\r\n      setOptionsLength(options.length);\r\n      setOptions(options);\r\n\r\n      let index;\r\n      const opt = options.find((opt, i) => {\r\n        if (opt.strategy === strategy) {\r\n          index = i;\r\n          return true;\r\n        }\r\n      });\r\n      contract.quote(\r\n        walletAddress,\r\n        expDateUTC.getTime() / 1000,\r\n        fixedFromFloat(strikeFormatted),\r\n        amount,\r\n        isCall,\r\n      ).then(res => {\r\n        let cost = fixedToBn(res.baseCost64x64).add(fixedToBn(res.feeCost64x64));\r\n        if (isCall) {\r\n          cost = cost.mul(BigNumber.from(formatAmountFree(markPrice, USD_DECIMALS, 0)));\r\n        }\r\n        const price = expandDecimals(cost.div(BigNumber.from(amountStr)), MAX_FRACTION_LENGTH);\r\n        optionPrices[strategy] = { price, cost };\r\n\r\n        setOptionPrices(Object.assign({}, optionPrices));\r\n      }, console.log);\r\n\r\n      contract.totalSupply(0)\r\n        .then(res => {\r\n          /* baseContract.totalSupply()\r\n            .then(res => {\r\n                console.log(fromBigNumber(res, 18).toFixed(0));\r\n                formatTokenId({\r\n                  tokenType: fromBigNumber(res, 18).toFixed(0),\r\n                  maturity: BigNumber.from(0),\r\n                  strike64x64: BigNumber.from(0),\r\n                })\r\n              }) */\r\n          \r\n          if (res.lt(amount)) {\r\n            options.splice(index, 1);\r\n          } else {\r\n            opt.hasLiquidity = true;\r\n          }\r\n        }, console.log)\r\n    })\r\n\r\n    setIsOptionsLoading(false);\r\n  }\r\n  \r\n  const strikes = [];\r\n  const fetchAvailableOptions = () => {\r\n    if (isOptionsLoading) {\r\n      return;\r\n    }\r\n    \r\n    strikes.splice(0, strikes.length);\r\n    options.splice(0, options.length);\r\n    setOptionsLength(0);\r\n    Object.keys(optionPrices).forEach(key => {\r\n      optionPrices[key] = undefined;\r\n    });\r\n    \r\n    setIsOptionsLoading(true);\r\n    \r\n    fetchHegicOptions(strikes);\r\n    fetchLyraOptions(strikes)\r\n      .then(() => fetchPremiaOptions(strikes));\r\n  }\r\n\r\n  const onClickPrimary = () => {\r\n    if (!active) {\r\n      connectWallet();\r\n      return;\r\n    }\r\n    \r\n    scrollToList();\r\n    fetchAvailableOptions();\r\n  };\r\n\r\n  const onAssetOptionChange = (opt) => {\r\n    setTokenSelection(getTokenBySymbol(ARBITRUM, opt).address);\r\n    setAssetOption(opt);\r\n  }\r\n  const onSwapOptionChange = (opt) => {\r\n    setSwapOption(opt);\r\n  }\r\n\r\n  const assetIcons = {\r\n    ETH: iconETH,\r\n    BTC: iconBTC,\r\n  }\r\n\r\n  if (!tokenSelection) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className={cx(\"Exchange-swap-box\")}>\r\n      <div className=\"Exchange-swap-box-inner App-box\">\r\n        <div className=\"Exchange-swap-box__settings\">\r\n          <Tab\r\n            icons={SWAP_ICONS}\r\n            options={SWAP_OPTIONS}\r\n            option={swapOption}\r\n            onChange={onSwapOptionChange}\r\n            className={\"Exchange-swap-option-tabs\"}\r\n          />\r\n        </div>\r\n        <div className=\"Exchange-info-row\" style={{ marginBottom: 15 }}>\r\n          <div className=\"Exchange-info-label\">\r\n            Asset\r\n          </div>\r\n          <Tab\r\n            className=\"align-right\"\r\n            icons={assetIcons}\r\n            options={ASSET_OPTIONS}\r\n            type=\"inline\"\r\n            option={assetOption}\r\n            onChange={onAssetOptionChange}\r\n          />\r\n        </div>\r\n        <NumberInput_v3\r\n          value={amountValue}\r\n          setValue={setAmountValue}\r\n          title=\"Amount\"\r\n        />\r\n        <div className=\"Exchange-leverage-box\">\r\n          <div className=\"Exchange-leverage-slider-settings\">\r\n            <div className=\"Exchange-leverage-name\">Period</div>\r\n            <div className=\"Exchange-leverage-value\">\r\n              {leverageOption} {`Day${leverageOption !== 1 ? 's' : ''}`}\r\n            </div>\r\n          </div>\r\n          <div\r\n            className={cx(\"Exchange-leverage-slider\", \"App-slider\")}\r\n          >\r\n            <Slider\r\n              min={1}\r\n              max={120}\r\n              step={1}\r\n              handle={leverageSliderHandle}\r\n              onChange={(value) => setLeverageOption(value)}\r\n              value={leverageOption}\r\n              defaultValue={leverageOption}\r\n            />\r\n          </div>\r\n          <div className=\"Exchange-info-row\">\r\n            <div className=\"Exchange-info-label\">\r\n              Expiration Date\r\n            </div>\r\n            <div className=\"align-right\">\r\n              {format(expDateUTC, 'MM/dd/yy, hh:mm a')}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"Exchange-swap-button-container\">\r\n          <button className={\"Exchange-swap-button btn\" + (isPrimaryEnabled() ? \" btn_hlight\" : \"\")} onClick={onClickPrimary} disabled={!isPrimaryEnabled()}>\r\n            {getPrimaryText()}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Menu } from \"@headlessui/react\";\r\nimport cx from \"classnames\";\r\nimport \"./ChartTokenSelector.scss\";\r\nimport \"../AddressDropdown/AddressDropdown.css\";\r\nimport { getTokens, getWhitelistedTokens } from \"../../config/Tokens\";\r\n\r\nexport default function ChartTokenSelector(props) {\r\n  const { chainId, selectedToken, onSelectToken } = props;\r\n\r\n  let options = getTokens(chainId);\r\n  const whitelistedTokens = getWhitelistedTokens(chainId);\r\n\r\n  const indexTokens = whitelistedTokens.filter((token) => !token.isStable && !token.isWrapped && (token.symbol === 'ETH' || token.symbol === 'BTC'));\r\n\r\n  options = indexTokens;\r\n\r\n  const onSelect = async (token) => {\r\n    onSelectToken(token);\r\n  };\r\n\r\n  const value = selectedToken;\r\n  let icon;\r\n  if (value.symbol) {\r\n    icon = require(\"../../img/ddl/ic_\" + value.symbol?.toLowerCase() + \"_40.svg\")?.default;\r\n  }\r\n\r\n  return (\r\n    <Menu>\r\n      <Menu.Button as=\"div\">\r\n        <button className={cx(\"App-cta small transparent chart-token-selector\")}>\r\n          <div className=\"chart-token-selector--name\">\r\n            <img src={icon} className=\"chart-token-selector--icon\" alt={value.symbol + ' icon'} />\r\n            <span className=\"chart-token-selector--current\">{value.symbol}/USD</span>\r\n          </div>\r\n          <svg className=\"chevron-down\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"21\" viewBox=\"0 0 20 21\" fill=\"none\">\r\n            <path d=\"M4 8L10 13L16 8\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n          </svg>\r\n        </button>\r\n      </Menu.Button>\r\n      <div className=\"chart-token-menu\">\r\n        <Menu.Items as=\"div\" className=\"menu-items chart-token-menu-items divided\">\r\n          {options.map((option, index) => {\r\n            let tokenPopupImage;\r\n            try {\r\n              tokenPopupImage = require(\"../../img/ddl/ic_\" + option.symbol.toLowerCase() + \"_40.svg\");\r\n            } catch (error) {\r\n              tokenPopupImage = require(\"../../img/ddl/ic_eth_40.svg\");\r\n            }\r\n            \r\n            return (<Menu.Item key={index}>\r\n              <div\r\n                className={\"menu-item\" + (option.symbol === value.symbol ? ' chosen' : '')}\r\n                onClick={() => {\r\n                  onSelect(option);\r\n                }}\r\n              >\r\n                <img src={tokenPopupImage?.default} alt={option.symbol + ' icon'} className=\"token-icon\" />\r\n                <span style={{ marginLeft: 7, marginRight: 35 }} className=\"token-label\">\r\n                  {option.symbol} / USD\r\n                </span>\r\n              </div>\r\n            </Menu.Item>)\r\n          })}\r\n        </Menu.Items>\r\n      </div>\r\n    </Menu>\r\n  );\r\n}\r\n","export const REDIRECT_POPUP_TIMESTAMP_KEY = \"redirect-popup-timestamp\";\r\n\r\nexport const IS_TOUCH = \"ontouchstart\" in window;\r\n","import cx from \"classnames\";\r\nimport { useCallback, useState, useRef } from \"react\";\r\nimport { IS_TOUCH } from \"../../config/ui\";\r\n\r\nconst OPEN_DELAY = 0;\r\nconst CLOSE_DELAY = 100;\r\n\r\nexport default function Tooltip(props) {\r\n  const { enabled } = props;\r\n  const [visible, setVisible] = useState(false);\r\n  const intervalCloseRef = useRef(null);\r\n  const intervalOpenRef = useRef(null);\r\n\r\n  const position = props.position ?? \"left-bottom\";\r\n  const trigger = props.trigger ?? \"hover\";\r\n\r\n  const onMouseEnter = useCallback(() => {\r\n    if (trigger !== \"hover\" || IS_TOUCH) return;\r\n\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (!intervalOpenRef.current) {\r\n      intervalOpenRef.current = setTimeout(() => {\r\n        if (enabled) {\r\n          setVisible(true)\r\n        }\r\n        intervalOpenRef.current = null;\r\n      }, OPEN_DELAY);\r\n    }\r\n  }, [setVisible, intervalCloseRef, intervalOpenRef, trigger]);\r\n\r\n  const onMouseClick = useCallback(() => {\r\n    if (trigger !== \"click\" && !IS_TOUCH) return;\r\n    if (intervalCloseRef.current) {\r\n      clearInterval(intervalCloseRef.current);\r\n      intervalCloseRef.current = null;\r\n    }\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n\r\n    if (enabled) {\r\n      setVisible(true)\r\n    }\r\n  }, [setVisible, intervalCloseRef, trigger]);\r\n\r\n  const onMouseLeave = useCallback(() => {\r\n    intervalCloseRef.current = setTimeout(() => {\r\n      setVisible(false);\r\n      intervalCloseRef.current = null;\r\n    }, CLOSE_DELAY);\r\n    if (intervalOpenRef.current) {\r\n      clearInterval(intervalOpenRef.current);\r\n      intervalOpenRef.current = null;\r\n    }\r\n  }, [setVisible, intervalCloseRef]);\r\n\r\n  const className = cx(\"Tooltip\", props.className);\r\n\r\n  return (\r\n    <span className={className} style={props.style} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onMouseClick} id={props.id}>\r\n      <span\r\n        className={cx({ \"Tooltip-handle\": !props.disableHandleStyle }, [props.handleClassName], { active: visible })}\r\n      >\r\n        {props.handle}\r\n      </span>\r\n      {visible && <div className={cx([\"Tooltip-popup\", position])}>{props.renderContent()}</div>}\r\n    </span>\r\n  );\r\n}\r\n","import { useEffect, useState, useRef, useCallback, useMemo } from \"react\";\r\nimport cx from \"classnames\";\r\n\r\nimport { createChart } from \"krasulya-lightweight-charts\";\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  CHART_PERIODS,\r\n  getTokenInfo,\r\n  formatAmount,\r\n  formatDateTime,\r\n  usePrevious,\r\n  useLocalStorageSerializeKey,\r\n  numberWithCommas,\r\n} from \"../../lib/legacyOptions\";\r\nimport { useChartPrices } from \"../../../gmx-test/domain/legacy\";\r\nimport Tab from \"../Tab/TabOptions\";\r\nimport ChartTokenSelector from \"./ChartTokenSelectorOptions\";\r\nimport Tooltip from '../Tooltip/Tooltip';\r\n\r\nconst timezoneOffset = -new Date().getTimezoneOffset() * 60;\r\n\r\nconst DEFAULT_PERIOD = \"4h\";\r\n\r\nconst RED_COLOR = \"#C75E4B\";\r\nconst GREEN_COLOR = \"#46956A\";\r\n\r\nconst getSeriesOptions = () => ({\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/area-series.md\r\n  lineColor: \"#5472cc\",\r\n  topColor: \"rgba(49, 69, 131, 0.4)\",\r\n  bottomColor: \"rgba(42, 64, 103, 0.0)\",\r\n  lineWidth: 2,\r\n  priceLineColor: \"#384263\",\r\n  downColor: RED_COLOR,\r\n  wickDownColor: RED_COLOR,\r\n  upColor: GREEN_COLOR,\r\n  wickUpColor: GREEN_COLOR,\r\n  borderVisible: false,\r\n});\r\n\r\nconst getChartOptions = (width, height) => ({\r\n  width,\r\n  height,\r\n  layout: {\r\n    backgroundColor: \"rgba(255, 255, 255, 0)\",\r\n    textColor: \"#747FA6\",\r\n    fontFamily: \"Gantari\",\r\n  },\r\n  localization: {\r\n    // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#time-format\r\n    timeFormatter: (businessDayOrTimestamp) => {\r\n      return formatDateTime(businessDayOrTimestamp - timezoneOffset);\r\n    },\r\n  },\r\n  grid: {\r\n    vertLines: {\r\n      visible: true,\r\n      color: \"rgba(35, 38, 59, 1)\",\r\n      style: 2,\r\n    },\r\n    horzLines: {\r\n      visible: true,\r\n      color: \"rgba(35, 38, 59, 1)\",\r\n      style: 2,\r\n    },\r\n  },\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/time-scale.md#time-scale\r\n  timeScale: {\r\n    rightOffset: 5,\r\n    borderVisible: false,\r\n    barSpacing: 5,\r\n    timeVisible: true,\r\n    fixLeftEdge: true,\r\n  },\r\n  // https://github.com/tradingview/lightweight-charts/blob/master/docs/customization.md#price-axis\r\n  priceScale: {\r\n    borderVisible: false,\r\n  },\r\n  crosshair: {\r\n    horzLine: {\r\n      color: \"#aaa\",\r\n    },\r\n    vertLine: {\r\n      color: \"#aaa\",\r\n    },\r\n    mode: 0,\r\n  },\r\n});\r\n\r\nexport default function ExchangeTVChart(props) {\r\n  const {\r\n    infoTokens,\r\n    chainId,\r\n    tokenSelection,\r\n    setTokenSelection,\r\n  } = props;\r\n\r\n  const [currentChart, setCurrentChart] = useState();\r\n  const [currentSeries, setCurrentSeries] = useState();\r\n\r\n  let [period, setPeriod] = useLocalStorageSerializeKey([chainId, \"Chart-period\"], DEFAULT_PERIOD);\r\n  if (!(period in CHART_PERIODS)) {\r\n    period = DEFAULT_PERIOD;\r\n  }\r\n\r\n  const [hoveredCandlestick, setHoveredCandlestick] = useState();\r\n\r\n  const [chartToken, setChartToken] = useState({\r\n    maxPrice: null,\r\n    minPrice: null,\r\n  });\r\n  useEffect(() => {\r\n    const tmp = getTokenInfo(infoTokens, tokenSelection);\r\n    setChartToken(tmp);\r\n  }, [tokenSelection, infoTokens]);\r\n\r\n  const symbol = chartToken ? (chartToken.isWrapped ? chartToken.baseSymbol : chartToken.symbol) : undefined;\r\n  const marketName = chartToken ? symbol + \"_USD\" : undefined;\r\n  const previousMarketName = usePrevious(marketName);\r\n\r\n  const ref = useRef(null);\r\n  const chartRef = useRef(null);\r\n\r\n  const currentAveragePrice =\r\n    chartToken.maxPrice && chartToken.minPrice ? chartToken.maxPrice.add(chartToken.minPrice).div(2) : null;\r\n  const [priceData, updatePriceData] = useChartPrices(\r\n    chainId,\r\n    chartToken.symbol,\r\n    chartToken.isStable,\r\n    period,\r\n    currentAveragePrice\r\n  );\r\n\r\n  const [chartInited, setChartInited] = useState(false);\r\n  useEffect(() => {\r\n    if (marketName !== previousMarketName) {\r\n      setChartInited(false);\r\n    }\r\n  }, [marketName, previousMarketName]);\r\n\r\n  const scaleChart = useCallback(() => {\r\n    const from = Date.now() / 1000 - (7 * 24 * CHART_PERIODS[period]) / 2 + timezoneOffset;\r\n    const to = Date.now() / 1000 + timezoneOffset;\r\n    currentChart.timeScale().setVisibleRange({ from, to });\r\n  }, [currentChart, period]);\r\n\r\n  const onCrosshairMove = useCallback(\r\n    (evt) => {\r\n      if (!evt.time) {\r\n        setHoveredCandlestick(null);\r\n        return;\r\n      }\r\n\r\n      for (const point of evt.seriesPrices.values()) {\r\n        setHoveredCandlestick((hoveredCandlestick) => {\r\n          if (hoveredCandlestick && hoveredCandlestick.time === evt.time) {\r\n            // rerender optimisations\r\n            return hoveredCandlestick;\r\n          }\r\n          return {\r\n            time: evt.time,\r\n            ...point,\r\n          };\r\n        });\r\n        break;\r\n      }\r\n    },\r\n    [setHoveredCandlestick]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!ref.current || !priceData || !priceData.length || currentChart) {\r\n      return;\r\n    }\r\n\r\n    const chart = createChart(\r\n      chartRef.current,\r\n      getChartOptions(chartRef.current.offsetWidth, chartRef.current.offsetHeight)\r\n    );\r\n\r\n    chart.subscribeCrosshairMove(onCrosshairMove);\r\n\r\n    const series = chart.addCandlestickSeries(getSeriesOptions());\r\n\r\n    setCurrentChart(chart);\r\n    setCurrentSeries(series);\r\n  }, [ref, priceData, currentChart, onCrosshairMove]);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      updatePriceData(undefined, true);\r\n    }, 10 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, [updatePriceData]);\r\n\r\n  useEffect(() => {\r\n    if (!currentChart) {\r\n      return;\r\n    }\r\n    const resizeChart = () => {\r\n      currentChart.resize(chartRef.current.offsetWidth, chartRef.current.offsetHeight);\r\n    };\r\n    window.addEventListener(\"resize\", resizeChart);\r\n    return () => window.removeEventListener(\"resize\", resizeChart);\r\n  }, [currentChart]);\r\n\r\n  useEffect(() => {\r\n    if (currentSeries && priceData && priceData.length) {\r\n      currentSeries.setData(priceData);\r\n\r\n      if (!chartInited) {\r\n        scaleChart();\r\n        setChartInited(true);\r\n      }\r\n    }\r\n  }, [priceData, currentSeries, chartInited, scaleChart]);\r\n\r\n  const candleStatsHtml = useMemo(() => {\r\n    if (!priceData) {\r\n      return null;\r\n    }\r\n    const candlestick = hoveredCandlestick || priceData[priceData.length - 1];\r\n    if (!candlestick) {\r\n      return null;\r\n    }\r\n\r\n    const className = cx({\r\n      \"ExchangeChart-bottom-stats\": true,\r\n      positive: candlestick.open <= candlestick.close,\r\n      negative: candlestick.open > candlestick.close,\r\n      [`length-${String(parseInt(candlestick.close)).length}`]: true,\r\n    });\r\n\r\n    const toFixedNumbers = 2;\r\n\r\n    return (\r\n      <div className={className}>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">O</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.open.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">H</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.high.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">L</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.low.toFixed(toFixedNumbers)}</span>\r\n        <span className=\"ExchangeChart-bottom-stats-label\">C</span>\r\n        <span className=\"ExchangeChart-bottom-stats-value\">{candlestick.close.toFixed(toFixedNumbers)}</span>\r\n      </div>\r\n    );\r\n  }, [hoveredCandlestick, priceData]);\r\n\r\n  let high;\r\n  let low;\r\n  let deltaPrice;\r\n  let delta;\r\n  let deltaPercentage;\r\n  let deltaPercentageStr;\r\n\r\n  const now = parseInt(Date.now() / 1000);\r\n  const timeThreshold = now - 24 * 60 * 60;\r\n\r\n  if (priceData) {\r\n    for (let i = priceData.length - 1; i > 0; i--) {\r\n      const price = priceData[i];\r\n      if (price.time < timeThreshold) {\r\n        break;\r\n      }\r\n      if (!low) {\r\n        low = price.low;\r\n      }\r\n      if (!high) {\r\n        high = price.high;\r\n      }\r\n\r\n      if (price.high > high) {\r\n        high = price.high;\r\n      }\r\n      if (price.low < low) {\r\n        low = price.low;\r\n      }\r\n\r\n      deltaPrice = price.open;\r\n    }\r\n  }\r\n\r\n  if (deltaPrice && currentAveragePrice) {\r\n    const average = parseFloat(formatAmount(currentAveragePrice, USD_DECIMALS, 2));\r\n    delta = average - deltaPrice;\r\n    deltaPercentage = (delta * 100) / average;\r\n    if (deltaPercentage > 0) {\r\n      deltaPercentageStr = `+${deltaPercentage.toFixed(2)}%`;\r\n    } else {\r\n      deltaPercentageStr = `${deltaPercentage.toFixed(2)}%`;\r\n    }\r\n    if (deltaPercentage === 0) {\r\n      deltaPercentageStr = \"0.00\";\r\n    }\r\n  }\r\n\r\n  if (!chartToken) {\r\n    return null;\r\n  }\r\n\r\n  const onSelectToken = (token) => {\r\n    const tmp = getTokenInfo(infoTokens, token.address);\r\n    setChartToken(tmp);\r\n    setTokenSelection(token.address);\r\n  };\r\n\r\n  return (\r\n    <div className=\"ExchangeChart tv\" ref={ref}>\r\n      <div className=\"ExchangeChart-top App-box App-box-border\">\r\n        <div className=\"ExchangeChart-top-inner\">\r\n          <div>\r\n            <div className=\"ExchangeChart-title\">\r\n              <ChartTokenSelector\r\n                chainId={chainId}\r\n                selectedToken={chartToken}\r\n                infoTokens={infoTokens}\r\n                onSelectToken={onSelectToken}\r\n                className=\"chart-token-selector pos-relative\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"ExchangeChart-stats-container\">\r\n            <div>\r\n              <div className=\"ExchangeChart-info-label\">\r\n                <Tooltip\r\n                  className=\"has-hint-tooltip nowrap cur-price-tooltip\"\r\n                  handle=\"Current Price\"\r\n                  position=\"left-bottom\"\r\n                  enabled={true}\r\n                  renderContent={() => {\r\n                    return (\r\n                      <div className=\"Tooltip__text\">\r\n                        Asset price is taken from GMX\r\n                      </div>\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n              \r\n              {/* <div className=\"ExchangeChart-info-label\">\r\n                Current Price\r\n              </div> */}\r\n              <div className=\"ExchangeChart-main-price\">\r\n                ${chartToken.maxPrice && formatAmount(chartToken.maxPrice, USD_DECIMALS, 2, true)}\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className=\"ExchangeChart-info-label\">24h Change</div>\r\n              <div className={cx({ positive: deltaPercentage > 0, negative: deltaPercentage < 0 })}>\r\n                {!deltaPercentageStr && \"-\"}\r\n                {deltaPercentageStr && deltaPercentageStr}\r\n              </div>\r\n            </div>\r\n            <div className=\"ExchangeChart-additional-info\">\r\n              <div className=\"ExchangeChart-info-label\">24h High</div>\r\n              <div>\r\n                {!high && \"-\"}\r\n                {high && numberWithCommas(high.toFixed(2))}\r\n              </div>\r\n            </div>\r\n            <div className=\"ExchangeChart-additional-info\">\r\n              <div className=\"ExchangeChart-info-label\">24h Low</div>\r\n              <div>\r\n                {!low && \"-\"}\r\n                {low && numberWithCommas(low.toFixed(2))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"ExchangeChart-bottom App-box App-box-border\">\r\n        <div className=\"ExchangeChart-bottom-header\">\r\n          <div className=\"ExchangeChart-bottom-controls\">\r\n            <Tab options={Object.keys(CHART_PERIODS)} option={period} setOption={setPeriod} />\r\n          </div>\r\n          {candleStatsHtml}\r\n        </div>\r\n        <div className=\"ExchangeChart-bottom-content\" ref={chartRef}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { formatAmount } from '../../lib/legacyOptions';\r\nimport { ImSpinner2 } from 'react-icons/im';\r\nimport { USD_DECIMALS, INCREASE, STOP } from '../../lib/legacyOptions';\r\nimport { Trans } from '@lingui/macro';\r\nimport '../../../gmx-test/components/Exchange/PositionsItem.scss';\r\nimport cx from \"classnames\";\r\nimport { OPTIONS_DECIMALS } from '../../../../components/utils/constants';\r\nimport { formatAmountFree, ARBITRUM } from '../../lib/legacyOptions';\r\nimport { getTokenInfo } from '../../../gmx-test/lib/legacy';\r\nimport { getTokenBySymbol } from '../../config/Tokens';\r\nimport { fromBigNumber, msToTimeLeft } from '../../../../components/utils/utils';\r\n\r\nconst PositionsItem = (props) => {\r\n\tconst {\r\n\t\tposition,\r\n\t\tonPositionClick,\r\n\t\tinfoTokens,\r\n\t\tclosePosition,\r\n\t\tisLarge,\r\n\t\tpendingPositions,\r\n\t} = props;\r\n\r\n\tconst markPrice = getTokenInfo(infoTokens, getTokenBySymbol(ARBITRUM, position.token).address).maxPrice;\r\n\tconst expiresIn = position.expiry - Date.now();\r\n\t\r\n\tlet delta = 0, deltaStr = '...', hasPositionProfit = false;\r\n\r\n\tif (position.pnl) {\r\n\t\tconst { unrealizedPnl, unrealizedPnlPercentage } = position.pnl;\r\n\t\tdelta = unrealizedPnl;\r\n\t\t\r\n\t\tdeltaStr = `\r\n\t\t\t${unrealizedPnl.lt(0) ? '-' : ''}$${Math.abs(fromBigNumber(unrealizedPnl, OPTIONS_DECIMALS)).toFixed(2)}\r\n\t\t\t(${formatAmount(unrealizedPnlPercentage, OPTIONS_DECIMALS - 2, 2, true)}%)\r\n\t\t`;\r\n\t\thasPositionProfit = unrealizedPnl.gt(0);\r\n\t}\r\n\r\n\tconst isPending = position.isPending || pendingPositions.find(strat => position.strategy === strat);\r\n\tconst closeBtnDisabled = position.size.eq(0) || position.isClosingDisabled || isPending;\r\n\tconst marketImg = require(`../../../../img/icon-${position.market}_sm.svg`).default;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isLarge ?\r\n\t\t\t\t<tr className={cx(isPending && 'positions-item_pending')}>\r\n\t\t\t\t\t<td className=\"clickable\" onClick={() => onPositionClick(position)}>\r\n\t\t\t\t\t\t<div className=\"Exchange-list-title\">\r\n\t\t\t\t\t\t\t{position.token}\r\n\t\t\t\t\t\t\t{isPending && <ImSpinner2 className=\"spin position-loading-icon\" />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"Exchange-list-info-label\">\r\n\t\t\t\t\t\t\t<img className='market-logo' src={marketImg} alt={`${position.market} icon`} />\r\n\t\t\t\t\t\t\t<span className={cx({ positive: position.isCall, negative: !position.isCall })}>\r\n\t\t\t\t\t\t\t\t{position.isCall ? \"Call\" : \"Put\"}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{formatAmountFree(position.size, OPTIONS_DECIMALS, 3)} {position.token}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t${formatAmount(position.strikePrice, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td style={{width: 135}}>\r\n\t\t\t\t\t\t${formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t${formatAmount(position.premium, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div style={{ width: 100, display: 'block' }}>\r\n\t\t\t\t\t\t\t{delta ? (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-info-label\", {\r\n\t\t\t\t\t\t\t\t\t\tpositive: hasPositionProfit,\r\n\t\t\t\t\t\t\t\t\t\tnegative: !hasPositionProfit,\r\n\t\t\t\t\t\t\t\t\t\tmuted: delta.eq(0),\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{deltaStr}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : deltaStr}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t{msToTimeLeft(expiresIn)}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"td-btn pos-relative\" style={{ width: 110, textAlign: 'center' }}>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"Exchange-list-action\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tclosePosition(position);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={closeBtnDisabled}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t:\r\n\t\t\t<div className={cx(\"App-card\", isPending && 'positions-item_pending')}>\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-content\">\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\t<Trans>Position</Trans>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div className=\"Exchange-list-token\">\r\n\t\t\t\t\t\t\t\t{isPending && <ImSpinner2 className=\"spin position-loading-icon\" style={{marginRight: 10}} />}\r\n\t\t\t\t\t\t\t\t{position.token}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<img className='market-logo' src={marketImg} alt={`${position.market} icon`} />\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-side\", {\r\n\t\t\t\t\t\t\t\t\tpositive: position.isCall,\r\n\t\t\t\t\t\t\t\t\tnegative: !position.isCall,\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{position.isCall ? `Call` : `Put`}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-content\">\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\t<Trans>Amount</Trans>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{formatAmountFree(position.size, OPTIONS_DECIMALS, 3)} {position.token}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\t<Trans>Strike Price</Trans>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t${formatAmount(position.strikePrice, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\t<Trans>Current Price</Trans>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t${formatAmount(markPrice, USD_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tPremium Paid\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t${formatAmount(position.premium, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tPNL (ROE %)\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{delta ? (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"Exchange-list-info-label\", {\r\n\t\t\t\t\t\t\t\t\t\tpositive: hasPositionProfit,\r\n\t\t\t\t\t\t\t\t\t\tnegative: !hasPositionProfit,\r\n\t\t\t\t\t\t\t\t\t\tmuted: delta.eq(0),\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{deltaStr}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : deltaStr}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"App-card-row App-card-row_edit-btn\">\r\n\t\t\t\t\t\t<div className=\"label\">\r\n\t\t\t\t\t\t\tExpires In\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{msToTimeLeft(expiresIn)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"App-card-divider\"></div>\r\n\t\t\t\t<div className=\"App-card-options\">\r\n\t\t\t\t\t<div className=\"App-button-option pos-relative\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"App-button-option App-card-option\"\r\n\t\t\t\t\t\t\tdisabled={closeBtnDisabled}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tclosePosition(position);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tClose\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default PositionsItem;","import { useState } from 'react';\r\nimport Modal from './../../../../components/UI/modal/Modal';\r\nimport { sepToNumber } from '../../../../components/utils/sepThousands';\r\nimport { BigNumber } from 'ethers';\r\nimport NumberInput_v3 from './../../../../components/UI/input/NumberInput_v3';\r\nimport { expandDecimals, formatAmount } from './../../../gmx-test/lib/legacy';\r\nimport { OPTIONS_DECIMALS } from '../../../../components/utils/constants';\r\nimport { executePromise, fromBigNumber, msToTimeLeft } from './../../../../components/utils/utils';\r\nimport { format } from 'date-fns';\r\nimport cx from 'classnames';\r\nimport './PositionModal.scss';\r\nimport { formatAmountFree } from './../../lib/legacyOptions';\r\n\r\nconst ClosePositionModal = (props) => {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tsetVisible,\r\n\t\tposition,\r\n\t\tsetPosition,\r\n\t\tpendingPositions,\r\n\t\tsetPendingPositions,\r\n\t} = props;\r\n\r\n\tconst [sizeValue, setSizeValue] = useState('');\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\tconst [trade, setTrade] = useState(position?.trade);\r\n\r\n\tconst size = expandDecimals(BigNumber.from((sepToNumber(sizeValue) * 10**6).toFixed(0)), 12);\r\n\r\n\tif (position && position.market === \"Lyra\" && !trade) {\r\n\t\tposition.getTrade()\r\n\t\t\t.then(trade => {\r\n\t\t\t\tposition.trade = trade;\r\n\t\t\t\tsetTrade(trade);\r\n\t\t\t})\r\n\t}\r\n\t\r\n\tlet pnl,\r\n\tpnlFormatted,\r\n\tpnlSign,\r\n\tpnlStr,\r\n\tpnlPercentage,\r\n\tpnlPercentageStr;\r\n\tif (position && getError() !== \"Amount exceeds option's size\") {\r\n\t\tif (position.market === \"Lyra\" && trade) {\r\n\t\t\tpnl = trade.pnl();\r\n\t\t\tif (sizeValue) {\r\n\t\t\t\tpnl = size.div(position.size.div(10**6)).mul(pnl).div(10**6);\r\n\t\t\t}\r\n\t\t\tpnlFormatted = formatAmount(pnl.abs(), OPTIONS_DECIMALS, 2, true)\r\n\t\t\tpnlSign = pnl.gt(0) ? \"+\" : (pnl.lt(0) ? \"-\" : \"\");\r\n\t\t\tpnlStr = `${pnlSign}$${pnlFormatted}`;\r\n\t\t\tpnlPercentage = Math.abs(fromBigNumber(pnl) / fromBigNumber(position.premium) * 100);\r\n\t\t\tpnlPercentageStr = `(${pnlSign}${pnlPercentage.toFixed(2)}%)`;\r\n\t\t}\r\n\r\n\t\tif (position.market === \"Hegic\") {\r\n\t\t\tconst { unrealizedPnl, unrealizedPnlPercentage } = position.pnl;\r\n\t\t\tpnl = unrealizedPnl;\r\n\t\t\tpnlPercentage = unrealizedPnlPercentage;\r\n\t\r\n\t\t\tpnlStr = `\r\n\t\t\t\t${pnl.lt(0) ? '-' : ''}$${Math.abs(fromBigNumber(pnl, OPTIONS_DECIMALS)).toFixed(2)}\r\n\t\t\t`;\r\n\t\t\tpnlPercentageStr = `(${formatAmount(pnlPercentage, OPTIONS_DECIMALS - 2, 2, true)}%)`;\r\n\t\t}\r\n\t}\r\n\r\n\tconst onCloseClick = () => {\r\n\t\texecutePromise(position.close, [size], \"Position closed!\", setIsSubmitting,\r\n\t\t() => {\r\n\t\t\tsetVisible(false);\r\n\t\t\tsetPendingPositions([...pendingPositions, position.strategy]);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction getError() {\r\n\t\tif (!position) {\r\n\t\t\treturn \"ERR! No position\";\r\n\t\t}\r\n\r\n\t\tif (position.market === \"Lyra\") {\r\n\t\t\tif (!trade) {\r\n\t\t\t\treturn \"Please, wait\"\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (!sizeValue && position.market !== \"Hegic\") {\r\n\t\t\treturn \"Enter amount\";\r\n\t\t}\r\n\r\n\t\tif (sepToNumber(sizeValue) > fromBigNumber(position.size)) {\r\n\t\t\treturn \"Amount exceeds option's size\";\r\n\t\t}\r\n\r\n\t\tif (isSubmitting) {\r\n\t\t\treturn \"Closing...\";\r\n\t\t}\r\n\t}\r\n\tconst getBtnText = () => {\r\n\t\tconst error = getError();\r\n\t\tif (error) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\t\treturn \"Close\";\r\n\t}\r\n\tconst isBtnEnabled = () => {\r\n\t\tconst hasError = Boolean(getError());\r\n\t\tif (hasError) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst resetModal = () => {\r\n\t\t// animation delay\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetSizeValue('');\r\n\t\t\tsetPosition(null);\r\n\t\t}, 300)\r\n\t}\r\n\t\r\n\tconst marketImg = position\r\n\t\t? require(`../../../../img/icon-${position.market}.svg`).default\r\n\t\t: \"\";\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName={\"CloseOptionModal PositionModal\"}\r\n\t\t\tvisible={visible}\r\n\t\t\tsetVisible={setVisible}\r\n\t\t\tresetModal={resetModal}\r\n\t\t>\r\n\t\t\t<h1 className=\"modal__title\">Close Option</h1>\r\n\t\t\t{position &&\r\n\t\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tMarket\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right PositionModal__market-logo\">\r\n\t\t\t\t\t\t\t<img src={marketImg} alt={`${position.market} logo`} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tType\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{position.type}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tStrategy\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={cx({ positive: position.isCall, negative: !position.isCall })}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{position.isCall ? \"Call\" : \"Put\"}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tStrike\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t${formatAmount(position.strikePrice, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tExpires In\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{msToTimeLeft(position.expiry - Date.now())}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tExpiration Date\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{format(position.expiry, 'MM/dd/yy, hh:mm a')}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tAmount\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{formatAmountFree(position.size, OPTIONS_DECIMALS, 3)} {position.token}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{position.market !== \"Hegic\" &&\r\n\t\t\t\t\t\t<NumberInput_v3\r\n\t\t\t\t\t\t\ttitle='Amount'\r\n\t\t\t\t\t\t\tvalue={sizeValue}\r\n\t\t\t\t\t\t\tsetValue={setSizeValue}\r\n\t\t\t\t\t\t\tmaxValue={fromBigNumber(position.size)}\r\n\t\t\t\t\t\t\ticon={require(`../../../../img/icon-${position.token}.svg`).default}\r\n\t\t\t\t\t\t\ticonAlt={`${position.token} icon`}\r\n\t\t\t\t\t\t/>}\r\n\t\t\t\t\t{position.market === \"Hegic\" &&\r\n\t\t\t\t\t\t<div className=\"row-divider\" />}\r\n\t\t\t\t\t<div className=\"Exchange-info-row hlight\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tProfit/Loss\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{pnlStr ?? \"...\"}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpnlPercentage &&\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName={cx(pnl && { positive: pnl.gt(0), negative: pnl.lt(0) })}\r\n\t\t\t\t\t\t\t\t\tstyle={{marginLeft: 4}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{pnlPercentageStr}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row hlight\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tPremium Paid\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t${formatAmount(position.premium, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>}\r\n\t\t\t\r\n\t\t\t<button \r\n\t\t\t\tclassName=\"modal__btn btn btn_hlight\"\r\n\t\t\t\tonClick={onCloseClick}\r\n\t\t\t\tdisabled={!isBtnEnabled()}\r\n\t\t\t>\r\n\t\t\t\t{getBtnText()}\r\n\t\t\t</button>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default ClosePositionModal;","import { useState, memo } from \"react\";\r\n\r\nimport {\r\n  helperToast,\r\n  CALL,\r\n  PUT,\r\n} from \"../../lib/legacyOptions\";\r\nimport PositionsItem from './PositionsItemOptions';\r\nimport ClosePositionModal from './ClosePositionModal';\r\n\r\nconst PositionsList = memo((props) => {\r\n  let {\r\n    positions,\r\n  } = props;\r\n  const {\r\n    infoTokens,\r\n    setMarket,\r\n    positionsLoading,\r\n    pendingPositions,\r\n    setPendingPositions,\r\n  } = props;\r\n\r\n  const buyingPositions = pendingPositions.filter(pos => typeof pos === 'object');\r\n  if (positions) {\r\n    positions = [...buyingPositions, ...positions];\r\n  }\r\n  \r\n  const hasPositions = Boolean(positions && positions.length);\r\n\r\n  const [closeModalVisible, setCloseModalVisible] = useState(false);\r\n  const [position, setPosition] = useState(null);\r\n\r\n  const closePosition = (position) => {\r\n    setPosition(position);\r\n    setCloseModalVisible(true);\r\n  }\r\n  \r\n  const onPositionClick = (position) => {\r\n    helperToast.success(`${position.isCall ? \"Call\" : \"Put\"} ${position.token} market selected`);\r\n    setMarket(position.isCall ? CALL : PUT, position.token);\r\n  };\r\n\r\n  return (\r\n    <div className=\"PositionsList\">\r\n      <div className=\"Exchange-list small\">\r\n        <div>\r\n          {!hasPositions && positionsLoading && (\r\n            <div className=\"Exchange-empty-positions-list-note App-card Exchange-list-empty-note\">\r\n              Loading...\r\n            </div>\r\n          )}\r\n          {!hasPositions && !positionsLoading && (\r\n            <div className=\"Exchange-empty-positions-list-note App-card Exchange-list-empty-note\">\r\n              No open positions\r\n            </div>\r\n          )}\r\n          {hasPositions && positions.map((position) => {\r\n            return (\r\n              <PositionsItem\r\n                key={position.strategy}\r\n                position={position}\r\n                onPositionClick={onPositionClick}\r\n                infoTokens={infoTokens}\r\n                closePosition={closePosition}\r\n                isLarge={false}\r\n                pendingPositions={pendingPositions}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      <table className=\"Exchange-list large App-box\" cellSpacing={0}>\r\n        <tbody>\r\n          {hasPositions && (\r\n            <tr className=\"Exchange-list-header\">\r\n              <th>\r\n                Position\r\n              </th>\r\n              <th>\r\n                Amount\r\n              </th>\r\n              <th>\r\n                Strike Price\r\n              </th>\r\n              <th>\r\n                Current Price\r\n              </th>\r\n              <th>\r\n                Premium Paid\r\n              </th>\r\n              <th>\r\n                PNL (ROE %)\r\n              </th>\r\n              <th>\r\n                Expires In\r\n              </th>\r\n              <th></th>\r\n            </tr>\r\n          )}\r\n          {!hasPositions && positionsLoading && (\r\n            <tr>\r\n              <td colSpan=\"15\" className=\"Exchange-list-empty-note\">\r\n                Loading...\r\n              </td>\r\n            </tr>\r\n          )}\r\n          {!hasPositions && !positionsLoading && (\r\n            <tr>\r\n              <td colSpan=\"15\" className=\"Exchange-list-empty-note\">\r\n                No open positions\r\n              </td>\r\n            </tr>\r\n          )}\r\n          {hasPositions && positions.map((position) => {\r\n            return (\r\n              <PositionsItem\r\n                key={position.strategy}\r\n                position={position}\r\n                onPositionClick={onPositionClick}\r\n                infoTokens={infoTokens}\r\n                closePosition={closePosition}\r\n                isLarge={true}\r\n                pendingPositions={pendingPositions}\r\n              />\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n\r\n      <ClosePositionModal\r\n        visible={closeModalVisible}\r\n        setVisible={setCloseModalVisible}\r\n        position={position}\r\n        setPosition={setPosition}\r\n        pendingPositions={pendingPositions}\r\n        setPendingPositions={setPendingPositions}\r\n      />\r\n    </div>\r\n  );\r\n})\r\n\r\nexport default PositionsList;","// prettier-ignore\r\nimport {ethers} from \"ethers\";\r\nimport { Web3Provider } from \"@ethersproject/providers\";\r\nimport { getFallbackProvider, getProvider } from \"../legacyOptions\";\r\n\r\nexport const fetcher =\r\n  (library: Web3Provider, contractInfo: any, additionalArgs: any[]) =>\r\n  (...args: any) => {\r\n    // eslint-disable-next-line\r\n    const [id, chainId, arg0, arg1, ...params] = args;\r\n    const provider = getProvider(library, chainId);\r\n\r\n    const method = ethers.utils.isAddress(arg0) ? arg1 : arg0;\r\n\r\n    const contractCall = getContractCall({\r\n      provider,\r\n      contractInfo,\r\n      arg0,\r\n      arg1,\r\n      method,\r\n      params,\r\n      additionalArgs,\r\n    });\r\n\r\n    let shouldCallFallback = true;\r\n\r\n    const handleFallback = async (resolve, reject, error) => {\r\n      if (!shouldCallFallback) {\r\n        return;\r\n      }\r\n      // prevent fallback from being called twice\r\n      shouldCallFallback = false;\r\n\r\n      const fallbackProvider = getFallbackProvider(chainId);\r\n      if (!fallbackProvider) {\r\n        reject(error);\r\n        return;\r\n      }\r\n\r\n      console.info(\"using fallbackProvider for\", method);\r\n      const fallbackContractCall = getContractCall({\r\n        provider: fallbackProvider,\r\n        contractInfo,\r\n        arg0,\r\n        arg1,\r\n        method,\r\n        params,\r\n        additionalArgs,\r\n      });\r\n\r\n      fallbackContractCall\r\n        .then((result) => resolve(result))\r\n        .catch((e) => {\r\n          console.error(\"fallback fetcher error\", id, contractInfo.contractName, method, e);\r\n          reject(e);\r\n        });\r\n    };\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n      contractCall\r\n        .then((result) => {\r\n          shouldCallFallback = false;\r\n          resolve(result);\r\n        })\r\n        .catch((e) => {\r\n          console.error(\"fetcher error\", id, contractInfo.contractName, method, e);\r\n          handleFallback(resolve, reject, e);\r\n        });\r\n\r\n      setTimeout(() => {\r\n        handleFallback(resolve, reject, \"contractCall timeout\");\r\n      }, 2000);\r\n    });\r\n  };\r\n\r\nfunction getContractCall({ provider, contractInfo, arg0, arg1, method, params, additionalArgs }) {\r\n  if (ethers.utils.isAddress(arg0)) {\r\n    const address = arg0;\r\n    const contract = new ethers.Contract(address, contractInfo.abi, provider);\r\n\r\n    if (additionalArgs) {\r\n      return contract[method](...params.concat(additionalArgs));\r\n    }\r\n    return contract[method](...params);\r\n  }\r\n\r\n  if (!provider) {\r\n    return;\r\n  }\r\n\r\n  return provider[method](arg1, ...params);\r\n}\r\n","import React from 'react';\r\n\r\nconst Loader = () => {\r\n\treturn (\r\n\t\t<div className='loader-container'>\r\n\t\t\t<svg viewBox=\"0 0 100 100\">\r\n\t\t\t\t<defs>\r\n\t\t\t\t</defs>\r\n\t\t\t\t<circle className=\"loader\" style={{fill:'transparent',stroke:'#fff',strokeWidth: '7px',strokeLinecap: 'round'}} cx=\"50\" cy=\"50\" r=\"45\"/>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Loader;","import { useRef } from 'react';\r\nimport { formatAmount, expandDecimals } from './../../../gmx-test/lib/legacy';\r\nimport { format } from 'date-fns';\r\nimport { msToTimeLeft } from './../../../../components/utils/utils';\r\nimport { OPTIONS_DECIMALS } from '../../../../components/utils/constants';\r\nimport cx from 'classnames';\r\n\r\nconst OptionsItem = (props) => {\r\n\tconst {\r\n\t\toption,\r\n\t\tmarkPrice,\r\n\t\tbuyPosition,\r\n\t} = props;\r\n\t\r\n\tconst curPrice = useRef(expandDecimals(markPrice, 10)).current;\r\n\t\r\n\tif (!option || !option.hasLiquidity) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tconst expirationDate = Date.now() + option.period;\r\n\toption.expiry = expirationDate;\r\n\t\r\n\tconst logo = require(`../../../../img/icon-${option.market}.svg`).default;\r\n\tconst isITM = option.isCall\r\n\t\t? curPrice.gte(option.strike)\r\n\t\t: curPrice.lte(option.strike);\r\n\r\n\tconst cls = cx(isITM && 'hlight');\r\n\tconst btnText = `Buy ${option.isCall ? 'Call' : 'Put'}`;\r\n\r\n\treturn (\r\n\t\t<tr className={cls}>\r\n\t\t\t<td>\r\n\t\t\t\t<img src={logo} alt={`${option.market} logo`} />\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n\t\t\t\t{option.type}\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n\t\t\t\t${formatAmount(option.strike, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n\t\t\t\t{msToTimeLeft(option.period)}\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n\t\t\t\t{format(expirationDate, 'dd MMM')}\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n\t\t\t\t${formatAmount(option.cost, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n\t\t\t\t${formatAmount(option.price, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t</td>\r\n\t\t\t<td style={{textAlign: 'center'}}>\r\n\t\t\t\t\t{option.isBuyingEnabled\r\n\t\t\t\t\t\t? <button style={{width: \"100%\"}} className='btn_inline' onClick={() => { buyPosition(option) }}>\r\n\t\t\t\t\t\t\t\t{btnText}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t: <a href={option.buyUrl ?? '#'} target=\"_blank\" rel=\"noreferrer\"\r\n\t\t\t\t\t\t\t\tclassName={'btn_inline'}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{btnText}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t}\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t);\r\n};\r\n\r\nexport default OptionsItem;","import React, { useState } from 'react';\r\nimport icon_curve from '../../../img/icon-market.svg';\r\nimport cx from 'classnames';\r\nimport './Filter.scss';\r\nimport icon_down from '../../../img/icon-down-small.svg';\r\nimport { useTogglePopup } from './../../../hooks/useTogglePopup';\r\n\r\nconst Filter = (props) => {\r\n\tconst {\r\n\t\titems,\r\n\t\tselectedItems,\r\n\t\tsetSelectedItems,\r\n\t} = props;\r\n\r\n\tconst {\r\n\t\tisOpen,\r\n\t\topenPopup: openFilter,\r\n\t} = useTogglePopup();\r\n\r\n\t\r\n\treturn (\r\n\t\t<div className={cx(\"Filter\", isOpen && 'active')}>\r\n\t\t\t<button className=\"Filter__header\" onClick={openFilter}>\r\n\t\t\t\t<div className=\"Filter__header-icon\">\r\n\t\t\t\t\t<img src={icon_curve} alt=\"Curve icon\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"Filter__header-title-container\">\r\n\t\t\t\t\t<span className='Filter__header-title nowrap'>\r\n\t\t\t\t\t\tChoose Markets\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<img className='Filter__chevron-down' src={icon_down} alt=\"chevron down\" />\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t\t<div className=\"Filter__items\" onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t{items.map(item => {\r\n\t\t\t\t\tconst itemIcon = require(`../../../img/icon-${item}.svg`).default;\r\n\t\t\t\t\tconst isSelected = selectedItems.find(el => el === item);\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"Filter__item input-container\" key={item}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tdefaultChecked={isSelected}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\t\t\t\t\t\tselectedItems.push(item);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tconst index = selectedItems.findIndex(el => el === item);\r\n\t\t\t\t\t\t\t\t\t\tselectedItems.splice(index, 1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tsetSelectedItems(selectedItems.slice());\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t<img className='Filter__item-icon' src={itemIcon} alt={item} />\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Filter;","import React from 'react';\r\nimport icon_usdc from '../img/icon-usdc.svg';\r\nimport { separateThousands } from './utils/sepThousands';\r\n\r\nconst Currency = ({ children, isSmall, ...props }) => {\r\n\tconst val = children;\r\n\t\r\n\tif (typeof val !== 'string' && typeof val !== 'number') {\r\n\t\treturn;\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div className=\"currency\" {...props}>\r\n\t\t\t<img src={icon_usdc} alt=\"USDC Icon\" width={isSmall ? 15 : \"auto\"}/>\r\n\t\t\t<span>{separateThousands(val)}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Currency;","import React, { useState, useEffect } from 'react';\r\nimport Modal from '../../../../components/UI/modal/Modal';\r\nimport { sepToNumber } from '../../../../components/utils/sepThousands';\r\nimport { BigNumber } from 'ethers';\r\nimport NumberInput_v3 from '../../../../components/UI/input/NumberInput_v3';\r\nimport { errAlert, notifySuccess } from '../../../../components/utils/notifications';\r\nimport { expandDecimals, formatAmount } from '../../../gmx-test/lib/legacy';\r\nimport { OPTIONS_DECIMALS, tokenDecimals } from '../../../../components/utils/constants';\r\nimport { executePromise, fromBigNumber, msToTimeLeft } from '../../../../components/utils/utils';\r\nimport { format } from 'date-fns';\r\nimport cx from 'classnames';\r\nimport './PositionModal.scss';\r\nimport { CALL, PUT, USD_DECIMALS } from './../../lib/legacyOptions';\r\nimport { separateThousands } from './../../../../components/utils/sepThousands';\r\nimport useDebounce from './../../../../hooks/useDebounce';\r\nimport { USDC, getIsUsdcApproved } from '../../../../components/utils/contracts';\r\nimport { approveUSDC } from './../../../../components/utils/contracts';\r\nimport Currency from './../../../../components/Currency';\r\n\r\nconst BuyPositionModal = (props) => {\r\n\tconst {\r\n\t\tvisible,\r\n\t\tsetVisible,\r\n\t\tposition,\r\n\t\tsetPosition,\r\n\t\tinfoTokens,\r\n\t\tpendingPositions,\r\n\t\tsetPendingPositions,\r\n\t\twalletAddress,\r\n\t} = props;\r\n\r\n\tconst [sizeValue, setSizeValue] = useState(\"\");\r\n\tconst size = expandDecimals(BigNumber.from((sepToNumber(sizeValue) * 10**6).toFixed(0)), 12);\r\n\t// balance 1e6\r\n\tconst usdcBalance = infoTokens[USDC.address].balance && expandDecimals(infoTokens[USDC.address].balance, OPTIONS_DECIMALS - 6);\r\n\r\n\tconst [premium, setPremium] = useState(undefined);\r\n\tconst onSizeValueChange = useDebounce((value) => {\r\n\r\n\t\tconst size = expandDecimals(BigNumber.from((Number(value) * 10**6).toFixed(0)), 12);\r\n\t\t\r\n\t\tposition.getPremium(size)\r\n\t\t\t.then(premium => {\r\n\t\t\t\t// USDC Allowance 1e6\r\n\t\t\t\tgetIsUsdcApproved(\r\n\t\t\t\t\twalletAddress, position.contractAddress, premium.div(BigNumber.from(10).pow(OPTIONS_DECIMALS - 6))\r\n\t\t\t\t\t).then(isUsdcApproved => {\r\n\t\t\t\t\t\tposition.isUsdcApproved = isUsdcApproved;\r\n\t\t\t\t\t\tsetPremium(premium);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t}, 800);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (sizeValue) {\r\n\t\t\tsetPremium(undefined);\r\n\t\t\tonSizeValueChange(sepToNumber(sizeValue));\r\n\t\t}\r\n\t}, [sizeValue]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (position) {\r\n\t\t\tconst initSizeNumber = fromBigNumber(position.initSize, tokenDecimals[position.token]); \r\n\t\t\tsetSizeValue(\r\n\t\t\t\tseparateThousands(\r\n\t\t\t\t\tinitSizeNumber\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tsetPremium(position.cost);\r\n\t\t}\r\n\t}, [position]);\r\n\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\tconst [isApproving, setIsApproving] = useState(false);\r\n\r\n\tconst onPrimaryClick = () => {\r\n\t\tif (!position.isUsdcApproved) {\r\n\t\t\tapproveUSDC(position.contractAddress, setIsApproving, () => {\r\n\t\t\t\tposition.isUsdcApproved = true;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\texecutePromise(position.buy, [size], \"Position opened!\", setIsSubmitting, () => {\r\n\t\t\t\tsetVisible(false);\r\n\t\t\t\tsetPendingPositions([...pendingPositions, {\r\n\t\t\t\t\t...position,\r\n\t\t\t\t\tsize,\r\n\t\t\t\t\tstrikePrice: position.strike,\r\n\t\t\t\t\tisPending: true\r\n\t\t\t\t}]);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tconst getError = () => {\r\n\t\tif (!position) {\r\n\t\t\treturn \"ERR! No position\";\r\n\t\t}\r\n\r\n\t\tif (!sizeValue) {\r\n\t\t\treturn \"Enter amount\";\r\n\t\t}\r\n\r\n\t\tif (!premium) {\r\n\t\t\treturn \"Please, wait\";\r\n\t\t}\r\n\r\n\t\tif (premium.gt(usdcBalance)) {\r\n\t\t\treturn \"Insufficient balance\"\r\n\t\t}\r\n\r\n\t\tif (isApproving) {\r\n\t\t\treturn \"Approving USDC...\";\r\n\t\t}\r\n\r\n\t\tif (isSubmitting) {\r\n\t\t\treturn \"Buying...\";\r\n\t\t}\r\n\t}\r\n\tconst getBtnText = () => {\r\n\t\tconst error = getError();\r\n\t\tif (error) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\r\n\t\tif (!position?.isUsdcApproved) {\r\n\t\t\treturn `Allow to use your USDC`;\r\n\t\t}\r\n\t\treturn `Buy ${position.isCall ? CALL : PUT} option`;\r\n\t}\r\n\tconst isBtnEnabled = () => {\r\n\t\tconst hasError = Boolean(getError());\r\n\t\tif (hasError) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst resetModal = () => {\r\n\t\t// animation delay\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetSizeValue(\"\");\r\n\t\t\tsetPosition(null);\r\n\t\t\tsetPremium(undefined);\r\n\t\t}, 300);\r\n\t}\r\n\t\r\n\tconst marketImg = position\r\n\t\t? require(`../../../../img/icon-${position.market}.svg`).default\r\n\t\t: \"\";\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName={\"BuyOptionModal PositionModal\"}\r\n\t\t\tvisible={visible}\r\n\t\t\tsetVisible={setVisible}\r\n\t\t\tresetModal={resetModal}\r\n\t\t>\r\n\t\t\t<h1 className=\"modal__title\">Buy Option</h1>\r\n\t\t\t{position &&\r\n\t\t\t\t<div className=\"modal__body\">\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tMarket\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right PositionModal__market-logo\">\r\n\t\t\t\t\t\t\t<img src={marketImg} alt={`${position.market} logo`} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tType\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{position.type}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tStrategy\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName={cx({ positive: position.isCall, negative: !position.isCall })}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{position.isCall ? \"Call\" : \"Put\"}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tStrike\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t${formatAmount(position.strike, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tExpires In\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{msToTimeLeft(position.expiry - Date.now())}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tExpiration Date\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t{format(position.expiry, 'MM/dd/yy, hh:mm a')}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<NumberInput_v3\r\n\t\t\t\t\t\ttitle='Amount'\r\n\t\t\t\t\t\tvalue={sizeValue}\r\n\t\t\t\t\t\tsetValue={setSizeValue}\r\n\t\t\t\t\t\tmaxValue={fromBigNumber(position.size)}\r\n\t\t\t\t\t\ticon={require(`../../../../img/icon-${position.token}.svg`).default}\r\n\t\t\t\t\t\ticonAlt={`${position.token} icon`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className=\"Exchange-info-row hlight\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tPrice Per Option\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t${formatAmount(position.price, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row hlight\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tTotal Cost\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t${formatAmount(premium, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"Exchange-info-row hlight\">\r\n\t\t\t\t\t\t<div className=\"Exchange-info-label\">\r\n\t\t\t\t\t\t\tBalance\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"align-right\">\r\n\t\t\t\t\t\t\t<Currency isSmall={true} style={{ color: \"white\" }}>\r\n\t\t\t\t\t\t\t\t{formatAmount(usdcBalance, OPTIONS_DECIMALS, 2, true)}\r\n\t\t\t\t\t\t\t</Currency>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>}\r\n\t\t\t\r\n\t\t\t<button \r\n\t\t\t\tclassName=\"modal__btn btn btn_hlight\"\r\n\t\t\t\tonClick={onPrimaryClick}\r\n\t\t\t\tdisabled={!isBtnEnabled()}\r\n\t\t\t>\r\n\t\t\t\t{getBtnText()}\r\n\t\t\t</button>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default BuyPositionModal;","import { useCallback, useRef } from \"react\";\r\n\r\nexport default function useDebounce(cb, delay) {\r\n\tconst timer = useRef();\r\n\r\n\tconst debouncedCb = useCallback((...args) => {\r\n\t\tif (timer.current) {\r\n\t\t\tclearTimeout(timer.current);\r\n\t\t}\r\n\t\ttimer.current = setTimeout(() => {\r\n\t\t\tcb(...args);\r\n\t\t}, delay);\r\n\t}, [cb, delay]);\r\n\r\n\treturn debouncedCb;\r\n}","import { useState, useEffect } from 'react';\r\nimport './OptionsList.scss';\r\nimport Loader from './../../../../components/UI/loader/Loader';\r\nimport OptionsItem from './OptionsItem';\r\nimport Tooltip from './../Tooltip/Tooltip';\r\nimport Chai_ABI from '../../../../deployments/options/Chai_ABI.json';\r\nimport { CHAI_CONTRACT_ETH, CHAI_CONTRACT_BTC } from '../../../../components/utils/contracts';\r\nimport useSWR from 'swr';\r\nimport { ethers } from 'ethers';\r\nimport icon_btnUp from '../../../../img/icon-btn-up.svg';\r\nimport Filter from './../../../../components/UI/Filter/Filter';\r\nimport { marketsOptions, OPTION_LIST_FRONTIER } from './../../../../components/utils/constants';\r\nimport { useLocalStorageSerializeKey, ARBITRUM } from './../../lib/legacyOptions';\r\nimport BuyPositionModal from './BuyPositionModal';\r\n\r\nconst OptionsList = (props) => {\r\n\tconst {\r\n\t\tactive,\r\n\t\twalletAddress,\r\n\t\tlibrary,\r\n\t\toptions,\r\n\t\toptionPrices,\r\n\t\tisLoading,\r\n\t\tscrollRef,\r\n\t\tswapOption,\r\n\t\tinfoTokens,\r\n\t\tpendingPositions,\r\n\t\tsetPendingPositions,\r\n\t} = props;\r\n\r\n\tconst chaiAddress = options[0]?.token === 'ETH'\r\n    ? CHAI_CONTRACT_ETH : CHAI_CONTRACT_BTC;\r\n\r\n\tconst { data: markPrice } = useSWR(\r\n\t\tactive && [active, options[0]?.token, \"getMarkPrice\"],\r\n\t\t{\r\n\t\t\tfetcher: async () => {\r\n\t\t\t\tconst contract = new ethers.Contract(chaiAddress, Chai_ABI, library.getSigner());\r\n\t\t\t\treturn await contract.latestAnswer();\r\n\t\t\t},\r\n\t\t\trefreshInterval: 5000\r\n\t\t}\r\n\t)\r\n\r\n\tconst isCall = swapOption === 'Call';\r\n\r\n\tconst listFrontierStep = OPTION_LIST_FRONTIER;\r\n\tconst [listFrontier, setListFrontier] = useState(listFrontierStep);\r\n\tconst [unfoldVisible, setUnfoldVisible] = useState(false);\r\n\t\r\n\tconst [markets, setMarkets] = useLocalStorageSerializeKey([ARBITRUM, \"Options-Markets\"], marketsOptions.slice());\r\n\r\n\tconst filterOptions = (arr) => {\r\n\t\treturn arr.filter(opt => {\r\n\t\t\tfor (let i = 0; i < markets.length; i++) {\r\n\t\t\t\tconst market = markets[i];\r\n\t\t\t\tif (market === opt.market) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst [sortType, setSortType] = useState('');\r\n\tconst [sortedOptions, setSortedOptions] = useState([]);\r\n\r\n\tconst sortOptions = (param, dir = 1, isInit = false) => {\r\n\t\tconst res = filterOptions(options);\r\n\t\t\r\n\t\tconst sortFn = (arr) => {\r\n\t\t\tarr.sort((a, b) => {\r\n\t\t\t\tconst prevEl = a[param];\r\n\t\t\t\tconst el = b[param];\r\n\t\t\t\t\r\n\t\t\t\tif (prevEl === null) {\r\n\t\t\t\t\treturn dir;\r\n\t\t\t\t} else if (el === null) {\r\n\t\t\t\t\treturn -dir;\r\n\t\t\t\t} else if (prevEl && el) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tarr.sort((a, b) => {\r\n\t\t\t\tconst prevEl = a[param];\r\n\t\t\t\tconst el = b[param];\r\n\t\r\n\t\t\t\tif (!prevEl || !el) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (prevEl.lt(el)) {\r\n\t\t\t\t\treturn dir;\r\n\t\t\t\t}\telse if (prevEl.eq(el)) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn -dir;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\tif (!isInit) {\r\n\t\t\tconst [prevParam, prevDir] = sortType.split('_');\r\n\t\t\tif (param === prevParam) {\r\n\t\t\t\tdir = -prevDir;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsortFn(res);\r\n\t\t}\r\n\t\t\r\n\t\tconst arr = res.slice(0, listFrontier);\r\n\t\tif (!isInit) {\r\n\t\t\tsortFn(arr);\r\n\t\t}\r\n\r\n\t\tsetSortedOptions(arr.slice());\r\n\t\tsetSortType(`${param}_${dir}`);\r\n\t\t\r\n\t\tif (arr.length < res.length) {\r\n\t\t\tsetUnfoldVisible(true);\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUnfoldVisible(false);\r\n\t\tconst [param, dir] = sortType.split('_');\r\n\t\tsortOptions(param, dir, true);\r\n\t}, [listFrontier, markets]);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (options.length) {\r\n\t\t\tsetListFrontier(listFrontierStep);\r\n\t\t\tsetUnfoldVisible(false);\r\n\r\n\t\t\tsortOptions('strike', isCall ? -1 : 1, true);\r\n\t\t} else {\r\n\t\t\tsetSortedOptions([]);\r\n\t\t}\r\n\t}, [options.length]);\r\n\r\n\tconst [position, setPosition] = useState(null);\r\n\tconst [buyModalVisible, setBuyModalVisible] = useState(false);\r\n\tconst buyPosition = (position) => {\r\n    setPosition(position);\r\n    setBuyModalVisible(true);\r\n  }\r\n\r\n\tconst renderHead = () => {\r\n\t\treturn (\r\n\t\t\t<tr className=\"Exchange-list-header\">\r\n\t\t\t\t<th>\r\n\t\t\t\t\tMarket\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\tclassName=\"has-hint-tooltip nowrap\"\r\n\t\t\t\t\t\thandle=\"Type\"\r\n\t\t\t\t\t\tposition=\"left-bottom\"\r\n\t\t\t\t\t\tenabled={true}\r\n\t\t\t\t\t\trenderContent={() => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className=\"Tooltip__text\">\r\n\t\t\t\t\t\t\t\t\tAmerican-style options may <br />exercise atany time before <br />the option expires.<br />European-style options may <br />exercise only atexpiration.\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn_table-sort'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsortOptions('strike');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tStrike\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\tExpires in\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\tDate\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn_table-sort'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsortOptions('cost');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTotal Cost\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn_table-sort'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsortOptions('price');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tPrice per Option\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th></th>\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\tif (!options) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"OptionsList block\" ref={scrollRef}>\r\n\t\t\t<div className=\"OptionsList__header\">\r\n\t\t\t\t<h1 className='OptionsList__title'>Available Options</h1>\r\n\t\t\t\t<Filter\r\n\t\t\t\t\titems={marketsOptions}\r\n\t\t\t\t\tselectedItems={markets}\r\n\t\t\t\t\tsetSelectedItems={setMarkets}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"table-wrapper\">\r\n\t\t\t\t<table className=\"Exchange-list large App-box\">\r\n\t\t\t\t\t{renderHead()}\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{(!sortedOptions.length || !markPrice) ?\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td colSpan={8}>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t\t\t\t<Loader /> :\r\n\t\t\t\t\t\t\t\t\t\t\t(options.length \r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Please select markets from the list above\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"Please choose the desired amount and period to view the available options\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t(isLoading\r\n\t\t\t\t\t\t\t\t? <tr>\r\n\t\t\t\t\t\t\t\t\t\t<td colSpan={8}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t: sortedOptions.map(opt => {\r\n\t\t\t\t\t\t\t\t\t\tconst optPriceObj = optionPrices[opt.strategy];\r\n\t\t\t\t\t\t\t\t\t\topt.price = optPriceObj?.price;\r\n\t\t\t\t\t\t\t\t\t\topt.cost = optPriceObj?.cost;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t\t\t\t<OptionsItem\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={opt.strategy}\r\n\t\t\t\t\t\t\t\t\t\t\t\toption={opt}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarkPrice={markPrice}\r\n\t\t\t\t\t\t\t\t\t\t\t\tbuyPosition={buyPosition}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t{unfoldVisible &&\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn_hlight OptionsList__unfold-btn\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetUnfoldVisible(false);\r\n\t\t\t\t\t\tsetListFrontier(listFrontier + listFrontierStep);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tSee more\r\n\t\t\t\t</button>\r\n\t\t\t}\r\n\t\t\t<button className=\"btn_up\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\twindow.scrollTo({\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\tbehavior: 'smooth'\r\n\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<img src={icon_btnUp} alt=\"scroll up button\" />\r\n\t\t\t</button>\r\n\r\n\t\t\t<BuyPositionModal\r\n\t\t\t\tvisible={buyModalVisible}\r\n        setVisible={setBuyModalVisible}\r\n        position={position}\r\n        setPosition={setPosition}\r\n\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\tlibrary={library}\r\n\t\t\t\tinfoTokens={infoTokens}\r\n\t\t\t\tpendingPositions={pendingPositions}\r\n\t\t\t\tsetPendingPositions={setPendingPositions}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default OptionsList;","import React, { useEffect, useState, forwardRef, useRef } from \"react\";\r\nimport { useWeb3React } from \"@web3-react/core\";\r\nimport useSWR from \"swr\";\r\nimport { ethers, BigNumber } from \"ethers\";\r\nimport Lyra from '@lyrafinance/lyra-js';\r\n\r\nimport {\r\n  USD_DECIMALS,\r\n  formatAmount,\r\n  getTokenInfo,\r\n  useLocalStorageByChainId,\r\n  useChainId,\r\n  getPageTitle,\r\n  CALL,\r\n  expandDecimals,\r\n} from \"../../lib/legacyOptions\";\r\nimport { useInfoTokens } from \"../../../gmx-test/domain/legacy\";\r\n\r\nimport { getContract } from \"../../config/Addresses\";\r\nimport { getTokens, getToken, getTokenBySymbol } from \"../../config/Tokens\";\r\n\r\nimport Reader from \"../../abis/ReaderV2.json\";\r\n\r\nimport SwapBox from \"../../components/Exchange/SwapBoxOptions\";\r\nimport ExchangeTVChart from \"../../components/Exchange/ExchangeTVChartOptions\";\r\nimport PositionsList from \"../../components/Exchange/PositionsListOptions\";\r\nimport Tab from \"../../components/Tab/TabOptions\";\r\n\r\nimport \"../../../gmx-test/pages/Exchange/Exchange.scss\";\r\nimport \"./ExchangeOptions.scss\";\r\nimport { fetcher } from \"../../lib/contracts/fetcher\";\r\nimport { ARBITRUM, PUT } from './../../lib/legacyOptions';\r\nimport OptionsList from './../../components/Exchange/OptionsList';\r\nimport Chai_ABI from '../../../../deployments/options/Chai_ABI.json';\r\nimport { CHAI_CONTRACT_BTC, CHAI_CONTRACT_ETH, HEGOPS, HEGOPS_ABI, HegicStrategy_ABI, OperationalTreasury, OperationalTreasury_ABI } from './../../../../components/utils/contracts';\r\nimport { errAlert } from \"../../../../components/utils/notifications\";\r\nimport { DDL_WALLET, OPTIONS_DECIMALS, tokenDecimals } from \"../../../../components/utils/constants\";\r\nimport { DDL_WALLET_ENCODED, OPTION_TYPES } from './../../../../components/utils/constants';\r\nimport { HEGIC_STRATEGIES } from \"./../../../../components/utils/contracts\";\r\n\r\n\r\nconst { AddressZero } = ethers.constants;\r\n\r\nexport const Exchange = (props) => {\r\n  const {\r\n    connectWallet,\r\n    walletAddress,\r\n  } = props;\r\n\r\n  const { account, library } = useWeb3React();\r\n  const active = Boolean(props.walletAddress);\r\n  const { chainId } = useChainId();\r\n  const defaultTokenSelection = AddressZero;\r\n\r\n  const [tokenSelection, setTokenSelection] = useLocalStorageByChainId(\r\n    chainId,\r\n    \"Exchange-token-selection-options\",\r\n    defaultTokenSelection\r\n  );\r\n  \r\n  const tokens = getTokens(chainId);\r\n\r\n  const tokenAddresses = tokens.map((token) => token.address);\r\n  const readerAddress = getContract(chainId, \"Reader\");\r\n  const { data: tokenBalances } = useSWR(active && [active, chainId, readerAddress, \"getTokenBalances\", account], {\r\n    fetcher: fetcher(library, Reader, [tokenAddresses]),\r\n    refreshInterval: 10 * 1000\r\n  });\r\n\r\n  const { infoTokens } = useInfoTokens(library, chainId, active, tokenBalances);\r\n  const selectedToken = getTokenInfo(infoTokens, tokenSelection);\r\n\r\n  const chaiAddress = selectedToken.symbol === 'ETH'\r\n    ? CHAI_CONTRACT_ETH : CHAI_CONTRACT_BTC;\r\n  const { data: chaiMarkPrice } = useSWR(\r\n    active && [active, tokenSelection, \"getMarkPrice_Options\", account],\r\n    {\r\n      fetcher: async () => {\r\n        const contract = new ethers.Contract(chaiAddress, Chai_ABI, library.getSigner());\r\n        return await contract.latestAnswer();\r\n      },\r\n      refreshInterval: 5000,\r\n    }\r\n  )\r\n\r\n  useEffect(() => {\r\n    const toToken = getTokenInfo(infoTokens, tokenSelection);\r\n    let currentTokenPriceStr = formatAmount(toToken.maxPrice, USD_DECIMALS, 2, true);\r\n    let title = getPageTitle(currentTokenPriceStr + ` | ${toToken.symbol}${toToken.isStable ? \"\" : \"USD\"}`);\r\n    document.title = title;\r\n  }, [tokenSelection, infoTokens, chainId]);\r\n\r\n  const renderChart = () => {\r\n    return (\r\n      <ExchangeTVChart\r\n        tokenSelection={tokenSelection}\r\n        setTokenSelection={setTokenSelection}\r\n        infoTokens={infoTokens}\r\n        chainId={chainId}\r\n        savedShouldShowPositionLines={false}\r\n      />\r\n    );\r\n  };\r\n  \r\n  const [leverageOption, setLeverageOption] = useLocalStorageByChainId(ARBITRUM, \"Period_Options\", 7);\r\n  const [amountValue, setAmountValue] = useState('');\r\n  const [swapOption, setSwapOption] = useLocalStorageByChainId(ARBITRUM, \"Swap-option_Options\", CALL);\r\n  const [assetOption, setAssetOption] = useLocalStorageByChainId(ARBITRUM, \"Asset-option_Options\", selectedToken.symbol);\r\n\r\n  const setMarket = (swap, token) => {\r\n    setSwapOption(swap);\r\n    setTokenSelection(getTokenBySymbol(ARBITRUM, token).address);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setAssetOption(selectedToken.symbol);\r\n  }, [selectedToken.symbol]);\r\n\r\n  const [options, setOptions] = useState([]);\r\n  const [optionsLength, setOptionsLength] = useState(0);\r\n  const [optionsExpectedLength, setOptionsExpectedLength] = useState(0);\r\n  const [isOptionsLoading, setIsOptionsLoading] = useState(false);\r\n  const [optionPrices, setOptionPrices] = useState({});\r\n\r\n  const scrollRef = useRef(null);\r\n  const scrollToList = () => {\r\n    if (scrollRef?.current) {\r\n      scrollRef.current.scrollIntoView({\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n  }\r\n\r\n  // Fetching positions\r\n  const [pendingPositions, setPendingPositions] = useState([]);\r\n  const fetchLyraPositions = async () => {\r\n    const lyra = new Lyra(ARBITRUM);\r\n    const posArr = await lyra.positions(account);\r\n    const SLIPPAGE = 0.015;\r\n\r\n    const positions = [];\r\n    posArr.forEach(pos => {\r\n      const { strikeId, strikePrice, isCall, isBuy, pricePerOption, size, expiryTimestamp  } = pos;\r\n      if (size.eq(0) || expiryTimestamp * 1000 < Date.now()) {\r\n        return;\r\n      }\r\n\r\n      let token = pos.marketName.split('-')[0];\r\n      if (token.startsWith('W')) {\r\n        token = token.substring(1, token.length);\r\n      }\r\n\r\n      const expiry = expiryTimestamp * 1000;\r\n      \r\n      const trades = pos.trades();\r\n      const premium = trades.reduce((premium, trade) => {\r\n        const method = trade.isBuy ? \"add\" : \"sub\";\r\n        return premium[method](trade.premium);\r\n      }, BigNumber.from(0));\r\n\r\n      const strategy = `Lyra_${isCall ? \"CALL\" : \"PUT\"}_${strikeId.toString()}_${token}_${premium.toString()}`;\r\n\r\n      const pnl = pos.pnl();\r\n\r\n      // IncorrectOwner error fix\r\n      pos.owner = account;\r\n      \r\n      positions.push({\r\n        strategy,\r\n        market: \"Lyra\",\r\n        type: OPTION_TYPES.Lyra,\r\n        isCall,\r\n        isBuy,\r\n        token,\r\n        size,\r\n        strikePrice,\r\n        pricePerOption,\r\n        premium,\r\n        expiry,\r\n        pnl,\r\n        getTrade: async () => {\r\n          return await pos.trade(isBuy, size, SLIPPAGE);\r\n        },\r\n        close: async (size) => {\r\n          const signer = library.getSigner();\r\n          const trade = await pos.close(size, SLIPPAGE);\r\n          // add referrer\r\n          trade.tx.data = trade.tx.data.substring(0, trade.tx.data.length - DDL_WALLET_ENCODED.length);\r\n          trade.tx.data+= DDL_WALLET_ENCODED;\r\n          // visually\r\n          trade.params[0].referrer = DDL_WALLET;\r\n\r\n          if (trade.isDisabled) {\r\n            errAlert(new Error(trade.disabledReason));\r\n          }\r\n          \r\n          return signer.sendTransaction(trade.tx);\r\n        }\r\n      });\r\n    });\r\n\r\n    return positions;\r\n  }\r\n  const fetchHegicPositions = async () => {\r\n    let strategiesAddresses = [];\r\n    const signer = library.getSigner();\r\n\r\n    Object.values(HEGIC_STRATEGIES).forEach(obj => {\r\n      strategiesAddresses = [...strategiesAddresses, ...Object.values(obj)];\r\n    })\r\n\r\n    const contract = new ethers.Contract(HEGOPS, HEGOPS_ABI, signer);\r\n    const transferFilter = {\r\n      address: contract.address,\r\n      topics: [\r\n        ethers.utils.id(\"Transfer(address,address,uint256)\"),\r\n        null,\r\n        ethers.utils.hexZeroPad(walletAddress, 32),\r\n      ]\r\n    };\r\n    const events = await contract.queryFilter(transferFilter);\r\n    const tokenIds = events.map(e => {\r\n      return e.args.tokenId;\r\n    })\r\n    \r\n    const buyFilterTopics = [\r\n      ethers.utils.id(\"Acquired(uint256,(uint128,uint128),uint256,uint256,uint256,bytes[])\"),\r\n      tokenIds.map(id => {\r\n        return ethers.utils.hexZeroPad(id, 32);\r\n      }),\r\n    ]\r\n    const buyEventsPromises = strategiesAddresses.map(address => {\r\n      const contract = new ethers.Contract(address, HegicStrategy_ABI, signer);\r\n\r\n      const buyFilter = {\r\n        address,\r\n        topics: buyFilterTopics,\r\n      }\r\n      const events = contract.queryFilter(buyFilter);\r\n      return events;\r\n    })\r\n\r\n    const allEventsArrs = await Promise.all(buyEventsPromises);\r\n    let allEvents = [];\r\n    allEventsArrs.forEach(eventArr => {\r\n      allEvents = [...allEvents, ...eventArr];\r\n    });\r\n\r\n    // chaiMarkPrice 1e18 / 1e8 -- ETH / BTC\r\n    const chaiContractETH = new ethers.Contract(CHAI_CONTRACT_ETH, Chai_ABI, library.getSigner());\r\n    const chaiContractBTC = new ethers.Contract(CHAI_CONTRACT_BTC, Chai_ABI, library.getSigner());\r\n    const chaiMarkPrices = {\r\n      ETH: await chaiContractETH.latestAnswer(),\r\n      BTC: await chaiContractBTC.latestAnswer()\r\n    };\r\n\r\n    const positions = [];\r\n    for (const e of allEvents) {\r\n      const data = e.decode(e.data, e.topics);\r\n      const contract = new ethers.Contract(OperationalTreasury, OperationalTreasury_ABI, signer);\r\n      const additionalData = (await contract.lockedLiquidity(data.id));\r\n      const isActive = additionalData.state;\r\n      if (!isActive) {\r\n        continue;\r\n      }\r\n\r\n      const periodDays = data.period.toString() / 60**2 / 24;\r\n      let strategies;\r\n      if (periodDays < 14) {\r\n        strategies = HEGIC_STRATEGIES.short;\r\n      } else if (periodDays < 30) {\r\n        strategies = HEGIC_STRATEGIES.medShort;\r\n      } else if (periodDays < 60) {\r\n        strategies = HEGIC_STRATEGIES.medLong;\r\n      } else if (periodDays <= 90) {\r\n        strategies = HEGIC_STRATEGIES.long;\r\n      } else {\r\n        continue;\r\n      }\r\n\r\n      const strategy = Object.keys(strategies).find(key => strategies[key] === e.address);\r\n      const [, sentiment, strikeScale, token] = strategy.split('_');\r\n      const isCall = sentiment === 'CALL';\r\n      // size 1e18 / 1e8 -- ETH / BTC\r\n      const size = expandDecimals(data.data.amount, OPTIONS_DECIMALS - tokenDecimals[token]);\r\n      // chaiMarkPrice 1e18 / 1e8 -- ETH / BTC\r\n      const chaiMarkPrice = expandDecimals(chaiMarkPrices[token], OPTIONS_DECIMALS - tokenDecimals[token]);\r\n      // strike 1e8\r\n      const buyingPrice = expandDecimals(data.data.strike, OPTIONS_DECIMALS - 8);\r\n      const comparisonMethod = isCall ? \"gt\" : \"lt\";\r\n      const isITM = buyingPrice[comparisonMethod](chaiMarkPrice);\r\n      const strikePrice = isITM ? buyingPrice : buyingPrice.div(100).mul(strikeScale);\r\n      // premium 1e6\r\n      const premium = expandDecimals(data.positivepnl, OPTIONS_DECIMALS - 6);\r\n      const stratContract = new ethers.Contract(additionalData.strategy, HegicStrategy_ABI, library.getSigner());\r\n      // profit 1e6\r\n      const profit = expandDecimals(await stratContract.payOffAmount(data.id), OPTIONS_DECIMALS - 6);\r\n      const pnl = {\r\n        unrealizedPnl: profit.sub(premium),\r\n        unrealizedPnlPercentage: expandDecimals(expandDecimals(profit.sub(premium), 4).div(premium), OPTIONS_DECIMALS - 4)\r\n      };\r\n      // Two children with the same key fix\r\n      const uniqStrategy = strategy + \"_\" + premium.toString();\r\n\r\n      const expiry = additionalData.expiration * 1000;\r\n\r\n      positions.push({\r\n        strategy: uniqStrategy,\r\n        market: \"Hegic\",\r\n        type: OPTION_TYPES.Hegic,\r\n        isCall,\r\n        token,\r\n        size,\r\n        strikePrice,\r\n        premium,\r\n        expiry,\r\n        pnl,\r\n        isClosingDisabled: profit.eq(0),\r\n        close: () => {\r\n          return contract.payOff(data.id, walletAddress);\r\n        }\r\n      })\r\n    }\r\n\r\n    return positions;\r\n  }\r\n  const { data: positionsData, error: positionsDataError } = useSWR(\r\n    active && library && [active, library, chainId, \"getPositions_Options\", pendingPositions, account],\r\n    {\r\n      fetcher: async () => {\r\n        return [...(await fetchLyraPositions()), ...(await fetchHegicPositions())];\r\n      },\r\n      refreshInterval: 5000,\r\n    }\r\n  );\r\n  if (positionsDataError) {\r\n    console.log(positionsDataError);\r\n  }\r\n  const [positions, setPositions] = useState([]);\r\n  useEffect(() => {\r\n    if (positionsData) {\r\n      setPositions(positionsData);\r\n      setPendingPositions([]);\r\n    }\r\n  }, [positionsData]);\r\n\r\n  const LIST_SECTIONS = [\"Positions\"];\r\n  let [listSection, setListSection] = useLocalStorageByChainId(chainId, \"List-section-v2\", LIST_SECTIONS[0]);\r\n  const LIST_SECTIONS_LABELS = {\r\n    Positions: \"Positions\",\r\n  };\r\n  if (!LIST_SECTIONS.includes(listSection)) {\r\n    listSection = LIST_SECTIONS[0];\r\n  }\r\n\r\n  const positionsDataIsLoading = active && !positionsDataError && !positions.length;\r\n  \r\n  const getListSection = () => {\r\n    return (\r\n      <div>\r\n        <div className=\"Exchange-list-tab-container\">\r\n          <Tab\r\n            options={LIST_SECTIONS}\r\n            optionLabels={LIST_SECTIONS_LABELS}\r\n            option={listSection}\r\n            onChange={(section) => setListSection(section)}\r\n            type=\"inline\"\r\n            className=\"Exchange-list-tabs\"\r\n          />\r\n          <div className=\"Exchange-list-tip\">\r\n            *The table displays estimated PnL values. Toview the actual PnL, click onthe Close button\r\n          </div>\r\n        </div>\r\n        {listSection === \"Positions\" && (\r\n          <PositionsList\r\n            infoTokens={infoTokens}\r\n            active={active}\r\n            account={account}\r\n            library={library}\r\n            setMarket={setMarket}\r\n            positions={positions}\r\n            positionsLoading={positionsDataIsLoading}\r\n            pendingPositions={pendingPositions}\r\n            setPendingPositions={setPendingPositions}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (!getToken(chainId, tokenSelection)) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className=\"Exchange page-layout\">\r\n      <div className=\"Exchange-content\">\r\n        <div className=\"Exchange-left\">\r\n          {renderChart()}\r\n        </div>\r\n        <div className=\"Exchange-right\">\r\n          <SwapBox\r\n            chainId={chainId}\r\n            infoTokens={infoTokens}\r\n            active={active}\r\n            connectWallet={connectWallet}\r\n            walletAddress={walletAddress}\r\n            library={library}\r\n            account={account}\r\n            selectedToken={selectedToken}\r\n            tokenSelection={tokenSelection}\r\n            setTokenSelection={setTokenSelection}\r\n            leverageOption={leverageOption}\r\n            setLeverageOption={setLeverageOption}\r\n            amountValue={amountValue}\r\n            setAmountValue={setAmountValue}\r\n            swapOption={swapOption}\r\n            setSwapOption={setSwapOption}\r\n            assetOption={assetOption}\r\n            setAssetOption={setAssetOption}\r\n            options={options}\r\n            setOptions={setOptions}\r\n            setOptionsLength={setOptionsLength}\r\n            setOptionsExpectedLength={setOptionsExpectedLength}\r\n            isOptionsLoading={isOptionsLoading}\r\n            setIsOptionsLoading={setIsOptionsLoading}\r\n            optionPrices={optionPrices}\r\n            setOptionPrices={setOptionPrices}\r\n            scrollToList={scrollToList}\r\n            chaiMarkPrice={chaiMarkPrice}\r\n          />\r\n        </div>\r\n        <div className=\"Exchange-lists large\">{getListSection()}</div>\r\n        <div className=\"Exchange-lists small\">{getListSection()}</div>\r\n        <div></div>\r\n        <div>\r\n          <OptionsList\r\n            active={active}\r\n            library={library}\r\n            options={options}\r\n            setOptions={setOptions}\r\n            optionsExpectedLength={optionsExpectedLength}\r\n            optionPrices={optionPrices}\r\n            isLoading={isOptionsLoading}\r\n            scrollRef={scrollRef}\r\n            swapOption={swapOption}\r\n            walletAddress={walletAddress}\r\n            infoTokens={infoTokens}\r\n            positions={positions}\r\n            pendingPositions={pendingPositions}\r\n            setPendingPositions={setPendingPositions}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","// date format: d MMM yyyy, H:mm, time should be specifed based on UTC time\r\n\r\nexport const homeEventsData = [\r\n  {\r\n    id: \"app-gmx-io-launch\",\r\n    title: \"Frontend Updates\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"Updates have been applied to the GMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"arbitrum-nitro-upgrade\",\r\n    title: \"Arbitrum Nitro Upgrade\",\r\n    isActive: true,\r\n    validTill: \"31 Aug 2022, 20:00\",\r\n    bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/arbitrum-nitro-5f88c03a46fe\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport const appEventsData = [\r\n  // {\r\n  //   id: \"removal-of-min-profit-rule\",\r\n  //   title: \"Trading improvements\",\r\n  //   isActive: true,\r\n  //   validTill: \"1 Apr 2022, 12:00\",\r\n  //   bodyText: \"The 1.5% minimum profit rule has been removed\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read more\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/roadmap#30-march-2022\",\r\n  //       newTab: true,\r\n  //     },\r\n  //     {\r\n  //       text: \"Trade Now\",\r\n  //       link: \"https://gmx.io/trade\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"shorting-of-link-uni-re-enabled\",\r\n  //   title: \"Shorting of LINK and UNI\",\r\n  //   isActive: true,\r\n  //   validTill: \"20 Apr 2022, 12:00\",\r\n  //   bodyText: \"Shorting has been re-enabled for LINK and UNI.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Trade Now\",\r\n  //       link: \"https://gmx.io/trade\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"speed-up-page-loading\",\r\n  //   title: \"Speed Up Page Loading\",\r\n  //   isActive: true,\r\n  //   validTill: \"4 May 2022, 12:00\",\r\n  //   bodyText: \"If you experience data loading issues, please use a free RPC URL from Alchemy.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Learn More\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"referral-program-launch\",\r\n  //   title: \"Referral Program Launch\",\r\n  //   isActive: true,\r\n  //   validTill: \"4 May 2022, 12:00\",\r\n  //   bodyText: \"The GMX referral program is now live! Get fee discounts and refer traders to earn rewards.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://gmx.io/referrals\",\r\n  //     },\r\n  //     {\r\n  //       text: \"Join Now\",\r\n  //       link: \"https://gmx.io/referrals\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"gmx-arbitrum-odyssey\",\r\n  //   title: \"GMX Arbitrum Odyssey\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"The GMX Arbitrum Odyssey is taking place this week, all participants will receive prizes. Read on to find out more.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://medium.com/@gmx.io/gmx-arbitrum-odyssey-fc12cba2d10d\",\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"fix-arbitrum-transaction-issues\",\r\n  //   title: \"Fix Arbitrum Transactions\",\r\n  //   isActive: true,\r\n  //   validTill: \"30 Jun 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"If you experience transaction errors on Arbitrum or data loading issues, please use a free RPC URL from Alchemy.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Learn More\",\r\n  //       link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"gmx-arbitrum-odyssey-paused\",\r\n  //   title: \"GMX Arbitrum Odyssey Paused\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText: \"The GMX Arbitrum Odyssey has been paused. Please read the linked post for more information.\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://twitter.com/GMX_IO/status/1542163585111150592\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"app-gmx-io\",\r\n  //   title: \"Frontend Updates\",\r\n  //   isActive: true,\r\n  //   validTill: \"6 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"On 6 Jul 2022, updates will be applied to the GMX frontend to inform users of the separation between gmx.io and app.gmx.io\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Read More\",\r\n  //       link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  // {\r\n  //   id: \"degraded-alchemy-performance\",\r\n  //   title: \"Alchemy RPC\",\r\n  //   isActive: true,\r\n  //   validTill: \"3 Jul 2022, 12:00\",\r\n  //   bodyText:\r\n  //     \"There are ongoing syncing issues on Alchemy for Arbitrum at the moment, please check their status page and use the public Arbitrum RPC in the meantime\",\r\n  //   buttons: [\r\n  //     {\r\n  //       text: \"Check Status\",\r\n  //       link: \"https://status.alchemy.com/\",\r\n  //       newTab: true,\r\n  //     },\r\n  //     {\r\n  //       text: \"Public RPC URL\",\r\n  //       link: \"https://metamask.zendesk.com/hc/en-us/articles/4415758358299-Network-profile-Arbitrum\",\r\n  //       newTab: true,\r\n  //     },\r\n  //   ],\r\n  // },\r\n  {\r\n    id: \"app-gmx-io-settings\",\r\n    title: \"Frontend Updates\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"You are currently using app.gmx.io. Customized settings have been reset, you may need to adjust your settings by clicking on the menu in the top right after connecting your wallet.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/gmx-frontend-updates-8d13f2346e1e\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"use-alchemy-rpc-url\",\r\n    title: \"Use Alchemy RPC URL\",\r\n    isActive: true,\r\n    validTill: \"10 Jul 2022, 12:00\",\r\n    bodyText:\r\n      \"If you experience data loading or transaction issues on Arbitrum, please use a free RPC URL from Alchemy.\",\r\n    buttons: [\r\n      {\r\n        text: \"Learn More\",\r\n        link: \"https://gmxio.gitbook.io/gmx/trading#backup-rpc-urls\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"arbitrum-nitro-upgrade\",\r\n    title: \"Arbitrum Nitro Upgrade\",\r\n    isActive: true,\r\n    validTill: \"31 Aug 2022, 20:00\",\r\n    bodyText: \"The Arbitrum Nitro upgrade has been completed.\",\r\n    buttons: [\r\n      {\r\n        text: \"Read More\",\r\n        link: \"https://medium.com/@gmx.io/arbitrum-nitro-5f88c03a46fe\",\r\n        newTab: true,\r\n      },\r\n    ],\r\n  },\r\n];\r\n","function Icon({ className }) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      aria-hidden=\"true\"\r\n      className={className}\r\n      viewBox=\"0 0 24 24\"\r\n    >\r\n      <path\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth=\"2\"\r\n        d=\"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z\"\r\n      ></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default Icon;\r\n","import \"./EventToast.css\";\r\nimport Icon from \"./AnnouncementIcon\";\r\nimport { MdOutlineClose } from \"react-icons/md\";\r\n\r\nexport default function EventToast({ event, id, onClick, t }) {\r\n  return (\r\n    <div className={`single-toast ${t.visible ? \"zoomIn\" : \"zoomOut\"}`} key={id}>\r\n      <header>\r\n        <div className=\"toast-title\">\r\n          <Icon className=\"announcement-icon\" />\r\n          <p>{event.title}</p>\r\n        </div>\r\n        <MdOutlineClose onClick={onClick} className=\"cross-icon\" color=\"white\" />\r\n      </header>\r\n      <p className=\"toast-body\">{event.bodyText}</p>\r\n      <div className=\"toast-links\">\r\n        {event.buttons.map((button) => {\r\n          if (button.newTab) {\r\n            return (\r\n              <a key={event.id + button.text} target=\"_blank\" rel=\"noreferrer noopener\" href={button.link}>\r\n                {button.text}\r\n              </a>\r\n            );\r\n          } else {\r\n            return (\r\n              <a key={event.id + button.text} href={button.link}>\r\n                {button.text}\r\n              </a>\r\n            );\r\n          }\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useLocalStorage } from \"react-use\";\r\nimport toast from \"react-hot-toast\";\r\nimport { homeEventsData, appEventsData } from \"../../config/events\";\r\nimport { useEffect } from \"react\";\r\nimport EventToast from \"./EventToast\";\r\nimport { isFuture, parse } from \"date-fns\";\r\nimport { isHomeSite } from \"../../lib/legacyOptions\";\r\n\r\nfunction useEventToast() {\r\n  const isHome = isHomeSite();\r\n  const [visited, setVisited] = useLocalStorage(\"visited-announcements\", []);\r\n\r\n  useEffect(() => {\r\n    const eventsData = isHome ? homeEventsData : appEventsData;\r\n\r\n    eventsData\r\n      .filter((event) => event.isActive)\r\n      .filter((event) => isFuture(parse(event.validTill + \", +00\", \"d MMM yyyy, H:mm, x\", new Date())))\r\n      .filter((event) => Array.isArray(visited) && !visited.includes(event.id))\r\n      .forEach((event) => {\r\n        toast.custom(\r\n          (t) => (\r\n            <EventToast\r\n              event={event}\r\n              id={event.id}\r\n              t={t}\r\n              onClick={() => {\r\n                toast.dismiss(event.id);\r\n                visited.push(event.id);\r\n                setVisited(visited);\r\n              }}\r\n            />\r\n          ),\r\n          {\r\n            id: event.id,\r\n            style: {},\r\n          }\r\n        );\r\n      });\r\n  }, [visited, setVisited, isHome]);\r\n}\r\n\r\nexport default useEventToast;\r\n","import { Toaster } from \"react-hot-toast\";\r\nimport { useWindowScroll, createBreakpoint } from \"react-use\";\r\n\r\nfunction EventToastContainer() {\r\n  let { y: scrollY } = useWindowScroll();\r\n  const useBreakpoint = createBreakpoint({ XL: 1033, L: 768, S: 350 });\r\n  const breakpoint = useBreakpoint();\r\n  return (\r\n    <Toaster\r\n      position=\"top-right\"\r\n      reverseOrder={true}\r\n      gutter={30}\r\n      containerClassName=\"event-toast-container\"\r\n      containerStyle={{\r\n        zIndex: 2,\r\n        transition: \"all 200ms\",\r\n        top: scrollY > 60 ? \"30px\" : `${93 - scrollY}px`,\r\n        right: breakpoint === \"XL\" ? \"30px\" : \"1rem\",\r\n      }}\r\n      toastOptions={{\r\n        duration: Infinity,\r\n      }}\r\n    />\r\n  );\r\n}\r\nexport default EventToastContainer;\r\n","import { i18n } from \"@lingui/core\";\r\nimport { en, es, zh, ko, ru, ja, fr } from \"make-plural/plurals\";\r\nimport { LANGUAGE_LOCALSTORAGE_KEY } from \"./legacyOptions\";\r\n\r\nexport const locales = {\r\n  en: \"English\",\r\n  es: \"Spanish\",\r\n  // zh: \"Chinese\",\r\n  ko: \"Korean\",\r\n  // ru: \"Russian\",\r\n  ja: \"Japanese\",\r\n  // fr: \"French\",\r\n};\r\n\r\nexport const defaultLocale = \"en\";\r\n\r\ni18n.loadLocaleData({\r\n  en: { plurals: en },\r\n  es: { plurals: es },\r\n  zh: { plurals: zh },\r\n  ko: { plurals: ko },\r\n  ru: { plurals: ru },\r\n  ja: { plurals: ja },\r\n  fr: { plurals: fr },\r\n});\r\n\r\nexport async function dynamicActivate(locale) {\r\n  // const { messages } = await import(`@lingui/loader!../config/locales/${locale}/messages.po`);\r\n  localStorage.setItem(LANGUAGE_LOCALSTORAGE_KEY, locale);\r\n  // i18n.load(locale, messages);\r\n  i18n.activate(locale);\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { SWRConfig } from \"swr\";\r\nimport { Web3ReactProvider, useWeb3React } from \"@web3-react/core\";\r\nimport { Web3Provider } from \"@ethersproject/providers\";\r\n\r\nimport {\r\n  useChainId,\r\n  getInjectedHandler,\r\n  useEagerConnect,\r\n  useInactiveListener,\r\n  activateInjectedProvider,\r\n  SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY,\r\n  CURRENT_PROVIDER_LOCALSTORAGE_KEY,\r\n} from \"../lib/legacyOptions\";\r\nimport { Exchange } from \"../pages/Exchange/ExchangeOptions\";\r\n\r\nimport { cssTransition, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport \"../styles/Font.css\";\r\nimport \"./App.scss\";\r\nimport \"../styles/Input.scss\";\r\nimport useEventToast from \"../components/EventToast/useEventToast\";\r\nimport EventToastContainer from \"../components/EventToast/EventToastContainer\";\r\nimport { defaultLocale, dynamicActivate } from \"../lib/i18n\";\r\nimport _AccountManager from \"../../../deployments/arbitrum_ddl/accountManager.json\";\r\nimport { useLocalStorage } from \"react-use\";\r\n\r\nif (\"ethereum\" in window) {\r\n  window.ethereum.autoRefreshOnNetworkChange = false;\r\n}\r\n\r\nfunction getLibrary(provider) {\r\n  const library = new Web3Provider(provider);\r\n  return library;\r\n}\r\n\r\nconst Jelly = cssTransition({\r\n  enter: \"jellyIn\",\r\n  exit: \"jellyOut\",\r\n});\r\n\r\n\r\nfunction FullApp(props) {\r\n  const exchangeRef = useRef();\r\n  const { connector, activate } = useWeb3React();\r\n  const { chainId } = useChainId();\r\n  useEventToast();\r\n  const [activatingConnector, setActivatingConnector] = useState();\r\n  useEffect(() => {\r\n    if (activatingConnector && activatingConnector === connector) {\r\n      setActivatingConnector(undefined);\r\n    }\r\n  }, [activatingConnector, connector, chainId]);\r\n  const triedEager = useEagerConnect(setActivatingConnector);\r\n  useInactiveListener(!triedEager || !!activatingConnector);\r\n\r\n  useEffect(() => {\r\n    attemptActivateWallet(\"MetaMask\");\r\n  }, [props.walletAddress])\r\n  const connectWallet = () => {\r\n    props.connectWallet();\r\n    attemptActivateWallet(\"MetaMask\");\r\n  };\r\n  const connectInjectedWallet = getInjectedHandler(activate);\r\n\r\n  const attemptActivateWallet = (providerName) => {\r\n    localStorage.setItem(SHOULD_EAGER_CONNECT_LOCALSTORAGE_KEY, true);\r\n    localStorage.setItem(CURRENT_PROVIDER_LOCALSTORAGE_KEY, providerName);\r\n    activateInjectedProvider(providerName);\r\n    connectInjectedWallet();\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className=\"App GMX-Interface Options-Interface\">\r\n        <div className=\"App-content\">\r\n          <Exchange\r\n            ref={exchangeRef}\r\n            connectWallet={connectWallet}\r\n            walletAddress={props.walletAddress}\r\n          />\r\n        </div>\r\n      </div>\r\n      <ToastContainer\r\n        limit={1}\r\n        transition={Jelly}\r\n        position=\"bottom-right\"\r\n        // autoClose={}\r\n        hideProgressBar={true}\r\n        newestOnTop={false}\r\n        closeOnClick={false}\r\n        draggable={false}\r\n        pauseOnHover\r\n      />\r\n      <EventToastContainer />\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Options(props) {\r\n  useEffect(() => {\r\n    const defaultLanguage = defaultLocale;\r\n    dynamicActivate(defaultLanguage);\r\n  }, []);\r\n\r\n  return (\r\n    <SWRConfig value={{ refreshInterval: 5000 }}>\r\n      <Web3ReactProvider getLibrary={getLibrary}>\r\n        <FullApp {...props} />\r\n      </Web3ReactProvider>\r\n    </SWRConfig>\r\n  );\r\n}\r\n\r\nexport default Options;\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { Routes, Route, Navigate, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { DDL_POOL, USDC } from './utils/contracts';\r\nimport { UserStatsContext } from '../context/context';\r\nimport { ethers } from 'ethers';\r\nimport GMXInterface from '../views/gmx-test/App/App';\r\nimport { connectWallet } from './utils/wallet';\r\nimport { HOMEPAGE_HREF } from './utils/constants';\r\nimport Options from './../views/options/App/App';\r\nimport { useLocalStorageByChainId } from './../views/gmx-test/lib/legacy';\r\nimport { ARBITRUM } from './../views/options/lib/legacyOptions';\r\n\r\n\r\nconst AppRouter = ({ walletAddress, setWalletAddress }) => {\r\n\tconst [path, setPath] = useLocalStorageByChainId(ARBITRUM, \"path\", HOMEPAGE_HREF);\r\n\r\n\tconst nav = useNavigate();\r\n\tconst loc = useLocation();\r\n\tuseEffect(() => {\r\n\t\tif (!loc.pathname) {\r\n\t\t\tnav(path);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetPath(loc.pathname);\r\n\t}, [loc.pathname]);\r\n\r\n\t\r\n\treturn (\r\n\t\t<Routes>\r\n\t\t\t{<Route path=\"/perpetuals\" element={\r\n\t\t\t\t<GMXInterface\r\n\t\t\t\t\tconnectWallet={() => {\r\n\t\t\t\t\t\tconnectWallet(setWalletAddress)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\twalletAddress={walletAddress} />\r\n\t\t\t} />}\r\n\t\t\t<Route path=\"/options\" element={\r\n\t\t\t\t<Options\r\n\t\t\t\t\tconnectWallet={() => {\r\n\t\t\t\t\t\tconnectWallet(setWalletAddress)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\twalletAddress={walletAddress} />\r\n\t\t\t} />\r\n\t\t\t<Route\r\n\t\t\t\tpath=\"*\"\r\n\t\t\t\telement={<Navigate to={path} replace />}\r\n\t\t\t/>\r\n\t\t</Routes>\r\n\t);\r\n};\r\n\r\nexport default AppRouter;","import React from 'react';\r\n\r\nconst Warning = (props) => {\r\n\treturn (\r\n\t\t<div className=\"warning\">\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Warning;","// Style\r\nimport './style/App.scss'\r\n\r\n// Main\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport AppRouter from './components/AppRouter';\r\nimport { HashRouter } from 'react-router-dom';\r\nimport { UserStatsContext } from './context/context';\r\nimport { GlobalStatsContext } from './context/context';\r\nimport Warning from './components/UI/warning/Warning';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport { cssTransition } from 'react-toastify';\r\nimport EventToastContainer from './views/gmx-test/components/EventToast/EventToastContainer';\r\nimport { i18n } from '@lingui/core';\r\nimport { I18nProvider } from '@lingui/react';\r\nimport { defaultLocale, dynamicActivate } from './views/gmx-test/lib/i18n';\r\nimport { LANGUAGE_LOCALSTORAGE_KEY } from './views/gmx-test/lib/legacy';\r\nimport SEO from './views/gmx-test/components/Common/SEO';\r\n\r\n\r\n\r\nfunction App() {\r\n\tconst [walletAddress, setWalletAddress] = useState('');\r\n\tconst [registerVisible, setRegisterVisible] = useState(false);\r\n\t\r\n\tconst [userStats, setUserStats] = useState({\r\n\t\tbalance: undefined,\r\n\t\tcurBalance: undefined,\r\n\t\tavail: undefined\r\n\t})\r\n\tconst [globalStats, setGlobalStats] = useState(\r\n\t\t{\r\n\t\t\ttotalSupplied: \"\",\r\n\t\t\ttotalBorrowed: \"\",\r\n\t\t\tutilRate: \"\",\r\n\t\t\tavailToBorrow: \"\",\r\n\t\t\tborrowAPY: \"\",\r\n\t\t}\r\n\t)\r\n\r\n\tconst Jelly = cssTransition({\r\n\t\tenter: \"jellyIn\",\r\n\t\texit: \"jellyOut\",\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n    const defaultLanguage = localStorage.getItem(LANGUAGE_LOCALSTORAGE_KEY) || defaultLocale;\r\n    dynamicActivate(defaultLanguage);\r\n  }, []);\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SEO>\r\n\t\t\t\t<GlobalStatsContext.Provider value={{\r\n\t\t\t\t\tglobalStats,\r\n\t\t\t\t\tsetGlobalStats\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<UserStatsContext.Provider value={{\r\n\t\t\t\t\t\tuserStats,\r\n\t\t\t\t\t\tsetUserStats\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<HashRouter>\r\n\t\t\t\t\t\t\t<I18nProvider i18n={i18n}>\r\n\t\t\t\t\t\t\t\t<ToastContainer\r\n\t\t\t\t\t\t\t\t\tlimit={1}\r\n\t\t\t\t\t\t\t\t\ttransition={Jelly}\r\n\t\t\t\t\t\t\t\t\tposition=\"bottom-right\"\r\n\t\t\t\t\t\t\t\t\t// autoClose={}\r\n\t\t\t\t\t\t\t\t\thideProgressBar={true}\r\n\t\t\t\t\t\t\t\t\tnewestOnTop={false}\r\n\t\t\t\t\t\t\t\t\tcloseOnClick={false}\r\n\t\t\t\t\t\t\t\t\tdraggable={false}\r\n\t\t\t\t\t\t\t\t\tpauseOnHover={false}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<EventToastContainer />\r\n\t\t\t\t\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t\t\t\t\t<Header walletAddress={walletAddress}\r\n\t\t\t\t\t\t\t\t\t\tsetWalletAddress={setWalletAddress}\r\n\t\t\t\t\t\t\t\t\t\tregisterVisible={registerVisible}\r\n\t\t\t\t\t\t\t\t\t\tsetRegisterVisible={setRegisterVisible}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<main className='_container'>\r\n\t\t\t\t\t\t\t\t\t\t<AppRouter\r\n\t\t\t\t\t\t\t\t\t\t\twalletAddress={walletAddress}\r\n\t\t\t\t\t\t\t\t\t\t\tsetWalletAddress={setWalletAddress}\r\n\t\t\t\t\t\t\t\t\t\t\tsetRegisterVisible={setRegisterVisible}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</main>\r\n\r\n\t\t\t\t\t\t\t\t\t<Footer />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</I18nProvider>\r\n\t\t\t\t\t\t</HashRouter>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</UserStatsContext.Provider>\r\n\t\t\t\t</GlobalStatsContext.Provider>\r\n\t\t\t\t<Warning>\r\n\t\t\t\t\tDeDeLend is in alpha. Use at your own risk\r\n\t\t\t\t</Warning>\r\n\t\t\t</SEO>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>\r\n);\r\n"],"sourceRoot":""}